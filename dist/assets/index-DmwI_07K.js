(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();function qA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ay={exports:{}},mc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx;function fD(){if(Vx)return mc;Vx=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var c in r)c!=="key"&&(a[c]=r[c])}else a=r;return r=a.ref,{$$typeof:n,type:i,key:l,ref:r!==void 0?r:null,props:a}}return mc.Fragment=e,mc.jsx=t,mc.jsxs=t,mc}var Lx;function pD(){return Lx||(Lx=1,ay.exports=fD()),ay.exports}var y=pD(),ly={exports:{}},Ve={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ox;function mD(){if(Ox)return Ve;Ox=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),T=Symbol.for("react.activity"),x=Symbol.iterator;function A(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,L={};function $(q,se,pe){this.props=q,this.context=se,this.refs=L,this.updater=pe||V}$.prototype.isReactComponent={},$.prototype.setState=function(q,se){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,se,"setState")},$.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function z(){}z.prototype=$.prototype;function H(q,se,pe){this.props=q,this.context=se,this.refs=L,this.updater=pe||V}var Z=H.prototype=new z;Z.constructor=H,k(Z,$.prototype),Z.isPureReactComponent=!0;var ie=Array.isArray;function J(){}var R={H:null,A:null,T:null,S:null},M=Object.prototype.hasOwnProperty;function P(q,se,pe){var ve=pe.ref;return{$$typeof:n,type:q,key:se,ref:ve!==void 0?ve:null,props:pe}}function O(q,se){return P(q.type,se,q.props)}function C(q){return typeof q=="object"&&q!==null&&q.$$typeof===n}function F(q){var se={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(pe){return se[pe]})}var N=/\/+/g;function Ee(q,se){return typeof q=="object"&&q!==null&&q.key!=null?F(""+q.key):se.toString(36)}function de(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(J,J):(q.status="pending",q.then(function(se){q.status==="pending"&&(q.status="fulfilled",q.value=se)},function(se){q.status==="pending"&&(q.status="rejected",q.reason=se)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function G(q,se,pe,ve,Me){var j=typeof q;(j==="undefined"||j==="boolean")&&(q=null);var Le=!1;if(q===null)Le=!0;else switch(j){case"bigint":case"string":case"number":Le=!0;break;case"object":switch(q.$$typeof){case n:case e:Le=!0;break;case _:return Le=q._init,G(Le(q._payload),se,pe,ve,Me)}}if(Le)return Me=Me(q),Le=ve===""?"."+Ee(q,0):ve,ie(Me)?(pe="",Le!=null&&(pe=Le.replace(N,"$&/")+"/"),G(Me,se,pe,"",function(lo){return lo})):Me!=null&&(C(Me)&&(Me=O(Me,pe+(Me.key==null||q&&q.key===Me.key?"":(""+Me.key).replace(N,"$&/")+"/")+Le)),se.push(Me)),1;Le=0;var It=ve===""?".":ve+":";if(ie(q))for(var vt=0;vt<q.length;vt++)ve=q[vt],j=It+Ee(ve,vt),Le+=G(ve,se,pe,j,Me);else if(vt=A(q),typeof vt=="function")for(q=vt.call(q),vt=0;!(ve=q.next()).done;)ve=ve.value,j=It+Ee(ve,vt++),Le+=G(ve,se,pe,j,Me);else if(j==="object"){if(typeof q.then=="function")return G(de(q),se,pe,ve,Me);throw se=String(q),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Le}function re(q,se,pe){if(q==null)return q;var ve=[],Me=0;return G(q,ve,"","",function(j){return se.call(pe,j,Me++)}),ve}function he(q){if(q._status===-1){var se=q._result;se=se(),se.then(function(pe){(q._status===0||q._status===-1)&&(q._status=1,q._result=pe)},function(pe){(q._status===0||q._status===-1)&&(q._status=2,q._result=pe)}),q._status===-1&&(q._status=0,q._result=se)}if(q._status===1)return q._result.default;throw q._result}var Ie=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},Oe={map:re,forEach:function(q,se,pe){re(q,function(){se.apply(this,arguments)},pe)},count:function(q){var se=0;return re(q,function(){se++}),se},toArray:function(q){return re(q,function(se){return se})||[]},only:function(q){if(!C(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Ve.Activity=T,Ve.Children=Oe,Ve.Component=$,Ve.Fragment=t,Ve.Profiler=r,Ve.PureComponent=H,Ve.StrictMode=i,Ve.Suspense=h,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=R,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(q){return R.H.useMemoCache(q)}},Ve.cache=function(q){return function(){return q.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(q,se,pe){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var ve=k({},q.props),Me=q.key;if(se!=null)for(j in se.key!==void 0&&(Me=""+se.key),se)!M.call(se,j)||j==="key"||j==="__self"||j==="__source"||j==="ref"&&se.ref===void 0||(ve[j]=se[j]);var j=arguments.length-2;if(j===1)ve.children=pe;else if(1<j){for(var Le=Array(j),It=0;It<j;It++)Le[It]=arguments[It+2];ve.children=Le}return P(q.type,Me,ve)},Ve.createContext=function(q){return q={$$typeof:l,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Ve.createElement=function(q,se,pe){var ve,Me={},j=null;if(se!=null)for(ve in se.key!==void 0&&(j=""+se.key),se)M.call(se,ve)&&ve!=="key"&&ve!=="__self"&&ve!=="__source"&&(Me[ve]=se[ve]);var Le=arguments.length-2;if(Le===1)Me.children=pe;else if(1<Le){for(var It=Array(Le),vt=0;vt<Le;vt++)It[vt]=arguments[vt+2];Me.children=It}if(q&&q.defaultProps)for(ve in Le=q.defaultProps,Le)Me[ve]===void 0&&(Me[ve]=Le[ve]);return P(q,j,Me)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(q){return{$$typeof:c,render:q}},Ve.isValidElement=C,Ve.lazy=function(q){return{$$typeof:_,_payload:{_status:-1,_result:q},_init:he}},Ve.memo=function(q,se){return{$$typeof:f,type:q,compare:se===void 0?null:se}},Ve.startTransition=function(q){var se=R.T,pe={};R.T=pe;try{var ve=q(),Me=R.S;Me!==null&&Me(pe,ve),typeof ve=="object"&&ve!==null&&typeof ve.then=="function"&&ve.then(J,Ie)}catch(j){Ie(j)}finally{se!==null&&pe.types!==null&&(se.types=pe.types),R.T=se}},Ve.unstable_useCacheRefresh=function(){return R.H.useCacheRefresh()},Ve.use=function(q){return R.H.use(q)},Ve.useActionState=function(q,se,pe){return R.H.useActionState(q,se,pe)},Ve.useCallback=function(q,se){return R.H.useCallback(q,se)},Ve.useContext=function(q){return R.H.useContext(q)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(q,se){return R.H.useDeferredValue(q,se)},Ve.useEffect=function(q,se){return R.H.useEffect(q,se)},Ve.useEffectEvent=function(q){return R.H.useEffectEvent(q)},Ve.useId=function(){return R.H.useId()},Ve.useImperativeHandle=function(q,se,pe){return R.H.useImperativeHandle(q,se,pe)},Ve.useInsertionEffect=function(q,se){return R.H.useInsertionEffect(q,se)},Ve.useLayoutEffect=function(q,se){return R.H.useLayoutEffect(q,se)},Ve.useMemo=function(q,se){return R.H.useMemo(q,se)},Ve.useOptimistic=function(q,se){return R.H.useOptimistic(q,se)},Ve.useReducer=function(q,se,pe){return R.H.useReducer(q,se,pe)},Ve.useRef=function(q){return R.H.useRef(q)},Ve.useState=function(q){return R.H.useState(q)},Ve.useSyncExternalStore=function(q,se,pe){return R.H.useSyncExternalStore(q,se,pe)},Ve.useTransition=function(){return R.H.useTransition()},Ve.version="19.2.4",Ve}var Ux;function Uv(){return Ux||(Ux=1,ly.exports=mD()),ly.exports}var le=Uv();const Vc=qA(le);var uy={exports:{}},gc={},cy={exports:{}},dy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gx;function gD(){return Gx||(Gx=1,(function(n){function e(G,re){var he=G.length;G.push(re);e:for(;0<he;){var Ie=he-1>>>1,Oe=G[Ie];if(0<r(Oe,re))G[Ie]=re,G[he]=Oe,he=Ie;else break e}}function t(G){return G.length===0?null:G[0]}function i(G){if(G.length===0)return null;var re=G[0],he=G.pop();if(he!==re){G[0]=he;e:for(var Ie=0,Oe=G.length,q=Oe>>>1;Ie<q;){var se=2*(Ie+1)-1,pe=G[se],ve=se+1,Me=G[ve];if(0>r(pe,he))ve<Oe&&0>r(Me,pe)?(G[Ie]=Me,G[ve]=he,Ie=ve):(G[Ie]=pe,G[se]=he,Ie=se);else if(ve<Oe&&0>r(Me,he))G[Ie]=Me,G[ve]=he,Ie=ve;else break e}}return re}function r(G,re){var he=G.sortIndex-re.sortIndex;return he!==0?he:G.id-re.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var h=[],f=[],_=1,T=null,x=3,A=!1,V=!1,k=!1,L=!1,$=typeof setTimeout=="function"?setTimeout:null,z=typeof clearTimeout=="function"?clearTimeout:null,H=typeof setImmediate<"u"?setImmediate:null;function Z(G){for(var re=t(f);re!==null;){if(re.callback===null)i(f);else if(re.startTime<=G)i(f),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(f)}}function ie(G){if(k=!1,Z(G),!V)if(t(h)!==null)V=!0,J||(J=!0,F());else{var re=t(f);re!==null&&de(ie,re.startTime-G)}}var J=!1,R=-1,M=5,P=-1;function O(){return L?!0:!(n.unstable_now()-P<M)}function C(){if(L=!1,J){var G=n.unstable_now();P=G;var re=!0;try{e:{V=!1,k&&(k=!1,z(R),R=-1),A=!0;var he=x;try{t:{for(Z(G),T=t(h);T!==null&&!(T.expirationTime>G&&O());){var Ie=T.callback;if(typeof Ie=="function"){T.callback=null,x=T.priorityLevel;var Oe=Ie(T.expirationTime<=G);if(G=n.unstable_now(),typeof Oe=="function"){T.callback=Oe,Z(G),re=!0;break t}T===t(h)&&i(h),Z(G)}else i(h);T=t(h)}if(T!==null)re=!0;else{var q=t(f);q!==null&&de(ie,q.startTime-G),re=!1}}break e}finally{T=null,x=he,A=!1}re=void 0}}finally{re?F():J=!1}}}var F;if(typeof H=="function")F=function(){H(C)};else if(typeof MessageChannel<"u"){var N=new MessageChannel,Ee=N.port2;N.port1.onmessage=C,F=function(){Ee.postMessage(null)}}else F=function(){$(C,0)};function de(G,re){R=$(function(){G(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(G){G.callback=null},n.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<G?Math.floor(1e3/G):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_next=function(G){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var he=x;x=re;try{return G()}finally{x=he}},n.unstable_requestPaint=function(){L=!0},n.unstable_runWithPriority=function(G,re){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var he=x;x=G;try{return re()}finally{x=he}},n.unstable_scheduleCallback=function(G,re,he){var Ie=n.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?Ie+he:Ie):he=Ie,G){case 1:var Oe=-1;break;case 2:Oe=250;break;case 5:Oe=1073741823;break;case 4:Oe=1e4;break;default:Oe=5e3}return Oe=he+Oe,G={id:_++,callback:re,priorityLevel:G,startTime:he,expirationTime:Oe,sortIndex:-1},he>Ie?(G.sortIndex=he,e(f,G),t(h)===null&&G===t(f)&&(k?(z(R),R=-1):k=!0,de(ie,he-Ie))):(G.sortIndex=Oe,e(h,G),V||A||(V=!0,J||(J=!0,F()))),G},n.unstable_shouldYield=O,n.unstable_wrapCallback=function(G){var re=x;return function(){var he=x;x=re;try{return G.apply(this,arguments)}finally{x=he}}}})(dy)),dy}var Fx;function yD(){return Fx||(Fx=1,cy.exports=gD()),cy.exports}var hy={exports:{}},dn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zx;function vD(){if(zx)return dn;zx=1;var n=Uv();function e(h){var f="https://react.dev/errors/"+h;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+h+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(h,f,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:T==null?null:""+T,children:h,containerInfo:f,implementation:_}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(h,f){if(h==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return dn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dn.createPortal=function(h,f){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(e(299));return a(h,f,null,_)},dn.flushSync=function(h){var f=l.T,_=i.p;try{if(l.T=null,i.p=2,h)return h()}finally{l.T=f,i.p=_,i.d.f()}},dn.preconnect=function(h,f){typeof h=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(h,f))},dn.prefetchDNS=function(h){typeof h=="string"&&i.d.D(h)},dn.preinit=function(h,f){if(typeof h=="string"&&f&&typeof f.as=="string"){var _=f.as,T=c(_,f.crossOrigin),x=typeof f.integrity=="string"?f.integrity:void 0,A=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;_==="style"?i.d.S(h,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:T,integrity:x,fetchPriority:A}):_==="script"&&i.d.X(h,{crossOrigin:T,integrity:x,fetchPriority:A,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},dn.preinitModule=function(h,f){if(typeof h=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var _=c(f.as,f.crossOrigin);i.d.M(h,{crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(h)},dn.preload=function(h,f){if(typeof h=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var _=f.as,T=c(_,f.crossOrigin);i.d.L(h,_,{crossOrigin:T,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},dn.preloadModule=function(h,f){if(typeof h=="string")if(f){var _=c(f.as,f.crossOrigin);i.d.m(h,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:_,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(h)},dn.requestFormReset=function(h){i.d.r(h)},dn.unstable_batchedUpdates=function(h,f){return h(f)},dn.useFormState=function(h,f,_){return l.H.useFormState(h,f,_)},dn.useFormStatus=function(){return l.H.useHostTransitionStatus()},dn.version="19.2.4",dn}var qx;function _D(){if(qx)return hy.exports;qx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),hy.exports=vD(),hy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bx;function ED(){if(Bx)return gc;Bx=1;var n=yD(),e=Uv(),t=_D();function i(s){var o="https://react.dev/errors/"+s;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+s+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var o=s,u=s;if(s.alternate)for(;o.return;)o=o.return;else{s=o;do o=s,(o.flags&4098)!==0&&(u=o.return),s=o.return;while(s)}return o.tag===3?u:null}function l(s){if(s.tag===13){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function c(s){if(s.tag===31){var o=s.memoizedState;if(o===null&&(s=s.alternate,s!==null&&(o=s.memoizedState)),o!==null)return o.dehydrated}return null}function h(s){if(a(s)!==s)throw Error(i(188))}function f(s){var o=s.alternate;if(!o){if(o=a(s),o===null)throw Error(i(188));return o!==s?null:s}for(var u=s,d=o;;){var v=u.return;if(v===null)break;var E=v.alternate;if(E===null){if(d=v.return,d!==null){u=d;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===u)return h(v),s;if(E===d)return h(v),o;E=E.sibling}throw Error(i(188))}if(u.return!==d.return)u=v,d=E;else{for(var S=!1,I=v.child;I;){if(I===u){S=!0,u=v,d=E;break}if(I===d){S=!0,d=v,u=E;break}I=I.sibling}if(!S){for(I=E.child;I;){if(I===u){S=!0,u=E,d=v;break}if(I===d){S=!0,d=E,u=v;break}I=I.sibling}if(!S)throw Error(i(189))}}if(u.alternate!==d)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?s:o}function _(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s;for(s=s.child;s!==null;){if(o=_(s),o!==null)return o;s=s.sibling}return null}var T=Object.assign,x=Symbol.for("react.element"),A=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),L=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),z=Symbol.for("react.consumer"),H=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),O=Symbol.for("react.memo_cache_sentinel"),C=Symbol.iterator;function F(s){return s===null||typeof s!="object"?null:(s=C&&s[C]||s["@@iterator"],typeof s=="function"?s:null)}var N=Symbol.for("react.client.reference");function Ee(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===N?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case k:return"Fragment";case $:return"Profiler";case L:return"StrictMode";case ie:return"Suspense";case J:return"SuspenseList";case P:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case V:return"Portal";case H:return s.displayName||"Context";case z:return(s._context.displayName||"Context")+".Consumer";case Z:var o=s.render;return s=s.displayName,s||(s=o.displayName||o.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case R:return o=s.displayName||null,o!==null?o:Ee(s.type)||"Memo";case M:o=s._payload,s=s._init;try{return Ee(s(o))}catch{}}return null}var de=Array.isArray,G=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,re=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},Ie=[],Oe=-1;function q(s){return{current:s}}function se(s){0>Oe||(s.current=Ie[Oe],Ie[Oe]=null,Oe--)}function pe(s,o){Oe++,Ie[Oe]=s.current,s.current=o}var ve=q(null),Me=q(null),j=q(null),Le=q(null);function It(s,o){switch(pe(j,o),pe(Me,s),pe(ve,null),o.nodeType){case 9:case 11:s=(s=o.documentElement)&&(s=s.namespaceURI)?rx(s):0;break;default:if(s=o.tagName,o=o.namespaceURI)o=rx(o),s=sx(o,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(ve),pe(ve,s)}function vt(){se(ve),se(Me),se(j)}function lo(s){s.memoizedState!==null&&pe(Le,s);var o=ve.current,u=sx(o,s.type);o!==u&&(pe(Me,s),pe(ve,u))}function _a(s){Me.current===s&&(se(ve),se(Me)),Le.current===s&&(se(Le),dc._currentValue=he)}var Ea,Ta;function Ui(s){if(Ea===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Ea=o&&o[1]||"",Ta=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ea+s+Ta}var du=!1;function uo(s,o){if(!s||du)return"";du=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var d={DetermineComponentFrameRoot:function(){try{if(o){var ce=function(){throw Error()};if(Object.defineProperty(ce.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ce,[])}catch(ne){var ee=ne}Reflect.construct(s,[],ce)}else{try{ce.call()}catch(ne){ee=ne}s.call(ce.prototype)}}else{try{throw Error()}catch(ne){ee=ne}(ce=s())&&typeof ce.catch=="function"&&ce.catch(function(){})}}catch(ne){if(ne&&ee&&typeof ne.stack=="string")return[ne.stack,ee.stack]}return[null,null]}};d.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(d.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(d.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=d.DetermineComponentFrameRoot(),S=E[0],I=E[1];if(S&&I){var U=S.split(`
`),X=I.split(`
`);for(v=d=0;d<U.length&&!U[d].includes("DetermineComponentFrameRoot");)d++;for(;v<X.length&&!X[v].includes("DetermineComponentFrameRoot");)v++;if(d===U.length||v===X.length)for(d=U.length-1,v=X.length-1;1<=d&&0<=v&&U[d]!==X[v];)v--;for(;1<=d&&0<=v;d--,v--)if(U[d]!==X[v]){if(d!==1||v!==1)do if(d--,v--,0>v||U[d]!==X[v]){var oe=`
`+U[d].replace(" at new "," at ");return s.displayName&&oe.includes("<anonymous>")&&(oe=oe.replace("<anonymous>",s.displayName)),oe}while(1<=d&&0<=v);break}}}finally{du=!1,Error.prepareStackTrace=u}return(u=s?s.displayName||s.name:"")?Ui(u):""}function hu(s,o){switch(s.tag){case 26:case 27:case 5:return Ui(s.type);case 16:return Ui("Lazy");case 13:return s.child!==o&&o!==null?Ui("Suspense Fallback"):Ui("Suspense");case 19:return Ui("SuspenseList");case 0:case 15:return uo(s.type,!1);case 11:return uo(s.type.render,!1);case 1:return uo(s.type,!0);case 31:return Ui("Activity");default:return""}}function fu(s){try{var o="",u=null;do o+=hu(s,u),u=s,s=s.return;while(s);return o}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}var Vt=Object.prototype.hasOwnProperty,Kt=n.unstable_scheduleCallback,Zr=n.unstable_cancelCallback,um=n.unstable_shouldYield,Ad=n.unstable_requestPaint,vn=n.unstable_now,co=n.unstable_getCurrentPriorityLevel,pu=n.unstable_ImmediatePriority,mu=n.unstable_UserBlockingPriority,es=n.unstable_NormalPriority,cm=n.unstable_LowPriority,Id=n.unstable_IdlePriority,Cd=n.log,Rd=n.unstable_setDisableYieldValue,yi=null,rn=null;function Qn(s){if(typeof Cd=="function"&&Rd(s),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(yi,s)}catch{}}var Ct=Math.clz32?Math.clz32:Dd,Nd=Math.log,xa=Math.LN2;function Dd(s){return s>>>=0,s===0?32:31-(Nd(s)/xa|0)|0}var Gi=256,ho=262144,Lt=4194304;function Fi(s){var o=s&42;if(o!==0)return o;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return s&261888;case 262144:case 524288:case 1048576:case 2097152:return s&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function zi(s,o,u){var d=s.pendingLanes;if(d===0)return 0;var v=0,E=s.suspendedLanes,S=s.pingedLanes;s=s.warmLanes;var I=d&134217727;return I!==0?(d=I&~E,d!==0?v=Fi(d):(S&=I,S!==0?v=Fi(S):u||(u=I&~s,u!==0&&(v=Fi(u))))):(I=d&~E,I!==0?v=Fi(I):S!==0?v=Fi(S):u||(u=d&~s,u!==0&&(v=Fi(u)))),v===0?0:o!==0&&o!==v&&(o&E)===0&&(E=v&-v,u=o&-o,E>=u||E===32&&(u&4194048)!==0)?o:v}function vi(s,o){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&o)===0}function dm(s,o){switch(s){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Md(){var s=Lt;return Lt<<=1,(Lt&62914560)===0&&(Lt=4194304),s}function qi(s){for(var o=[],u=0;31>u;u++)o.push(s);return o}function fo(s,o){s.pendingLanes|=o,o!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function hm(s,o,u,d,v,E){var S=s.pendingLanes;s.pendingLanes=u,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=u,s.entangledLanes&=u,s.errorRecoveryDisabledLanes&=u,s.shellSuspendCounter=0;var I=s.entanglements,U=s.expirationTimes,X=s.hiddenUpdates;for(u=S&~u;0<u;){var oe=31-Ct(u),ce=1<<oe;I[oe]=0,U[oe]=-1;var ee=X[oe];if(ee!==null)for(X[oe]=null,oe=0;oe<ee.length;oe++){var ne=ee[oe];ne!==null&&(ne.lane&=-536870913)}u&=~ce}d!==0&&po(s,d,0),E!==0&&v===0&&s.tag!==0&&(s.suspendedLanes|=E&~(S&~o))}function po(s,o,u){s.pendingLanes|=o,s.suspendedLanes&=~o;var d=31-Ct(o);s.entangledLanes|=o,s.entanglements[d]=s.entanglements[d]|1073741824|u&261930}function gu(s,o){var u=s.entangledLanes|=o;for(s=s.entanglements;u;){var d=31-Ct(u),v=1<<d;v&o|s[d]&o&&(s[d]|=o),u&=~v}}function yu(s,o){var u=o&-o;return u=(u&42)!==0?1:mo(u),(u&(s.suspendedLanes|o))!==0?0:u}function mo(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function vr(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function Pd(){var s=re.p;return s!==0?s:(s=window.event,s===void 0?32:Cx(s.type))}function _i(s,o){var u=re.p;try{return re.p=s,o()}finally{re.p=u}}var Ei=Math.random().toString(36).slice(2),Ot="__reactFiber$"+Ei,Wt="__reactProps$"+Ei,Bi="__reactContainer$"+Ei,ba="__reactEvents$"+Ei,fm="__reactListeners$"+Ei,kd="__reactHandles$"+Ei,Vd="__reactResources$"+Ei,Hi="__reactMarker$"+Ei;function Sa(s){delete s[Ot],delete s[Wt],delete s[ba],delete s[fm],delete s[kd]}function ji(s){var o=s[Ot];if(o)return o;for(var u=s.parentNode;u;){if(o=u[Bi]||u[Ot]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(s=hx(s);s!==null;){if(u=s[Ot])return u;s=hx(s)}return o}s=u,u=s.parentNode}return null}function Wn(s){if(s=s[Ot]||s[Bi]){var o=s.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return s}return null}function Ln(s){var o=s.tag;if(o===5||o===26||o===27||o===6)return s.stateNode;throw Error(i(33))}function $i(s){var o=s[Vd];return o||(o=s[Vd]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ut(s){s[Hi]=!0}var vu=new Set,_u={};function Ki(s,o){Ji(s,o),Ji(s+"Capture",o)}function Ji(s,o){for(_u[s]=o,s=0;s<o.length;s++)vu.add(o[s])}var Eu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Tu={},xu={};function Ld(s){return Vt.call(xu,s)?!0:Vt.call(Tu,s)?!1:Eu.test(s)?xu[s]=!0:(Tu[s]=!0,!1)}function wa(s,o,u){if(Ld(o))if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":s.removeAttribute(o);return;case"boolean":var d=o.toLowerCase().slice(0,5);if(d!=="data-"&&d!=="aria-"){s.removeAttribute(o);return}}s.setAttribute(o,""+u)}}function On(s,o,u){if(u===null)s.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(o);return}s.setAttribute(o,""+u)}}function Gt(s,o,u,d){if(d===null)s.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(u);return}s.setAttributeNS(o,u,""+d)}}function Xt(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function ts(s){var o=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function bu(s,o,u){var d=Object.getOwnPropertyDescriptor(s.constructor.prototype,o);if(!s.hasOwnProperty(o)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,E=d.set;return Object.defineProperty(s,o,{configurable:!0,get:function(){return v.call(this)},set:function(S){u=""+S,E.call(this,S)}}),Object.defineProperty(s,o,{enumerable:d.enumerable}),{getValue:function(){return u},setValue:function(S){u=""+S},stopTracking:function(){s._valueTracker=null,delete s[o]}}}}function it(s){if(!s._valueTracker){var o=ts(s)?"checked":"value";s._valueTracker=bu(s,o,""+s[o])}}function go(s){if(!s)return!1;var o=s._valueTracker;if(!o)return!0;var u=o.getValue(),d="";return s&&(d=ts(s)?s.checked?"true":"false":s.value),s=d,s!==u?(o.setValue(s),!0):!1}function Yi(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var yo=/[\n"\\]/g;function An(s){return s.replace(yo,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function Aa(s,o,u,d,v,E,S,I){s.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?s.type=S:s.removeAttribute("type"),o!=null?S==="number"?(o===0&&s.value===""||s.value!=o)&&(s.value=""+Xt(o)):s.value!==""+Xt(o)&&(s.value=""+Xt(o)):S!=="submit"&&S!=="reset"||s.removeAttribute("value"),o!=null?Su(s,S,Xt(o)):u!=null?Su(s,S,Xt(u)):d!=null&&s.removeAttribute("value"),v==null&&E!=null&&(s.defaultChecked=!!E),v!=null&&(s.checked=v&&typeof v!="function"&&typeof v!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?s.name=""+Xt(I):s.removeAttribute("name")}function Od(s,o,u,d,v,E,S,I){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(s.type=E),o!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){it(s);return}u=u!=null?""+Xt(u):"",o=o!=null?""+Xt(o):u,I||o===s.value||(s.value=o),s.defaultValue=o}d=d??v,d=typeof d!="function"&&typeof d!="symbol"&&!!d,s.checked=I?s.checked:!!d,s.defaultChecked=!!d,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(s.name=S),it(s)}function Su(s,o,u){o==="number"&&Yi(s.ownerDocument)===s||s.defaultValue===""+u||(s.defaultValue=""+u)}function ns(s,o,u,d){if(s=s.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<s.length;u++)v=o.hasOwnProperty("$"+s[u].value),s[u].selected!==v&&(s[u].selected=v),v&&d&&(s[u].defaultSelected=!0)}else{for(u=""+Xt(u),o=null,v=0;v<s.length;v++){if(s[v].value===u){s[v].selected=!0,d&&(s[v].defaultSelected=!0);return}o!==null||s[v].disabled||(o=s[v])}o!==null&&(o.selected=!0)}}function Ud(s,o,u){if(o!=null&&(o=""+Xt(o),o!==s.value&&(s.value=o),u==null)){s.defaultValue!==o&&(s.defaultValue=o);return}s.defaultValue=u!=null?""+Xt(u):""}function is(s,o,u,d){if(o==null){if(d!=null){if(u!=null)throw Error(i(92));if(de(d)){if(1<d.length)throw Error(i(93));d=d[0]}u=d}u==null&&(u=""),o=u}u=Xt(o),s.defaultValue=u,d=s.textContent,d===u&&d!==""&&d!==null&&(s.value=d),it(s)}function In(s,o){if(o){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=o;return}}s.textContent=o}var Gd=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wu(s,o,u){var d=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?d?s.setProperty(o,""):o==="float"?s.cssFloat="":s[o]="":d?s.setProperty(o,u):typeof u!="number"||u===0||Gd.has(o)?o==="float"?s.cssFloat=u:s[o]=(""+u).trim():s[o]=u+"px"}function Au(s,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(s=s.style,u!=null){for(var d in u)!u.hasOwnProperty(d)||o!=null&&o.hasOwnProperty(d)||(d.indexOf("--")===0?s.setProperty(d,""):d==="float"?s.cssFloat="":s[d]="");for(var v in o)d=o[v],o.hasOwnProperty(v)&&u[v]!==d&&wu(s,v,d)}else for(var E in o)o.hasOwnProperty(E)&&wu(s,E,o[E])}function Ia(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),rs=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ca(s){return rs.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}function Ti(){}var Iu=null;function Xn(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var ss=null,Qi=null;function vo(s){var o=Wn(s);if(o&&(s=o.stateNode)){var u=s[Wt]||null;e:switch(s=o.stateNode,o.type){case"input":if(Aa(s,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+An(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var d=u[o];if(d!==s&&d.form===s.form){var v=d[Wt]||null;if(!v)throw Error(i(90));Aa(d,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)d=u[o],d.form===s.form&&go(d)}break e;case"textarea":Ud(s,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&ns(s,!!u.multiple,o,!1)}}}var Ra=!1;function os(s,o,u){if(Ra)return s(o,u);Ra=!0;try{var d=s(o);return d}finally{if(Ra=!1,(ss!==null||Qi!==null)&&(Ph(),ss&&(o=ss,s=Qi,Qi=ss=null,vo(o),s)))for(o=0;o<s.length;o++)vo(s[o])}}function xi(s,o){var u=s.stateNode;if(u===null)return null;var d=u[Wt]||null;if(d===null)return null;u=d[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(s=s.type,d=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!d;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_o=!1;if(Zn)try{var lt={};Object.defineProperty(lt,"passive",{get:function(){_o=!0}}),window.addEventListener("test",lt,lt),window.removeEventListener("test",lt,lt)}catch{_o=!1}var Wi=null,Cu=null,Eo=null;function Ru(){if(Eo)return Eo;var s,o=Cu,u=o.length,d,v="value"in Wi?Wi.value:Wi.textContent,E=v.length;for(s=0;s<u&&o[s]===v[s];s++);var S=u-s;for(d=1;d<=S&&o[u-d]===v[E-d];d++);return Eo=v.slice(s,1<d?1-d:void 0)}function To(s){var o=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&o===13&&(s=13)):s=o,s===10&&(s=13),32<=s||s===13?s:0}function _r(){return!0}function bi(){return!1}function sn(s){function o(u,d,v,E,S){this._reactName=u,this._targetInst=v,this.type=d,this.nativeEvent=E,this.target=S,this.currentTarget=null;for(var I in s)s.hasOwnProperty(I)&&(u=s[I],this[I]=u?u(E):E[I]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?_r:bi,this.isPropagationStopped=bi,this}return T(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=_r)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=_r)},persist:function(){},isPersistent:_r}),o}var Er={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xi=sn(Er),as=T({},Er,{view:0,detail:0}),Nu=sn(as),ls,Na,Zi,Da=T({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:us,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Zi&&(Zi&&s.type==="mousemove"?(ls=s.screenX-Zi.screenX,Na=s.screenY-Zi.screenY):Na=ls=0,Zi=s),ls)},movementY:function(s){return"movementY"in s?s.movementY:Na}}),Du=sn(Da),xo=T({},Da,{dataTransfer:0}),zd=sn(xo),qd=T({},as,{relatedTarget:0}),bo=sn(qd),Mu=T({},Er,{animationName:0,elapsedTime:0,pseudoElement:0}),Bd=sn(Mu),Ma=T({},Er,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),Hd=sn(Ma),jd=T({},Er,{data:0}),er=sn(jd),$d={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Kd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Jd={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yd(s){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(s):(s=Jd[s])?!!o[s]:!1}function us(){return Yd}var _n=T({},as,{key:function(s){if(s.key){var o=$d[s.key]||s.key;if(o!=="Unidentified")return o}return s.type==="keypress"?(s=To(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Kd[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:us,charCode:function(s){return s.type==="keypress"?To(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?To(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Qd=sn(_n),Wd=T({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tr=sn(Wd),g=T({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:us}),b=sn(g),w=T({},Er,{propertyName:0,elapsedTime:0,pseudoElement:0}),D=sn(w),Q=T({},Da,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),te=sn(Q),me=T({},Er,{newState:0,oldState:0}),Ue=sn(me),Rt=[9,13,27,32],Ze=Zn&&"CompositionEvent"in window,_t=null;Zn&&"documentMode"in document&&(_t=document.documentMode);var ei=Zn&&"TextEvent"in window&&!_t,tr=Zn&&(!Ze||_t&&8<_t&&11>=_t),Si=" ",wi=!1;function So(s,o){switch(s){case"keyup":return Rt.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pa(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var ka=!1;function ON(s,o){switch(s){case"compositionend":return Pa(o);case"keypress":return o.which!==32?null:(wi=!0,Si);case"textInput":return s=o.data,s===Si&&wi?null:s;default:return null}}function UN(s,o){if(ka)return s==="compositionend"||!Ze&&So(s,o)?(s=Ru(),Eo=Cu=Wi=null,ka=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return tr&&o.locale!=="ko"?null:o.data;default:return null}}var GN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function m_(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o==="input"?!!GN[s.type]:o==="textarea"}function g_(s,o,u,d){ss?Qi?Qi.push(d):Qi=[d]:ss=d,o=Fh(o,"onChange"),0<o.length&&(u=new Xi("onChange","change",null,u,d),s.push({event:u,listeners:o}))}var Pu=null,ku=null;function FN(s){XT(s,0)}function Xd(s){var o=Ln(s);if(go(o))return s}function y_(s,o){if(s==="change")return o}var v_=!1;if(Zn){var pm;if(Zn){var mm="oninput"in document;if(!mm){var __=document.createElement("div");__.setAttribute("oninput","return;"),mm=typeof __.oninput=="function"}pm=mm}else pm=!1;v_=pm&&(!document.documentMode||9<document.documentMode)}function E_(){Pu&&(Pu.detachEvent("onpropertychange",T_),ku=Pu=null)}function T_(s){if(s.propertyName==="value"&&Xd(ku)){var o=[];g_(o,ku,s,Xn(s)),os(FN,o)}}function zN(s,o,u){s==="focusin"?(E_(),Pu=o,ku=u,Pu.attachEvent("onpropertychange",T_)):s==="focusout"&&E_()}function qN(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return Xd(ku)}function BN(s,o){if(s==="click")return Xd(o)}function HN(s,o){if(s==="input"||s==="change")return Xd(o)}function jN(s,o){return s===o&&(s!==0||1/s===1/o)||s!==s&&o!==o}var Un=typeof Object.is=="function"?Object.is:jN;function Vu(s,o){if(Un(s,o))return!0;if(typeof s!="object"||s===null||typeof o!="object"||o===null)return!1;var u=Object.keys(s),d=Object.keys(o);if(u.length!==d.length)return!1;for(d=0;d<u.length;d++){var v=u[d];if(!Vt.call(o,v)||!Un(s[v],o[v]))return!1}return!0}function x_(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function b_(s,o){var u=x_(s);s=0;for(var d;u;){if(u.nodeType===3){if(d=s+u.textContent.length,s<=o&&d>=o)return{node:u,offset:o-s};s=d}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=x_(u)}}function S_(s,o){return s&&o?s===o?!0:s&&s.nodeType===3?!1:o&&o.nodeType===3?S_(s,o.parentNode):"contains"in s?s.contains(o):s.compareDocumentPosition?!!(s.compareDocumentPosition(o)&16):!1:!1}function w_(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var o=Yi(s.document);o instanceof s.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)s=o.contentWindow;else break;o=Yi(s.document)}return o}function gm(s){var o=s&&s.nodeName&&s.nodeName.toLowerCase();return o&&(o==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||o==="textarea"||s.contentEditable==="true")}var $N=Zn&&"documentMode"in document&&11>=document.documentMode,Va=null,ym=null,Lu=null,vm=!1;function A_(s,o,u){var d=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;vm||Va==null||Va!==Yi(d)||(d=Va,"selectionStart"in d&&gm(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Lu&&Vu(Lu,d)||(Lu=d,d=Fh(ym,"onSelect"),0<d.length&&(o=new Xi("onSelect","select",null,o,u),s.push({event:o,listeners:d}),o.target=Va)))}function wo(s,o){var u={};return u[s.toLowerCase()]=o.toLowerCase(),u["Webkit"+s]="webkit"+o,u["Moz"+s]="moz"+o,u}var La={animationend:wo("Animation","AnimationEnd"),animationiteration:wo("Animation","AnimationIteration"),animationstart:wo("Animation","AnimationStart"),transitionrun:wo("Transition","TransitionRun"),transitionstart:wo("Transition","TransitionStart"),transitioncancel:wo("Transition","TransitionCancel"),transitionend:wo("Transition","TransitionEnd")},_m={},I_={};Zn&&(I_=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function Ao(s){if(_m[s])return _m[s];if(!La[s])return s;var o=La[s],u;for(u in o)if(o.hasOwnProperty(u)&&u in I_)return _m[s]=o[u];return s}var C_=Ao("animationend"),R_=Ao("animationiteration"),N_=Ao("animationstart"),KN=Ao("transitionrun"),JN=Ao("transitionstart"),YN=Ao("transitioncancel"),D_=Ao("transitionend"),M_=new Map,Em="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Em.push("scrollEnd");function Ai(s,o){M_.set(s,o),Ki(o,[s])}var Zd=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)},ti=[],Oa=0,Tm=0;function eh(){for(var s=Oa,o=Tm=Oa=0;o<s;){var u=ti[o];ti[o++]=null;var d=ti[o];ti[o++]=null;var v=ti[o];ti[o++]=null;var E=ti[o];if(ti[o++]=null,d!==null&&v!==null){var S=d.pending;S===null?v.next=v:(v.next=S.next,S.next=v),d.pending=v}E!==0&&P_(u,v,E)}}function th(s,o,u,d){ti[Oa++]=s,ti[Oa++]=o,ti[Oa++]=u,ti[Oa++]=d,Tm|=d,s.lanes|=d,s=s.alternate,s!==null&&(s.lanes|=d)}function xm(s,o,u,d){return th(s,o,u,d),nh(s)}function Io(s,o){return th(s,null,null,o),nh(s)}function P_(s,o,u){s.lanes|=u;var d=s.alternate;d!==null&&(d.lanes|=u);for(var v=!1,E=s.return;E!==null;)E.childLanes|=u,d=E.alternate,d!==null&&(d.childLanes|=u),E.tag===22&&(s=E.stateNode,s===null||s._visibility&1||(v=!0)),s=E,E=E.return;return s.tag===3?(E=s.stateNode,v&&o!==null&&(v=31-Ct(u),s=E.hiddenUpdates,d=s[v],d===null?s[v]=[o]:d.push(o),o.lane=u|536870912),E):null}function nh(s){if(50<rc)throw rc=0,Dg=null,Error(i(185));for(var o=s.return;o!==null;)s=o,o=s.return;return s.tag===3?s.stateNode:null}var Ua={};function QN(s,o,u,d){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(s,o,u,d){return new QN(s,o,u,d)}function bm(s){return s=s.prototype,!(!s||!s.isReactComponent)}function xr(s,o){var u=s.alternate;return u===null?(u=Gn(s.tag,o,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=o,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&65011712,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,o=s.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u.refCleanup=s.refCleanup,u}function k_(s,o){s.flags&=65011714;var u=s.alternate;return u===null?(s.childLanes=0,s.lanes=o,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=u.childLanes,s.lanes=u.lanes,s.child=u.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=u.memoizedProps,s.memoizedState=u.memoizedState,s.updateQueue=u.updateQueue,s.type=u.type,o=u.dependencies,s.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s}function ih(s,o,u,d,v,E){var S=0;if(d=s,typeof s=="function")bm(s)&&(S=1);else if(typeof s=="string")S=tD(s,u,ve.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case P:return s=Gn(31,u,o,v),s.elementType=P,s.lanes=E,s;case k:return Co(u.children,v,E,o);case L:S=8,v|=24;break;case $:return s=Gn(12,u,o,v|2),s.elementType=$,s.lanes=E,s;case ie:return s=Gn(13,u,o,v),s.elementType=ie,s.lanes=E,s;case J:return s=Gn(19,u,o,v),s.elementType=J,s.lanes=E,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:S=10;break e;case z:S=9;break e;case Z:S=11;break e;case R:S=14;break e;case M:S=16,d=null;break e}S=29,u=Error(i(130,s===null?"null":typeof s,"")),d=null}return o=Gn(S,u,o,v),o.elementType=s,o.type=d,o.lanes=E,o}function Co(s,o,u,d){return s=Gn(7,s,d,o),s.lanes=u,s}function Sm(s,o,u){return s=Gn(6,s,null,o),s.lanes=u,s}function V_(s){var o=Gn(18,null,null,0);return o.stateNode=s,o}function wm(s,o,u){return o=Gn(4,s.children!==null?s.children:[],s.key,o),o.lanes=u,o.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},o}var L_=new WeakMap;function ni(s,o){if(typeof s=="object"&&s!==null){var u=L_.get(s);return u!==void 0?u:(o={value:s,source:o,stack:fu(o)},L_.set(s,o),o)}return{value:s,source:o,stack:fu(o)}}var Ga=[],Fa=0,rh=null,Ou=0,ii=[],ri=0,cs=null,nr=1,ir="";function br(s,o){Ga[Fa++]=Ou,Ga[Fa++]=rh,rh=s,Ou=o}function O_(s,o,u){ii[ri++]=nr,ii[ri++]=ir,ii[ri++]=cs,cs=s;var d=nr;s=ir;var v=32-Ct(d)-1;d&=~(1<<v),u+=1;var E=32-Ct(o)+v;if(30<E){var S=v-v%5;E=(d&(1<<S)-1).toString(32),d>>=S,v-=S,nr=1<<32-Ct(o)+v|u<<v|d,ir=E+s}else nr=1<<E|u<<v|d,ir=s}function Am(s){s.return!==null&&(br(s,1),O_(s,1,0))}function Im(s){for(;s===rh;)rh=Ga[--Fa],Ga[Fa]=null,Ou=Ga[--Fa],Ga[Fa]=null;for(;s===cs;)cs=ii[--ri],ii[ri]=null,ir=ii[--ri],ii[ri]=null,nr=ii[--ri],ii[ri]=null}function U_(s,o){ii[ri++]=nr,ii[ri++]=ir,ii[ri++]=cs,nr=o.id,ir=o.overflow,cs=s}var on=null,mt=null,Ke=!1,ds=null,si=!1,Cm=Error(i(519));function hs(s){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Uu(ni(o,s)),Cm}function G_(s){var o=s.stateNode,u=s.type,d=s.memoizedProps;switch(o[Ot]=s,o[Wt]=d,u){case"dialog":Be("cancel",o),Be("close",o);break;case"iframe":case"object":case"embed":Be("load",o);break;case"video":case"audio":for(u=0;u<oc.length;u++)Be(oc[u],o);break;case"source":Be("error",o);break;case"img":case"image":case"link":Be("error",o),Be("load",o);break;case"details":Be("toggle",o);break;case"input":Be("invalid",o),Od(o,d.value,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name,!0);break;case"select":Be("invalid",o);break;case"textarea":Be("invalid",o),is(o,d.value,d.defaultValue,d.children)}u=d.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||d.suppressHydrationWarning===!0||nx(o.textContent,u)?(d.popover!=null&&(Be("beforetoggle",o),Be("toggle",o)),d.onScroll!=null&&Be("scroll",o),d.onScrollEnd!=null&&Be("scrollend",o),d.onClick!=null&&(o.onclick=Ti),o=!0):o=!1,o||hs(s,!0)}function F_(s){for(on=s.return;on;)switch(on.tag){case 5:case 31:case 13:si=!1;return;case 27:case 3:si=!0;return;default:on=on.return}}function za(s){if(s!==on)return!1;if(!Ke)return F_(s),Ke=!0,!1;var o=s.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=s.type,u=!(u!=="form"&&u!=="button")||$g(s.type,s.memoizedProps)),u=!u),u&&mt&&hs(s),F_(s),o===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=dx(s)}else if(o===31){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));mt=dx(s)}else o===27?(o=mt,As(s.type)?(s=Wg,Wg=null,mt=s):mt=o):mt=on?ai(s.stateNode.nextSibling):null;return!0}function Ro(){mt=on=null,Ke=!1}function Rm(){var s=ds;return s!==null&&(Dn===null?Dn=s:Dn.push.apply(Dn,s),ds=null),s}function Uu(s){ds===null?ds=[s]:ds.push(s)}var Nm=q(null),No=null,Sr=null;function fs(s,o,u){pe(Nm,o._currentValue),o._currentValue=u}function wr(s){s._currentValue=Nm.current,se(Nm)}function Dm(s,o,u){for(;s!==null;){var d=s.alternate;if((s.childLanes&o)!==o?(s.childLanes|=o,d!==null&&(d.childLanes|=o)):d!==null&&(d.childLanes&o)!==o&&(d.childLanes|=o),s===u)break;s=s.return}}function Mm(s,o,u,d){var v=s.child;for(v!==null&&(v.return=s);v!==null;){var E=v.dependencies;if(E!==null){var S=v.child;E=E.firstContext;e:for(;E!==null;){var I=E;E=v;for(var U=0;U<o.length;U++)if(I.context===o[U]){E.lanes|=u,I=E.alternate,I!==null&&(I.lanes|=u),Dm(E.return,u,s),d||(S=null);break e}E=I.next}}else if(v.tag===18){if(S=v.return,S===null)throw Error(i(341));S.lanes|=u,E=S.alternate,E!==null&&(E.lanes|=u),Dm(S,u,s),S=null}else S=v.child;if(S!==null)S.return=v;else for(S=v;S!==null;){if(S===s){S=null;break}if(v=S.sibling,v!==null){v.return=S.return,S=v;break}S=S.return}v=S}}function qa(s,o,u,d){s=null;for(var v=o,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var S=v.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var I=v.type;Un(v.pendingProps.value,S.value)||(s!==null?s.push(I):s=[I])}}else if(v===Le.current){if(S=v.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(s!==null?s.push(dc):s=[dc])}v=v.return}s!==null&&Mm(o,s,u,d),o.flags|=262144}function sh(s){for(s=s.firstContext;s!==null;){if(!Un(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Do(s){No=s,Sr=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function an(s){return z_(No,s)}function oh(s,o){return No===null&&Do(s),z_(s,o)}function z_(s,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Sr===null){if(s===null)throw Error(i(308));Sr=o,s.dependencies={lanes:0,firstContext:o},s.flags|=524288}else Sr=Sr.next=o;return u}var WN=typeof AbortController<"u"?AbortController:function(){var s=[],o=this.signal={aborted:!1,addEventListener:function(u,d){s.push(d)}};this.abort=function(){o.aborted=!0,s.forEach(function(u){return u()})}},XN=n.unstable_scheduleCallback,ZN=n.unstable_NormalPriority,Ft={$$typeof:H,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Pm(){return{controller:new WN,data:new Map,refCount:0}}function Gu(s){s.refCount--,s.refCount===0&&XN(ZN,function(){s.controller.abort()})}var Fu=null,km=0,Ba=0,Ha=null;function e2(s,o){if(Fu===null){var u=Fu=[];km=0,Ba=Og(),Ha={status:"pending",value:void 0,then:function(d){u.push(d)}}}return km++,o.then(q_,q_),o}function q_(){if(--km===0&&Fu!==null){Ha!==null&&(Ha.status="fulfilled");var s=Fu;Fu=null,Ba=0,Ha=null;for(var o=0;o<s.length;o++)(0,s[o])()}}function t2(s,o){var u=[],d={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return s.then(function(){d.status="fulfilled",d.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(d.status="rejected",d.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),d}var B_=G.S;G.S=function(s,o){AT=vn(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&e2(s,o),B_!==null&&B_(s,o)};var Mo=q(null);function Vm(){var s=Mo.current;return s!==null?s:ft.pooledCache}function ah(s,o){o===null?pe(Mo,Mo.current):pe(Mo,o.pool)}function H_(){var s=Vm();return s===null?null:{parent:Ft._currentValue,pool:s}}var ja=Error(i(460)),Lm=Error(i(474)),lh=Error(i(542)),uh={then:function(){}};function j_(s){return s=s.status,s==="fulfilled"||s==="rejected"}function $_(s,o,u){switch(u=s[u],u===void 0?s.push(o):u!==o&&(o.then(Ti,Ti),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,J_(s),s;default:if(typeof o.status=="string")o.then(Ti,Ti);else{if(s=ft,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=o,s.status="pending",s.then(function(d){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=d}},function(d){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=d}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw s=o.reason,J_(s),s}throw ko=o,ja}}function Po(s){try{var o=s._init;return o(s._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(ko=u,ja):u}}var ko=null;function K_(){if(ko===null)throw Error(i(459));var s=ko;return ko=null,s}function J_(s){if(s===ja||s===lh)throw Error(i(483))}var $a=null,zu=0;function ch(s){var o=zu;return zu+=1,$a===null&&($a=[]),$_($a,s,o)}function qu(s,o){o=o.props.ref,s.ref=o!==void 0?o:null}function dh(s,o){throw o.$$typeof===x?Error(i(525)):(s=Object.prototype.toString.call(o),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":s)))}function Y_(s){function o(K,B){if(s){var W=K.deletions;W===null?(K.deletions=[B],K.flags|=16):W.push(B)}}function u(K,B){if(!s)return null;for(;B!==null;)o(K,B),B=B.sibling;return null}function d(K){for(var B=new Map;K!==null;)K.key!==null?B.set(K.key,K):B.set(K.index,K),K=K.sibling;return B}function v(K,B){return K=xr(K,B),K.index=0,K.sibling=null,K}function E(K,B,W){return K.index=W,s?(W=K.alternate,W!==null?(W=W.index,W<B?(K.flags|=67108866,B):W):(K.flags|=67108866,B)):(K.flags|=1048576,B)}function S(K){return s&&K.alternate===null&&(K.flags|=67108866),K}function I(K,B,W,ae){return B===null||B.tag!==6?(B=Sm(W,K.mode,ae),B.return=K,B):(B=v(B,W),B.return=K,B)}function U(K,B,W,ae){var Ce=W.type;return Ce===k?oe(K,B,W.props.children,ae,W.key):B!==null&&(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===M&&Po(Ce)===B.type)?(B=v(B,W.props),qu(B,W),B.return=K,B):(B=ih(W.type,W.key,W.props,null,K.mode,ae),qu(B,W),B.return=K,B)}function X(K,B,W,ae){return B===null||B.tag!==4||B.stateNode.containerInfo!==W.containerInfo||B.stateNode.implementation!==W.implementation?(B=wm(W,K.mode,ae),B.return=K,B):(B=v(B,W.children||[]),B.return=K,B)}function oe(K,B,W,ae,Ce){return B===null||B.tag!==7?(B=Co(W,K.mode,ae,Ce),B.return=K,B):(B=v(B,W),B.return=K,B)}function ce(K,B,W){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Sm(""+B,K.mode,W),B.return=K,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case A:return W=ih(B.type,B.key,B.props,null,K.mode,W),qu(W,B),W.return=K,W;case V:return B=wm(B,K.mode,W),B.return=K,B;case M:return B=Po(B),ce(K,B,W)}if(de(B)||F(B))return B=Co(B,K.mode,W,null),B.return=K,B;if(typeof B.then=="function")return ce(K,ch(B),W);if(B.$$typeof===H)return ce(K,oh(K,B),W);dh(K,B)}return null}function ee(K,B,W,ae){var Ce=B!==null?B.key:null;if(typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint")return Ce!==null?null:I(K,B,""+W,ae);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return W.key===Ce?U(K,B,W,ae):null;case V:return W.key===Ce?X(K,B,W,ae):null;case M:return W=Po(W),ee(K,B,W,ae)}if(de(W)||F(W))return Ce!==null?null:oe(K,B,W,ae,null);if(typeof W.then=="function")return ee(K,B,ch(W),ae);if(W.$$typeof===H)return ee(K,B,oh(K,W),ae);dh(K,W)}return null}function ne(K,B,W,ae,Ce){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return K=K.get(W)||null,I(B,K,""+ae,Ce);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case A:return K=K.get(ae.key===null?W:ae.key)||null,U(B,K,ae,Ce);case V:return K=K.get(ae.key===null?W:ae.key)||null,X(B,K,ae,Ce);case M:return ae=Po(ae),ne(K,B,W,ae,Ce)}if(de(ae)||F(ae))return K=K.get(W)||null,oe(B,K,ae,Ce,null);if(typeof ae.then=="function")return ne(K,B,W,ch(ae),Ce);if(ae.$$typeof===H)return ne(K,B,W,oh(B,ae),Ce);dh(B,ae)}return null}function be(K,B,W,ae){for(var Ce=null,Qe=null,we=B,Fe=B=0,je=null;we!==null&&Fe<W.length;Fe++){we.index>Fe?(je=we,we=null):je=we.sibling;var We=ee(K,we,W[Fe],ae);if(We===null){we===null&&(we=je);break}s&&we&&We.alternate===null&&o(K,we),B=E(We,B,Fe),Qe===null?Ce=We:Qe.sibling=We,Qe=We,we=je}if(Fe===W.length)return u(K,we),Ke&&br(K,Fe),Ce;if(we===null){for(;Fe<W.length;Fe++)we=ce(K,W[Fe],ae),we!==null&&(B=E(we,B,Fe),Qe===null?Ce=we:Qe.sibling=we,Qe=we);return Ke&&br(K,Fe),Ce}for(we=d(we);Fe<W.length;Fe++)je=ne(we,K,Fe,W[Fe],ae),je!==null&&(s&&je.alternate!==null&&we.delete(je.key===null?Fe:je.key),B=E(je,B,Fe),Qe===null?Ce=je:Qe.sibling=je,Qe=je);return s&&we.forEach(function(Ds){return o(K,Ds)}),Ke&&br(K,Fe),Ce}function Ne(K,B,W,ae){if(W==null)throw Error(i(151));for(var Ce=null,Qe=null,we=B,Fe=B=0,je=null,We=W.next();we!==null&&!We.done;Fe++,We=W.next()){we.index>Fe?(je=we,we=null):je=we.sibling;var Ds=ee(K,we,We.value,ae);if(Ds===null){we===null&&(we=je);break}s&&we&&Ds.alternate===null&&o(K,we),B=E(Ds,B,Fe),Qe===null?Ce=Ds:Qe.sibling=Ds,Qe=Ds,we=je}if(We.done)return u(K,we),Ke&&br(K,Fe),Ce;if(we===null){for(;!We.done;Fe++,We=W.next())We=ce(K,We.value,ae),We!==null&&(B=E(We,B,Fe),Qe===null?Ce=We:Qe.sibling=We,Qe=We);return Ke&&br(K,Fe),Ce}for(we=d(we);!We.done;Fe++,We=W.next())We=ne(we,K,Fe,We.value,ae),We!==null&&(s&&We.alternate!==null&&we.delete(We.key===null?Fe:We.key),B=E(We,B,Fe),Qe===null?Ce=We:Qe.sibling=We,Qe=We);return s&&we.forEach(function(hD){return o(K,hD)}),Ke&&br(K,Fe),Ce}function dt(K,B,W,ae){if(typeof W=="object"&&W!==null&&W.type===k&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case A:e:{for(var Ce=W.key;B!==null;){if(B.key===Ce){if(Ce=W.type,Ce===k){if(B.tag===7){u(K,B.sibling),ae=v(B,W.props.children),ae.return=K,K=ae;break e}}else if(B.elementType===Ce||typeof Ce=="object"&&Ce!==null&&Ce.$$typeof===M&&Po(Ce)===B.type){u(K,B.sibling),ae=v(B,W.props),qu(ae,W),ae.return=K,K=ae;break e}u(K,B);break}else o(K,B);B=B.sibling}W.type===k?(ae=Co(W.props.children,K.mode,ae,W.key),ae.return=K,K=ae):(ae=ih(W.type,W.key,W.props,null,K.mode,ae),qu(ae,W),ae.return=K,K=ae)}return S(K);case V:e:{for(Ce=W.key;B!==null;){if(B.key===Ce)if(B.tag===4&&B.stateNode.containerInfo===W.containerInfo&&B.stateNode.implementation===W.implementation){u(K,B.sibling),ae=v(B,W.children||[]),ae.return=K,K=ae;break e}else{u(K,B);break}else o(K,B);B=B.sibling}ae=wm(W,K.mode,ae),ae.return=K,K=ae}return S(K);case M:return W=Po(W),dt(K,B,W,ae)}if(de(W))return be(K,B,W,ae);if(F(W)){if(Ce=F(W),typeof Ce!="function")throw Error(i(150));return W=Ce.call(W),Ne(K,B,W,ae)}if(typeof W.then=="function")return dt(K,B,ch(W),ae);if(W.$$typeof===H)return dt(K,B,oh(K,W),ae);dh(K,W)}return typeof W=="string"&&W!==""||typeof W=="number"||typeof W=="bigint"?(W=""+W,B!==null&&B.tag===6?(u(K,B.sibling),ae=v(B,W),ae.return=K,K=ae):(u(K,B),ae=Sm(W,K.mode,ae),ae.return=K,K=ae),S(K)):u(K,B)}return function(K,B,W,ae){try{zu=0;var Ce=dt(K,B,W,ae);return $a=null,Ce}catch(we){if(we===ja||we===lh)throw we;var Qe=Gn(29,we,null,K.mode);return Qe.lanes=ae,Qe.return=K,Qe}finally{}}}var Vo=Y_(!0),Q_=Y_(!1),ps=!1;function Om(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Um(s,o){s=s.updateQueue,o.updateQueue===s&&(o.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function ms(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function gs(s,o,u){var d=s.updateQueue;if(d===null)return null;if(d=d.shared,(et&2)!==0){var v=d.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),d.pending=o,o=nh(s),P_(s,null,u),o}return th(s,d,o,u),nh(s)}function Bu(s,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,gu(s,u)}}function Gm(s,o){var u=s.updateQueue,d=s.alternate;if(d!==null&&(d=d.updateQueue,u===d)){var v=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var S={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?v=E=S:E=E.next=S,u=u.next}while(u!==null);E===null?v=E=o:E=E.next=o}else v=E=o;u={baseState:d.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:d.shared,callbacks:d.callbacks},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=o:s.next=o,u.lastBaseUpdate=o}var Fm=!1;function Hu(){if(Fm){var s=Ha;if(s!==null)throw s}}function ju(s,o,u,d){Fm=!1;var v=s.updateQueue;ps=!1;var E=v.firstBaseUpdate,S=v.lastBaseUpdate,I=v.shared.pending;if(I!==null){v.shared.pending=null;var U=I,X=U.next;U.next=null,S===null?E=X:S.next=X,S=U;var oe=s.alternate;oe!==null&&(oe=oe.updateQueue,I=oe.lastBaseUpdate,I!==S&&(I===null?oe.firstBaseUpdate=X:I.next=X,oe.lastBaseUpdate=U))}if(E!==null){var ce=v.baseState;S=0,oe=X=U=null,I=E;do{var ee=I.lane&-536870913,ne=ee!==I.lane;if(ne?(He&ee)===ee:(d&ee)===ee){ee!==0&&ee===Ba&&(Fm=!0),oe!==null&&(oe=oe.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var be=s,Ne=I;ee=o;var dt=u;switch(Ne.tag){case 1:if(be=Ne.payload,typeof be=="function"){ce=be.call(dt,ce,ee);break e}ce=be;break e;case 3:be.flags=be.flags&-65537|128;case 0:if(be=Ne.payload,ee=typeof be=="function"?be.call(dt,ce,ee):be,ee==null)break e;ce=T({},ce,ee);break e;case 2:ps=!0}}ee=I.callback,ee!==null&&(s.flags|=64,ne&&(s.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[ee]:ne.push(ee))}else ne={lane:ee,tag:I.tag,payload:I.payload,callback:I.callback,next:null},oe===null?(X=oe=ne,U=ce):oe=oe.next=ne,S|=ee;if(I=I.next,I===null){if(I=v.shared.pending,I===null)break;ne=I,I=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);oe===null&&(U=ce),v.baseState=U,v.firstBaseUpdate=X,v.lastBaseUpdate=oe,E===null&&(v.shared.lanes=0),Ts|=S,s.lanes=S,s.memoizedState=ce}}function W_(s,o){if(typeof s!="function")throw Error(i(191,s));s.call(o)}function X_(s,o){var u=s.callbacks;if(u!==null)for(s.callbacks=null,s=0;s<u.length;s++)W_(u[s],o)}var Ka=q(null),hh=q(0);function Z_(s,o){s=kr,pe(hh,s),pe(Ka,o),kr=s|o.baseLanes}function zm(){pe(hh,kr),pe(Ka,Ka.current)}function qm(){kr=hh.current,se(Ka),se(hh)}var Fn=q(null),oi=null;function ys(s){var o=s.alternate;pe(Nt,Nt.current&1),pe(Fn,s),oi===null&&(o===null||Ka.current!==null||o.memoizedState!==null)&&(oi=s)}function Bm(s){pe(Nt,Nt.current),pe(Fn,s),oi===null&&(oi=s)}function eE(s){s.tag===22?(pe(Nt,Nt.current),pe(Fn,s),oi===null&&(oi=s)):vs()}function vs(){pe(Nt,Nt.current),pe(Fn,Fn.current)}function zn(s){se(Fn),oi===s&&(oi=null),se(Nt)}var Nt=q(0);function fh(s){for(var o=s;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Yg(u)||Qg(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Ar=0,Ge=null,ut=null,zt=null,ph=!1,Ja=!1,Lo=!1,mh=0,$u=0,Ya=null,n2=0;function St(){throw Error(i(321))}function Hm(s,o){if(o===null)return!1;for(var u=0;u<o.length&&u<s.length;u++)if(!Un(s[u],o[u]))return!1;return!0}function jm(s,o,u,d,v,E){return Ar=E,Ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,G.H=s===null||s.memoizedState===null?OE:og,Lo=!1,E=u(d,v),Lo=!1,Ja&&(E=nE(o,u,d,v)),tE(s),E}function tE(s){G.H=Yu;var o=ut!==null&&ut.next!==null;if(Ar=0,zt=ut=Ge=null,ph=!1,$u=0,Ya=null,o)throw Error(i(300));s===null||qt||(s=s.dependencies,s!==null&&sh(s)&&(qt=!0))}function nE(s,o,u,d){Ge=s;var v=0;do{if(Ja&&(Ya=null),$u=0,Ja=!1,25<=v)throw Error(i(301));if(v+=1,zt=ut=null,s.updateQueue!=null){var E=s.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}G.H=UE,E=o(u,d)}while(Ja);return E}function i2(){var s=G.H,o=s.useState()[0];return o=typeof o.then=="function"?Ku(o):o,s=s.useState()[0],(ut!==null?ut.memoizedState:null)!==s&&(Ge.flags|=1024),o}function $m(){var s=mh!==0;return mh=0,s}function Km(s,o,u){o.updateQueue=s.updateQueue,o.flags&=-2053,s.lanes&=~u}function Jm(s){if(ph){for(s=s.memoizedState;s!==null;){var o=s.queue;o!==null&&(o.pending=null),s=s.next}ph=!1}Ar=0,zt=ut=Ge=null,Ja=!1,$u=mh=0,Ya=null}function En(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zt===null?Ge.memoizedState=zt=s:zt=zt.next=s,zt}function Dt(){if(ut===null){var s=Ge.alternate;s=s!==null?s.memoizedState:null}else s=ut.next;var o=zt===null?Ge.memoizedState:zt.next;if(o!==null)zt=o,ut=s;else{if(s===null)throw Ge.alternate===null?Error(i(467)):Error(i(310));ut=s,s={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},zt===null?Ge.memoizedState=zt=s:zt=zt.next=s}return zt}function gh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ku(s){var o=$u;return $u+=1,Ya===null&&(Ya=[]),s=$_(Ya,s,o),o=Ge,(zt===null?o.memoizedState:zt.next)===null&&(o=o.alternate,G.H=o===null||o.memoizedState===null?OE:og),s}function yh(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Ku(s);if(s.$$typeof===H)return an(s)}throw Error(i(438,String(s)))}function Ym(s){var o=null,u=Ge.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var d=Ge.alternate;d!==null&&(d=d.updateQueue,d!==null&&(d=d.memoCache,d!=null&&(o={data:d.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=gh(),Ge.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(s),d=0;d<s;d++)u[d]=O;return o.index++,u}function Ir(s,o){return typeof o=="function"?o(s):o}function vh(s){var o=Dt();return Qm(o,ut,s)}function Qm(s,o,u){var d=s.queue;if(d===null)throw Error(i(311));d.lastRenderedReducer=u;var v=s.baseQueue,E=d.pending;if(E!==null){if(v!==null){var S=v.next;v.next=E.next,E.next=S}o.baseQueue=v=E,d.pending=null}if(E=s.baseState,v===null)s.memoizedState=E;else{o=v.next;var I=S=null,U=null,X=o,oe=!1;do{var ce=X.lane&-536870913;if(ce!==X.lane?(He&ce)===ce:(Ar&ce)===ce){var ee=X.revertLane;if(ee===0)U!==null&&(U=U.next={lane:0,revertLane:0,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),ce===Ba&&(oe=!0);else if((Ar&ee)===ee){X=X.next,ee===Ba&&(oe=!0);continue}else ce={lane:0,revertLane:X.revertLane,gesture:null,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(I=U=ce,S=E):U=U.next=ce,Ge.lanes|=ee,Ts|=ee;ce=X.action,Lo&&u(E,ce),E=X.hasEagerState?X.eagerState:u(E,ce)}else ee={lane:ce,revertLane:X.revertLane,gesture:X.gesture,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(I=U=ee,S=E):U=U.next=ee,Ge.lanes|=ce,Ts|=ce;X=X.next}while(X!==null&&X!==o);if(U===null?S=E:U.next=I,!Un(E,s.memoizedState)&&(qt=!0,oe&&(u=Ha,u!==null)))throw u;s.memoizedState=E,s.baseState=S,s.baseQueue=U,d.lastRenderedState=E}return v===null&&(d.lanes=0),[s.memoizedState,d.dispatch]}function Wm(s){var o=Dt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=s;var d=u.dispatch,v=u.pending,E=o.memoizedState;if(v!==null){u.pending=null;var S=v=v.next;do E=s(E,S.action),S=S.next;while(S!==v);Un(E,o.memoizedState)||(qt=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),u.lastRenderedState=E}return[E,d]}function iE(s,o,u){var d=Ge,v=Dt(),E=Ke;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=o();var S=!Un((ut||v).memoizedState,u);if(S&&(v.memoizedState=u,qt=!0),v=v.queue,eg(oE.bind(null,d,v,s),[s]),v.getSnapshot!==o||S||zt!==null&&zt.memoizedState.tag&1){if(d.flags|=2048,Qa(9,{destroy:void 0},sE.bind(null,d,v,u,o),null),ft===null)throw Error(i(349));E||(Ar&127)!==0||rE(d,o,u)}return u}function rE(s,o,u){s.flags|=16384,s={getSnapshot:o,value:u},o=Ge.updateQueue,o===null?(o=gh(),Ge.updateQueue=o,o.stores=[s]):(u=o.stores,u===null?o.stores=[s]:u.push(s))}function sE(s,o,u,d){o.value=u,o.getSnapshot=d,aE(o)&&lE(s)}function oE(s,o,u){return u(function(){aE(o)&&lE(s)})}function aE(s){var o=s.getSnapshot;s=s.value;try{var u=o();return!Un(s,u)}catch{return!0}}function lE(s){var o=Io(s,2);o!==null&&Mn(o,s,2)}function Xm(s){var o=En();if(typeof s=="function"){var u=s;if(s=u(),Lo){Qn(!0);try{u()}finally{Qn(!1)}}}return o.memoizedState=o.baseState=s,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:s},o}function uE(s,o,u,d){return s.baseState=u,Qm(s,ut,typeof d=="function"?d:Ir)}function r2(s,o,u,d,v){if(Th(s))throw Error(i(485));if(s=o.action,s!==null){var E={payload:v,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){E.listeners.push(S)}};G.T!==null?u(!0):E.isTransition=!1,d(E),u=o.pending,u===null?(E.next=o.pending=E,cE(o,E)):(E.next=u.next,o.pending=u.next=E)}}function cE(s,o){var u=o.action,d=o.payload,v=s.state;if(o.isTransition){var E=G.T,S={};G.T=S;try{var I=u(v,d),U=G.S;U!==null&&U(S,I),dE(s,o,I)}catch(X){Zm(s,o,X)}finally{E!==null&&S.types!==null&&(E.types=S.types),G.T=E}}else try{E=u(v,d),dE(s,o,E)}catch(X){Zm(s,o,X)}}function dE(s,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(d){hE(s,o,d)},function(d){return Zm(s,o,d)}):hE(s,o,u)}function hE(s,o,u){o.status="fulfilled",o.value=u,fE(o),s.state=u,o=s.pending,o!==null&&(u=o.next,u===o?s.pending=null:(u=u.next,o.next=u,cE(s,u)))}function Zm(s,o,u){var d=s.pending;if(s.pending=null,d!==null){d=d.next;do o.status="rejected",o.reason=u,fE(o),o=o.next;while(o!==d)}s.action=null}function fE(s){s=s.listeners;for(var o=0;o<s.length;o++)(0,s[o])()}function pE(s,o){return o}function mE(s,o){if(Ke){var u=ft.formState;if(u!==null){e:{var d=Ge;if(Ke){if(mt){t:{for(var v=mt,E=si;v.nodeType!==8;){if(!E){v=null;break t}if(v=ai(v.nextSibling),v===null){v=null;break t}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){mt=ai(v.nextSibling),d=v.data==="F!";break e}}hs(d)}d=!1}d&&(o=u[0])}}return u=En(),u.memoizedState=u.baseState=o,d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:pE,lastRenderedState:o},u.queue=d,u=kE.bind(null,Ge,d),d.dispatch=u,d=Xm(!1),E=sg.bind(null,Ge,!1,d.queue),d=En(),v={state:o,dispatch:null,action:s,pending:null},d.queue=v,u=r2.bind(null,Ge,v,E,u),v.dispatch=u,d.memoizedState=s,[o,u,!1]}function gE(s){var o=Dt();return yE(o,ut,s)}function yE(s,o,u){if(o=Qm(s,o,pE)[0],s=vh(Ir)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var d=Ku(o)}catch(S){throw S===ja?lh:S}else d=o;o=Dt();var v=o.queue,E=v.dispatch;return u!==o.memoizedState&&(Ge.flags|=2048,Qa(9,{destroy:void 0},s2.bind(null,v,u),null)),[d,E,s]}function s2(s,o){s.action=o}function vE(s){var o=Dt(),u=ut;if(u!==null)return yE(o,u,s);Dt(),o=o.memoizedState,u=Dt();var d=u.queue.dispatch;return u.memoizedState=s,[o,d,!1]}function Qa(s,o,u,d){return s={tag:s,create:u,deps:d,inst:o,next:null},o=Ge.updateQueue,o===null&&(o=gh(),Ge.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=s.next=s:(d=u.next,u.next=s,s.next=d,o.lastEffect=s),s}function _E(){return Dt().memoizedState}function _h(s,o,u,d){var v=En();Ge.flags|=s,v.memoizedState=Qa(1|o,{destroy:void 0},u,d===void 0?null:d)}function Eh(s,o,u,d){var v=Dt();d=d===void 0?null:d;var E=v.memoizedState.inst;ut!==null&&d!==null&&Hm(d,ut.memoizedState.deps)?v.memoizedState=Qa(o,E,u,d):(Ge.flags|=s,v.memoizedState=Qa(1|o,E,u,d))}function EE(s,o){_h(8390656,8,s,o)}function eg(s,o){Eh(2048,8,s,o)}function o2(s){Ge.flags|=4;var o=Ge.updateQueue;if(o===null)o=gh(),Ge.updateQueue=o,o.events=[s];else{var u=o.events;u===null?o.events=[s]:u.push(s)}}function TE(s){var o=Dt().memoizedState;return o2({ref:o,nextImpl:s}),function(){if((et&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function xE(s,o){return Eh(4,2,s,o)}function bE(s,o){return Eh(4,4,s,o)}function SE(s,o){if(typeof o=="function"){s=s();var u=o(s);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return s=s(),o.current=s,function(){o.current=null}}function wE(s,o,u){u=u!=null?u.concat([s]):null,Eh(4,4,SE.bind(null,o,s),u)}function tg(){}function AE(s,o){var u=Dt();o=o===void 0?null:o;var d=u.memoizedState;return o!==null&&Hm(o,d[1])?d[0]:(u.memoizedState=[s,o],s)}function IE(s,o){var u=Dt();o=o===void 0?null:o;var d=u.memoizedState;if(o!==null&&Hm(o,d[1]))return d[0];if(d=s(),Lo){Qn(!0);try{s()}finally{Qn(!1)}}return u.memoizedState=[d,o],d}function ng(s,o,u){return u===void 0||(Ar&1073741824)!==0&&(He&261930)===0?s.memoizedState=o:(s.memoizedState=u,s=CT(),Ge.lanes|=s,Ts|=s,u)}function CE(s,o,u,d){return Un(u,o)?u:Ka.current!==null?(s=ng(s,u,d),Un(s,o)||(qt=!0),s):(Ar&42)===0||(Ar&1073741824)!==0&&(He&261930)===0?(qt=!0,s.memoizedState=u):(s=CT(),Ge.lanes|=s,Ts|=s,o)}function RE(s,o,u,d,v){var E=re.p;re.p=E!==0&&8>E?E:8;var S=G.T,I={};G.T=I,sg(s,!1,o,u);try{var U=v(),X=G.S;if(X!==null&&X(I,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var oe=t2(U,d);Ju(s,o,oe,Hn(s))}else Ju(s,o,d,Hn(s))}catch(ce){Ju(s,o,{then:function(){},status:"rejected",reason:ce},Hn())}finally{re.p=E,S!==null&&I.types!==null&&(S.types=I.types),G.T=S}}function a2(){}function ig(s,o,u,d){if(s.tag!==5)throw Error(i(476));var v=NE(s).queue;RE(s,v,o,he,u===null?a2:function(){return DE(s),u(d)})}function NE(s){var o=s.memoizedState;if(o!==null)return o;o={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:he},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:u},next:null},s.memoizedState=o,s=s.alternate,s!==null&&(s.memoizedState=o),o}function DE(s){var o=NE(s);o.next===null&&(o=s.alternate.memoizedState),Ju(s,o.next.queue,{},Hn())}function rg(){return an(dc)}function ME(){return Dt().memoizedState}function PE(){return Dt().memoizedState}function l2(s){for(var o=s.return;o!==null;){switch(o.tag){case 24:case 3:var u=Hn();s=ms(u);var d=gs(o,s,u);d!==null&&(Mn(d,o,u),Bu(d,o,u)),o={cache:Pm()},s.payload=o;return}o=o.return}}function u2(s,o,u){var d=Hn();u={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Th(s)?VE(o,u):(u=xm(s,o,u,d),u!==null&&(Mn(u,s,d),LE(u,o,d)))}function kE(s,o,u){var d=Hn();Ju(s,o,u,d)}function Ju(s,o,u,d){var v={lane:d,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Th(s))VE(o,v);else{var E=s.alternate;if(s.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var S=o.lastRenderedState,I=E(S,u);if(v.hasEagerState=!0,v.eagerState=I,Un(I,S))return th(s,o,v,0),ft===null&&eh(),!1}catch{}finally{}if(u=xm(s,o,v,d),u!==null)return Mn(u,s,d),LE(u,o,d),!0}return!1}function sg(s,o,u,d){if(d={lane:2,revertLane:Og(),gesture:null,action:d,hasEagerState:!1,eagerState:null,next:null},Th(s)){if(o)throw Error(i(479))}else o=xm(s,u,d,2),o!==null&&Mn(o,s,2)}function Th(s){var o=s.alternate;return s===Ge||o!==null&&o===Ge}function VE(s,o){Ja=ph=!0;var u=s.pending;u===null?o.next=o:(o.next=u.next,u.next=o),s.pending=o}function LE(s,o,u){if((u&4194048)!==0){var d=o.lanes;d&=s.pendingLanes,u|=d,o.lanes=u,gu(s,u)}}var Yu={readContext:an,use:yh,useCallback:St,useContext:St,useEffect:St,useImperativeHandle:St,useLayoutEffect:St,useInsertionEffect:St,useMemo:St,useReducer:St,useRef:St,useState:St,useDebugValue:St,useDeferredValue:St,useTransition:St,useSyncExternalStore:St,useId:St,useHostTransitionStatus:St,useFormState:St,useActionState:St,useOptimistic:St,useMemoCache:St,useCacheRefresh:St};Yu.useEffectEvent=St;var OE={readContext:an,use:yh,useCallback:function(s,o){return En().memoizedState=[s,o===void 0?null:o],s},useContext:an,useEffect:EE,useImperativeHandle:function(s,o,u){u=u!=null?u.concat([s]):null,_h(4194308,4,SE.bind(null,o,s),u)},useLayoutEffect:function(s,o){return _h(4194308,4,s,o)},useInsertionEffect:function(s,o){_h(4,2,s,o)},useMemo:function(s,o){var u=En();o=o===void 0?null:o;var d=s();if(Lo){Qn(!0);try{s()}finally{Qn(!1)}}return u.memoizedState=[d,o],d},useReducer:function(s,o,u){var d=En();if(u!==void 0){var v=u(o);if(Lo){Qn(!0);try{u(o)}finally{Qn(!1)}}}else v=o;return d.memoizedState=d.baseState=v,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:v},d.queue=s,s=s.dispatch=u2.bind(null,Ge,s),[d.memoizedState,s]},useRef:function(s){var o=En();return s={current:s},o.memoizedState=s},useState:function(s){s=Xm(s);var o=s.queue,u=kE.bind(null,Ge,o);return o.dispatch=u,[s.memoizedState,u]},useDebugValue:tg,useDeferredValue:function(s,o){var u=En();return ng(u,s,o)},useTransition:function(){var s=Xm(!1);return s=RE.bind(null,Ge,s.queue,!0,!1),En().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,o,u){var d=Ge,v=En();if(Ke){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),ft===null)throw Error(i(349));(He&127)!==0||rE(d,o,u)}v.memoizedState=u;var E={value:u,getSnapshot:o};return v.queue=E,EE(oE.bind(null,d,E,s),[s]),d.flags|=2048,Qa(9,{destroy:void 0},sE.bind(null,d,E,u,o),null),u},useId:function(){var s=En(),o=ft.identifierPrefix;if(Ke){var u=ir,d=nr;u=(d&~(1<<32-Ct(d)-1)).toString(32)+u,o="_"+o+"R_"+u,u=mh++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=n2++,o="_"+o+"r_"+u.toString(32)+"_";return s.memoizedState=o},useHostTransitionStatus:rg,useFormState:mE,useActionState:mE,useOptimistic:function(s){var o=En();o.memoizedState=o.baseState=s;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=sg.bind(null,Ge,!0,u),u.dispatch=o,[s,o]},useMemoCache:Ym,useCacheRefresh:function(){return En().memoizedState=l2.bind(null,Ge)},useEffectEvent:function(s){var o=En(),u={impl:s};return o.memoizedState=u,function(){if((et&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},og={readContext:an,use:yh,useCallback:AE,useContext:an,useEffect:eg,useImperativeHandle:wE,useInsertionEffect:xE,useLayoutEffect:bE,useMemo:IE,useReducer:vh,useRef:_E,useState:function(){return vh(Ir)},useDebugValue:tg,useDeferredValue:function(s,o){var u=Dt();return CE(u,ut.memoizedState,s,o)},useTransition:function(){var s=vh(Ir)[0],o=Dt().memoizedState;return[typeof s=="boolean"?s:Ku(s),o]},useSyncExternalStore:iE,useId:ME,useHostTransitionStatus:rg,useFormState:gE,useActionState:gE,useOptimistic:function(s,o){var u=Dt();return uE(u,ut,s,o)},useMemoCache:Ym,useCacheRefresh:PE};og.useEffectEvent=TE;var UE={readContext:an,use:yh,useCallback:AE,useContext:an,useEffect:eg,useImperativeHandle:wE,useInsertionEffect:xE,useLayoutEffect:bE,useMemo:IE,useReducer:Wm,useRef:_E,useState:function(){return Wm(Ir)},useDebugValue:tg,useDeferredValue:function(s,o){var u=Dt();return ut===null?ng(u,s,o):CE(u,ut.memoizedState,s,o)},useTransition:function(){var s=Wm(Ir)[0],o=Dt().memoizedState;return[typeof s=="boolean"?s:Ku(s),o]},useSyncExternalStore:iE,useId:ME,useHostTransitionStatus:rg,useFormState:vE,useActionState:vE,useOptimistic:function(s,o){var u=Dt();return ut!==null?uE(u,ut,s,o):(u.baseState=s,[s,u.queue.dispatch])},useMemoCache:Ym,useCacheRefresh:PE};UE.useEffectEvent=TE;function ag(s,o,u,d){o=s.memoizedState,u=u(d,o),u=u==null?o:T({},o,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var lg={enqueueSetState:function(s,o,u){s=s._reactInternals;var d=Hn(),v=ms(d);v.payload=o,u!=null&&(v.callback=u),o=gs(s,v,d),o!==null&&(Mn(o,s,d),Bu(o,s,d))},enqueueReplaceState:function(s,o,u){s=s._reactInternals;var d=Hn(),v=ms(d);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=gs(s,v,d),o!==null&&(Mn(o,s,d),Bu(o,s,d))},enqueueForceUpdate:function(s,o){s=s._reactInternals;var u=Hn(),d=ms(u);d.tag=2,o!=null&&(d.callback=o),o=gs(s,d,u),o!==null&&(Mn(o,s,u),Bu(o,s,u))}};function GE(s,o,u,d,v,E,S){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(d,E,S):o.prototype&&o.prototype.isPureReactComponent?!Vu(u,d)||!Vu(v,E):!0}function FE(s,o,u,d){s=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,d),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,d),o.state!==s&&lg.enqueueReplaceState(o,o.state,null)}function Oo(s,o){var u=o;if("ref"in o){u={};for(var d in o)d!=="ref"&&(u[d]=o[d])}if(s=s.defaultProps){u===o&&(u=T({},u));for(var v in s)u[v]===void 0&&(u[v]=s[v])}return u}function zE(s){Zd(s)}function qE(s){console.error(s)}function BE(s){Zd(s)}function xh(s,o){try{var u=s.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(d){setTimeout(function(){throw d})}}function HE(s,o,u){try{var d=s.onCaughtError;d(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function ug(s,o,u){return u=ms(u),u.tag=3,u.payload={element:null},u.callback=function(){xh(s,o)},u}function jE(s){return s=ms(s),s.tag=3,s}function $E(s,o,u,d){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var E=d.value;s.payload=function(){return v(E)},s.callback=function(){HE(o,u,d)}}var S=u.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(s.callback=function(){HE(o,u,d),typeof v!="function"&&(xs===null?xs=new Set([this]):xs.add(this));var I=d.stack;this.componentDidCatch(d.value,{componentStack:I!==null?I:""})})}function c2(s,o,u,d,v){if(u.flags|=32768,d!==null&&typeof d=="object"&&typeof d.then=="function"){if(o=u.alternate,o!==null&&qa(o,u,v,!0),u=Fn.current,u!==null){switch(u.tag){case 31:case 13:return oi===null?kh():u.alternate===null&&wt===0&&(wt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,d===uh?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([d]):o.add(d),kg(s,d,v)),!1;case 22:return u.flags|=65536,d===uh?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([d])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([d]):u.add(d)),kg(s,d,v)),!1}throw Error(i(435,u.tag))}return kg(s,d,v),kh(),!1}if(Ke)return o=Fn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,d!==Cm&&(s=Error(i(422),{cause:d}),Uu(ni(s,u)))):(d!==Cm&&(o=Error(i(423),{cause:d}),Uu(ni(o,u))),s=s.current.alternate,s.flags|=65536,v&=-v,s.lanes|=v,d=ni(d,u),v=ug(s.stateNode,d,v),Gm(s,v),wt!==4&&(wt=2)),!1;var E=Error(i(520),{cause:d});if(E=ni(E,u),ic===null?ic=[E]:ic.push(E),wt!==4&&(wt=2),o===null)return!0;d=ni(d,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,s=v&-v,u.lanes|=s,s=ug(u.stateNode,d,s),Gm(u,s),!1;case 1:if(o=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(xs===null||!xs.has(E))))return u.flags|=65536,v&=-v,u.lanes|=v,v=jE(v),$E(v,s,u,d),Gm(u,v),!1}u=u.return}while(u!==null);return!1}var cg=Error(i(461)),qt=!1;function ln(s,o,u,d){o.child=s===null?Q_(o,null,u,d):Vo(o,s.child,u,d)}function KE(s,o,u,d,v){u=u.render;var E=o.ref;if("ref"in d){var S={};for(var I in d)I!=="ref"&&(S[I]=d[I])}else S=d;return Do(o),d=jm(s,o,u,S,E,v),I=$m(),s!==null&&!qt?(Km(s,o,v),Cr(s,o,v)):(Ke&&I&&Am(o),o.flags|=1,ln(s,o,d,v),o.child)}function JE(s,o,u,d,v){if(s===null){var E=u.type;return typeof E=="function"&&!bm(E)&&E.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=E,YE(s,o,E,d,v)):(s=ih(u.type,null,d,o,o.mode,v),s.ref=o.ref,s.return=o,o.child=s)}if(E=s.child,!vg(s,v)){var S=E.memoizedProps;if(u=u.compare,u=u!==null?u:Vu,u(S,d)&&s.ref===o.ref)return Cr(s,o,v)}return o.flags|=1,s=xr(E,d),s.ref=o.ref,s.return=o,o.child=s}function YE(s,o,u,d,v){if(s!==null){var E=s.memoizedProps;if(Vu(E,d)&&s.ref===o.ref)if(qt=!1,o.pendingProps=d=E,vg(s,v))(s.flags&131072)!==0&&(qt=!0);else return o.lanes=s.lanes,Cr(s,o,v)}return dg(s,o,u,d,v)}function QE(s,o,u,d){var v=d.children,E=s!==null?s.memoizedState:null;if(s===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),d.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,s!==null){for(d=o.child=s.child,v=0;d!==null;)v=v|d.lanes|d.childLanes,d=d.sibling;d=v&~E}else d=0,o.child=null;return WE(s,o,E,u,d)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},s!==null&&ah(o,E!==null?E.cachePool:null),E!==null?Z_(o,E):zm(),eE(o);else return d=o.lanes=536870912,WE(s,o,E!==null?E.baseLanes|u:u,u,d)}else E!==null?(ah(o,E.cachePool),Z_(o,E),vs(),o.memoizedState=null):(s!==null&&ah(o,null),zm(),vs());return ln(s,o,v,u),o.child}function Qu(s,o){return s!==null&&s.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function WE(s,o,u,d,v){var E=Vm();return E=E===null?null:{parent:Ft._currentValue,pool:E},o.memoizedState={baseLanes:u,cachePool:E},s!==null&&ah(o,null),zm(),eE(o),s!==null&&qa(s,o,d,!0),o.childLanes=v,null}function bh(s,o){return o=wh({mode:o.mode,children:o.children},s.mode),o.ref=s.ref,s.child=o,o.return=s,o}function XE(s,o,u){return Vo(o,s.child,null,u),s=bh(o,o.pendingProps),s.flags|=2,zn(o),o.memoizedState=null,s}function d2(s,o,u){var d=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,s===null){if(Ke){if(d.mode==="hidden")return s=bh(o,d),o.lanes=536870912,Qu(null,s);if(Bm(o),(s=mt)?(s=cx(s,si),s=s!==null&&s.data==="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:cs!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=V_(s),u.return=o,o.child=u,on=o,mt=null)):s=null,s===null)throw hs(o);return o.lanes=536870912,null}return bh(o,d)}var E=s.memoizedState;if(E!==null){var S=E.dehydrated;if(Bm(o),v)if(o.flags&256)o.flags&=-257,o=XE(s,o,u);else if(o.memoizedState!==null)o.child=s.child,o.flags|=128,o=null;else throw Error(i(558));else if(qt||qa(s,o,u,!1),v=(u&s.childLanes)!==0,qt||v){if(d=ft,d!==null&&(S=yu(d,u),S!==0&&S!==E.retryLane))throw E.retryLane=S,Io(s,S),Mn(d,s,S),cg;kh(),o=XE(s,o,u)}else s=E.treeContext,mt=ai(S.nextSibling),on=o,Ke=!0,ds=null,si=!1,s!==null&&U_(o,s),o=bh(o,d),o.flags|=4096;return o}return s=xr(s.child,{mode:d.mode,children:d.children}),s.ref=o.ref,o.child=s,s.return=o,s}function Sh(s,o){var u=o.ref;if(u===null)s!==null&&s.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(s===null||s.ref!==u)&&(o.flags|=4194816)}}function dg(s,o,u,d,v){return Do(o),u=jm(s,o,u,d,void 0,v),d=$m(),s!==null&&!qt?(Km(s,o,v),Cr(s,o,v)):(Ke&&d&&Am(o),o.flags|=1,ln(s,o,u,v),o.child)}function ZE(s,o,u,d,v,E){return Do(o),o.updateQueue=null,u=nE(o,d,u,v),tE(s),d=$m(),s!==null&&!qt?(Km(s,o,E),Cr(s,o,E)):(Ke&&d&&Am(o),o.flags|=1,ln(s,o,u,E),o.child)}function eT(s,o,u,d,v){if(Do(o),o.stateNode===null){var E=Ua,S=u.contextType;typeof S=="object"&&S!==null&&(E=an(S)),E=new u(d,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=lg,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=d,E.state=o.memoizedState,E.refs={},Om(o),S=u.contextType,E.context=typeof S=="object"&&S!==null?an(S):Ua,E.state=o.memoizedState,S=u.getDerivedStateFromProps,typeof S=="function"&&(ag(o,u,S,d),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(S=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),S!==E.state&&lg.enqueueReplaceState(E,E.state,null),ju(o,d,E,v),Hu(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!0}else if(s===null){E=o.stateNode;var I=o.memoizedProps,U=Oo(u,I);E.props=U;var X=E.context,oe=u.contextType;S=Ua,typeof oe=="object"&&oe!==null&&(S=an(oe));var ce=u.getDerivedStateFromProps;oe=typeof ce=="function"||typeof E.getSnapshotBeforeUpdate=="function",I=o.pendingProps!==I,oe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I||X!==S)&&FE(o,E,d,S),ps=!1;var ee=o.memoizedState;E.state=ee,ju(o,d,E,v),Hu(),X=o.memoizedState,I||ee!==X||ps?(typeof ce=="function"&&(ag(o,u,ce,d),X=o.memoizedState),(U=ps||GE(o,u,U,d,ee,X,S))?(oe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=d,o.memoizedState=X),E.props=d,E.state=X,E.context=S,d=U):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),d=!1)}else{E=o.stateNode,Um(s,o),S=o.memoizedProps,oe=Oo(u,S),E.props=oe,ce=o.pendingProps,ee=E.context,X=u.contextType,U=Ua,typeof X=="object"&&X!==null&&(U=an(X)),I=u.getDerivedStateFromProps,(X=typeof I=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(S!==ce||ee!==U)&&FE(o,E,d,U),ps=!1,ee=o.memoizedState,E.state=ee,ju(o,d,E,v),Hu();var ne=o.memoizedState;S!==ce||ee!==ne||ps||s!==null&&s.dependencies!==null&&sh(s.dependencies)?(typeof I=="function"&&(ag(o,u,I,d),ne=o.memoizedState),(oe=ps||GE(o,u,oe,d,ee,ne,U)||s!==null&&s.dependencies!==null&&sh(s.dependencies))?(X||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(d,ne,U),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(d,ne,U)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||S===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),o.memoizedProps=d,o.memoizedState=ne),E.props=d,E.state=ne,E.context=U,d=oe):(typeof E.componentDidUpdate!="function"||S===s.memoizedProps&&ee===s.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||S===s.memoizedProps&&ee===s.memoizedState||(o.flags|=1024),d=!1)}return E=d,Sh(s,o),d=(o.flags&128)!==0,E||d?(E=o.stateNode,u=d&&typeof u.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,s!==null&&d?(o.child=Vo(o,s.child,null,v),o.child=Vo(o,null,u,v)):ln(s,o,u,v),o.memoizedState=E.state,s=o.child):s=Cr(s,o,v),s}function tT(s,o,u,d){return Ro(),o.flags|=256,ln(s,o,u,d),o.child}var hg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fg(s){return{baseLanes:s,cachePool:H_()}}function pg(s,o,u){return s=s!==null?s.childLanes&~u:0,o&&(s|=Bn),s}function nT(s,o,u){var d=o.pendingProps,v=!1,E=(o.flags&128)!==0,S;if((S=E)||(S=s!==null&&s.memoizedState===null?!1:(Nt.current&2)!==0),S&&(v=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,s===null){if(Ke){if(v?ys(o):vs(),(s=mt)?(s=cx(s,si),s=s!==null&&s.data!=="&"?s:null,s!==null&&(o.memoizedState={dehydrated:s,treeContext:cs!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},u=V_(s),u.return=o,o.child=u,on=o,mt=null)):s=null,s===null)throw hs(o);return Qg(s)?o.lanes=32:o.lanes=536870912,null}var I=d.children;return d=d.fallback,v?(vs(),v=o.mode,I=wh({mode:"hidden",children:I},v),d=Co(d,v,u,null),I.return=o,d.return=o,I.sibling=d,o.child=I,d=o.child,d.memoizedState=fg(u),d.childLanes=pg(s,S,u),o.memoizedState=hg,Qu(null,d)):(ys(o),mg(o,I))}var U=s.memoizedState;if(U!==null&&(I=U.dehydrated,I!==null)){if(E)o.flags&256?(ys(o),o.flags&=-257,o=gg(s,o,u)):o.memoizedState!==null?(vs(),o.child=s.child,o.flags|=128,o=null):(vs(),I=d.fallback,v=o.mode,d=wh({mode:"visible",children:d.children},v),I=Co(I,v,u,null),I.flags|=2,d.return=o,I.return=o,d.sibling=I,o.child=d,Vo(o,s.child,null,u),d=o.child,d.memoizedState=fg(u),d.childLanes=pg(s,S,u),o.memoizedState=hg,o=Qu(null,d));else if(ys(o),Qg(I)){if(S=I.nextSibling&&I.nextSibling.dataset,S)var X=S.dgst;S=X,d=Error(i(419)),d.stack="",d.digest=S,Uu({value:d,source:null,stack:null}),o=gg(s,o,u)}else if(qt||qa(s,o,u,!1),S=(u&s.childLanes)!==0,qt||S){if(S=ft,S!==null&&(d=yu(S,u),d!==0&&d!==U.retryLane))throw U.retryLane=d,Io(s,d),Mn(S,s,d),cg;Yg(I)||kh(),o=gg(s,o,u)}else Yg(I)?(o.flags|=192,o.child=s.child,o=null):(s=U.treeContext,mt=ai(I.nextSibling),on=o,Ke=!0,ds=null,si=!1,s!==null&&U_(o,s),o=mg(o,d.children),o.flags|=4096);return o}return v?(vs(),I=d.fallback,v=o.mode,U=s.child,X=U.sibling,d=xr(U,{mode:"hidden",children:d.children}),d.subtreeFlags=U.subtreeFlags&65011712,X!==null?I=xr(X,I):(I=Co(I,v,u,null),I.flags|=2),I.return=o,d.return=o,d.sibling=I,o.child=d,Qu(null,d),d=o.child,I=s.child.memoizedState,I===null?I=fg(u):(v=I.cachePool,v!==null?(U=Ft._currentValue,v=v.parent!==U?{parent:U,pool:U}:v):v=H_(),I={baseLanes:I.baseLanes|u,cachePool:v}),d.memoizedState=I,d.childLanes=pg(s,S,u),o.memoizedState=hg,Qu(s.child,d)):(ys(o),u=s.child,s=u.sibling,u=xr(u,{mode:"visible",children:d.children}),u.return=o,u.sibling=null,s!==null&&(S=o.deletions,S===null?(o.deletions=[s],o.flags|=16):S.push(s)),o.child=u,o.memoizedState=null,u)}function mg(s,o){return o=wh({mode:"visible",children:o},s.mode),o.return=s,s.child=o}function wh(s,o){return s=Gn(22,s,null,o),s.lanes=0,s}function gg(s,o,u){return Vo(o,s.child,null,u),s=mg(o,o.pendingProps.children),s.flags|=2,o.memoizedState=null,s}function iT(s,o,u){s.lanes|=o;var d=s.alternate;d!==null&&(d.lanes|=o),Dm(s.return,o,u)}function yg(s,o,u,d,v,E){var S=s.memoizedState;S===null?s.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:d,tail:u,tailMode:v,treeForkCount:E}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=d,S.tail=u,S.tailMode=v,S.treeForkCount=E)}function rT(s,o,u){var d=o.pendingProps,v=d.revealOrder,E=d.tail;d=d.children;var S=Nt.current,I=(S&2)!==0;if(I?(S=S&1|2,o.flags|=128):S&=1,pe(Nt,S),ln(s,o,d,u),d=Ke?Ou:0,!I&&s!==null&&(s.flags&128)!==0)e:for(s=o.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&iT(s,u,o);else if(s.tag===19)iT(s,u,o);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)s=u.alternate,s!==null&&fh(s)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),yg(o,!1,v,u,E,d);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(s=v.alternate,s!==null&&fh(s)===null){o.child=v;break}s=v.sibling,v.sibling=u,u=v,v=s}yg(o,!0,u,null,E,d);break;case"together":yg(o,!1,null,null,void 0,d);break;default:o.memoizedState=null}return o.child}function Cr(s,o,u){if(s!==null&&(o.dependencies=s.dependencies),Ts|=o.lanes,(u&o.childLanes)===0)if(s!==null){if(qa(s,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(s!==null&&o.child!==s.child)throw Error(i(153));if(o.child!==null){for(s=o.child,u=xr(s,s.pendingProps),o.child=u,u.return=o;s.sibling!==null;)s=s.sibling,u=u.sibling=xr(s,s.pendingProps),u.return=o;u.sibling=null}return o.child}function vg(s,o){return(s.lanes&o)!==0?!0:(s=s.dependencies,!!(s!==null&&sh(s)))}function h2(s,o,u){switch(o.tag){case 3:It(o,o.stateNode.containerInfo),fs(o,Ft,s.memoizedState.cache),Ro();break;case 27:case 5:lo(o);break;case 4:It(o,o.stateNode.containerInfo);break;case 10:fs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,Bm(o),null;break;case 13:var d=o.memoizedState;if(d!==null)return d.dehydrated!==null?(ys(o),o.flags|=128,null):(u&o.child.childLanes)!==0?nT(s,o,u):(ys(o),s=Cr(s,o,u),s!==null?s.sibling:null);ys(o);break;case 19:var v=(s.flags&128)!==0;if(d=(u&o.childLanes)!==0,d||(qa(s,o,u,!1),d=(u&o.childLanes)!==0),v){if(d)return rT(s,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),pe(Nt,Nt.current),d)break;return null;case 22:return o.lanes=0,QE(s,o,u,o.pendingProps);case 24:fs(o,Ft,s.memoizedState.cache)}return Cr(s,o,u)}function sT(s,o,u){if(s!==null)if(s.memoizedProps!==o.pendingProps)qt=!0;else{if(!vg(s,u)&&(o.flags&128)===0)return qt=!1,h2(s,o,u);qt=(s.flags&131072)!==0}else qt=!1,Ke&&(o.flags&1048576)!==0&&O_(o,Ou,o.index);switch(o.lanes=0,o.tag){case 16:e:{var d=o.pendingProps;if(s=Po(o.elementType),o.type=s,typeof s=="function")bm(s)?(d=Oo(s,d),o.tag=1,o=eT(null,o,s,d,u)):(o.tag=0,o=dg(null,o,s,d,u));else{if(s!=null){var v=s.$$typeof;if(v===Z){o.tag=11,o=KE(null,o,s,d,u);break e}else if(v===R){o.tag=14,o=JE(null,o,s,d,u);break e}}throw o=Ee(s)||s,Error(i(306,o,""))}}return o;case 0:return dg(s,o,o.type,o.pendingProps,u);case 1:return d=o.type,v=Oo(d,o.pendingProps),eT(s,o,d,v,u);case 3:e:{if(It(o,o.stateNode.containerInfo),s===null)throw Error(i(387));d=o.pendingProps;var E=o.memoizedState;v=E.element,Um(s,o),ju(o,d,null,u);var S=o.memoizedState;if(d=S.cache,fs(o,Ft,d),d!==E.cache&&Mm(o,[Ft],u,!0),Hu(),d=S.element,E.isDehydrated)if(E={element:d,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=tT(s,o,d,u);break e}else if(d!==v){v=ni(Error(i(424)),o),Uu(v),o=tT(s,o,d,u);break e}else{switch(s=o.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(mt=ai(s.firstChild),on=o,Ke=!0,ds=null,si=!0,u=Q_(o,null,d,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if(Ro(),d===v){o=Cr(s,o,u);break e}ln(s,o,d,u)}o=o.child}return o;case 26:return Sh(s,o),s===null?(u=gx(o.type,null,o.pendingProps,null))?o.memoizedState=u:Ke||(u=o.type,s=o.pendingProps,d=zh(j.current).createElement(u),d[Ot]=o,d[Wt]=s,un(d,u,s),Ut(d),o.stateNode=d):o.memoizedState=gx(o.type,s.memoizedProps,o.pendingProps,s.memoizedState),null;case 27:return lo(o),s===null&&Ke&&(d=o.stateNode=fx(o.type,o.pendingProps,j.current),on=o,si=!0,v=mt,As(o.type)?(Wg=v,mt=ai(d.firstChild)):mt=v),ln(s,o,o.pendingProps.children,u),Sh(s,o),s===null&&(o.flags|=4194304),o.child;case 5:return s===null&&Ke&&((v=d=mt)&&(d=q2(d,o.type,o.pendingProps,si),d!==null?(o.stateNode=d,on=o,mt=ai(d.firstChild),si=!1,v=!0):v=!1),v||hs(o)),lo(o),v=o.type,E=o.pendingProps,S=s!==null?s.memoizedProps:null,d=E.children,$g(v,E)?d=null:S!==null&&$g(v,S)&&(o.flags|=32),o.memoizedState!==null&&(v=jm(s,o,i2,null,null,u),dc._currentValue=v),Sh(s,o),ln(s,o,d,u),o.child;case 6:return s===null&&Ke&&((s=u=mt)&&(u=B2(u,o.pendingProps,si),u!==null?(o.stateNode=u,on=o,mt=null,s=!0):s=!1),s||hs(o)),null;case 13:return nT(s,o,u);case 4:return It(o,o.stateNode.containerInfo),d=o.pendingProps,s===null?o.child=Vo(o,null,d,u):ln(s,o,d,u),o.child;case 11:return KE(s,o,o.type,o.pendingProps,u);case 7:return ln(s,o,o.pendingProps,u),o.child;case 8:return ln(s,o,o.pendingProps.children,u),o.child;case 12:return ln(s,o,o.pendingProps.children,u),o.child;case 10:return d=o.pendingProps,fs(o,o.type,d.value),ln(s,o,d.children,u),o.child;case 9:return v=o.type._context,d=o.pendingProps.children,Do(o),v=an(v),d=d(v),o.flags|=1,ln(s,o,d,u),o.child;case 14:return JE(s,o,o.type,o.pendingProps,u);case 15:return YE(s,o,o.type,o.pendingProps,u);case 19:return rT(s,o,u);case 31:return d2(s,o,u);case 22:return QE(s,o,u,o.pendingProps);case 24:return Do(o),d=an(Ft),s===null?(v=Vm(),v===null&&(v=ft,E=Pm(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=u),v=E),o.memoizedState={parent:d,cache:v},Om(o),fs(o,Ft,v)):((s.lanes&u)!==0&&(Um(s,o),ju(o,null,null,u),Hu()),v=s.memoizedState,E=o.memoizedState,v.parent!==d?(v={parent:d,cache:d},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),fs(o,Ft,d)):(d=E.cache,fs(o,Ft,d),d!==v.cache&&Mm(o,[Ft],u,!0))),ln(s,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Rr(s){s.flags|=4}function _g(s,o,u,d,v){if((o=(s.mode&32)!==0)&&(o=!1),o){if(s.flags|=16777216,(v&335544128)===v)if(s.stateNode.complete)s.flags|=8192;else if(MT())s.flags|=8192;else throw ko=uh,Lm}else s.flags&=-16777217}function oT(s,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!Tx(o))if(MT())s.flags|=8192;else throw ko=uh,Lm}function Ah(s,o){o!==null&&(s.flags|=4),s.flags&16384&&(o=s.tag!==22?Md():536870912,s.lanes|=o,el|=o)}function Wu(s,o){if(!Ke)switch(s.tailMode){case"hidden":o=s.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?o||s.tail===null?s.tail=null:s.tail.sibling=null:d.sibling=null}}function gt(s){var o=s.alternate!==null&&s.alternate.child===s.child,u=0,d=0;if(o)for(var v=s.child;v!==null;)u|=v.lanes|v.childLanes,d|=v.subtreeFlags&65011712,d|=v.flags&65011712,v.return=s,v=v.sibling;else for(v=s.child;v!==null;)u|=v.lanes|v.childLanes,d|=v.subtreeFlags,d|=v.flags,v.return=s,v=v.sibling;return s.subtreeFlags|=d,s.childLanes=u,o}function f2(s,o,u){var d=o.pendingProps;switch(Im(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(o),null;case 1:return gt(o),null;case 3:return u=o.stateNode,d=null,s!==null&&(d=s.memoizedState.cache),o.memoizedState.cache!==d&&(o.flags|=2048),wr(Ft),vt(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(s===null||s.child===null)&&(za(o)?Rr(o):s===null||s.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Rm())),gt(o),null;case 26:var v=o.type,E=o.memoizedState;return s===null?(Rr(o),E!==null?(gt(o),oT(o,E)):(gt(o),_g(o,v,null,d,u))):E?E!==s.memoizedState?(Rr(o),gt(o),oT(o,E)):(gt(o),o.flags&=-16777217):(s=s.memoizedProps,s!==d&&Rr(o),gt(o),_g(o,v,s,d,u)),null;case 27:if(_a(o),u=j.current,v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==d&&Rr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return gt(o),null}s=ve.current,za(o)?G_(o):(s=fx(v,d,u),o.stateNode=s,Rr(o))}return gt(o),null;case 5:if(_a(o),v=o.type,s!==null&&o.stateNode!=null)s.memoizedProps!==d&&Rr(o);else{if(!d){if(o.stateNode===null)throw Error(i(166));return gt(o),null}if(E=ve.current,za(o))G_(o);else{var S=zh(j.current);switch(E){case 1:E=S.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:E=S.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":E=S.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":E=S.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":E=S.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof d.is=="string"?S.createElement("select",{is:d.is}):S.createElement("select"),d.multiple?E.multiple=!0:d.size&&(E.size=d.size);break;default:E=typeof d.is=="string"?S.createElement(v,{is:d.is}):S.createElement(v)}}E[Ot]=o,E[Wt]=d;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)E.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=E;e:switch(un(E,v,d),v){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}d&&Rr(o)}}return gt(o),_g(o,o.type,s===null?null:s.memoizedProps,o.pendingProps,u),null;case 6:if(s&&o.stateNode!=null)s.memoizedProps!==d&&Rr(o);else{if(typeof d!="string"&&o.stateNode===null)throw Error(i(166));if(s=j.current,za(o)){if(s=o.stateNode,u=o.memoizedProps,d=null,v=on,v!==null)switch(v.tag){case 27:case 5:d=v.memoizedProps}s[Ot]=o,s=!!(s.nodeValue===u||d!==null&&d.suppressHydrationWarning===!0||nx(s.nodeValue,u)),s||hs(o,!0)}else s=zh(s).createTextNode(d),s[Ot]=o,o.stateNode=s}return gt(o),null;case 31:if(u=o.memoizedState,s===null||s.memoizedState!==null){if(d=za(o),u!==null){if(s===null){if(!d)throw Error(i(318));if(s=o.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(557));s[Ot]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;gt(o),s=!1}else u=Rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=u),s=!0;if(!s)return o.flags&256?(zn(o),o):(zn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return gt(o),null;case 13:if(d=o.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(v=za(o),d!==null&&d.dehydrated!==null){if(s===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[Ot]=o}else Ro(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;gt(o),v=!1}else v=Rm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(zn(o),o):(zn(o),null)}return zn(o),(o.flags&128)!==0?(o.lanes=u,o):(u=d!==null,s=s!==null&&s.memoizedState!==null,u&&(d=o.child,v=null,d.alternate!==null&&d.alternate.memoizedState!==null&&d.alternate.memoizedState.cachePool!==null&&(v=d.alternate.memoizedState.cachePool.pool),E=null,d.memoizedState!==null&&d.memoizedState.cachePool!==null&&(E=d.memoizedState.cachePool.pool),E!==v&&(d.flags|=2048)),u!==s&&u&&(o.child.flags|=8192),Ah(o,o.updateQueue),gt(o),null);case 4:return vt(),s===null&&zg(o.stateNode.containerInfo),gt(o),null;case 10:return wr(o.type),gt(o),null;case 19:if(se(Nt),d=o.memoizedState,d===null)return gt(o),null;if(v=(o.flags&128)!==0,E=d.rendering,E===null)if(v)Wu(d,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=o.child;s!==null;){if(E=fh(s),E!==null){for(o.flags|=128,Wu(d,!1),s=E.updateQueue,o.updateQueue=s,Ah(o,s),o.subtreeFlags=0,s=u,u=o.child;u!==null;)k_(u,s),u=u.sibling;return pe(Nt,Nt.current&1|2),Ke&&br(o,d.treeForkCount),o.child}s=s.sibling}d.tail!==null&&vn()>Dh&&(o.flags|=128,v=!0,Wu(d,!1),o.lanes=4194304)}else{if(!v)if(s=fh(E),s!==null){if(o.flags|=128,v=!0,s=s.updateQueue,o.updateQueue=s,Ah(o,s),Wu(d,!0),d.tail===null&&d.tailMode==="hidden"&&!E.alternate&&!Ke)return gt(o),null}else 2*vn()-d.renderingStartTime>Dh&&u!==536870912&&(o.flags|=128,v=!0,Wu(d,!1),o.lanes=4194304);d.isBackwards?(E.sibling=o.child,o.child=E):(s=d.last,s!==null?s.sibling=E:o.child=E,d.last=E)}return d.tail!==null?(s=d.tail,d.rendering=s,d.tail=s.sibling,d.renderingStartTime=vn(),s.sibling=null,u=Nt.current,pe(Nt,v?u&1|2:u&1),Ke&&br(o,d.treeForkCount),s):(gt(o),null);case 22:case 23:return zn(o),qm(),d=o.memoizedState!==null,s!==null?s.memoizedState!==null!==d&&(o.flags|=8192):d&&(o.flags|=8192),d?(u&536870912)!==0&&(o.flags&128)===0&&(gt(o),o.subtreeFlags&6&&(o.flags|=8192)):gt(o),u=o.updateQueue,u!==null&&Ah(o,u.retryQueue),u=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),d=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(d=o.memoizedState.cachePool.pool),d!==u&&(o.flags|=2048),s!==null&&se(Mo),null;case 24:return u=null,s!==null&&(u=s.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),wr(Ft),gt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function p2(s,o){switch(Im(o),o.tag){case 1:return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 3:return wr(Ft),vt(),s=o.flags,(s&65536)!==0&&(s&128)===0?(o.flags=s&-65537|128,o):null;case 26:case 27:case 5:return _a(o),null;case 31:if(o.memoizedState!==null){if(zn(o),o.alternate===null)throw Error(i(340));Ro()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 13:if(zn(o),s=o.memoizedState,s!==null&&s.dehydrated!==null){if(o.alternate===null)throw Error(i(340));Ro()}return s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 19:return se(Nt),null;case 4:return vt(),null;case 10:return wr(o.type),null;case 22:case 23:return zn(o),qm(),s!==null&&se(Mo),s=o.flags,s&65536?(o.flags=s&-65537|128,o):null;case 24:return wr(Ft),null;case 25:return null;default:return null}}function aT(s,o){switch(Im(o),o.tag){case 3:wr(Ft),vt();break;case 26:case 27:case 5:_a(o);break;case 4:vt();break;case 31:o.memoizedState!==null&&zn(o);break;case 13:zn(o);break;case 19:se(Nt);break;case 10:wr(o.type);break;case 22:case 23:zn(o),qm(),s!==null&&se(Mo);break;case 24:wr(Ft)}}function Xu(s,o){try{var u=o.updateQueue,d=u!==null?u.lastEffect:null;if(d!==null){var v=d.next;u=v;do{if((u.tag&s)===s){d=void 0;var E=u.create,S=u.inst;d=E(),S.destroy=d}u=u.next}while(u!==v)}}catch(I){st(o,o.return,I)}}function _s(s,o,u){try{var d=o.updateQueue,v=d!==null?d.lastEffect:null;if(v!==null){var E=v.next;d=E;do{if((d.tag&s)===s){var S=d.inst,I=S.destroy;if(I!==void 0){S.destroy=void 0,v=o;var U=u,X=I;try{X()}catch(oe){st(v,U,oe)}}}d=d.next}while(d!==E)}}catch(oe){st(o,o.return,oe)}}function lT(s){var o=s.updateQueue;if(o!==null){var u=s.stateNode;try{X_(o,u)}catch(d){st(s,s.return,d)}}}function uT(s,o,u){u.props=Oo(s.type,s.memoizedProps),u.state=s.memoizedState;try{u.componentWillUnmount()}catch(d){st(s,o,d)}}function Zu(s,o){try{var u=s.ref;if(u!==null){switch(s.tag){case 26:case 27:case 5:var d=s.stateNode;break;case 30:d=s.stateNode;break;default:d=s.stateNode}typeof u=="function"?s.refCleanup=u(d):u.current=d}}catch(v){st(s,o,v)}}function rr(s,o){var u=s.ref,d=s.refCleanup;if(u!==null)if(typeof d=="function")try{d()}catch(v){st(s,o,v)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){st(s,o,v)}else u.current=null}function cT(s){var o=s.type,u=s.memoizedProps,d=s.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&d.focus();break e;case"img":u.src?d.src=u.src:u.srcSet&&(d.srcset=u.srcSet)}}catch(v){st(s,s.return,v)}}function Eg(s,o,u){try{var d=s.stateNode;L2(d,s.type,u,o),d[Wt]=o}catch(v){st(s,s.return,v)}}function dT(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&As(s.type)||s.tag===4}function Tg(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||dT(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&As(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function xg(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(s,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(s),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ti));else if(d!==4&&(d===27&&As(s.type)&&(u=s.stateNode,o=null),s=s.child,s!==null))for(xg(s,o,u),s=s.sibling;s!==null;)xg(s,o,u),s=s.sibling}function Ih(s,o,u){var d=s.tag;if(d===5||d===6)s=s.stateNode,o?u.insertBefore(s,o):u.appendChild(s);else if(d!==4&&(d===27&&As(s.type)&&(u=s.stateNode),s=s.child,s!==null))for(Ih(s,o,u),s=s.sibling;s!==null;)Ih(s,o,u),s=s.sibling}function hT(s){var o=s.stateNode,u=s.memoizedProps;try{for(var d=s.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);un(o,d,u),o[Ot]=s,o[Wt]=u}catch(E){st(s,s.return,E)}}var Nr=!1,Bt=!1,bg=!1,fT=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function m2(s,o){if(s=s.containerInfo,Hg=Jh,s=w_(s),gm(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var d=u.getSelection&&u.getSelection();if(d&&d.rangeCount!==0){u=d.anchorNode;var v=d.anchorOffset,E=d.focusNode;d=d.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var S=0,I=-1,U=-1,X=0,oe=0,ce=s,ee=null;t:for(;;){for(var ne;ce!==u||v!==0&&ce.nodeType!==3||(I=S+v),ce!==E||d!==0&&ce.nodeType!==3||(U=S+d),ce.nodeType===3&&(S+=ce.nodeValue.length),(ne=ce.firstChild)!==null;)ee=ce,ce=ne;for(;;){if(ce===s)break t;if(ee===u&&++X===v&&(I=S),ee===E&&++oe===d&&(U=S),(ne=ce.nextSibling)!==null)break;ce=ee,ee=ce.parentNode}ce=ne}u=I===-1||U===-1?null:{start:I,end:U}}else u=null}u=u||{start:0,end:0}}else u=null;for(jg={focusedElem:s,selectionRange:u},Jh=!1,Zt=o;Zt!==null;)if(o=Zt,s=o.child,(o.subtreeFlags&1028)!==0&&s!==null)s.return=o,Zt=s;else for(;Zt!==null;){switch(o=Zt,E=o.alternate,s=o.flags,o.tag){case 0:if((s&4)!==0&&(s=o.updateQueue,s=s!==null?s.events:null,s!==null))for(u=0;u<s.length;u++)v=s[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((s&1024)!==0&&E!==null){s=void 0,u=o,v=E.memoizedProps,E=E.memoizedState,d=u.stateNode;try{var be=Oo(u.type,v);s=d.getSnapshotBeforeUpdate(be,E),d.__reactInternalSnapshotBeforeUpdate=s}catch(Ne){st(u,u.return,Ne)}}break;case 3:if((s&1024)!==0){if(s=o.stateNode.containerInfo,u=s.nodeType,u===9)Jg(s);else if(u===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":Jg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=o.sibling,s!==null){s.return=o.return,Zt=s;break}Zt=o.return}}function pT(s,o,u){var d=u.flags;switch(u.tag){case 0:case 11:case 15:Mr(s,u),d&4&&Xu(5,u);break;case 1:if(Mr(s,u),d&4)if(s=u.stateNode,o===null)try{s.componentDidMount()}catch(S){st(u,u.return,S)}else{var v=Oo(u.type,o.memoizedProps);o=o.memoizedState;try{s.componentDidUpdate(v,o,s.__reactInternalSnapshotBeforeUpdate)}catch(S){st(u,u.return,S)}}d&64&&lT(u),d&512&&Zu(u,u.return);break;case 3:if(Mr(s,u),d&64&&(s=u.updateQueue,s!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{X_(s,o)}catch(S){st(u,u.return,S)}}break;case 27:o===null&&d&4&&hT(u);case 26:case 5:Mr(s,u),o===null&&d&4&&cT(u),d&512&&Zu(u,u.return);break;case 12:Mr(s,u);break;case 31:Mr(s,u),d&4&&yT(s,u);break;case 13:Mr(s,u),d&4&&vT(s,u),d&64&&(s=u.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(u=S2.bind(null,u),H2(s,u))));break;case 22:if(d=u.memoizedState!==null||Nr,!d){o=o!==null&&o.memoizedState!==null||Bt,v=Nr;var E=Bt;Nr=d,(Bt=o)&&!E?Pr(s,u,(u.subtreeFlags&8772)!==0):Mr(s,u),Nr=v,Bt=E}break;case 30:break;default:Mr(s,u)}}function mT(s){var o=s.alternate;o!==null&&(s.alternate=null,mT(o)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(o=s.stateNode,o!==null&&Sa(o)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Et=null,Cn=!1;function Dr(s,o,u){for(u=u.child;u!==null;)gT(s,o,u),u=u.sibling}function gT(s,o,u){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(yi,u)}catch{}switch(u.tag){case 26:Bt||rr(u,o),Dr(s,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Bt||rr(u,o);var d=Et,v=Cn;As(u.type)&&(Et=u.stateNode,Cn=!1),Dr(s,o,u),lc(u.stateNode),Et=d,Cn=v;break;case 5:Bt||rr(u,o);case 6:if(d=Et,v=Cn,Et=null,Dr(s,o,u),Et=d,Cn=v,Et!==null)if(Cn)try{(Et.nodeType===9?Et.body:Et.nodeName==="HTML"?Et.ownerDocument.body:Et).removeChild(u.stateNode)}catch(E){st(u,o,E)}else try{Et.removeChild(u.stateNode)}catch(E){st(u,o,E)}break;case 18:Et!==null&&(Cn?(s=Et,lx(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,u.stateNode),ll(s)):lx(Et,u.stateNode));break;case 4:d=Et,v=Cn,Et=u.stateNode.containerInfo,Cn=!0,Dr(s,o,u),Et=d,Cn=v;break;case 0:case 11:case 14:case 15:_s(2,u,o),Bt||_s(4,u,o),Dr(s,o,u);break;case 1:Bt||(rr(u,o),d=u.stateNode,typeof d.componentWillUnmount=="function"&&uT(u,o,d)),Dr(s,o,u);break;case 21:Dr(s,o,u);break;case 22:Bt=(d=Bt)||u.memoizedState!==null,Dr(s,o,u),Bt=d;break;default:Dr(s,o,u)}}function yT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null))){s=s.dehydrated;try{ll(s)}catch(u){st(o,o.return,u)}}}function vT(s,o){if(o.memoizedState===null&&(s=o.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{ll(s)}catch(u){st(o,o.return,u)}}function g2(s){switch(s.tag){case 31:case 13:case 19:var o=s.stateNode;return o===null&&(o=s.stateNode=new fT),o;case 22:return s=s.stateNode,o=s._retryCache,o===null&&(o=s._retryCache=new fT),o;default:throw Error(i(435,s.tag))}}function Ch(s,o){var u=g2(s);o.forEach(function(d){if(!u.has(d)){u.add(d);var v=w2.bind(null,s,d);d.then(v,v)}})}function Rn(s,o){var u=o.deletions;if(u!==null)for(var d=0;d<u.length;d++){var v=u[d],E=s,S=o,I=S;e:for(;I!==null;){switch(I.tag){case 27:if(As(I.type)){Et=I.stateNode,Cn=!1;break e}break;case 5:Et=I.stateNode,Cn=!1;break e;case 3:case 4:Et=I.stateNode.containerInfo,Cn=!0;break e}I=I.return}if(Et===null)throw Error(i(160));gT(E,S,v),Et=null,Cn=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)_T(o,s),o=o.sibling}var Ii=null;function _T(s,o){var u=s.alternate,d=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Rn(o,s),Nn(s),d&4&&(_s(3,s,s.return),Xu(3,s),_s(5,s,s.return));break;case 1:Rn(o,s),Nn(s),d&512&&(Bt||u===null||rr(u,u.return)),d&64&&Nr&&(s=s.updateQueue,s!==null&&(d=s.callbacks,d!==null&&(u=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=u===null?d:u.concat(d))));break;case 26:var v=Ii;if(Rn(o,s),Nn(s),d&512&&(Bt||u===null||rr(u,u.return)),d&4){var E=u!==null?u.memoizedState:null;if(d=s.memoizedState,u===null)if(d===null)if(s.stateNode===null){e:{d=s.type,u=s.memoizedProps,v=v.ownerDocument||v;t:switch(d){case"title":E=v.getElementsByTagName("title")[0],(!E||E[Hi]||E[Ot]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(d),v.head.insertBefore(E,v.querySelector("head > title"))),un(E,d,u),E[Ot]=s,Ut(E),d=E;break e;case"link":var S=_x("link","href",v).get(d+(u.href||""));if(S){for(var I=0;I<S.length;I++)if(E=S[I],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){S.splice(I,1);break t}}E=v.createElement(d),un(E,d,u),v.head.appendChild(E);break;case"meta":if(S=_x("meta","content",v).get(d+(u.content||""))){for(I=0;I<S.length;I++)if(E=S[I],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){S.splice(I,1);break t}}E=v.createElement(d),un(E,d,u),v.head.appendChild(E);break;default:throw Error(i(468,d))}E[Ot]=s,Ut(E),d=E}s.stateNode=d}else Ex(v,s.type,s.stateNode);else s.stateNode=vx(v,d,s.memoizedProps);else E!==d?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,d===null?Ex(v,s.type,s.stateNode):vx(v,d,s.memoizedProps)):d===null&&s.stateNode!==null&&Eg(s,s.memoizedProps,u.memoizedProps)}break;case 27:Rn(o,s),Nn(s),d&512&&(Bt||u===null||rr(u,u.return)),u!==null&&d&4&&Eg(s,s.memoizedProps,u.memoizedProps);break;case 5:if(Rn(o,s),Nn(s),d&512&&(Bt||u===null||rr(u,u.return)),s.flags&32){v=s.stateNode;try{In(v,"")}catch(be){st(s,s.return,be)}}d&4&&s.stateNode!=null&&(v=s.memoizedProps,Eg(s,v,u!==null?u.memoizedProps:v)),d&1024&&(bg=!0);break;case 6:if(Rn(o,s),Nn(s),d&4){if(s.stateNode===null)throw Error(i(162));d=s.memoizedProps,u=s.stateNode;try{u.nodeValue=d}catch(be){st(s,s.return,be)}}break;case 3:if(Hh=null,v=Ii,Ii=qh(o.containerInfo),Rn(o,s),Ii=v,Nn(s),d&4&&u!==null&&u.memoizedState.isDehydrated)try{ll(o.containerInfo)}catch(be){st(s,s.return,be)}bg&&(bg=!1,ET(s));break;case 4:d=Ii,Ii=qh(s.stateNode.containerInfo),Rn(o,s),Nn(s),Ii=d;break;case 12:Rn(o,s),Nn(s);break;case 31:Rn(o,s),Nn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ch(s,d)));break;case 13:Rn(o,s),Nn(s),s.child.flags&8192&&s.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(Nh=vn()),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ch(s,d)));break;case 22:v=s.memoizedState!==null;var U=u!==null&&u.memoizedState!==null,X=Nr,oe=Bt;if(Nr=X||v,Bt=oe||U,Rn(o,s),Bt=oe,Nr=X,Nn(s),d&8192)e:for(o=s.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||U||Nr||Bt||Uo(s)),u=null,o=s;;){if(o.tag===5||o.tag===26){if(u===null){U=u=o;try{if(E=U.stateNode,v)S=E.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{I=U.stateNode;var ce=U.memoizedProps.style,ee=ce!=null&&ce.hasOwnProperty("display")?ce.display:null;I.style.display=ee==null||typeof ee=="boolean"?"":(""+ee).trim()}}catch(be){st(U,U.return,be)}}}else if(o.tag===6){if(u===null){U=o;try{U.stateNode.nodeValue=v?"":U.memoizedProps}catch(be){st(U,U.return,be)}}}else if(o.tag===18){if(u===null){U=o;try{var ne=U.stateNode;v?ux(ne,!0):ux(U.stateNode,!1)}catch(be){st(U,U.return,be)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===s)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}d&4&&(d=s.updateQueue,d!==null&&(u=d.retryQueue,u!==null&&(d.retryQueue=null,Ch(s,u))));break;case 19:Rn(o,s),Nn(s),d&4&&(d=s.updateQueue,d!==null&&(s.updateQueue=null,Ch(s,d)));break;case 30:break;case 21:break;default:Rn(o,s),Nn(s)}}function Nn(s){var o=s.flags;if(o&2){try{for(var u,d=s.return;d!==null;){if(dT(d)){u=d;break}d=d.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,E=Tg(s);Ih(s,E,v);break;case 5:var S=u.stateNode;u.flags&32&&(In(S,""),u.flags&=-33);var I=Tg(s);Ih(s,I,S);break;case 3:case 4:var U=u.stateNode.containerInfo,X=Tg(s);xg(s,X,U);break;default:throw Error(i(161))}}catch(oe){st(s,s.return,oe)}s.flags&=-3}o&4096&&(s.flags&=-4097)}function ET(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var o=s;ET(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),s=s.sibling}}function Mr(s,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)pT(s,o.alternate,o),o=o.sibling}function Uo(s){for(s=s.child;s!==null;){var o=s;switch(o.tag){case 0:case 11:case 14:case 15:_s(4,o,o.return),Uo(o);break;case 1:rr(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&uT(o,o.return,u),Uo(o);break;case 27:lc(o.stateNode);case 26:case 5:rr(o,o.return),Uo(o);break;case 22:o.memoizedState===null&&Uo(o);break;case 30:Uo(o);break;default:Uo(o)}s=s.sibling}}function Pr(s,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var d=o.alternate,v=s,E=o,S=E.flags;switch(E.tag){case 0:case 11:case 15:Pr(v,E,u),Xu(4,E);break;case 1:if(Pr(v,E,u),d=E,v=d.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(X){st(d,d.return,X)}if(d=E,v=d.updateQueue,v!==null){var I=d.stateNode;try{var U=v.shared.hiddenCallbacks;if(U!==null)for(v.shared.hiddenCallbacks=null,v=0;v<U.length;v++)W_(U[v],I)}catch(X){st(d,d.return,X)}}u&&S&64&&lT(E),Zu(E,E.return);break;case 27:hT(E);case 26:case 5:Pr(v,E,u),u&&d===null&&S&4&&cT(E),Zu(E,E.return);break;case 12:Pr(v,E,u);break;case 31:Pr(v,E,u),u&&S&4&&yT(v,E);break;case 13:Pr(v,E,u),u&&S&4&&vT(v,E);break;case 22:E.memoizedState===null&&Pr(v,E,u),Zu(E,E.return);break;case 30:break;default:Pr(v,E,u)}o=o.sibling}}function Sg(s,o){var u=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(u=s.memoizedState.cachePool.pool),s=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(s=o.memoizedState.cachePool.pool),s!==u&&(s!=null&&s.refCount++,u!=null&&Gu(u))}function wg(s,o){s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Gu(s))}function Ci(s,o,u,d){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)TT(s,o,u,d),o=o.sibling}function TT(s,o,u,d){var v=o.flags;switch(o.tag){case 0:case 11:case 15:Ci(s,o,u,d),v&2048&&Xu(9,o);break;case 1:Ci(s,o,u,d);break;case 3:Ci(s,o,u,d),v&2048&&(s=null,o.alternate!==null&&(s=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==s&&(o.refCount++,s!=null&&Gu(s)));break;case 12:if(v&2048){Ci(s,o,u,d),s=o.stateNode;try{var E=o.memoizedProps,S=E.id,I=E.onPostCommit;typeof I=="function"&&I(S,o.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(U){st(o,o.return,U)}}else Ci(s,o,u,d);break;case 31:Ci(s,o,u,d);break;case 13:Ci(s,o,u,d);break;case 23:break;case 22:E=o.stateNode,S=o.alternate,o.memoizedState!==null?E._visibility&2?Ci(s,o,u,d):ec(s,o):E._visibility&2?Ci(s,o,u,d):(E._visibility|=2,Wa(s,o,u,d,(o.subtreeFlags&10256)!==0||!1)),v&2048&&Sg(S,o);break;case 24:Ci(s,o,u,d),v&2048&&wg(o.alternate,o);break;default:Ci(s,o,u,d)}}function Wa(s,o,u,d,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=s,S=o,I=u,U=d,X=S.flags;switch(S.tag){case 0:case 11:case 15:Wa(E,S,I,U,v),Xu(8,S);break;case 23:break;case 22:var oe=S.stateNode;S.memoizedState!==null?oe._visibility&2?Wa(E,S,I,U,v):ec(E,S):(oe._visibility|=2,Wa(E,S,I,U,v)),v&&X&2048&&Sg(S.alternate,S);break;case 24:Wa(E,S,I,U,v),v&&X&2048&&wg(S.alternate,S);break;default:Wa(E,S,I,U,v)}o=o.sibling}}function ec(s,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=s,d=o,v=d.flags;switch(d.tag){case 22:ec(u,d),v&2048&&Sg(d.alternate,d);break;case 24:ec(u,d),v&2048&&wg(d.alternate,d);break;default:ec(u,d)}o=o.sibling}}var tc=8192;function Xa(s,o,u){if(s.subtreeFlags&tc)for(s=s.child;s!==null;)xT(s,o,u),s=s.sibling}function xT(s,o,u){switch(s.tag){case 26:Xa(s,o,u),s.flags&tc&&s.memoizedState!==null&&nD(u,Ii,s.memoizedState,s.memoizedProps);break;case 5:Xa(s,o,u);break;case 3:case 4:var d=Ii;Ii=qh(s.stateNode.containerInfo),Xa(s,o,u),Ii=d;break;case 22:s.memoizedState===null&&(d=s.alternate,d!==null&&d.memoizedState!==null?(d=tc,tc=16777216,Xa(s,o,u),tc=d):Xa(s,o,u));break;default:Xa(s,o,u)}}function bT(s){var o=s.alternate;if(o!==null&&(s=o.child,s!==null)){o.child=null;do o=s.sibling,s.sibling=null,s=o;while(s!==null)}}function nc(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Zt=d,wT(d,s)}bT(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)ST(s),s=s.sibling}function ST(s){switch(s.tag){case 0:case 11:case 15:nc(s),s.flags&2048&&_s(9,s,s.return);break;case 3:nc(s);break;case 12:nc(s);break;case 22:var o=s.stateNode;s.memoizedState!==null&&o._visibility&2&&(s.return===null||s.return.tag!==13)?(o._visibility&=-3,Rh(s)):nc(s);break;default:nc(s)}}function Rh(s){var o=s.deletions;if((s.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var d=o[u];Zt=d,wT(d,s)}bT(s)}for(s=s.child;s!==null;){switch(o=s,o.tag){case 0:case 11:case 15:_s(8,o,o.return),Rh(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Rh(o));break;default:Rh(o)}s=s.sibling}}function wT(s,o){for(;Zt!==null;){var u=Zt;switch(u.tag){case 0:case 11:case 15:_s(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var d=u.memoizedState.cachePool.pool;d!=null&&d.refCount++}break;case 24:Gu(u.memoizedState.cache)}if(d=u.child,d!==null)d.return=u,Zt=d;else e:for(u=s;Zt!==null;){d=Zt;var v=d.sibling,E=d.return;if(mT(d),d===u){Zt=null;break e}if(v!==null){v.return=E,Zt=v;break e}Zt=E}}}var y2={getCacheForType:function(s){var o=an(Ft),u=o.data.get(s);return u===void 0&&(u=s(),o.data.set(s,u)),u},cacheSignal:function(){return an(Ft).controller.signal}},v2=typeof WeakMap=="function"?WeakMap:Map,et=0,ft=null,qe=null,He=0,rt=0,qn=null,Es=!1,Za=!1,Ag=!1,kr=0,wt=0,Ts=0,Go=0,Ig=0,Bn=0,el=0,ic=null,Dn=null,Cg=!1,Nh=0,AT=0,Dh=1/0,Mh=null,xs=null,Jt=0,bs=null,tl=null,Vr=0,Rg=0,Ng=null,IT=null,rc=0,Dg=null;function Hn(){return(et&2)!==0&&He!==0?He&-He:G.T!==null?Og():Pd()}function CT(){if(Bn===0)if((He&536870912)===0||Ke){var s=ho;ho<<=1,(ho&3932160)===0&&(ho=262144),Bn=s}else Bn=536870912;return s=Fn.current,s!==null&&(s.flags|=32),Bn}function Mn(s,o,u){(s===ft&&(rt===2||rt===9)||s.cancelPendingCommit!==null)&&(nl(s,0),Ss(s,He,Bn,!1)),fo(s,u),((et&2)===0||s!==ft)&&(s===ft&&((et&2)===0&&(Go|=u),wt===4&&Ss(s,He,Bn,!1)),sr(s))}function RT(s,o,u){if((et&6)!==0)throw Error(i(327));var d=!u&&(o&127)===0&&(o&s.expiredLanes)===0||vi(s,o),v=d?T2(s,o):Pg(s,o,!0),E=d;do{if(v===0){Za&&!d&&Ss(s,o,0,!1);break}else{if(u=s.current.alternate,E&&!_2(u)){v=Pg(s,o,!1),E=!1;continue}if(v===2){if(E=o,s.errorRecoveryDisabledLanes&E)var S=0;else S=s.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var I=s;v=ic;var U=I.current.memoizedState.isDehydrated;if(U&&(nl(I,S).flags|=256),S=Pg(I,S,!1),S!==2){if(Ag&&!U){I.errorRecoveryDisabledLanes|=E,Go|=E,v=4;break e}E=Dn,Dn=v,E!==null&&(Dn===null?Dn=E:Dn.push.apply(Dn,E))}v=S}if(E=!1,v!==2)continue}}if(v===1){nl(s,0),Ss(s,o,0,!0);break}e:{switch(d=s,E=v,E){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:Ss(d,o,Bn,!Es);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=Nh+300-vn(),10<v)){if(Ss(d,o,Bn,!Es),zi(d,0,!0)!==0)break e;Vr=o,d.timeoutHandle=ox(NT.bind(null,d,u,Dn,Mh,Cg,o,Bn,Go,el,Es,E,"Throttled",-0,0),v);break e}NT(d,u,Dn,Mh,Cg,o,Bn,Go,el,Es,E,null,-0,0)}}break}while(!0);sr(s)}function NT(s,o,u,d,v,E,S,I,U,X,oe,ce,ee,ne){if(s.timeoutHandle=-1,ce=o.subtreeFlags,ce&8192||(ce&16785408)===16785408){ce={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ti},xT(o,E,ce);var be=(E&62914560)===E?Nh-vn():(E&4194048)===E?AT-vn():0;if(be=iD(ce,be),be!==null){Vr=E,s.cancelPendingCommit=be(UT.bind(null,s,o,E,u,d,v,S,I,U,oe,ce,null,ee,ne)),Ss(s,E,S,!X);return}}UT(s,o,E,u,d,v,S,I,U)}function _2(s){for(var o=s;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var d=0;d<u.length;d++){var v=u[d],E=v.getSnapshot;v=v.value;try{if(!Un(E(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===s)break;for(;o.sibling===null;){if(o.return===null||o.return===s)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Ss(s,o,u,d){o&=~Ig,o&=~Go,s.suspendedLanes|=o,s.pingedLanes&=~o,d&&(s.warmLanes|=o),d=s.expirationTimes;for(var v=o;0<v;){var E=31-Ct(v),S=1<<E;d[E]=-1,v&=~S}u!==0&&po(s,u,o)}function Ph(){return(et&6)===0?(sc(0),!1):!0}function Mg(){if(qe!==null){if(rt===0)var s=qe.return;else s=qe,Sr=No=null,Jm(s),$a=null,zu=0,s=qe;for(;s!==null;)aT(s.alternate,s),s=s.return;qe=null}}function nl(s,o){var u=s.timeoutHandle;u!==-1&&(s.timeoutHandle=-1,G2(u)),u=s.cancelPendingCommit,u!==null&&(s.cancelPendingCommit=null,u()),Vr=0,Mg(),ft=s,qe=u=xr(s.current,null),He=o,rt=0,qn=null,Es=!1,Za=vi(s,o),Ag=!1,el=Bn=Ig=Go=Ts=wt=0,Dn=ic=null,Cg=!1,(o&8)!==0&&(o|=o&32);var d=s.entangledLanes;if(d!==0)for(s=s.entanglements,d&=o;0<d;){var v=31-Ct(d),E=1<<v;o|=s[v],d&=~E}return kr=o,eh(),u}function DT(s,o){Ge=null,G.H=Yu,o===ja||o===lh?(o=K_(),rt=3):o===Lm?(o=K_(),rt=4):rt=o===cg?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,qn=o,qe===null&&(wt=1,xh(s,ni(o,s.current)))}function MT(){var s=Fn.current;return s===null?!0:(He&4194048)===He?oi===null:(He&62914560)===He||(He&536870912)!==0?s===oi:!1}function PT(){var s=G.H;return G.H=Yu,s===null?Yu:s}function kT(){var s=G.A;return G.A=y2,s}function kh(){wt=4,Es||(He&4194048)!==He&&Fn.current!==null||(Za=!0),(Ts&134217727)===0&&(Go&134217727)===0||ft===null||Ss(ft,He,Bn,!1)}function Pg(s,o,u){var d=et;et|=2;var v=PT(),E=kT();(ft!==s||He!==o)&&(Mh=null,nl(s,o)),o=!1;var S=wt;e:do try{if(rt!==0&&qe!==null){var I=qe,U=qn;switch(rt){case 8:Mg(),S=6;break e;case 3:case 2:case 9:case 6:Fn.current===null&&(o=!0);var X=rt;if(rt=0,qn=null,il(s,I,U,X),u&&Za){S=0;break e}break;default:X=rt,rt=0,qn=null,il(s,I,U,X)}}E2(),S=wt;break}catch(oe){DT(s,oe)}while(!0);return o&&s.shellSuspendCounter++,Sr=No=null,et=d,G.H=v,G.A=E,qe===null&&(ft=null,He=0,eh()),S}function E2(){for(;qe!==null;)VT(qe)}function T2(s,o){var u=et;et|=2;var d=PT(),v=kT();ft!==s||He!==o?(Mh=null,Dh=vn()+500,nl(s,o)):Za=vi(s,o);e:do try{if(rt!==0&&qe!==null){o=qe;var E=qn;t:switch(rt){case 1:rt=0,qn=null,il(s,o,E,1);break;case 2:case 9:if(j_(E)){rt=0,qn=null,LT(o);break}o=function(){rt!==2&&rt!==9||ft!==s||(rt=7),sr(s)},E.then(o,o);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:j_(E)?(rt=0,qn=null,LT(o)):(rt=0,qn=null,il(s,o,E,7));break;case 5:var S=null;switch(qe.tag){case 26:S=qe.memoizedState;case 5:case 27:var I=qe;if(S?Tx(S):I.stateNode.complete){rt=0,qn=null;var U=I.sibling;if(U!==null)qe=U;else{var X=I.return;X!==null?(qe=X,Vh(X)):qe=null}break t}}rt=0,qn=null,il(s,o,E,5);break;case 6:rt=0,qn=null,il(s,o,E,6);break;case 8:Mg(),wt=6;break e;default:throw Error(i(462))}}x2();break}catch(oe){DT(s,oe)}while(!0);return Sr=No=null,G.H=d,G.A=v,et=u,qe!==null?0:(ft=null,He=0,eh(),wt)}function x2(){for(;qe!==null&&!um();)VT(qe)}function VT(s){var o=sT(s.alternate,s,kr);s.memoizedProps=s.pendingProps,o===null?Vh(s):qe=o}function LT(s){var o=s,u=o.alternate;switch(o.tag){case 15:case 0:o=ZE(u,o,o.pendingProps,o.type,void 0,He);break;case 11:o=ZE(u,o,o.pendingProps,o.type.render,o.ref,He);break;case 5:Jm(o);default:aT(u,o),o=qe=k_(o,kr),o=sT(u,o,kr)}s.memoizedProps=s.pendingProps,o===null?Vh(s):qe=o}function il(s,o,u,d){Sr=No=null,Jm(o),$a=null,zu=0;var v=o.return;try{if(c2(s,v,o,u,He)){wt=1,xh(s,ni(u,s.current)),qe=null;return}}catch(E){if(v!==null)throw qe=v,E;wt=1,xh(s,ni(u,s.current)),qe=null;return}o.flags&32768?(Ke||d===1?s=!0:Za||(He&536870912)!==0?s=!1:(Es=s=!0,(d===2||d===9||d===3||d===6)&&(d=Fn.current,d!==null&&d.tag===13&&(d.flags|=16384))),OT(o,s)):Vh(o)}function Vh(s){var o=s;do{if((o.flags&32768)!==0){OT(o,Es);return}s=o.return;var u=f2(o.alternate,o,kr);if(u!==null){qe=u;return}if(o=o.sibling,o!==null){qe=o;return}qe=o=s}while(o!==null);wt===0&&(wt=5)}function OT(s,o){do{var u=p2(s.alternate,s);if(u!==null){u.flags&=32767,qe=u;return}if(u=s.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(s=s.sibling,s!==null)){qe=s;return}qe=s=u}while(s!==null);wt=6,qe=null}function UT(s,o,u,d,v,E,S,I,U){s.cancelPendingCommit=null;do Lh();while(Jt!==0);if((et&6)!==0)throw Error(i(327));if(o!==null){if(o===s.current)throw Error(i(177));if(E=o.lanes|o.childLanes,E|=Tm,hm(s,u,E,S,I,U),s===ft&&(qe=ft=null,He=0),tl=o,bs=s,Vr=u,Rg=E,Ng=v,IT=d,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,A2(es,function(){return BT(),null})):(s.callbackNode=null,s.callbackPriority=0),d=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||d){d=G.T,G.T=null,v=re.p,re.p=2,S=et,et|=4;try{m2(s,o,u)}finally{et=S,re.p=v,G.T=d}}Jt=1,GT(),FT(),zT()}}function GT(){if(Jt===1){Jt=0;var s=bs,o=tl,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=G.T,G.T=null;var d=re.p;re.p=2;var v=et;et|=4;try{_T(o,s);var E=jg,S=w_(s.containerInfo),I=E.focusedElem,U=E.selectionRange;if(S!==I&&I&&I.ownerDocument&&S_(I.ownerDocument.documentElement,I)){if(U!==null&&gm(I)){var X=U.start,oe=U.end;if(oe===void 0&&(oe=X),"selectionStart"in I)I.selectionStart=X,I.selectionEnd=Math.min(oe,I.value.length);else{var ce=I.ownerDocument||document,ee=ce&&ce.defaultView||window;if(ee.getSelection){var ne=ee.getSelection(),be=I.textContent.length,Ne=Math.min(U.start,be),dt=U.end===void 0?Ne:Math.min(U.end,be);!ne.extend&&Ne>dt&&(S=dt,dt=Ne,Ne=S);var K=b_(I,Ne),B=b_(I,dt);if(K&&B&&(ne.rangeCount!==1||ne.anchorNode!==K.node||ne.anchorOffset!==K.offset||ne.focusNode!==B.node||ne.focusOffset!==B.offset)){var W=ce.createRange();W.setStart(K.node,K.offset),ne.removeAllRanges(),Ne>dt?(ne.addRange(W),ne.extend(B.node,B.offset)):(W.setEnd(B.node,B.offset),ne.addRange(W))}}}}for(ce=[],ne=I;ne=ne.parentNode;)ne.nodeType===1&&ce.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ce.length;I++){var ae=ce[I];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}Jh=!!Hg,jg=Hg=null}finally{et=v,re.p=d,G.T=u}}s.current=o,Jt=2}}function FT(){if(Jt===2){Jt=0;var s=bs,o=tl,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=G.T,G.T=null;var d=re.p;re.p=2;var v=et;et|=4;try{pT(s,o.alternate,o)}finally{et=v,re.p=d,G.T=u}}Jt=3}}function zT(){if(Jt===4||Jt===3){Jt=0,Ad();var s=bs,o=tl,u=Vr,d=IT;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Jt=5:(Jt=0,tl=bs=null,qT(s,s.pendingLanes));var v=s.pendingLanes;if(v===0&&(xs=null),vr(u),o=o.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(yi,o,void 0,(o.current.flags&128)===128)}catch{}if(d!==null){o=G.T,v=re.p,re.p=2,G.T=null;try{for(var E=s.onRecoverableError,S=0;S<d.length;S++){var I=d[S];E(I.value,{componentStack:I.stack})}}finally{G.T=o,re.p=v}}(Vr&3)!==0&&Lh(),sr(s),v=s.pendingLanes,(u&261930)!==0&&(v&42)!==0?s===Dg?rc++:(rc=0,Dg=s):rc=0,sc(0)}}function qT(s,o){(s.pooledCacheLanes&=o)===0&&(o=s.pooledCache,o!=null&&(s.pooledCache=null,Gu(o)))}function Lh(){return GT(),FT(),zT(),BT()}function BT(){if(Jt!==5)return!1;var s=bs,o=Rg;Rg=0;var u=vr(Vr),d=G.T,v=re.p;try{re.p=32>u?32:u,G.T=null,u=Ng,Ng=null;var E=bs,S=Vr;if(Jt=0,tl=bs=null,Vr=0,(et&6)!==0)throw Error(i(331));var I=et;if(et|=4,ST(E.current),TT(E,E.current,S,u),et=I,sc(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(yi,E)}catch{}return!0}finally{re.p=v,G.T=d,qT(s,o)}}function HT(s,o,u){o=ni(u,o),o=ug(s.stateNode,o,2),s=gs(s,o,2),s!==null&&(fo(s,2),sr(s))}function st(s,o,u){if(s.tag===3)HT(s,s,u);else for(;o!==null;){if(o.tag===3){HT(o,s,u);break}else if(o.tag===1){var d=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(xs===null||!xs.has(d))){s=ni(u,s),u=jE(2),d=gs(o,u,2),d!==null&&($E(u,d,o,s),fo(d,2),sr(d));break}}o=o.return}}function kg(s,o,u){var d=s.pingCache;if(d===null){d=s.pingCache=new v2;var v=new Set;d.set(o,v)}else v=d.get(o),v===void 0&&(v=new Set,d.set(o,v));v.has(u)||(Ag=!0,v.add(u),s=b2.bind(null,s,o,u),o.then(s,s))}function b2(s,o,u){var d=s.pingCache;d!==null&&d.delete(o),s.pingedLanes|=s.suspendedLanes&u,s.warmLanes&=~u,ft===s&&(He&u)===u&&(wt===4||wt===3&&(He&62914560)===He&&300>vn()-Nh?(et&2)===0&&nl(s,0):Ig|=u,el===He&&(el=0)),sr(s)}function jT(s,o){o===0&&(o=Md()),s=Io(s,o),s!==null&&(fo(s,o),sr(s))}function S2(s){var o=s.memoizedState,u=0;o!==null&&(u=o.retryLane),jT(s,u)}function w2(s,o){var u=0;switch(s.tag){case 31:case 13:var d=s.stateNode,v=s.memoizedState;v!==null&&(u=v.retryLane);break;case 19:d=s.stateNode;break;case 22:d=s.stateNode._retryCache;break;default:throw Error(i(314))}d!==null&&d.delete(o),jT(s,u)}function A2(s,o){return Kt(s,o)}var Oh=null,rl=null,Vg=!1,Uh=!1,Lg=!1,ws=0;function sr(s){s!==rl&&s.next===null&&(rl===null?Oh=rl=s:rl=rl.next=s),Uh=!0,Vg||(Vg=!0,C2())}function sc(s,o){if(!Lg&&Uh){Lg=!0;do for(var u=!1,d=Oh;d!==null;){if(s!==0){var v=d.pendingLanes;if(v===0)var E=0;else{var S=d.suspendedLanes,I=d.pingedLanes;E=(1<<31-Ct(42|s)+1)-1,E&=v&~(S&~I),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,YT(d,E))}else E=He,E=zi(d,d===ft?E:0,d.cancelPendingCommit!==null||d.timeoutHandle!==-1),(E&3)===0||vi(d,E)||(u=!0,YT(d,E));d=d.next}while(u);Lg=!1}}function I2(){$T()}function $T(){Uh=Vg=!1;var s=0;ws!==0&&U2()&&(s=ws);for(var o=vn(),u=null,d=Oh;d!==null;){var v=d.next,E=KT(d,o);E===0?(d.next=null,u===null?Oh=v:u.next=v,v===null&&(rl=u)):(u=d,(s!==0||(E&3)!==0)&&(Uh=!0)),d=v}Jt!==0&&Jt!==5||sc(s),ws!==0&&(ws=0)}function KT(s,o){for(var u=s.suspendedLanes,d=s.pingedLanes,v=s.expirationTimes,E=s.pendingLanes&-62914561;0<E;){var S=31-Ct(E),I=1<<S,U=v[S];U===-1?((I&u)===0||(I&d)!==0)&&(v[S]=dm(I,o)):U<=o&&(s.expiredLanes|=I),E&=~I}if(o=ft,u=He,u=zi(s,s===o?u:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d=s.callbackNode,u===0||s===o&&(rt===2||rt===9)||s.cancelPendingCommit!==null)return d!==null&&d!==null&&Zr(d),s.callbackNode=null,s.callbackPriority=0;if((u&3)===0||vi(s,u)){if(o=u&-u,o===s.callbackPriority)return o;switch(d!==null&&Zr(d),vr(u)){case 2:case 8:u=mu;break;case 32:u=es;break;case 268435456:u=Id;break;default:u=es}return d=JT.bind(null,s),u=Kt(u,d),s.callbackPriority=o,s.callbackNode=u,o}return d!==null&&d!==null&&Zr(d),s.callbackPriority=2,s.callbackNode=null,2}function JT(s,o){if(Jt!==0&&Jt!==5)return s.callbackNode=null,s.callbackPriority=0,null;var u=s.callbackNode;if(Lh()&&s.callbackNode!==u)return null;var d=He;return d=zi(s,s===ft?d:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),d===0?null:(RT(s,d,o),KT(s,vn()),s.callbackNode!=null&&s.callbackNode===u?JT.bind(null,s):null)}function YT(s,o){if(Lh())return null;RT(s,o,!0)}function C2(){F2(function(){(et&6)!==0?Kt(pu,I2):$T()})}function Og(){if(ws===0){var s=Ba;s===0&&(s=Gi,Gi<<=1,(Gi&261888)===0&&(Gi=256)),ws=s}return ws}function QT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Ca(""+s)}function WT(s,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,s.id&&u.setAttribute("form",s.id),o.parentNode.insertBefore(u,o),s=new FormData(s),u.parentNode.removeChild(u),s}function R2(s,o,u,d,v){if(o==="submit"&&u&&u.stateNode===v){var E=QT((v[Wt]||null).action),S=d.submitter;S&&(o=(o=S[Wt]||null)?QT(o.formAction):S.getAttribute("formAction"),o!==null&&(E=o,S=null));var I=new Xi("action","action",null,d,v);s.push({event:I,listeners:[{instance:null,listener:function(){if(d.defaultPrevented){if(ws!==0){var U=S?WT(v,S):new FormData(v);ig(u,{pending:!0,data:U,method:v.method,action:E},null,U)}}else typeof E=="function"&&(I.preventDefault(),U=S?WT(v,S):new FormData(v),ig(u,{pending:!0,data:U,method:v.method,action:E},E,U))},currentTarget:v}]})}}for(var Ug=0;Ug<Em.length;Ug++){var Gg=Em[Ug],N2=Gg.toLowerCase(),D2=Gg[0].toUpperCase()+Gg.slice(1);Ai(N2,"on"+D2)}Ai(C_,"onAnimationEnd"),Ai(R_,"onAnimationIteration"),Ai(N_,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(KN,"onTransitionRun"),Ai(JN,"onTransitionStart"),Ai(YN,"onTransitionCancel"),Ai(D_,"onTransitionEnd"),Ji("onMouseEnter",["mouseout","mouseover"]),Ji("onMouseLeave",["mouseout","mouseover"]),Ji("onPointerEnter",["pointerout","pointerover"]),Ji("onPointerLeave",["pointerout","pointerover"]),Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(oc));function XT(s,o){o=(o&4)!==0;for(var u=0;u<s.length;u++){var d=s[u],v=d.event;d=d.listeners;e:{var E=void 0;if(o)for(var S=d.length-1;0<=S;S--){var I=d[S],U=I.instance,X=I.currentTarget;if(I=I.listener,U!==E&&v.isPropagationStopped())break e;E=I,v.currentTarget=X;try{E(v)}catch(oe){Zd(oe)}v.currentTarget=null,E=U}else for(S=0;S<d.length;S++){if(I=d[S],U=I.instance,X=I.currentTarget,I=I.listener,U!==E&&v.isPropagationStopped())break e;E=I,v.currentTarget=X;try{E(v)}catch(oe){Zd(oe)}v.currentTarget=null,E=U}}}}function Be(s,o){var u=o[ba];u===void 0&&(u=o[ba]=new Set);var d=s+"__bubble";u.has(d)||(ZT(o,s,2,!1),u.add(d))}function Fg(s,o,u){var d=0;o&&(d|=4),ZT(u,s,d,o)}var Gh="_reactListening"+Math.random().toString(36).slice(2);function zg(s){if(!s[Gh]){s[Gh]=!0,vu.forEach(function(u){u!=="selectionchange"&&(M2.has(u)||Fg(u,!1,s),Fg(u,!0,s))});var o=s.nodeType===9?s:s.ownerDocument;o===null||o[Gh]||(o[Gh]=!0,Fg("selectionchange",!1,o))}}function ZT(s,o,u,d){switch(Cx(o)){case 2:var v=oD;break;case 8:v=aD;break;default:v=ny}u=v.bind(null,o,u,s),v=void 0,!_o||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),d?v!==void 0?s.addEventListener(o,u,{capture:!0,passive:v}):s.addEventListener(o,u,!0):v!==void 0?s.addEventListener(o,u,{passive:v}):s.addEventListener(o,u,!1)}function qg(s,o,u,d,v){var E=d;if((o&1)===0&&(o&2)===0&&d!==null)e:for(;;){if(d===null)return;var S=d.tag;if(S===3||S===4){var I=d.stateNode.containerInfo;if(I===v)break;if(S===4)for(S=d.return;S!==null;){var U=S.tag;if((U===3||U===4)&&S.stateNode.containerInfo===v)return;S=S.return}for(;I!==null;){if(S=ji(I),S===null)return;if(U=S.tag,U===5||U===6||U===26||U===27){d=E=S;continue e}I=I.parentNode}}d=d.return}os(function(){var X=E,oe=Xn(u),ce=[];e:{var ee=M_.get(s);if(ee!==void 0){var ne=Xi,be=s;switch(s){case"keypress":if(To(u)===0)break e;case"keydown":case"keyup":ne=Qd;break;case"focusin":be="focus",ne=bo;break;case"focusout":be="blur",ne=bo;break;case"beforeblur":case"afterblur":ne=bo;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Du;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=zd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=b;break;case C_:case R_:case N_:ne=Bd;break;case D_:ne=D;break;case"scroll":case"scrollend":ne=Nu;break;case"wheel":ne=te;break;case"copy":case"cut":case"paste":ne=Hd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Tr;break;case"toggle":case"beforetoggle":ne=Ue}var Ne=(o&4)!==0,dt=!Ne&&(s==="scroll"||s==="scrollend"),K=Ne?ee!==null?ee+"Capture":null:ee;Ne=[];for(var B=X,W;B!==null;){var ae=B;if(W=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||W===null||K===null||(ae=xi(B,K),ae!=null&&Ne.push(ac(B,ae,W))),dt)break;B=B.return}0<Ne.length&&(ee=new ne(ee,be,null,u,oe),ce.push({event:ee,listeners:Ne}))}}if((o&7)===0){e:{if(ee=s==="mouseover"||s==="pointerover",ne=s==="mouseout"||s==="pointerout",ee&&u!==Iu&&(be=u.relatedTarget||u.fromElement)&&(ji(be)||be[Bi]))break e;if((ne||ee)&&(ee=oe.window===oe?oe:(ee=oe.ownerDocument)?ee.defaultView||ee.parentWindow:window,ne?(be=u.relatedTarget||u.toElement,ne=X,be=be?ji(be):null,be!==null&&(dt=a(be),Ne=be.tag,be!==dt||Ne!==5&&Ne!==27&&Ne!==6)&&(be=null)):(ne=null,be=X),ne!==be)){if(Ne=Du,ae="onMouseLeave",K="onMouseEnter",B="mouse",(s==="pointerout"||s==="pointerover")&&(Ne=Tr,ae="onPointerLeave",K="onPointerEnter",B="pointer"),dt=ne==null?ee:Ln(ne),W=be==null?ee:Ln(be),ee=new Ne(ae,B+"leave",ne,u,oe),ee.target=dt,ee.relatedTarget=W,ae=null,ji(oe)===X&&(Ne=new Ne(K,B+"enter",be,u,oe),Ne.target=W,Ne.relatedTarget=dt,ae=Ne),dt=ae,ne&&be)t:{for(Ne=P2,K=ne,B=be,W=0,ae=K;ae;ae=Ne(ae))W++;ae=0;for(var Ce=B;Ce;Ce=Ne(Ce))ae++;for(;0<W-ae;)K=Ne(K),W--;for(;0<ae-W;)B=Ne(B),ae--;for(;W--;){if(K===B||B!==null&&K===B.alternate){Ne=K;break t}K=Ne(K),B=Ne(B)}Ne=null}else Ne=null;ne!==null&&ex(ce,ee,ne,Ne,!1),be!==null&&dt!==null&&ex(ce,dt,be,Ne,!0)}}e:{if(ee=X?Ln(X):window,ne=ee.nodeName&&ee.nodeName.toLowerCase(),ne==="select"||ne==="input"&&ee.type==="file")var Qe=y_;else if(m_(ee))if(v_)Qe=HN;else{Qe=qN;var we=zN}else ne=ee.nodeName,!ne||ne.toLowerCase()!=="input"||ee.type!=="checkbox"&&ee.type!=="radio"?X&&Ia(X.elementType)&&(Qe=y_):Qe=BN;if(Qe&&(Qe=Qe(s,X))){g_(ce,Qe,u,oe);break e}we&&we(s,ee,X),s==="focusout"&&X&&ee.type==="number"&&X.memoizedProps.value!=null&&Su(ee,"number",ee.value)}switch(we=X?Ln(X):window,s){case"focusin":(m_(we)||we.contentEditable==="true")&&(Va=we,ym=X,Lu=null);break;case"focusout":Lu=ym=Va=null;break;case"mousedown":vm=!0;break;case"contextmenu":case"mouseup":case"dragend":vm=!1,A_(ce,u,oe);break;case"selectionchange":if($N)break;case"keydown":case"keyup":A_(ce,u,oe)}var Fe;if(Ze)e:{switch(s){case"compositionstart":var je="onCompositionStart";break e;case"compositionend":je="onCompositionEnd";break e;case"compositionupdate":je="onCompositionUpdate";break e}je=void 0}else ka?So(s,u)&&(je="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(je="onCompositionStart");je&&(tr&&u.locale!=="ko"&&(ka||je!=="onCompositionStart"?je==="onCompositionEnd"&&ka&&(Fe=Ru()):(Wi=oe,Cu="value"in Wi?Wi.value:Wi.textContent,ka=!0)),we=Fh(X,je),0<we.length&&(je=new er(je,s,null,u,oe),ce.push({event:je,listeners:we}),Fe?je.data=Fe:(Fe=Pa(u),Fe!==null&&(je.data=Fe)))),(Fe=ei?ON(s,u):UN(s,u))&&(je=Fh(X,"onBeforeInput"),0<je.length&&(we=new er("onBeforeInput","beforeinput",null,u,oe),ce.push({event:we,listeners:je}),we.data=Fe)),R2(ce,s,X,u,oe)}XT(ce,o)})}function ac(s,o,u){return{instance:s,listener:o,currentTarget:u}}function Fh(s,o){for(var u=o+"Capture",d=[];s!==null;){var v=s,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=xi(s,u),v!=null&&d.unshift(ac(s,v,E)),v=xi(s,o),v!=null&&d.push(ac(s,v,E))),s.tag===3)return d;s=s.return}return[]}function P2(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function ex(s,o,u,d,v){for(var E=o._reactName,S=[];u!==null&&u!==d;){var I=u,U=I.alternate,X=I.stateNode;if(I=I.tag,U!==null&&U===d)break;I!==5&&I!==26&&I!==27||X===null||(U=X,v?(X=xi(u,E),X!=null&&S.unshift(ac(u,X,U))):v||(X=xi(u,E),X!=null&&S.push(ac(u,X,U)))),u=u.return}S.length!==0&&s.push({event:o,listeners:S})}var k2=/\r\n?/g,V2=/\u0000|\uFFFD/g;function tx(s){return(typeof s=="string"?s:""+s).replace(k2,`
`).replace(V2,"")}function nx(s,o){return o=tx(o),tx(s)===o}function ct(s,o,u,d,v,E){switch(u){case"children":typeof d=="string"?o==="body"||o==="textarea"&&d===""||In(s,d):(typeof d=="number"||typeof d=="bigint")&&o!=="body"&&In(s,""+d);break;case"className":On(s,"class",d);break;case"tabIndex":On(s,"tabindex",d);break;case"dir":case"role":case"viewBox":case"width":case"height":On(s,u,d);break;case"style":Au(s,d,E);break;case"data":if(o!=="object"){On(s,"data",d);break}case"src":case"href":if(d===""&&(o!=="a"||u!=="href")){s.removeAttribute(u);break}if(d==null||typeof d=="function"||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Ca(""+d),s.setAttribute(u,d);break;case"action":case"formAction":if(typeof d=="function"){s.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(o!=="input"&&ct(s,o,"name",v.name,v,null),ct(s,o,"formEncType",v.formEncType,v,null),ct(s,o,"formMethod",v.formMethod,v,null),ct(s,o,"formTarget",v.formTarget,v,null)):(ct(s,o,"encType",v.encType,v,null),ct(s,o,"method",v.method,v,null),ct(s,o,"target",v.target,v,null)));if(d==null||typeof d=="symbol"||typeof d=="boolean"){s.removeAttribute(u);break}d=Ca(""+d),s.setAttribute(u,d);break;case"onClick":d!=null&&(s.onclick=Ti);break;case"onScroll":d!=null&&Be("scroll",s);break;case"onScrollEnd":d!=null&&Be("scrollend",s);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"multiple":s.multiple=d&&typeof d!="function"&&typeof d!="symbol";break;case"muted":s.muted=d&&typeof d!="function"&&typeof d!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(d==null||typeof d=="function"||typeof d=="boolean"||typeof d=="symbol"){s.removeAttribute("xlink:href");break}u=Ca(""+d),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""+d):s.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":d&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,""):s.removeAttribute(u);break;case"capture":case"download":d===!0?s.setAttribute(u,""):d!==!1&&d!=null&&typeof d!="function"&&typeof d!="symbol"?s.setAttribute(u,d):s.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":d!=null&&typeof d!="function"&&typeof d!="symbol"&&!isNaN(d)&&1<=d?s.setAttribute(u,d):s.removeAttribute(u);break;case"rowSpan":case"start":d==null||typeof d=="function"||typeof d=="symbol"||isNaN(d)?s.removeAttribute(u):s.setAttribute(u,d);break;case"popover":Be("beforetoggle",s),Be("toggle",s),wa(s,"popover",d);break;case"xlinkActuate":Gt(s,"http://www.w3.org/1999/xlink","xlink:actuate",d);break;case"xlinkArcrole":Gt(s,"http://www.w3.org/1999/xlink","xlink:arcrole",d);break;case"xlinkRole":Gt(s,"http://www.w3.org/1999/xlink","xlink:role",d);break;case"xlinkShow":Gt(s,"http://www.w3.org/1999/xlink","xlink:show",d);break;case"xlinkTitle":Gt(s,"http://www.w3.org/1999/xlink","xlink:title",d);break;case"xlinkType":Gt(s,"http://www.w3.org/1999/xlink","xlink:type",d);break;case"xmlBase":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:base",d);break;case"xmlLang":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:lang",d);break;case"xmlSpace":Gt(s,"http://www.w3.org/XML/1998/namespace","xml:space",d);break;case"is":wa(s,"is",d);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=Fd.get(u)||u,wa(s,u,d))}}function Bg(s,o,u,d,v,E){switch(u){case"style":Au(s,d,E);break;case"dangerouslySetInnerHTML":if(d!=null){if(typeof d!="object"||!("__html"in d))throw Error(i(61));if(u=d.__html,u!=null){if(v.children!=null)throw Error(i(60));s.innerHTML=u}}break;case"children":typeof d=="string"?In(s,d):(typeof d=="number"||typeof d=="bigint")&&In(s,""+d);break;case"onScroll":d!=null&&Be("scroll",s);break;case"onScrollEnd":d!=null&&Be("scrollend",s);break;case"onClick":d!=null&&(s.onclick=Ti);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!_u.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),E=s[Wt]||null,E=E!=null?E[u]:null,typeof E=="function"&&s.removeEventListener(o,E,v),typeof d=="function")){typeof E!="function"&&E!==null&&(u in s?s[u]=null:s.hasAttribute(u)&&s.removeAttribute(u)),s.addEventListener(o,d,v);break e}u in s?s[u]=d:d===!0?s.setAttribute(u,""):wa(s,u,d)}}}function un(s,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Be("error",s),Be("load",s);var d=!1,v=!1,E;for(E in u)if(u.hasOwnProperty(E)){var S=u[E];if(S!=null)switch(E){case"src":d=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,E,S,u,null)}}v&&ct(s,o,"srcSet",u.srcSet,u,null),d&&ct(s,o,"src",u.src,u,null);return;case"input":Be("invalid",s);var I=E=S=v=null,U=null,X=null;for(d in u)if(u.hasOwnProperty(d)){var oe=u[d];if(oe!=null)switch(d){case"name":v=oe;break;case"type":S=oe;break;case"checked":U=oe;break;case"defaultChecked":X=oe;break;case"value":E=oe;break;case"defaultValue":I=oe;break;case"children":case"dangerouslySetInnerHTML":if(oe!=null)throw Error(i(137,o));break;default:ct(s,o,d,oe,u,null)}}Od(s,E,I,U,X,S,v,!1);return;case"select":Be("invalid",s),d=S=E=null;for(v in u)if(u.hasOwnProperty(v)&&(I=u[v],I!=null))switch(v){case"value":E=I;break;case"defaultValue":S=I;break;case"multiple":d=I;default:ct(s,o,v,I,u,null)}o=E,u=S,s.multiple=!!d,o!=null?ns(s,!!d,o,!1):u!=null&&ns(s,!!d,u,!0);return;case"textarea":Be("invalid",s),E=v=d=null;for(S in u)if(u.hasOwnProperty(S)&&(I=u[S],I!=null))switch(S){case"value":d=I;break;case"defaultValue":v=I;break;case"children":E=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:ct(s,o,S,I,u,null)}is(s,d,v,E);return;case"option":for(U in u)if(u.hasOwnProperty(U)&&(d=u[U],d!=null))switch(U){case"selected":s.selected=d&&typeof d!="function"&&typeof d!="symbol";break;default:ct(s,o,U,d,u,null)}return;case"dialog":Be("beforetoggle",s),Be("toggle",s),Be("cancel",s),Be("close",s);break;case"iframe":case"object":Be("load",s);break;case"video":case"audio":for(d=0;d<oc.length;d++)Be(oc[d],s);break;case"image":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"embed":case"source":case"link":Be("error",s),Be("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in u)if(u.hasOwnProperty(X)&&(d=u[X],d!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ct(s,o,X,d,u,null)}return;default:if(Ia(o)){for(oe in u)u.hasOwnProperty(oe)&&(d=u[oe],d!==void 0&&Bg(s,o,oe,d,u,void 0));return}}for(I in u)u.hasOwnProperty(I)&&(d=u[I],d!=null&&ct(s,o,I,d,u,null))}function L2(s,o,u,d){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,S=null,I=null,U=null,X=null,oe=null;for(ne in u){var ce=u[ne];if(u.hasOwnProperty(ne)&&ce!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":U=ce;default:d.hasOwnProperty(ne)||ct(s,o,ne,null,d,ce)}}for(var ee in d){var ne=d[ee];if(ce=u[ee],d.hasOwnProperty(ee)&&(ne!=null||ce!=null))switch(ee){case"type":E=ne;break;case"name":v=ne;break;case"checked":X=ne;break;case"defaultChecked":oe=ne;break;case"value":S=ne;break;case"defaultValue":I=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==ce&&ct(s,o,ee,ne,d,ce)}}Aa(s,S,I,U,X,oe,E,v);return;case"select":ne=S=I=ee=null;for(E in u)if(U=u[E],u.hasOwnProperty(E)&&U!=null)switch(E){case"value":break;case"multiple":ne=U;default:d.hasOwnProperty(E)||ct(s,o,E,null,d,U)}for(v in d)if(E=d[v],U=u[v],d.hasOwnProperty(v)&&(E!=null||U!=null))switch(v){case"value":ee=E;break;case"defaultValue":I=E;break;case"multiple":S=E;default:E!==U&&ct(s,o,v,E,d,U)}o=I,u=S,d=ne,ee!=null?ns(s,!!u,ee,!1):!!d!=!!u&&(o!=null?ns(s,!!u,o,!0):ns(s,!!u,u?[]:"",!1));return;case"textarea":ne=ee=null;for(I in u)if(v=u[I],u.hasOwnProperty(I)&&v!=null&&!d.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:ct(s,o,I,null,d,v)}for(S in d)if(v=d[S],E=u[S],d.hasOwnProperty(S)&&(v!=null||E!=null))switch(S){case"value":ee=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==E&&ct(s,o,S,v,d,E)}Ud(s,ee,ne);return;case"option":for(var be in u)if(ee=u[be],u.hasOwnProperty(be)&&ee!=null&&!d.hasOwnProperty(be))switch(be){case"selected":s.selected=!1;break;default:ct(s,o,be,null,d,ee)}for(U in d)if(ee=d[U],ne=u[U],d.hasOwnProperty(U)&&ee!==ne&&(ee!=null||ne!=null))switch(U){case"selected":s.selected=ee&&typeof ee!="function"&&typeof ee!="symbol";break;default:ct(s,o,U,ee,d,ne)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ne in u)ee=u[Ne],u.hasOwnProperty(Ne)&&ee!=null&&!d.hasOwnProperty(Ne)&&ct(s,o,Ne,null,d,ee);for(X in d)if(ee=d[X],ne=u[X],d.hasOwnProperty(X)&&ee!==ne&&(ee!=null||ne!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,o));break;default:ct(s,o,X,ee,d,ne)}return;default:if(Ia(o)){for(var dt in u)ee=u[dt],u.hasOwnProperty(dt)&&ee!==void 0&&!d.hasOwnProperty(dt)&&Bg(s,o,dt,void 0,d,ee);for(oe in d)ee=d[oe],ne=u[oe],!d.hasOwnProperty(oe)||ee===ne||ee===void 0&&ne===void 0||Bg(s,o,oe,ee,d,ne);return}}for(var K in u)ee=u[K],u.hasOwnProperty(K)&&ee!=null&&!d.hasOwnProperty(K)&&ct(s,o,K,null,d,ee);for(ce in d)ee=d[ce],ne=u[ce],!d.hasOwnProperty(ce)||ee===ne||ee==null&&ne==null||ct(s,o,ce,ee,d,ne)}function ix(s){switch(s){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function O2(){if(typeof performance.getEntriesByType=="function"){for(var s=0,o=0,u=performance.getEntriesByType("resource"),d=0;d<u.length;d++){var v=u[d],E=v.transferSize,S=v.initiatorType,I=v.duration;if(E&&I&&ix(S)){for(S=0,I=v.responseEnd,d+=1;d<u.length;d++){var U=u[d],X=U.startTime;if(X>I)break;var oe=U.transferSize,ce=U.initiatorType;oe&&ix(ce)&&(U=U.responseEnd,S+=oe*(U<I?1:(I-X)/(U-X)))}if(--d,o+=8*(E+S)/(v.duration/1e3),s++,10<s)break}}if(0<s)return o/s/1e6}return navigator.connection&&(s=navigator.connection.downlink,typeof s=="number")?s:5}var Hg=null,jg=null;function zh(s){return s.nodeType===9?s:s.ownerDocument}function rx(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function sx(s,o){if(s===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&o==="foreignObject"?0:s}function $g(s,o){return s==="textarea"||s==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Kg=null;function U2(){var s=window.event;return s&&s.type==="popstate"?s===Kg?!1:(Kg=s,!0):(Kg=null,!1)}var ox=typeof setTimeout=="function"?setTimeout:void 0,G2=typeof clearTimeout=="function"?clearTimeout:void 0,ax=typeof Promise=="function"?Promise:void 0,F2=typeof queueMicrotask=="function"?queueMicrotask:typeof ax<"u"?function(s){return ax.resolve(null).then(s).catch(z2)}:ox;function z2(s){setTimeout(function(){throw s})}function As(s){return s==="head"}function lx(s,o){var u=o,d=0;do{var v=u.nextSibling;if(s.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(d===0){s.removeChild(v),ll(o);return}d--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")d++;else if(u==="html")lc(s.ownerDocument.documentElement);else if(u==="head"){u=s.ownerDocument.head,lc(u);for(var E=u.firstChild;E;){var S=E.nextSibling,I=E.nodeName;E[Hi]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=S}}else u==="body"&&lc(s.ownerDocument.body);u=v}while(u);ll(o)}function ux(s,o){var u=s;s=0;do{var d=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),d&&d.nodeType===8)if(u=d.data,u==="/$"){if(s===0)break;s--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||s++;u=d}while(u)}function Jg(s){var o=s.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Jg(u),Sa(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}s.removeChild(u)}}function q2(s,o,u,d){for(;s.nodeType===1;){var v=u;if(s.nodeName.toLowerCase()!==o.toLowerCase()){if(!d&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(d){if(!s[Hi])switch(o){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(E=s.getAttribute("rel"),E==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(E!==v.rel||s.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||s.getAttribute("title")!==(v.title==null?null:v.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(E=s.getAttribute("src"),(E!==(v.src==null?null:v.src)||s.getAttribute("type")!==(v.type==null?null:v.type)||s.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(o==="input"&&s.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&s.getAttribute("name")===E)return s}else return s;if(s=ai(s.nextSibling),s===null)break}return null}function B2(s,o,u){if(o==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!u||(s=ai(s.nextSibling),s===null))return null;return s}function cx(s,o){for(;s.nodeType!==8;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!o||(s=ai(s.nextSibling),s===null))return null;return s}function Yg(s){return s.data==="$?"||s.data==="$~"}function Qg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState!=="loading"}function H2(s,o){var u=s.ownerDocument;if(s.data==="$~")s._reactRetry=o;else if(s.data!=="$?"||u.readyState!=="loading")o();else{var d=function(){o(),u.removeEventListener("DOMContentLoaded",d)};u.addEventListener("DOMContentLoaded",d),s._reactRetry=d}}function ai(s){for(;s!=null;s=s.nextSibling){var o=s.nodeType;if(o===1||o===3)break;if(o===8){if(o=s.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return s}var Wg=null;function dx(s){s=s.nextSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"||u==="/&"){if(o===0)return ai(s.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}s=s.nextSibling}return null}function hx(s){s=s.previousSibling;for(var o=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return s;o--}else u!=="/$"&&u!=="/&"||o++}s=s.previousSibling}return null}function fx(s,o,u){switch(o=zh(u),s){case"html":if(s=o.documentElement,!s)throw Error(i(452));return s;case"head":if(s=o.head,!s)throw Error(i(453));return s;case"body":if(s=o.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function lc(s){for(var o=s.attributes;o.length;)s.removeAttributeNode(o[0]);Sa(s)}var li=new Map,px=new Set;function qh(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Lr=re.d;re.d={f:j2,r:$2,D:K2,C:J2,L:Y2,m:Q2,X:X2,S:W2,M:Z2};function j2(){var s=Lr.f(),o=Ph();return s||o}function $2(s){var o=Wn(s);o!==null&&o.tag===5&&o.type==="form"?DE(o):Lr.r(s)}var sl=typeof document>"u"?null:document;function mx(s,o,u){var d=sl;if(d&&typeof o=="string"&&o){var v=An(o);v='link[rel="'+s+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),px.has(v)||(px.add(v),s={rel:s,crossOrigin:u,href:o},d.querySelector(v)===null&&(o=d.createElement("link"),un(o,"link",s),Ut(o),d.head.appendChild(o)))}}function K2(s){Lr.D(s),mx("dns-prefetch",s,null)}function J2(s,o){Lr.C(s,o),mx("preconnect",s,o)}function Y2(s,o,u){Lr.L(s,o,u);var d=sl;if(d&&s&&o){var v='link[rel="preload"][as="'+An(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+An(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+An(u.imageSizes)+'"]')):v+='[href="'+An(s)+'"]';var E=v;switch(o){case"style":E=ol(s);break;case"script":E=al(s)}li.has(E)||(s=T({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:s,as:o},u),li.set(E,s),d.querySelector(v)!==null||o==="style"&&d.querySelector(uc(E))||o==="script"&&d.querySelector(cc(E))||(o=d.createElement("link"),un(o,"link",s),Ut(o),d.head.appendChild(o)))}}function Q2(s,o){Lr.m(s,o);var u=sl;if(u&&s){var d=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+An(d)+'"][href="'+An(s)+'"]',E=v;switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=al(s)}if(!li.has(E)&&(s=T({rel:"modulepreload",href:s},o),li.set(E,s),u.querySelector(v)===null)){switch(d){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(cc(E)))return}d=u.createElement("link"),un(d,"link",s),Ut(d),u.head.appendChild(d)}}}function W2(s,o,u){Lr.S(s,o,u);var d=sl;if(d&&s){var v=$i(d).hoistableStyles,E=ol(s);o=o||"default";var S=v.get(E);if(!S){var I={loading:0,preload:null};if(S=d.querySelector(uc(E)))I.loading=5;else{s=T({rel:"stylesheet",href:s,"data-precedence":o},u),(u=li.get(E))&&Xg(s,u);var U=S=d.createElement("link");Ut(U),un(U,"link",s),U._p=new Promise(function(X,oe){U.onload=X,U.onerror=oe}),U.addEventListener("load",function(){I.loading|=1}),U.addEventListener("error",function(){I.loading|=2}),I.loading|=4,Bh(S,o,d)}S={type:"stylesheet",instance:S,count:1,state:I},v.set(E,S)}}}function X2(s,o){Lr.X(s,o);var u=sl;if(u&&s){var d=$i(u).hoistableScripts,v=al(s),E=d.get(v);E||(E=u.querySelector(cc(v)),E||(s=T({src:s,async:!0},o),(o=li.get(v))&&Zg(s,o),E=u.createElement("script"),Ut(E),un(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(v,E))}}function Z2(s,o){Lr.M(s,o);var u=sl;if(u&&s){var d=$i(u).hoistableScripts,v=al(s),E=d.get(v);E||(E=u.querySelector(cc(v)),E||(s=T({src:s,async:!0,type:"module"},o),(o=li.get(v))&&Zg(s,o),E=u.createElement("script"),Ut(E),un(E,"link",s),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},d.set(v,E))}}function gx(s,o,u,d){var v=(v=j.current)?qh(v):null;if(!v)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ol(u.href),u=$i(v).hoistableStyles,d=u.get(o),d||(d={type:"style",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){s=ol(u.href);var E=$i(v).hoistableStyles,S=E.get(s);if(S||(v=v.ownerDocument||v,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(s,S),(E=v.querySelector(uc(s)))&&!E._p&&(S.instance=E,S.state.loading=5),li.has(s)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},li.set(s,u),E||eD(v,s,u,S.state))),o&&d===null)throw Error(i(528,""));return S}if(o&&d!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=al(u),u=$i(v).hoistableScripts,d=u.get(o),d||(d={type:"script",instance:null,count:0,state:null},u.set(o,d)),d):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function ol(s){return'href="'+An(s)+'"'}function uc(s){return'link[rel="stylesheet"]['+s+"]"}function yx(s){return T({},s,{"data-precedence":s.precedence,precedence:null})}function eD(s,o,u,d){s.querySelector('link[rel="preload"][as="style"]['+o+"]")?d.loading=1:(o=s.createElement("link"),d.preload=o,o.addEventListener("load",function(){return d.loading|=1}),o.addEventListener("error",function(){return d.loading|=2}),un(o,"link",u),Ut(o),s.head.appendChild(o))}function al(s){return'[src="'+An(s)+'"]'}function cc(s){return"script[async]"+s}function vx(s,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var d=s.querySelector('style[data-href~="'+An(u.href)+'"]');if(d)return o.instance=d,Ut(d),d;var v=T({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return d=(s.ownerDocument||s).createElement("style"),Ut(d),un(d,"style",v),Bh(d,u.precedence,s),o.instance=d;case"stylesheet":v=ol(u.href);var E=s.querySelector(uc(v));if(E)return o.state.loading|=4,o.instance=E,Ut(E),E;d=yx(u),(v=li.get(v))&&Xg(d,v),E=(s.ownerDocument||s).createElement("link"),Ut(E);var S=E;return S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),un(E,"link",d),o.state.loading|=4,Bh(E,u.precedence,s),o.instance=E;case"script":return E=al(u.src),(v=s.querySelector(cc(E)))?(o.instance=v,Ut(v),v):(d=u,(v=li.get(E))&&(d=T({},u),Zg(d,v)),s=s.ownerDocument||s,v=s.createElement("script"),Ut(v),un(v,"link",d),s.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(d=o.instance,o.state.loading|=4,Bh(d,u.precedence,s));return o.instance}function Bh(s,o,u){for(var d=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=d.length?d[d.length-1]:null,E=v,S=0;S<d.length;S++){var I=d[S];if(I.dataset.precedence===o)E=I;else if(E!==v)break}E?E.parentNode.insertBefore(s,E.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(s,o.firstChild))}function Xg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.title==null&&(s.title=o.title)}function Zg(s,o){s.crossOrigin==null&&(s.crossOrigin=o.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=o.referrerPolicy),s.integrity==null&&(s.integrity=o.integrity)}var Hh=null;function _x(s,o,u){if(Hh===null){var d=new Map,v=Hh=new Map;v.set(u,d)}else v=Hh,d=v.get(u),d||(d=new Map,v.set(u,d));if(d.has(s))return d;for(d.set(s,null),u=u.getElementsByTagName(s),v=0;v<u.length;v++){var E=u[v];if(!(E[Hi]||E[Ot]||s==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var S=E.getAttribute(o)||"";S=s+S;var I=d.get(S);I?I.push(E):d.set(S,[E])}}return d}function Ex(s,o,u){s=s.ownerDocument||s,s.head.insertBefore(u,o==="title"?s.querySelector("head > title"):null)}function tD(s,o,u){if(u===1||o.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return s=o.disabled,typeof o.precedence=="string"&&s==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Tx(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}function nD(s,o,u,d){if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ol(d.href),E=o.querySelector(uc(v));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(s.count++,s=jh.bind(s),o.then(s,s)),u.state.loading|=4,u.instance=E,Ut(E);return}E=o.ownerDocument||o,d=yx(d),(v=li.get(v))&&Xg(d,v),E=E.createElement("link"),Ut(E);var S=E;S._p=new Promise(function(I,U){S.onload=I,S.onerror=U}),un(E,"link",d),u.instance=E}s.stylesheets===null&&(s.stylesheets=new Map),s.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(s.count++,u=jh.bind(s),o.addEventListener("load",u),o.addEventListener("error",u))}}var ey=0;function iD(s,o){return s.stylesheets&&s.count===0&&Kh(s,s.stylesheets),0<s.count||0<s.imgCount?function(u){var d=setTimeout(function(){if(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend){var E=s.unsuspend;s.unsuspend=null,E()}},6e4+o);0<s.imgBytes&&ey===0&&(ey=62500*O2());var v=setTimeout(function(){if(s.waitingForImages=!1,s.count===0&&(s.stylesheets&&Kh(s,s.stylesheets),s.unsuspend)){var E=s.unsuspend;s.unsuspend=null,E()}},(s.imgBytes>ey?50:800)+o);return s.unsuspend=u,function(){s.unsuspend=null,clearTimeout(d),clearTimeout(v)}}:null}function jh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Kh(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var $h=null;function Kh(s,o){s.stylesheets=null,s.unsuspend!==null&&(s.count++,$h=new Map,o.forEach(rD,s),$h=null,jh.call(s))}function rD(s,o){if(!(o.state.loading&4)){var u=$h.get(s);if(u)var d=u.get(null);else{u=new Map,$h.set(s,u);for(var v=s.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var S=v[E];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(u.set(S.dataset.precedence,S),d=S)}d&&u.set(null,d)}v=o.instance,S=v.getAttribute("data-precedence"),E=u.get(S)||d,E===d&&u.set(null,v),u.set(S,v),this.count++,d=jh.bind(this),v.addEventListener("load",d),v.addEventListener("error",d),E?E.parentNode.insertBefore(v,E.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(v,s.firstChild)),o.state.loading|=4}}var dc={$$typeof:H,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function sD(s,o,u,d,v,E,S,I,U){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=qi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qi(0),this.hiddenUpdates=qi(null),this.identifierPrefix=d,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=U,this.incompleteTransitions=new Map}function xx(s,o,u,d,v,E,S,I,U,X,oe,ce){return s=new sD(s,o,u,S,U,X,oe,ce,I),o=1,E===!0&&(o|=24),E=Gn(3,null,null,o),s.current=E,E.stateNode=s,o=Pm(),o.refCount++,s.pooledCache=o,o.refCount++,E.memoizedState={element:d,isDehydrated:u,cache:o},Om(E),s}function bx(s){return s?(s=Ua,s):Ua}function Sx(s,o,u,d,v,E){v=bx(v),d.context===null?d.context=v:d.pendingContext=v,d=ms(o),d.payload={element:u},E=E===void 0?null:E,E!==null&&(d.callback=E),u=gs(s,d,o),u!==null&&(Mn(u,s,o),Bu(u,s,o))}function wx(s,o){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<o?u:o}}function ty(s,o){wx(s,o),(s=s.alternate)&&wx(s,o)}function Ax(s){if(s.tag===13||s.tag===31){var o=Io(s,67108864);o!==null&&Mn(o,s,67108864),ty(s,67108864)}}function Ix(s){if(s.tag===13||s.tag===31){var o=Hn();o=mo(o);var u=Io(s,o);u!==null&&Mn(u,s,o),ty(s,o)}}var Jh=!0;function oD(s,o,u,d){var v=G.T;G.T=null;var E=re.p;try{re.p=2,ny(s,o,u,d)}finally{re.p=E,G.T=v}}function aD(s,o,u,d){var v=G.T;G.T=null;var E=re.p;try{re.p=8,ny(s,o,u,d)}finally{re.p=E,G.T=v}}function ny(s,o,u,d){if(Jh){var v=iy(d);if(v===null)qg(s,o,d,Yh,u),Rx(s,d);else if(uD(v,s,o,u,d))d.stopPropagation();else if(Rx(s,d),o&4&&-1<lD.indexOf(s)){for(;v!==null;){var E=Wn(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var S=Fi(E.pendingLanes);if(S!==0){var I=E;for(I.pendingLanes|=2,I.entangledLanes|=2;S;){var U=1<<31-Ct(S);I.entanglements[1]|=U,S&=~U}sr(E),(et&6)===0&&(Dh=vn()+500,sc(0))}}break;case 31:case 13:I=Io(E,2),I!==null&&Mn(I,E,2),Ph(),ty(E,2)}if(E=iy(d),E===null&&qg(s,o,d,Yh,u),E===v)break;v=E}v!==null&&d.stopPropagation()}else qg(s,o,d,null,u)}}function iy(s){return s=Xn(s),ry(s)}var Yh=null;function ry(s){if(Yh=null,s=ji(s),s!==null){var o=a(s);if(o===null)s=null;else{var u=o.tag;if(u===13){if(s=l(o),s!==null)return s;s=null}else if(u===31){if(s=c(o),s!==null)return s;s=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;s=null}else o!==s&&(s=null)}}return Yh=s,null}function Cx(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(co()){case pu:return 2;case mu:return 8;case es:case cm:return 32;case Id:return 268435456;default:return 32}default:return 32}}var sy=!1,Is=null,Cs=null,Rs=null,hc=new Map,fc=new Map,Ns=[],lD="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Rx(s,o){switch(s){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Cs=null;break;case"mouseover":case"mouseout":Rs=null;break;case"pointerover":case"pointerout":hc.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":fc.delete(o.pointerId)}}function pc(s,o,u,d,v,E){return s===null||s.nativeEvent!==E?(s={blockedOn:o,domEventName:u,eventSystemFlags:d,nativeEvent:E,targetContainers:[v]},o!==null&&(o=Wn(o),o!==null&&Ax(o)),s):(s.eventSystemFlags|=d,o=s.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),s)}function uD(s,o,u,d,v){switch(o){case"focusin":return Is=pc(Is,s,o,u,d,v),!0;case"dragenter":return Cs=pc(Cs,s,o,u,d,v),!0;case"mouseover":return Rs=pc(Rs,s,o,u,d,v),!0;case"pointerover":var E=v.pointerId;return hc.set(E,pc(hc.get(E)||null,s,o,u,d,v)),!0;case"gotpointercapture":return E=v.pointerId,fc.set(E,pc(fc.get(E)||null,s,o,u,d,v)),!0}return!1}function Nx(s){var o=ji(s.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){s.blockedOn=o,_i(s.priority,function(){Ix(u)});return}}else if(o===31){if(o=c(u),o!==null){s.blockedOn=o,_i(s.priority,function(){Ix(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Qh(s){if(s.blockedOn!==null)return!1;for(var o=s.targetContainers;0<o.length;){var u=iy(s.nativeEvent);if(u===null){u=s.nativeEvent;var d=new u.constructor(u.type,u);Iu=d,u.target.dispatchEvent(d),Iu=null}else return o=Wn(u),o!==null&&Ax(o),s.blockedOn=u,!1;o.shift()}return!0}function Dx(s,o,u){Qh(s)&&u.delete(o)}function cD(){sy=!1,Is!==null&&Qh(Is)&&(Is=null),Cs!==null&&Qh(Cs)&&(Cs=null),Rs!==null&&Qh(Rs)&&(Rs=null),hc.forEach(Dx),fc.forEach(Dx)}function Wh(s,o){s.blockedOn===o&&(s.blockedOn=null,sy||(sy=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,cD)))}var Xh=null;function Mx(s){Xh!==s&&(Xh=s,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Xh===s&&(Xh=null);for(var o=0;o<s.length;o+=3){var u=s[o],d=s[o+1],v=s[o+2];if(typeof d!="function"){if(ry(d||u)===null)continue;break}var E=Wn(u);E!==null&&(s.splice(o,3),o-=3,ig(E,{pending:!0,data:v,method:u.method,action:d},d,v))}}))}function ll(s){function o(U){return Wh(U,s)}Is!==null&&Wh(Is,s),Cs!==null&&Wh(Cs,s),Rs!==null&&Wh(Rs,s),hc.forEach(o),fc.forEach(o);for(var u=0;u<Ns.length;u++){var d=Ns[u];d.blockedOn===s&&(d.blockedOn=null)}for(;0<Ns.length&&(u=Ns[0],u.blockedOn===null);)Nx(u),u.blockedOn===null&&Ns.shift();if(u=(s.ownerDocument||s).$$reactFormReplay,u!=null)for(d=0;d<u.length;d+=3){var v=u[d],E=u[d+1],S=v[Wt]||null;if(typeof E=="function")S||Mx(u);else if(S){var I=null;if(E&&E.hasAttribute("formAction")){if(v=E,S=E[Wt]||null)I=S.formAction;else if(ry(v)!==null)continue}else I=S.action;typeof I=="function"?u[d+1]=I:(u.splice(d,3),d-=3),Mx(u)}}}function Px(){function s(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(S){return v=S})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),d||setTimeout(u,20)}function u(){if(!d&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var d=!1,v=null;return navigation.addEventListener("navigate",s),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){d=!0,navigation.removeEventListener("navigate",s),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function oy(s){this._internalRoot=s}Zh.prototype.render=oy.prototype.render=function(s){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,d=Hn();Sx(u,d,s,o,null,null)},Zh.prototype.unmount=oy.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var o=s.containerInfo;Sx(s.current,2,null,s,null,null),Ph(),o[Bi]=null}};function Zh(s){this._internalRoot=s}Zh.prototype.unstable_scheduleHydration=function(s){if(s){var o=Pd();s={blockedOn:null,target:s,priority:o};for(var u=0;u<Ns.length&&o!==0&&o<Ns[u].priority;u++);Ns.splice(u,0,s),u===0&&Nx(s)}};var kx=e.version;if(kx!=="19.2.4")throw Error(i(527,kx,"19.2.4"));re.findDOMNode=function(s){var o=s._reactInternals;if(o===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=f(o),s=s!==null?_(s):null,s=s===null?null:s.stateNode,s};var dD={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:G,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ef=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ef.isDisabled&&ef.supportsFiber)try{yi=ef.inject(dD),rn=ef}catch{}}return gc.createRoot=function(s,o){if(!r(s))throw Error(i(299));var u=!1,d="",v=zE,E=qE,S=BE;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(d=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=xx(s,1,!1,null,null,u,d,null,v,E,S,Px),s[Bi]=o.current,zg(s),new oy(o)},gc.hydrateRoot=function(s,o,u){if(!r(s))throw Error(i(299));var d=!1,v="",E=zE,S=qE,I=BE,U=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(I=u.onRecoverableError),u.formState!==void 0&&(U=u.formState)),o=xx(s,1,!0,o,u??null,d,v,U,E,S,I,Px),o.context=bx(null),u=o.current,d=Hn(),d=mo(d),v=ms(d),v.callback=null,gs(u,v,d),u=d,o.current.lanes=u,fo(o,u),sr(o),s[Bi]=o.current,zg(s),new Zh(o)},gc.version="19.2.4",gc}var Hx;function TD(){if(Hx)return uy.exports;Hx=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),uy.exports=ED(),uy.exports}var xD=TD();const bD=qA(xD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jx=n=>{const e=wD(n);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var AD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=le.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:l,...c},h)=>le.createElement("svg",{ref:h,...AD,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:BA("lucide",r),...!a&&!ID(c)&&{"aria-hidden":"true"},...c},[...l.map(([f,_])=>le.createElement(f,_)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=(n,e)=>{const t=le.forwardRef(({className:i,...r},a)=>le.createElement(CD,{ref:a,iconNode:e,className:BA(`lucide-${SD(jx(n))}`,`lucide-${n}`,i),...r}));return t.displayName=jx(n),t};/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Ff=Te("activity",RD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],DD=Te("arrow-left",ND);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Xl=Te("arrow-right",MD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],kD=Te("award",PD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],zf=Te("book-open",VD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LD=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],OD=Te("box",LD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V9",key:"uvy0l4"}],["path",{d:"M19 21V3",key:"11j9sm"}]],GD=Te("chart-no-axes-column-increasing",UD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ur=Te("check",FD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],qD=Te("chevron-right",zD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],HD=Te("circle-check-big",BD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],$D=Te("circle-check",jD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],JD=Te("circle-question-mark",KD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],QD=Te("cloud",YD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WD=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],$x=Te("code",WD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]],ZD=Te("code-xml",XD);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],na=Te("crown",eM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Gy=Te("dollar-sign",tM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],iM=Te("download",nM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],sM=Te("earth",rM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],HA=Te("external-link",oM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fy=Te("eye",aM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lM=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],uM=Te("eye-off",lM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cM=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],dM=Te("file-text",cM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hM=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],fM=Te("flame",hM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pM=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],mM=Te("globe",pM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gM=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],Kx=Te("house",gM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yM=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],vM=Te("image",yM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _M=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],fy=Te("inbox",_M);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EM=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],TM=Te("instagram",EM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xM=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],bM=Te("key-round",xM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],Ml=Te("layers",SM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wM=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Jx=Te("layout-dashboard",wM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],hi=Te("loader-circle",AM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],ia=Te("lock",IM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],RM=Te("log-in",CM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],DM=Te("log-out",NM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qf=Te("mail",MM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],kM=Te("menu",PM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]],LM=Te("message-circle",VM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],jA=Te("message-square",OM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],GM=Te("monitor",UM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],zM=Te("octagon-alert",FM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],$A=Te("palette",qM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],HM=Te("plus",BM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],$M=Te("save",jM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],KA=Te("search",KM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JM=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],JA=Te("send",JM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YM=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bf=Te("settings",YM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QM=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],WM=Te("share-2",QM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],tf=Te("shield-alert",XM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZM=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],Hf=Te("shield-check",ZM);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eP=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Gv=Te("shield",eP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tP=[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]],nP=Te("smartphone",tP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iP=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],Lc=Te("sparkles",iP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rP=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],sP=Te("square-check-big",rP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oP=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],py=Te("square-pen",oP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aP=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],lP=Te("square",aP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uP=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],cP=Te("tag",uP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dP=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],yf=Te("trash-2",dP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hP=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],fP=Te("trending-up",hP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pP=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],YA=Te("triangle-alert",pP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mP=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],gP=Te("twitter",mP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yP=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],QA=Te("user",yP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vP=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vf=Te("users",vP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _P=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]],Yx=Te("wand-sparkles",_P);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EP=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],ui=Te("x",EP);/**
 * @license lucide-react v0.574.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TP=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Ip=Te("zap",TP);var or=(n=>(n.SURVEYS="Encuestas",n.CRYPTO="Trading y Cripto",n.AFFILIATE="Marketing de Afiliados",n.FREELANCE="Freelancing",n.TASKS="Micro-Tareas",n.ECOMMERCE="E-Commerce",n.HIGH_TICKET="High Ticket Closing",n))(or||{}),Or=(n=>(n.BEGINNER="Principiante",n.INTERMEDIATE="Intermedio",n.ADVANCED="Avanzado",n.EXPERT="Solo Expertos",n))(Or||{});const _f=[{id:"s1",name:"OmegaPro",type:"Ponzi Scheme",riskLevel:"Critical",status:"SCAM",reason:"Colapso financiero global. Fondos congelados indefinidamente. Usaban un falso algoritmo de trading.",dateReported:"2022"},{id:"s2",name:"GoArbit",type:"Ponzi Crypto",riskLevel:"Critical",status:"SCAM",reason:"Token interno (Square Token) sin liquidez real. Rentabilidades imposibles (200% ROI).",dateReported:"2023"},{id:"s3",name:"Validus",type:"MLM",riskLevel:"Critical",status:"SCAM",reason:'Esquema piramidal sin producto real. La "academia" era una fachada para captar capital.',dateReported:"2023"},{id:"s4",name:"Quantum Leap",type:"Ponzi",riskLevel:"Critical",status:"SCAM",reason:"CEO desaparecido con fondos de usuarios. Prometan arbitraje cuntico inexistente.",dateReported:"2024"},{id:"s5",name:"Ganancias Deportivas",type:"Betting Ponzi",riskLevel:"Critical",status:"SCAM",reason:"No hacan apuestas reales. Pagaban con dinero de nuevos entrantes (Esquema Ponzi de libro).",dateReported:"2022"},{id:"s6",name:"FTX",type:"Exchange",riskLevel:"Critical",status:"SCAM",reason:"Fraude corporativo masivo y malversacin de fondos de clientes por Sam Bankman-Fried.",dateReported:"2022"},{id:"s7",name:"Amz-Orders-Bot",type:"Phishing",riskLevel:"High",status:"SCAM",reason:'Suplantacin de identidad de Amazon. Piden depsito previo en USDT para "liberar pedidos".',dateReported:"2024"},{id:"s8",name:"Task-Shein-VIP",type:"Task Scam",riskLevel:"High",status:"SCAM",reason:"Estafa de tareas falsas. Te dejan retirar $2 y luego te exigen depositar $100 para seguir.",dateReported:"2024"},{id:"w1",name:"Venta de Reseas (Maps)",type:"Marketing Grey Hat",riskLevel:"Warning",status:"WARNING",reason:"Negocio rentable de gestin de reputacin. Google puede borrar reseas, pero pagan bien por la accin.",dateReported:"Active"},{id:"w2",name:"Farming de Cuentas (Gmail)",type:"Asset Creation",riskLevel:"Safe",status:"LEGIT",reason:"Creacin masiva de cuentas para proveedores. Alta demanda en foros blackhat para automatizacin.",dateReported:"Active"},{id:"w3",name:"Airdrop Hunter Scripts",type:"Crypto Automation",riskLevel:"Warning",status:"LEGIT",reason:"Uso de bots para calificar en airdrops. Riesgo de baneo de wallet (Sybil), pero alta recompensa si se hace bien.",dateReported:"Active"},{id:"w4",name:"Social Media Boosting",type:"SMM Services",riskLevel:"Safe",status:"LEGIT",reason:"Venta de likes/follows. Mercado enorme y pagos rpidos. No es ilegal, pero infringe TOS de redes.",dateReported:"Active"},{id:"l1",name:"Binance",type:"Exchange",riskLevel:"Safe",status:"LEGIT",reason:"Exchange Tier 1 con Proof of Reserves auditada. Plataforma segura para operar.",dateReported:"Verified"},{id:"l2",name:"Upwork",type:"Freelance",riskLevel:"Safe",status:"LEGIT",reason:"Plataforma segura con Escrow para pagos. Si trabajas, cobras seguro.",dateReported:"Verified"},{id:"l3",name:"Fiverr",type:"Freelance",riskLevel:"Safe",status:"LEGIT",reason:"Mercado de servicios fiable. Proteccin al vendedor y comprador.",dateReported:"Verified"},{id:"l4",name:"Coinbase",type:"Exchange",riskLevel:"Safe",status:"LEGIT",reason:"Empresa pblica listada en NASDAQ. Mxima regulacin en USA.",dateReported:"Verified"},{id:"l5",name:"UserTesting",type:"Usability",riskLevel:"Safe",status:"LEGIT",reason:"Paga por grabar pantalla. Empresa slida que trabaja con marcas Fortune 500.",dateReported:"Verified"},{id:"l6",name:"Notion Templates",type:"Digital Products",riskLevel:"Safe",status:"LEGIT",reason:"Venta de plantillas digitales. Ingreso pasivo real y escalable.",dateReported:"Verified"}],Ef=[{id:"1",name:"Certificacin UserTesting",category:or.TASKS,description:"Aprende a cobrar $10 por cada 20 minutos de grabacin de pantalla. Gua tcnica para aprobar el examen de ingreso.",verified:!0,investmentRequired:!1,difficulty:Or.BEGINNER,rating:4.8,potentialEarnings:"$10 - $50 / test",link:"https://www.usertesting.com/be-a-tester",content:`
      <img src="https://images.unsplash.com/photo-1516321318423-f06f85e504b3?q=80&w=2070&auto=format&fit=crop" class="w-full h-64 object-cover rounded-xl mb-8 border border-white/10 shadow-lg" alt="Setup de UserTesting" />

      <h2>Introduccin al Usability Testing</h2>
      <p>UserTesting es la plataforma lder mundial donde empresas como HP, Samsung, Adobe y Ford pagan por ver a personas reales intentando usar sus sitios web. No buscan expertos tcnicos, buscan <strong>usuarios normales</strong> que se frustren con mens mal diseados.</p>
      
      <h3>Requisitos Tcnicos Estrictos</h3>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
        <div class="bg-surface p-4 rounded border border-white/10">
           <strong class="text-neonGreen">Hardware Necesario</strong>
           <ul class="text-sm text-gray-400 list-disc pl-4 mt-2">
             <li>Ordenador (PC o Mac) con Windows 10+ o MacOS.</li>
             <li>Micrfono externo (Recomendado) o auriculares de buena calidad.</li>
             <li>Conexin estable de al menos 10 Mbps de subida.</li>
           </ul>
        </div>
        <div class="bg-surface p-4 rounded border border-white/10">
           <strong class="text-danger">Motivos de Rechazo Inmediato</strong>
           <ul class="text-sm text-gray-400 list-disc pl-4 mt-2">
             <li>Ruido de fondo (perros, trfico, ventiladores).</li>
             <li>Leer la tarea en silencio.</li>
             <li>No hablar durante ms de 10 segundos.</li>
           </ul>
        </div>
      </div>

      <h2>La Tcnica Secreta: "Think Aloud Protocol"</h2>
      <p>El 80% de la gente es rechazada en el primer test de prueba no porque no sepan usar la web, sino porque <strong>no saben verbalizar sus pensamientos</strong>. Aqu tienes la diferencia:</p>

      <div class="bg-[#1a1a1a] border-l-4 border-danger p-4 mb-4">
        <h4 class="font-bold text-danger text-sm uppercase"> Forma Incorrecta (Rechazado)</h4>
        <p class="italic text-gray-500 text-sm">El usuario mueve el ratn, hace clic en 'Men', luego en 'Contacto'. No dice nada hasta el final: "Ya lo encontr".</p>
      </div>

      <div class="bg-[#1a1a1a] border-l-4 border-neonGreen p-4 mb-8">
        <h4 class="font-bold text-neonGreen text-sm uppercase"> Forma Correcta (Aprobado - $10)</h4>
        <p class="italic text-gray-300 text-sm">"Vale, la tarea dice que busque el horario de atencin. Estoy mirando la barra superior... veo Inicio, Servicios, Nosotros... no veo 'Contacto' aqu. Eso me confunde un poco. Voy a bajar al pie de pgina (scroll)... ah, vale, aqu abajo en letra pequea pone 'Atencin al Cliente'. Hago clic. Espero que cargue... vale, aqu veo el telfono pero no el horario. Ah, espera, est en una pestaa lateral. Es un poco difcil de ver."</p>
      </div>
    `},{id:"2",name:"Binance Earn: Inters Compuesto",category:or.CRYPTO,description:"Gua para configurar una cartera de ahorro cripto de bajo riesgo. Staking, Launchpools y Ahorros Flexibles explicados.",verified:!0,investmentRequired:!0,difficulty:Or.INTERMEDIATE,rating:4.5,potentialEarnings:"5% - 20% APY",content:`
      <img src="https://images.unsplash.com/photo-1621416894569-0f39ed31d247?q=80&w=2069&auto=format&fit=crop" class="w-full h-64 object-cover rounded-xl mb-8 border border-white/10 shadow-lg" alt="Grficos de Criptomonedas" />

      <h2>El Banco del Futuro</h2>
      <p>Binance Earn funciona como una cuenta de ahorros bancaria tradicional, pero con las tasas de inters de las criptomonedas. En lugar de un 0.01% anual del banco, puedes obtener entre un 5% y un 20% anual (APY) prestando tu liquidez.</p>

      <h3>La Estrategia del "Escudo": 50/30/20</h3>
      <p>Para minimizar la volatilidad del mercado (que Bitcoin baje de precio), usa esta distribucin de capital:</p>

      <ul class="space-y-4 mt-6">
        <li class="bg-surface p-4 rounded-lg border-l-4 border-neonGreen">
            <h4 class="text-white font-bold">50% en Stablecoins (USDT/USDC)</h4>
            <p class="text-sm text-gray-400 mt-1">Usa "Simple Earn Flexible". Esto es dinero digital pegado al dlar. No baja de precio. Binance suele pagar entre un <strong>7% y un 15% anual</strong> en promociones. Es tu fondo de seguridad.</p>
        </li>
        <li class="bg-surface p-4 rounded-lg border-l-4 border-techPurple">
            <h4 class="text-white font-bold">30% en Ethereum (WBETH)</h4>
            <p class="text-sm text-gray-400 mt-1">Si confas en el futuro de la red, no dejes tu ETH parado. Convirtelo a WBETH (Staked Ether). Ganars un ~3.5% anual en ETH extra, compuesto diariamente.</p>
        </li>
        <li class="bg-surface p-4 rounded-lg border-l-4 border-proGold">
            <h4 class="text-white font-bold">20% en Launchpool (BNB)</h4>
            <p class="text-sm text-gray-400 mt-1">Compra BNB y bloqualo en la seccin "Launchpool". Cada vez que Binance lanza una moneda nueva, te regalan tokens gratis. Estrategia: Vende esos tokens gratis inmediatamente por USDT y reinvierte.</p>
        </li>
      </ul>

      <div class="bg-danger/10 p-6 rounded-xl border border-danger/30 my-8">
        <h3 class="text-danger font-bold flex items-center gap-2"> Zona de Peligro: Dual Investment</h3>
        <p class="text-gray-300 mt-2">Vers productos que prometen "120% APR". Se llaman <strong>Dual Investment</strong>. Es un producto derivado complejo. Si el mercado baja, te obligan a comprar caro.</p>
      </div>
    `},{id:"5",name:"Google Rewards: Geolocalizacin",category:or.SURVEYS,description:"Maximiza tus encuestas entendiendo cmo funciona el algoritmo de localizacin de Google. Saldo gratis para la Play Store.",verified:!0,investmentRequired:!1,difficulty:Or.BEGINNER,rating:4,potentialEarnings:"$5 - $10 / mes",content:`
      <img src="https://images.unsplash.com/photo-1573867639040-6dd25fa5f597?q=80&w=2070&auto=format&fit=crop" class="w-full h-64 object-cover rounded-xl mb-8 border border-white/10 shadow-lg" alt="Mapa de Google" />

      <h2>Cmo Hackear (Legalmente) el Algoritmo</h2>
      <p>Google Opinion Rewards no es una app de encuestas normal. No les importa tu opinin poltica. Les importa <strong>validar sus datos de Google Maps</strong>.</p>
      <p>Te pagan por confirmar: "Realmente estuviste en el Starbucks ayer? Pagaste con tarjeta o efectivo? Tienes el recibo?".</p>

      <h3>3 Mandamientos para Recibir Encuestas</h3>
      <div class="space-y-4 my-6">
          <div class="flex gap-4">
              <div class="w-8 h-8 rounded bg-white/10 flex items-center justify-center text-neonGreen font-bold">1</div>
              <div>
                  <h4 class="text-white font-bold">Activa el Historial de Ubicaciones</h4>
                  <p class="text-sm text-gray-400">Sin GPS, no hay dinero. Google necesita saber que has entrado en un centro comercial. Activa siempre el GPS y los datos cuando salgas de casa.</p>
              </div>
          </div>
          <div class="flex gap-4">
              <div class="w-8 h-8 rounded bg-white/10 flex items-center justify-center text-neonGreen font-bold">2</div>
              <div>
                  <h4 class="text-white font-bold">La Verdad ante todo (Preguntas Trampa)</h4>
                  <p class="text-sm text-gray-400">A veces te preguntarn: <em>"Has estado en el Parque Acutico de Madrid ayer?"</em>. Si es invierno y dices que S, te marcarn como mentiroso.</p>
              </div>
          </div>
      </div>
    `},{id:"pro-1",name:"Masterclass: Arbitraje Cripto P2P",category:or.CRYPTO,description:"Curso completo: Compra barato y vende caro en mercados P2P. Lista de spreads, mtodos de pago y seguridad.",verified:!0,investmentRequired:!0,difficulty:Or.ADVANCED,rating:5,isPremium:!0,potentialEarnings:"$50 - $200 / da",content:`
        <img src="https://images.unsplash.com/photo-1642543492481-44e81e3914a7?q=80&w=2070&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-proGold/30 shadow-[0_0_30px_rgba(251,191,36,0.2)]" alt="Arbitraje P2P" />

        <h2>Mdulo 1: La Matemtica del Negocio</h2>
        <p>El arbitraje P2P no es trading especulativo. Es un negocio de provisin de liquidez. T eres el cambista del aeropuerto digital.</p>
        <p>El objetivo es ganar el <strong>Spread (Diferencia)</strong> entre el precio de compra y venta. Una buena operacin deja un 1% - 3% de beneficio neto sobre el capital movido.</p>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
            <div class="bg-[#121212] p-6 rounded-xl border border-proGold/50 relative overflow-hidden">
                <div class="absolute top-0 right-0 w-20 h-20 bg-proGold/10 blur-xl rounded-full"></div>
                <h4 class="text-proGold font-bold text-lg mb-2">Tu Rol: MAKER (El Dueo)</h4>
                <p class="text-sm text-gray-400 mb-4">Publicas anuncios. T decides el precio. Tienes paciencia.</p>
                <div class="bg-black/50 p-3 rounded text-xs font-mono text-neonGreen">
                    Compra: 0.99 USD<br/>
                    Venta: 1.02 USD<br/>
                    Spread: 3%
                </div>
            </div>
            <div class="bg-[#121212] p-6 rounded-xl border border-white/10 opacity-60 grayscale">
                <h4 class="text-gray-400 font-bold text-lg mb-2">El Cliente: TAKER (El Prisa)</h4>
                <p class="text-sm text-gray-500 mb-4">Toma los anuncios existentes. Paga la comisin. Quiere el dinero YA.</p>
            </div>
        </div>

        <h2>Mdulo 2: Configuracin de "Mtodos Ganadores"</h2>
        <p>No uses transferencia bancaria local instantnea (SEPA Instant / Bizum), ah todo el mundo compite y el margen es 0.1%. El dinero est en la <strong>dificultad</strong>.</p>

        <h3>La Lista Alpha de Mtodos de Pago (Spread Alto)</h3>
        <ul class="space-y-4 mt-4">
            <li class="flex items-start gap-3">
                <div class="mt-1 w-2 h-2 rounded-full bg-proGold"></div>
                <div>
                    <strong class="text-white">Wise (Multidivisa):</strong> Volumen brutal. Te permite operar en USD, EUR y GBP. <br/><span class="text-xs text-gray-400">Riesgo: Wise cierra cuentas si pones "Binance" o "Cripto" en el concepto.</span>
                </div>
            </li>
            <li class="flex items-start gap-3">
                <div class="mt-1 w-2 h-2 rounded-full bg-proGold"></div>
                <div>
                    <strong class="text-white">Zinli / Wally (Latam):</strong> Muy populares en Venezuela y Panam. Mrgenes excelentes si tienes acceso a documentos de identidad de esas regiones.
                </div>
            </li>
        </ul>
    `},{id:"pro-2",name:"Curso: High Ticket Appointment Setting",category:or.HIGH_TICKET,description:"La profesin digital ms demandada. Agenda llamadas para coaches y gana $200-$500 por comisin.",verified:!0,investmentRequired:!1,difficulty:Or.INTERMEDIATE,rating:4.9,isPremium:!0,potentialEarnings:"$1500 - $3000 / mes",content:`
        <img src="https://images.unsplash.com/photo-1556761175-5973dc0f32e7?q=80&w=2032&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-proGold/30 shadow-[0_0_30px_rgba(251,191,36,0.2)]" alt="Reunin de Negocios High Ticket" />

        <h2>Mdulo 1: Por qu pagan tanto?</h2>
        <p>Un "Infoproductor" (Coach Fitness, Mentor de Negocios, Psiclogo) vende programas de $2,000 USD. Para vender eso, necesitan una llamada telefnica (Zoom) con el cliente.</p>
        <p>El problema: El Coach est ocupado grabando vdeos. No tiene tiempo de estar en Instagram respondiendo DMs a 50 personas para ver quin tiene dinero y quin no.</p>
        <p><strong>Ah entras t (El Setter).</strong> Tu trabajo es filtrar a los curiosos, encontrar a los cualificados y agendar la cita.</p>

        <h2>Mdulo 2: El Script de Conversin (Copy-Paste)</h2>
        <p>No seas un robot. Usa el marco psicolgico <strong>Pain-Gap-Bridge</strong>. Aqu tienes una conversacin real ganadora:</p>

        <div class="space-y-6 my-8 font-sans">
            <div class="flex gap-4">
                <div class="bg-gray-800 p-4 rounded-2xl rounded-tl-none max-w-[80%] text-sm text-gray-300">
                    <strong class="text-neonGreen block mb-1">T (Apertura):</strong>
                    "Hola Carlos , vi que me empezaste a seguir. Me dio curiosidad, eres entrenador personal tambin o solo te gusta el fitness?"
                </div>
            </div>
            
            <div class="flex gap-4">
                <div class="bg-gray-800 p-4 rounded-2xl rounded-tl-none max-w-[80%] text-sm text-gray-300">
                    <strong class="text-proGold block mb-1">T (El Cierre / Gap):</strong>
                    "Te entiendo perfectamente. Justo hemos ayudado a 3 entrenadores esta semana con eso mismo. Mira, no te quiero vender nada por chat, pero si tienes 10 minutos, te explico en una llamada rpida cmo montamos el sistema de captacin automtica. Te encaja mejor Jueves o Viernes?"
                </div>
            </div>
        </div>
    `},{id:"pro-3",name:"Blueprint: Amazon FBA Private Label",category:or.ECOMMERCE,description:"Gua tcnica: De Alibaba a Amazon. Investigacin de producto, negociacin china y logstica DDP.",verified:!0,investmentRequired:!0,difficulty:Or.EXPERT,rating:4.7,isPremium:!0,potentialEarnings:"$2000+ / mes (Escalable)",content:`
        <img src="https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?q=80&w=2070&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-proGold/30 shadow-[0_0_30px_rgba(251,191,36,0.2)]" alt="Amazon FBA Logstica" />

        <h2>Mdulo 1: La Ciencia de los Datos (Helium 10)</h2>
        <p>Olvdate de "vender lo que te apasiona". En Amazon vendemos lo que los datos dicen. Usamos herramientas como <strong>Helium 10</strong> o <strong>Jungle Scout</strong> (la extensin de Chrome es obligatoria).</p>
        
        <h3>Criterios de Producto Ganador 2024</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 mb-8">
            <div class="bg-[#1a1a1a] p-4 rounded-lg border border-white/5">
                <h4 class="text-neonGreen font-bold text-sm"> PRECIO: $25 - $60</h4>
                <p class="text-xs text-gray-500 mt-1">Menos de $20 no deja margen tras las comisiones de FBA y Publicidad. Ms de $60 es difcil de vender impulsivamente.</p>
            </div>
            <div class="bg-[#1a1a1a] p-4 rounded-lg border border-white/5">
                <h4 class="text-neonGreen font-bold text-sm"> DEMANDA: 3,000+ Ventas/mes</h4>
                <p class="text-xs text-gray-500 mt-1">La suma de ventas de los top 10 competidores debe superar las 3,000 unidades mensuales.</p>
            </div>
        </div>

        <h2>Mdulo 2: Maestra en Alibaba (Negociacin China)</h2>
        <p>Nunca aceptes el primer precio. En China, el precio es una sugerencia. Tu objetivo es conseguir el producto puesto en Amazon (DDP) por un <strong>25% del precio de venta final</strong>.</p>
        
        <div class="bg-[#121212] border-l-4 border-proGold p-6 my-6 font-mono text-sm text-gray-300 relative">
            <div class="absolute top-2 right-2 text-[10px] text-proGold border border-proGold px-2 rounded">TEMPLATE</div>
            <strong>Mensaje Inicial al Proveedor:</strong><br/><br/>
            "Ni Hao,<br/>
            I am the purchasing manager for [Tu Marca], a premium home-goods brand in Spain.<br/>
            We are looking to add [Producto] to our Q4 catalog.<br/><br/>
            Please provide your best <strong>DDP Price</strong> (Delivered Duty Paid) to Amazon FBA Warehouse code BCN1 (Barcelona).<br/>
            Waiting for your reply."
        </div>
    `},{id:"pro-4",name:"Gua Definitiva: Airdrop Farming PRO",category:or.CRYPTO,description:"Genera miles de dlares interactuando con blockchains en fase de prueba. Rutas exactas para ZkSync, LayerZero y Scroll.",verified:!0,investmentRequired:!0,difficulty:Or.ADVANCED,rating:4.8,isPremium:!0,potentialEarnings:"$2000 - $10,000 / evento",content:`
        <img src="https://images.unsplash.com/photo-1639762681485-074b7f938ba0?q=80&w=2070&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-proGold/30 shadow-[0_0_30px_rgba(251,191,36,0.2)]" alt="Blockchain Network" />

        <h2>Filosofa: Por qu regalan dinero?</h2>
        <p>Los nuevos proyectos blockchain (como Arbitrum, Optimism o ZkSync) necesitan descentralizar su token para no ser demandados por la SEC (EEUU) y para tener usuarios reales. El "Airdrop" es un pago retroactivo a los usuarios que probaron la red antes de que fuera famosa.</p>
        <p><strong>El premio gordo:</strong> Arbitrum regal ~$3,000 por billetera. Jito (Solana) regal +$10,000.</p>

        <div class="bg-surface p-6 rounded-xl border border-techPurple my-8 relative overflow-hidden">
            <div class="absolute -right-10 -top-10 w-32 h-32 bg-techPurple/20 blur-2xl rounded-full"></div>
            <h3 class="text-white font-bold mb-4 flex items-center gap-2"><ShieldCheck size={20} className="text-techPurple"/> Protocolo Anti-Sybil (NO TE SALTES ESTO)</h3>
            <p class="text-gray-400 text-sm mb-4">Los proyectos usan IA para detectar "granjas de bots". Si pareces un bot, te pondrn en la lista negra y ganars $0. Para parecer humano:</p>
            <ul class="text-sm space-y-3">
                <li class="flex items-start gap-2 text-gray-300">
                    <span class="text-red-500 font-bold"></span> <strong>No conectes tus wallets:</strong> Nunca enves ETH de tu Wallet A a tu Wallet B. Usa siempre un Exchange (Binance/OKX) como puente intermedio. Binance -> Wallet A. Binance -> Wallet B.
                </li>
                <li class="flex items-start gap-2 text-gray-300">
                    <span class="text-neonGreen font-bold"></span> <strong>Deja huella de liquidez:</strong> Mantn siempre al menos 0.005 ETH ($15) en la wallet. Las wallets vacas son marcadas como bots desechables.
                </li>
            </ul>
        </div>

        <h2>La Ruta de Farming: ZkSync Era & Scroll (Semana 1)</h2>
        <p>Realiza estas acciones secuencialmente. Coste estimado en gas: $15.</p>

        <h3>Paso 1: El Puente Oficial (Official Bridge)</h3>
        <p>Es el criterio ms importante. Enva ETH desde Ethereum Mainnet a ZkSync Era usando el puente oficial <a href="#" class="text-neonGreen underline">portal.zksync.io</a>. Hazlo al menos una vez, aunque sea caro.</p>

        <h3>Paso 2: Generar Volumen (DEXs)</h3>
        <p>Necesitas mover dinero. No importa si pierdes $1 en fees, importa que la blockchain registre volumen.</p>
        <ul>
            <li>Entra en <strong>SyncSwap</strong>. Cambia el 80% de tus ETH a USDC.</li>
            <li>Espera 10 minutos.</li>
            <li>Entra en <strong>Mute.io</strong>. Cambia esos USDC de vuelta a ETH.</li>
        </ul>
    `}],Tf=[{id:"1",title:"Gua Oficial: Gana tus primeros Robux o Saldo con Reseas",excerpt:"El paso a paso definitivo para participar en la campaa de Google Maps de GDH sin cometer errores.",category:"Tutorial GDH",readTime:"4 min",date:"Actualizado Hoy",imageUrl:"https://images.unsplash.com/photo-1639762681485-074b7f938ba0?auto=format&fit=crop&q=80&w=800",content:`
      <h2>Introduccin</h2>
      <p>Las reseas en Google Maps son vitales para los negocios locales. En GDH conectamos negocios que necesitan mejorar su reputacin con usuarios dispuestos a escribir reseas honestas y de calidad.</p>
      
      <h3>Cunto se paga?</h3>
      <p>El pago estndar por resea verificada y publicada es de:</p>
      <ul>
        <li><strong>Opcin A:</strong> $0.50 - $1.00 USD va PayPal/Binance.</li>
        <li><strong>Opcin B:</strong> 50 - 100 Robux (cubrimos tasas).</li>
        <li><strong>Opcin C:</strong> 1 Mes de Discord Nitro (pack de 5 reseas).</li>
      </ul>

      <h3>Reglas de Oro (Para no ser baneado)</h3>
      <ol>
        <li><strong>No copiar y pegar:</strong> Google detecta textos duplicados. Tu resea debe ser nica.</li>
        <li><strong>Simular naturalidad:</strong> Busca el negocio en Google Maps, navega por las fotos unos segundos antes de escribir. No entres con enlace directo y escribas en 5 segundos.</li>
        <li><strong>Perfil con foto:</strong> Los perfiles de Google sin foto de perfil suelen ser filtrados como spam.</li>
      </ol>
      
      <h3>Cmo empezar</h3>
      <p>nete a nuestro Discord y busca el canal <strong>#tareas-disponibles</strong>. Abre un ticket para solicitar tu primera asignacin.</p>
    `},{id:"2",title:"Cmo detectar estafas en Telegram y Discord (Gua Auditora)",excerpt:"Los mtodos ms sofisticados que usan los estafadores en 2024 y cmo detectarlos al instante.",category:"Ciberseguridad",readTime:"10 min",date:"10 Oct 2023",imageUrl:"https://images.unsplash.com/photo-1563986768609-322da13575f3?auto=format&fit=crop&q=80&w=800",content:`
      <h2>El Tringulo del Fraude</h2>
      <p>Todas las estafas financieras online, desde Ponzis cripto hasta falsos gurs, se basan en tres pilares psicolgicos. Si aprendes a identificarlos, sers inmune.</p>

      <div class="grid grid-cols-1 md:grid-cols-3 gap-4 my-6">
        <div class="bg-surface p-4 rounded border border-white/10">
            <h4 class="text-neonGreen font-bold">1. La Promesa Desmesurada</h4>
            <p class="text-xs text-gray-400">"Gana 2% diario fijo", "Sin riesgo", "Dinero garantizado". El mercado real flucta. Lo fijo y alto siempre es Ponzi.</p>
        </div>
        <div class="bg-surface p-4 rounded border border-white/10">
            <h4 class="text-neonGreen font-bold">2. La Urgencia Artificial</h4>
            <p class="text-xs text-gray-400">"Solo quedan 5 plazas", "El precio sube en 1 hora". Buscan que tu cerebro emocional anule al racional.</p>
        </div>
        <div class="bg-surface p-4 rounded border border-white/10">
            <h4 class="text-neonGreen font-bold">3. La Oscuridad Tcnica</h4>
            <p class="text-xs text-gray-400">"Usamos un bot de arbitraje cuntico con IA". Palabras complejas para ocultar que no hay producto real.</p>
        </div>
      </div>

      <h3>Herramientas de Auditora (Gratis)</h3>
      <p>Antes de meter un dlar en cualquier plataforma, psala por este filtro:</p>

      <h4>1. Whois Domain Tools</h4>
      <p>Entra en <a href="https://who.is" target="_blank" class="text-neonGreen underline">who.is</a> y pon el dominio de la empresa.</p>
      <ul>
        <li><strong>Red Flag :</strong> El dominio fue creado hace 2 semanas pero dicen ser "Lderes mundiales desde 2010".</li>
        <li><strong>Red Flag :</strong> El registro expira en 1 ao (las empresas serias compran dominios por 5-10 aos).</li>
      </ul>
    `},{id:"pro-1",title:"BLUEPRINT: De 0 a $3,000/mes con SEO Parsito (Paso a Paso)",excerpt:"Cmo usar la autoridad de LinkedIn y Medium para posicionar artculos de afiliado en Top 1 de Google en 48 horas.",category:"Estrategia Growth",readTime:"15 min",date:"Abierto al Pblico",isPremium:!1,imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=800",content:`
        <img src="https://images.unsplash.com/photo-1551288049-bebda4e38f71?q=80&w=2070&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-white/10 shadow-lg" alt="SEO Analysis" />

        <h2>Qu es el SEO Parsito?</h2>
        <p>En lugar de crear un sitio web nuevo y esperar 6 meses a que Google confe en l, publicamos nuestro contenido en sitios con autoridad DR90+ (como LinkedIn, Medium, Outlook India) para rankear en 24 horas.</p>

        <h3>El Mtodo paso a paso</h3>
        <ol>
            <li><strong>Seleccin de Nicho:</strong> Suplementos legales, Software SaaS, Cursos de Cripto.</li>
            <li><strong>Keyword Research:</strong> Busca trminos con "Review", "Opiniones", "Mejor X para Y".</li>
            <li><strong>Plataforma:</strong> LinkedIn Pulse es la ms potente ahora mismo.</li>
        </ol>

        <h3>Estructura del Artculo (Copywriting)</h3>
        <p>No vendas. Informa. La gente busca opiniones honestas.</p>
        <ul>
            <li><strong>Ttulo:</strong> [Nombre Producto] Review 2024: Es una Estafa o Vale la Pena?</li>
            <li><strong>Intro:</strong> Empatiza con el problema del usuario.</li>
            <li><strong>Pros y Contras:</strong> S brutalmente honesto con los contras para ganar confianza.</li>
            <li><strong>Veredicto:</strong> Recomienda el producto con tu enlace de afiliado.</li>
        </ul>

        <h3>Backlinks (El Boost)</h3>
        <p>Una vez publicado, enva unos 10-20 backlinks de calidad media a tu artculo de LinkedIn para asegurar la posicin #1.</p>
    `},{id:"pro-ai-studio",title:"Masterclass: Dominando Google AI Studio (Gemini 2.0)",excerpt:"Aprende a crear Agentes de IA, ajustar modelos (Fine-Tuning) y conectar la API de Google en tus aplicaciones. Curso Tcnico Avanzado.",category:"Inteligencia Artificial",readTime:"Curso de 4 Semanas",date:"Plazas Limitadas",isPremium:!0,hasApplicationForm:!0,imageUrl:"https://images.unsplash.com/photo-1677442136019-21780ecad995?q=80&w=2070&auto=format&fit=crop",content:`
        <img src="https://images.unsplash.com/photo-1620712943543-bcc4688e7485?q=80&w=2065&auto=format&fit=crop" class="w-full h-72 object-cover rounded-xl mb-8 border border-proGold/30 shadow-[0_0_30px_rgba(251,191,36,0.2)]" alt="AI Neural Network" />

        <h2>El Poder Oculto de Gemini (Ms all de ChatGPT)</h2>
        <p>La mayora usa chatbots. El 1% usa <strong>Google AI Studio</strong>. Es la plataforma de desarrollo profesional que te permite manipular los parmetros del modelo (Temperatura, Top-K), inyectar contexto masivo (hasta 2 millones de tokens) y crear <strong>Agentes Autnomos</strong>.</p>

        <div class="bg-surface border-l-4 border-neonGreen p-6 my-6 rounded-r-xl">
            <h3 class="text-white font-bold mb-2">Qu aprenders en esta Masterclass?</h3>
            <ul class="space-y-2 text-gray-400 text-sm">
                <li class="flex items-center gap-2"><span class="text-neonGreen"></span> <strong>System Instructions:</strong> Cmo programar la personalidad y reglas inquebrantables de la IA.</li>
                <li class="flex items-center gap-2"><span class="text-neonGreen"></span> <strong>Structured Prompts:</strong> Obligar a la IA a devolver JSON limpio para tus apps.</li>
                <li class="flex items-center gap-2"><span class="text-neonGreen"></span> <strong>Multimodalidad:</strong> Analizar vdeo y audio en tiempo real va API.</li>
                <li class="flex items-center gap-2"><span class="text-neonGreen"></span> <strong>Fine-Tuning:</strong> Entrenar a Gemini con TUS propios datos empresariales.</li>
            </ul>
        </div>

        <h2>Mdulo 1: La Interfaz de Ingeniero</h2>
        <p>Aprenderemos a obtener tu API Key gratuita y configurar el entorno. Olvida la interfaz de chat de usuario final. Aqu vemos los "huesos" del modelo.</p>
        
        <h3>Ejemplo de Cdigo (Node.js SDK)</h3>
        <div class="bg-[#1e1e1e] p-4 rounded-lg border border-white/10 font-mono text-xs text-gray-300 overflow-x-auto">
            <span class="text-purple-400">const</span> { GoogleGenerativeAI } = <span class="text-yellow-300">require</span>(<span class="text-green-300">"@google/generative-ai"</span>);<br/>
            <span class="text-purple-400">const</span> genAI = <span class="text-purple-400">new</span> GoogleGenerativeAI(process.env.API_KEY);<br/><br/>
            <span class="text-gray-500">// Configuracin avanzada del modelo</span><br/>
            <span class="text-purple-400">const</span> model = genAI.getGenerativeModel({ <br/>
            &nbsp;&nbsp;model: <span class="text-green-300">"gemini-1.5-pro-latest"</span>,<br/>
            &nbsp;&nbsp;generationConfig: { responseMimeType: <span class="text-green-300">"application/json"</span> }<br/>
            });
        </div>

        <h2>Mdulo 2: Creacin de Agentes de Ventas</h2>
        <p>Disearemos un prompt estructurado que acte como un vendedor agresivo que nunca se sale del personaje, capaz de leer PDFs de productos y responder dudas tcnicas sin alucinar.</p>

        <h2>Requisitos de Acceso</h2>
        <p>Este curso no es para principiantes absolutos. Se requiere conocimientos bsicos de programacin o una fuerte voluntad de aprender lgica tcnica. Debido a la alta demanda de soporte personalizado que damos en el mdulo de API, <strong>las plazas estn limitadas</strong>.</p>
        
        <div class="bg-proGold/10 border border-proGold/30 p-4 rounded-lg mt-6 text-center">
            <p class="text-proGold font-bold text-sm">RELLENA EL FORMULARIO ABAJO PARA SOLICITAR TU ACCESO AL CURSO.</p>
        </div>
    `}],xP=()=>{};var Qx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},bP=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const a=n[t++];e[i++]=String.fromCharCode((r&31)<<6|a&63)}else if(r>239&&r<365){const a=n[t++],l=n[t++],c=n[t++],h=((r&7)<<18|(a&63)<<12|(l&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(h>>10)),e[i++]=String.fromCharCode(56320+(h&1023))}else{const a=n[t++],l=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(a&63)<<6|l&63)}}return e.join("")},XA={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const a=n[r],l=r+1<n.length,c=l?n[r+1]:0,h=r+2<n.length,f=h?n[r+2]:0,_=a>>2,T=(a&3)<<4|c>>4;let x=(c&15)<<2|f>>6,A=f&63;h||(A=64,l||(x=64)),i.push(t[_],t[T],t[x],t[A])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(WA(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):bP(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const a=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;const f=r<n.length?t[n.charAt(r)]:64;++r;const T=r<n.length?t[n.charAt(r)]:64;if(++r,a==null||c==null||f==null||T==null)throw new SP;const x=a<<2|c>>4;if(i.push(x),f!==64){const A=c<<4&240|f>>2;if(i.push(A),T!==64){const V=f<<6&192|T;i.push(V)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class SP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const wP=function(n){const e=WA(n);return XA.encodeByteArray(e,!0)},ZA=function(n){return wP(n).replace(/\./g,"")},eI=function(n){try{return XA.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=()=>tI().__FIREBASE_DEFAULTS__,IP=()=>{if(typeof process>"u"||typeof Qx>"u")return;const n=Qx.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CP=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&eI(n[1]);return e&&JSON.parse(e)},Cp=()=>{try{return xP()||AP()||IP()||CP()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},RP=n=>{var e,t;return(t=(e=Cp())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},nI=()=>{var n;return(n=Cp())==null?void 0:n.config},iI=n=>{var e;return(e=Cp())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function rI(n){return(await fetch(n,{credentials:"include"})).ok}const Oc={};function DP(){const n={prod:[],emulator:[]};for(const e of Object.keys(Oc))Oc[e]?n.emulator.push(e):n.prod.push(e);return n}function MP(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Wx=!1;function PP(n,e){if(typeof window>"u"||typeof document>"u"||!Zl(window.location.host)||Oc[n]===e||Oc[n]||Wx)return;Oc[n]=e;function t(x){return`__firebase__banner__${x}`}const i="__firebase__banner",a=DP().prod.length>0;function l(){const x=document.getElementById(i);x&&x.remove()}function c(x){x.style.display="flex",x.style.background="#7faaf0",x.style.position="fixed",x.style.bottom="5px",x.style.left="5px",x.style.padding=".5em",x.style.borderRadius="5px",x.style.alignItems="center"}function h(x,A){x.setAttribute("width","24"),x.setAttribute("id",A),x.setAttribute("height","24"),x.setAttribute("viewBox","0 0 24 24"),x.setAttribute("fill","none"),x.style.marginLeft="-6px"}function f(){const x=document.createElement("span");return x.style.cursor="pointer",x.style.marginLeft="16px",x.style.fontSize="24px",x.innerHTML=" &times;",x.onclick=()=>{Wx=!0,l()},x}function _(x,A){x.setAttribute("id",A),x.innerText="Learn more",x.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",x.setAttribute("target","__blank"),x.style.paddingLeft="5px",x.style.textDecoration="underline"}function T(){const x=MP(i),A=t("text"),V=document.getElementById(A)||document.createElement("span"),k=t("learnmore"),L=document.getElementById(k)||document.createElement("a"),$=t("preprendIcon"),z=document.getElementById($)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(x.created){const H=x.element;c(H),_(L,k);const Z=f();h(z,$),H.append(z,V,L,Z),document.body.appendChild(H)}a?(V.innerText="Preview backend disconnected.",z.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(z.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",T):T()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function sI(){var e;const n=(e=Cp())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function VP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function oI(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function LP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function OP(){const n=Yt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function aI(){return!sI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function lI(){return!sI()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function Fv(){try{return typeof indexedDB=="object"}catch{return!1}}function uI(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var a;e(((a=r.error)==null?void 0:a.message)||"")}}catch(t){e(t)}})}function UP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="FirebaseError";class Li extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=GP,Object.setPrototypeOf(this,Li.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ma.prototype.create)}}class ma{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,a=this.errors[e],l=a?FP(a,i):"Error",c=`${this.serviceName}: ${l} (${r}).`;return new Li(r,c,i)}}function FP(n,e){return n.replace(zP,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const zP=/\{\$([^}]+)}/g;function qP(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Qs(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const a=n[r],l=e[r];if(Xx(a)&&Xx(l)){if(!Qs(a,l))return!1}else if(a!==l)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function Xx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hd(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Ic(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,a]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(a)}}),e}function Cc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function BP(n,e){const t=new HP(n,e);return t.subscribe.bind(t)}class HP{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");jP(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=my),r.error===void 0&&(r.error=my),r.complete===void 0&&(r.complete=my);const a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),a}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jP(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function my(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $P=1e3,KP=2,JP=14400*1e3,YP=.5;function Zx(n,e=$P,t=KP){const i=e*Math.pow(t,n),r=Math.round(YP*i*(Math.random()-.5)*2);return Math.min(JP,i+r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(n){return n&&n._delegate?n._delegate:n}class ki{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new NP;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(r){if(i)return null;throw r}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(XP(e))try{this.getOrInitializeService({instanceIdentifier:zo})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const a=this.getOrInitializeService({instanceIdentifier:r});i.resolve(a)}catch{}}}}clearInstance(e=zo){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=zo){return this.instances.has(e)}getOptions(e=zo){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[a,l]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(a);i===c&&l.resolve(r)}return r}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),r=this.onInitCallbacks.get(i)??new Set;r.add(e),this.onInitCallbacks.set(i,r);const a=this.instances.get(i);return a&&e(a,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:WP(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=zo){return this.component?this.component.multipleInstances?e:zo:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function WP(n){return n===zo?void 0:n}function XP(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new QP(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $e;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})($e||($e={}));const ek={debug:$e.DEBUG,verbose:$e.VERBOSE,info:$e.INFO,warn:$e.WARN,error:$e.ERROR,silent:$e.SILENT},tk=$e.INFO,nk={[$e.DEBUG]:"log",[$e.VERBOSE]:"log",[$e.INFO]:"info",[$e.WARN]:"warn",[$e.ERROR]:"error"},ik=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=nk[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rp{constructor(e){this.name=e,this._logLevel=tk,this._logHandler=ik,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?ek[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$e.DEBUG,...e),this._logHandler(this,$e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$e.VERBOSE,...e),this._logHandler(this,$e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$e.INFO,...e),this._logHandler(this,$e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$e.WARN,...e),this._logHandler(this,$e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$e.ERROR,...e),this._logHandler(this,$e.ERROR,...e)}}const rk=(n,e)=>e.some(t=>n instanceof t);let eb,tb;function sk(){return eb||(eb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ok(){return tb||(tb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cI=new WeakMap,zy=new WeakMap,dI=new WeakMap,gy=new WeakMap,zv=new WeakMap;function ak(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",a),n.removeEventListener("error",l)},a=()=>{t(Hs(n.result)),r()},l=()=>{i(n.error),r()};n.addEventListener("success",a),n.addEventListener("error",l)});return e.then(t=>{t instanceof IDBCursor&&cI.set(t,n)}).catch(()=>{}),zv.set(e,n),e}function lk(n){if(zy.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",a),n.removeEventListener("error",l),n.removeEventListener("abort",l)},a=()=>{t(),r()},l=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",a),n.addEventListener("error",l),n.addEventListener("abort",l)});zy.set(n,e)}let qy={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return zy.get(n);if(e==="objectStoreNames")return n.objectStoreNames||dI.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Hs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uk(n){qy=n(qy)}function ck(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(yy(this),e,...t);return dI.set(i,e.sort?e.sort():[e]),Hs(i)}:ok().includes(n)?function(...e){return n.apply(yy(this),e),Hs(cI.get(this))}:function(...e){return Hs(n.apply(yy(this),e))}}function dk(n){return typeof n=="function"?ck(n):(n instanceof IDBTransaction&&lk(n),rk(n,sk())?new Proxy(n,qy):n)}function Hs(n){if(n instanceof IDBRequest)return ak(n);if(gy.has(n))return gy.get(n);const e=dk(n);return e!==n&&(gy.set(n,e),zv.set(e,n)),e}const yy=n=>zv.get(n);function hI(n,e,{blocked:t,upgrade:i,blocking:r,terminated:a}={}){const l=indexedDB.open(n,e),c=Hs(l);return i&&l.addEventListener("upgradeneeded",h=>{i(Hs(l.result),h.oldVersion,h.newVersion,Hs(l.transaction),h)}),t&&l.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),c.then(h=>{a&&h.addEventListener("close",()=>a()),r&&h.addEventListener("versionchange",f=>r(f.oldVersion,f.newVersion,f))}).catch(()=>{}),c}const hk=["get","getKey","getAll","getAllKeys","count"],fk=["put","add","delete","clear"],vy=new Map;function nb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vy.get(e))return vy.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=fk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hk.includes(t)))return;const a=async function(l,...c){const h=this.transaction(l,r?"readwrite":"readonly");let f=h.store;return i&&(f=f.index(c.shift())),(await Promise.all([f[t](...c),r&&h.done]))[0]};return vy.set(e,a),a}uk(n=>({...n,get:(e,t,i)=>nb(e,t)||n.get(e,t,i),has:(e,t)=>!!nb(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(mk(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function mk(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const By="@firebase/app",ib="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new Rp("@firebase/app"),gk="@firebase/app-compat",yk="@firebase/analytics-compat",vk="@firebase/analytics",_k="@firebase/app-check-compat",Ek="@firebase/app-check",Tk="@firebase/auth",xk="@firebase/auth-compat",bk="@firebase/database",Sk="@firebase/data-connect",wk="@firebase/database-compat",Ak="@firebase/functions",Ik="@firebase/functions-compat",Ck="@firebase/installations",Rk="@firebase/installations-compat",Nk="@firebase/messaging",Dk="@firebase/messaging-compat",Mk="@firebase/performance",Pk="@firebase/performance-compat",kk="@firebase/remote-config",Vk="@firebase/remote-config-compat",Lk="@firebase/storage",Ok="@firebase/storage-compat",Uk="@firebase/firestore",Gk="@firebase/ai",Fk="@firebase/firestore-compat",zk="firebase",qk="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hy="[DEFAULT]",Bk={[By]:"fire-core",[gk]:"fire-core-compat",[vk]:"fire-analytics",[yk]:"fire-analytics-compat",[Ek]:"fire-app-check",[_k]:"fire-app-check-compat",[Tk]:"fire-auth",[xk]:"fire-auth-compat",[bk]:"fire-rtdb",[Sk]:"fire-data-connect",[wk]:"fire-rtdb-compat",[Ak]:"fire-fn",[Ik]:"fire-fn-compat",[Ck]:"fire-iid",[Rk]:"fire-iid-compat",[Nk]:"fire-fcm",[Dk]:"fire-fcm-compat",[Mk]:"fire-perf",[Pk]:"fire-perf-compat",[kk]:"fire-rc",[Vk]:"fire-rc-compat",[Lk]:"fire-gcs",[Ok]:"fire-gcs-compat",[Uk]:"fire-fst",[Fk]:"fire-fst-compat",[Gk]:"fire-vertex","fire-js":"fire-js",[zk]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf=new Map,Hk=new Map,jy=new Map;function rb(n,e){try{n.container.addComponent(e)}catch(t){Br.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mr(n){const e=n.name;if(jy.has(e))return Br.debug(`There were multiple attempts to register component ${e}.`),!1;jy.set(e,n);for(const t of jf.values())rb(t,n);for(const t of Hk.values())rb(t,n);return!0}function ga(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function ci(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},js=new ma("app","Firebase",jk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ki("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eu=qk;function fI(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:Hy,automaticDataCollectionEnabled:!0,...e},r=i.name;if(typeof r!="string"||!r)throw js.create("bad-app-name",{appName:String(r)});if(t||(t=nI()),!t)throw js.create("no-options");const a=jf.get(r);if(a){if(Qs(t,a.options)&&Qs(i,a.config))return a;throw js.create("duplicate-app",{appName:r})}const l=new ZP(r);for(const h of jy.values())l.addComponent(h);const c=new $k(t,i,l);return jf.set(r,c),c}function pI(n=Hy){const e=jf.get(n);if(!e&&n===Hy&&nI())return fI();if(!e)throw js.create("no-app",{appName:n});return e}function fi(n,e,t){let i=Bk[n]??n;t&&(i+=`-${t}`);const r=i.match(/\s|\//),a=e.match(/\s|\//);if(r||a){const l=[`Unable to register library "${i}" with version "${e}":`];r&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),r&&a&&l.push("and"),a&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Br.warn(l.join(" "));return}mr(new ki(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk="firebase-heartbeat-database",Jk=1,Jc="firebase-heartbeat-store";let _y=null;function mI(){return _y||(_y=hI(Kk,Jk,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw js.create("idb-open",{originalErrorMessage:n.message})})),_y}async function Yk(n){try{const t=(await mI()).transaction(Jc),i=await t.objectStore(Jc).get(gI(n));return await t.done,i}catch(e){if(e instanceof Li)Br.warn(e.message);else{const t=js.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Br.warn(t.message)}}}async function sb(n,e){try{const i=(await mI()).transaction(Jc,"readwrite");await i.objectStore(Jc).put(e,gI(n)),await i.done}catch(t){if(t instanceof Li)Br.warn(t.message);else{const i=js.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Br.warn(i.message)}}}function gI(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=1024,Wk=30;class Xk{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e4(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),a=ob();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===a||this._heartbeatsCache.heartbeats.some(l=>l.date===a))return;if(this._heartbeatsCache.heartbeats.push({date:a,agent:r}),this._heartbeatsCache.heartbeats.length>Wk){const l=t4(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(l,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Br.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ob(),{heartbeatsToSend:i,unsentEntries:r}=Zk(this._heartbeatsCache.heartbeats),a=ZA(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(t){return Br.warn(t),""}}}function ob(){return new Date().toISOString().substring(0,10)}function Zk(n,e=Qk){const t=[];let i=n.slice();for(const r of n){const a=t.find(l=>l.agent===r.agent);if(a){if(a.dates.push(r.date),ab(t)>e){a.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),ab(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class e4{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Fv()?uI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Yk(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return sb(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ab(n){return ZA(JSON.stringify({version:2,heartbeats:n})).length}function t4(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n4(n){mr(new ki("platform-logger",e=>new pk(e),"PRIVATE")),mr(new ki("heartbeat",e=>new Xk(e),"PRIVATE")),fi(By,ib,n),fi(By,ib,"esm2020"),fi("fire-js","")}n4("");var i4="firebase",r4="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fi(i4,r4,"app");function yI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const s4=yI,vI=new ma("auth","Firebase",yI());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $f=new Rp("@firebase/auth");function o4(n,...e){$f.logLevel<=$e.WARN&&$f.warn(`Auth (${eu}): ${n}`,...e)}function xf(n,...e){$f.logLevel<=$e.ERROR&&$f.error(`Auth (${eu}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vi(n,...e){throw qv(n,...e)}function dr(n,...e){return qv(n,...e)}function _I(n,e,t){const i={...s4(),[e]:t};return new ma("auth","Firebase",i).create(e,{appName:n.name})}function qr(n){return _I(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qv(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return vI.create(n,...e)}function De(n,e,...t){if(!n)throw qv(e,...t)}function Gr(n){const e="INTERNAL ASSERTION FAILED: "+n;throw xf(e),new Error(e)}function Hr(n,e){n||Gr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $y(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function a4(){return lb()==="http:"||lb()==="https:"}function lb(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(a4()||oI()||"connection"in navigator)?navigator.onLine:!0}function u4(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e,t){this.shortDelay=e,this.longDelay=t,Hr(t>e,"Short delay should be less than long delay!"),this.isMobile=kP()||LP()}get(){return l4()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bv(n,e){Hr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d4=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],h4=new fd(3e4,6e4);function Jr(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function yr(n,e,t,i,r={}){return TI(n,r,async()=>{let a={},l={};i&&(e==="GET"?l=i:a={body:JSON.stringify(i)});const c=hd({key:n.config.apiKey,...l}).slice(1),h=await n._getAdditionalHeaders();h["Content-Type"]="application/json",n.languageCode&&(h["X-Firebase-Locale"]=n.languageCode);const f={method:e,headers:h,...a};return VP()||(f.referrerPolicy="no-referrer"),n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(f.credentials="include"),EI.fetch()(await xI(n,n.config.apiHost,t,c),f)})}async function TI(n,e,t){n._canInitEmulator=!1;const i={...c4,...e};try{const r=new p4(n),a=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const l=await a.json();if("needConfirmation"in l)throw nf(n,"account-exists-with-different-credential",l);if(a.ok&&!("errorMessage"in l))return l;{const c=a.ok?l.errorMessage:l.error.message,[h,f]=c.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw nf(n,"credential-already-in-use",l);if(h==="EMAIL_EXISTS")throw nf(n,"email-already-in-use",l);if(h==="USER_DISABLED")throw nf(n,"user-disabled",l);const _=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw _I(n,_,f);Vi(n,_)}}catch(r){if(r instanceof Li)throw r;Vi(n,"network-request-failed",{message:String(r)})}}async function pd(n,e,t,i,r={}){const a=await yr(n,e,t,i,r);return"mfaPendingCredential"in a&&Vi(n,"multi-factor-auth-required",{_serverResponse:a}),a}async function xI(n,e,t,i){const r=`${e}${t}?${i}`,a=n,l=a.config.emulator?Bv(n.config,r):`${n.config.apiScheme}://${r}`;return d4.includes(t)&&(await a._persistenceManagerAvailable,a._getPersistenceType()==="COOKIE")?a._getPersistence()._getFinalTarget(l).toString():l}function f4(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class p4{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(dr(this.auth,"network-request-failed")),h4.get())})}}function nf(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=dr(n,e,i);return r.customData._tokenResponse=t,r}function ub(n){return n!==void 0&&n.enterprise!==void 0}class m4{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return f4(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function g4(n,e){return yr(n,"GET","/v2/recaptchaConfig",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y4(n,e){return yr(n,"POST","/v1/accounts:delete",e)}async function Kf(n,e){return yr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uc(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function v4(n,e=!1){const t=xt(n),i=await t.getIdToken(e),r=Hv(i);De(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const a=typeof r.firebase=="object"?r.firebase:void 0,l=a==null?void 0:a.sign_in_provider;return{claims:r,token:i,authTime:Uc(Ey(r.auth_time)),issuedAtTime:Uc(Ey(r.iat)),expirationTime:Uc(Ey(r.exp)),signInProvider:l||null,signInSecondFactor:(a==null?void 0:a.sign_in_second_factor)||null}}function Ey(n){return Number(n)*1e3}function Hv(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xf("JWT malformed, contained fewer than 3 sections"),null;try{const r=eI(t);return r?JSON.parse(r):(xf("Failed to decode base64 JWT payload"),null)}catch(r){return xf("Caught error parsing JWT payload as JSON",r==null?void 0:r.toString()),null}}function cb(n){const e=Hv(n);return De(e,"internal-error"),De(typeof e.exp<"u","internal-error"),De(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pl(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof Li&&_4(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function _4({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E4{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ky{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Uc(this.lastLoginAt),this.creationTime=Uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jf(n){var T;const e=n.auth,t=await n.getIdToken(),i=await Pl(n,Kf(e,{idToken:t}));De(i==null?void 0:i.users.length,e,"internal-error");const r=i.users[0];n._notifyReloadListener(r);const a=(T=r.providerUserInfo)!=null&&T.length?bI(r.providerUserInfo):[],l=x4(n.providerData,a),c=n.isAnonymous,h=!(n.email&&r.passwordHash)&&!(l!=null&&l.length),f=c?h:!1,_={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:l,metadata:new Ky(r.createdAt,r.lastLoginAt),isAnonymous:f};Object.assign(n,_)}async function T4(n){const e=xt(n);await Jf(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function x4(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function bI(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function b4(n,e){const t=await TI(n,{},async()=>{const i=hd({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:a}=n.config,l=await xI(n,r,"/v1/token",`key=${a}`),c=await n._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const h={method:"POST",headers:c,body:i};return n.emulatorConfig&&Zl(n.emulatorConfig.host)&&(h.credentials="include"),EI.fetch()(l,h)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function S4(n,e){return yr(n,"POST","/v2/accounts:revokeToken",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){De(e.idToken,"internal-error"),De(typeof e.idToken<"u","internal-error"),De(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){De(e.length!==0,"internal-error");const t=cb(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(De(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:a}=await b4(e,t);this.updateTokensAndExpiration(i,r,Number(a))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:a}=t,l=new Sl;return i&&(De(typeof i=="string","internal-error",{appName:e}),l.refreshToken=i),r&&(De(typeof r=="string","internal-error",{appName:e}),l.accessToken=r),a&&(De(typeof a=="number","internal-error",{appName:e}),l.expirationTime=a),l}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Sl,this.toJSON())}_performRefresh(){return Gr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ms(n,e){De(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Ni{constructor({uid:e,auth:t,stsTokenManager:i,...r}){this.providerId="firebase",this.proactiveRefresh=new E4(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new Ky(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(e){const t=await Pl(this,this.stsTokenManager.getToken(this.auth,e));return De(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return v4(this,e)}reload(){return T4(this)}_assign(e){this!==e&&(De(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Ni({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){De(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await Jf(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ci(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await Pl(this,y4(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,r=t.email??void 0,a=t.phoneNumber??void 0,l=t.photoURL??void 0,c=t.tenantId??void 0,h=t._redirectEventId??void 0,f=t.createdAt??void 0,_=t.lastLoginAt??void 0,{uid:T,emailVerified:x,isAnonymous:A,providerData:V,stsTokenManager:k}=t;De(T&&k,e,"internal-error");const L=Sl.fromJSON(this.name,k);De(typeof T=="string",e,"internal-error"),Ms(i,e.name),Ms(r,e.name),De(typeof x=="boolean",e,"internal-error"),De(typeof A=="boolean",e,"internal-error"),Ms(a,e.name),Ms(l,e.name),Ms(c,e.name),Ms(h,e.name),Ms(f,e.name),Ms(_,e.name);const $=new Ni({uid:T,auth:e,email:r,emailVerified:x,displayName:i,isAnonymous:A,photoURL:l,phoneNumber:a,tenantId:c,stsTokenManager:L,createdAt:f,lastLoginAt:_});return V&&Array.isArray(V)&&($.providerData=V.map(z=>({...z}))),h&&($._redirectEventId=h),$}static async _fromIdTokenResponse(e,t,i=!1){const r=new Sl;r.updateFromServerResponse(t);const a=new Ni({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await Jf(a),a}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];De(r.localId!==void 0,"internal-error");const a=r.providerUserInfo!==void 0?bI(r.providerUserInfo):[],l=!(r.email&&r.passwordHash)&&!(a!=null&&a.length),c=new Sl;c.updateFromIdToken(i);const h=new Ni({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:l}),f={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:a,metadata:new Ky(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(a!=null&&a.length)};return Object.assign(h,f),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db=new Map;function Fr(n){Hr(n instanceof Function,"Expected a class definition");let e=db.get(n);return e?(Hr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,db.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}SI.type="NONE";const hb=SI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n,e,t){return`firebase:${n}:${e}:${t}`}class wl{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:a}=this.auth;this.fullUserKey=bf(this.userKey,r.apiKey,a),this.fullPersistenceKey=bf("persistence",r.apiKey,a),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Kf(this.auth,{idToken:e}).catch(()=>{});return t?Ni._fromGetAccountInfoResponse(this.auth,t,e):null}return Ni._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new wl(Fr(hb),e,i);const r=(await Promise.all(t.map(async f=>{if(await f._isAvailable())return f}))).filter(f=>f);let a=r[0]||Fr(hb);const l=bf(i,e.config.apiKey,e.name);let c=null;for(const f of t)try{const _=await f._get(l);if(_){let T;if(typeof _=="string"){const x=await Kf(e,{idToken:_}).catch(()=>{});if(!x)break;T=await Ni._fromGetAccountInfoResponse(e,x,_)}else T=Ni._fromJSON(e,_);f!==a&&(c=T),a=f;break}}catch{}const h=r.filter(f=>f._shouldAllowMigration);return!a._shouldAllowMigration||!h.length?new wl(a,e,i):(a=h[0],c&&await a._set(l,c.toJSON()),await Promise.all(t.map(async f=>{if(f!==a)try{await f._remove(l)}catch{}})),new wl(a,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fb(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(CI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(wI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(NI(e))return"Blackberry";if(DI(e))return"Webos";if(AI(e))return"Safari";if((e.includes("chrome/")||II(e))&&!e.includes("edge/"))return"Chrome";if(RI(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function wI(n=Yt()){return/firefox\//i.test(n)}function AI(n=Yt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function II(n=Yt()){return/crios\//i.test(n)}function CI(n=Yt()){return/iemobile/i.test(n)}function RI(n=Yt()){return/android/i.test(n)}function NI(n=Yt()){return/blackberry/i.test(n)}function DI(n=Yt()){return/webos/i.test(n)}function jv(n=Yt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function w4(n=Yt()){var e;return jv(n)&&!!((e=window.navigator)!=null&&e.standalone)}function A4(){return OP()&&document.documentMode===10}function MI(n=Yt()){return jv(n)||RI(n)||DI(n)||NI(n)||/windows phone/i.test(n)||CI(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(n,e=[]){let t;switch(n){case"Browser":t=fb(Yt());break;case"Worker":t=`${fb(Yt())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${eu}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=a=>new Promise((l,c)=>{try{const h=e(a);l(h)}catch(h){c(h)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(n,e={}){return yr(n,"GET","/v2/passwordPolicy",Jr(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=6;class N4{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??R4,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,a){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new pb(this),this.idTokenSubscription=new pb(this),this.beforeStateQueue=new I4(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=vI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(a=>this._resolvePersistenceManagerAvailable=a)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Fr(t)),this._initializationPromise=this.queue(async()=>{var i,r,a;if(!this._deleted&&(this.persistenceManager=await wl.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((r=this._popupRedirectResolver)!=null&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((a=this.currentUser)==null?void 0:a.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Kf(this,{idToken:e}),i=await Ni._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var a;if(ci(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,r=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=(a=this.redirectUser)==null?void 0:a._redirectEventId,c=i==null?void 0:i._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&(h!=null&&h.user)&&(i=h.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(l){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return De(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Jf(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=u4()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ci(this.app))return Promise.reject(qr(this));const t=e?xt(e):null;return t&&De(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&De(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ci(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ci(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await C4(this),t=new N4(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ma("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await S4(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Fr(e)||this._popupRedirectResolver;De(t,this,"argument-error"),this.redirectPersistenceManager=await wl.create(this,[Fr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const a=typeof t=="function"?t:t.next.bind(t);let l=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(De(c,this,"internal-error"),c.then(()=>{l||a(this.currentUser)}),typeof t=="function"){const h=e.addObserver(t,i,r);return()=>{l=!0,h()}}else{const h=e.addObserver(t);return()=>{l=!0,h()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return De(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PI(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var r;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((r=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(ci(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&o4(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function no(n){return xt(n)}class pb{constructor(e){this.auth=e,this.observer=null,this.addObserver=BP(t=>this.observer=t)}get next(){return De(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Np={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function M4(n){Np=n}function kI(n){return Np.loadJS(n)}function P4(){return Np.recaptchaEnterpriseScript}function k4(){return Np.gapiScript}function V4(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class L4{constructor(){this.enterprise=new O4}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class O4{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const U4="recaptcha-enterprise",VI="NO_RECAPTCHA";class G4{constructor(e){this.type=U4,this.auth=no(e)}async verify(e="verify",t=!1){async function i(a){if(!t){if(a.tenantId==null&&a._agentRecaptchaConfig!=null)return a._agentRecaptchaConfig.siteKey;if(a.tenantId!=null&&a._tenantRecaptchaConfigs[a.tenantId]!==void 0)return a._tenantRecaptchaConfigs[a.tenantId].siteKey}return new Promise(async(l,c)=>{g4(a,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const f=new m4(h);return a.tenantId==null?a._agentRecaptchaConfig=f:a._tenantRecaptchaConfigs[a.tenantId]=f,l(f.siteKey)}}).catch(h=>{c(h)})})}function r(a,l,c){const h=window.grecaptcha;ub(h)?h.enterprise.ready(()=>{h.enterprise.execute(a,{action:e}).then(f=>{l(f)}).catch(()=>{l(VI)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new L4().execute("siteKey",{action:"verify"}):new Promise((a,l)=>{i(this.auth).then(c=>{if(!t&&ub(window.grecaptcha))r(c,a,l);else{if(typeof window>"u"){l(new Error("RecaptchaVerifier is only supported in browser"));return}let h=P4();h.length!==0&&(h+=c),kI(h).then(()=>{r(c,a,l)}).catch(f=>{l(f)})}}).catch(c=>{l(c)})})}}async function mb(n,e,t,i=!1,r=!1){const a=new G4(n);let l;if(r)l=VI;else try{l=await a.verify(t)}catch{l=await a.verify(t,!0)}const c={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in c){const h=c.phoneEnrollmentInfo.phoneNumber,f=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:h,recaptchaToken:f,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const h=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:h,captchaResponse:l,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return i?Object.assign(c,{captchaResp:l}):Object.assign(c,{captchaResponse:l}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Yf(n,e,t,i,r){var a;if((a=n._getRecaptchaConfig())!=null&&a.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await mb(n,e,t,t==="getOobCode");return i(n,l)}else return i(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await mb(n,e,t,t==="getOobCode");return i(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F4(n,e){const t=ga(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),a=t.getOptions();if(Qs(a,e??{}))return r;Vi(r,"already-initialized")}return t.initialize({options:e})}function z4(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(Fr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function q4(n,e,t){const i=no(n);De(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,a=LI(e),{host:l,port:c}=B4(e),h=c===null?"":`:${c}`,f={url:`${a}//${l}${h}/`},_=Object.freeze({host:l,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){De(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),De(Qs(f,i.config.emulator)&&Qs(_,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=f,i.emulatorConfig=_,i.settings.appVerificationDisabledForTesting=!0,Zl(l)?(rI(`${a}//${l}${h}`),PP("Auth",!0)):H4()}function LI(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function B4(n){const e=LI(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const a=r[1];return{host:a,port:gb(i.substr(a.length+1))}}else{const[a,l]=i.split(":");return{host:a,port:gb(l)}}}function gb(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function H4(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Gr("not implemented")}_getIdTokenResponse(e){return Gr("not implemented")}_linkToIdToken(e,t){return Gr("not implemented")}_getReauthenticationResolver(e){return Gr("not implemented")}}async function j4(n,e){return yr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $4(n,e){return pd(n,"POST","/v1/accounts:signInWithPassword",Jr(n,e))}async function OI(n,e){return yr(n,"POST","/v1/accounts:sendOobCode",Jr(n,e))}async function K4(n,e){return OI(n,e)}async function J4(n,e){return OI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y4(n,e){return pd(n,"POST","/v1/accounts:signInWithEmailLink",Jr(n,e))}async function Q4(n,e){return pd(n,"POST","/v1/accounts:signInWithEmailLink",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends $v{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Yc(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Yc(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,t,"signInWithPassword",$4);case"emailLink":return Y4(e,{email:this._email,oobCode:this._password});default:Vi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yf(e,i,"signUpPassword",j4);case"emailLink":return Q4(e,{idToken:t,email:this._email,oobCode:this._password});default:Vi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Al(n,e){return pd(n,"POST","/v1/accounts:signInWithIdp",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4="http://localhost";class ra extends $v{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ra(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Vi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r,...a}=t;if(!i||!r)return null;const l=new ra(i,r);return l.idToken=a.idToken||void 0,l.accessToken=a.accessToken||void 0,l.secret=a.secret,l.nonce=a.nonce,l.pendingToken=a.pendingToken||null,l}_getIdTokenResponse(e){const t=this.buildRequest();return Al(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Al(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Al(e,t)}buildRequest(){const e={requestUri:W4,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=hd(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Z4(n){const e=Ic(Cc(n)).link,t=e?Ic(Cc(e)).deep_link_id:null,i=Ic(Cc(n)).deep_link_id;return(i?Ic(Cc(i)).link:null)||i||t||e||n}class Kv{constructor(e){const t=Ic(Cc(e)),i=t.apiKey??null,r=t.oobCode??null,a=X4(t.mode??null);De(i&&r&&a,"argument-error"),this.apiKey=i,this.operation=a,this.code=r,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=Z4(e);try{return new Kv(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(){this.providerId=tu.PROVIDER_ID}static credential(e,t){return Yc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Kv.parseLink(t);return De(i,"argument-error"),Yc._fromEmailAndCode(e,i.code,i.tenantId)}}tu.PROVIDER_ID="password";tu.EMAIL_PASSWORD_SIGN_IN_METHOD="password";tu.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md extends UI{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends md{constructor(){super("facebook.com")}static credential(e){return ra._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends md{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ra._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Os.credential(t,i)}catch{return null}}}Os.GOOGLE_SIGN_IN_METHOD="google.com";Os.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us extends md{constructor(){super("github.com")}static credential(e){return ra._fromParams({providerId:Us.PROVIDER_ID,signInMethod:Us.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Us.credentialFromTaggedObject(e)}static credentialFromError(e){return Us.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Us.credential(e.oauthAccessToken)}catch{return null}}}Us.GITHUB_SIGN_IN_METHOD="github.com";Us.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gs extends md{constructor(){super("twitter.com")}static credential(e,t){return ra._fromParams({providerId:Gs.PROVIDER_ID,signInMethod:Gs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Gs.credentialFromTaggedObject(e)}static credentialFromError(e){return Gs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Gs.credential(t,i)}catch{return null}}}Gs.TWITTER_SIGN_IN_METHOD="twitter.com";Gs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eV(n,e){return pd(n,"POST","/v1/accounts:signUp",Jr(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const a=await Ni._fromIdTokenResponse(e,i,r),l=yb(i);return new sa({user:a,providerId:l,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=yb(i);return new sa({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function yb(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qf extends Li{constructor(e,t,i,r){super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,Qf.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new Qf(e,t,i,r)}}function GI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(a=>{throw a.code==="auth/multi-factor-auth-required"?Qf._fromErrorAndOperation(n,a,e,i):a})}async function tV(n,e,t=!1){const i=await Pl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return sa._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nV(n,e,t=!1){const{auth:i}=n;if(ci(i.app))return Promise.reject(qr(i));const r="reauthenticate";try{const a=await Pl(n,GI(i,r,e,n),t);De(a.idToken,i,"internal-error");const l=Hv(a.idToken);De(l,i,"internal-error");const{sub:c}=l;return De(n.uid===c,i,"user-mismatch"),sa._forOperation(n,r,a)}catch(a){throw(a==null?void 0:a.code)==="auth/user-not-found"&&Vi(i,"user-mismatch"),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(n,e,t=!1){if(ci(n.app))return Promise.reject(qr(n));const i="signIn",r=await GI(n,i,e),a=await sa._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(a.user),a}async function iV(n,e){return FI(no(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zI(n){const e=no(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rV(n,e,t){const i=no(n);await Yf(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",J4)}async function sV(n,e,t){if(ci(n.app))return Promise.reject(qr(n));const i=no(n),l=await Yf(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",eV).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&zI(n),h}),c=await sa._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(c.user),c}function oV(n,e,t){return ci(n.app)?Promise.reject(qr(n)):iV(xt(n),tu.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&zI(n),i})}async function aV(n,e){const t=xt(n),r={requestType:"VERIFY_EMAIL",idToken:await n.getIdToken()},{email:a}=await K4(t.auth,r);a!==n.email&&await n.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lV(n,e){return yr(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uV(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=xt(n),a={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},l=await Pl(i,lV(i.auth,a));i.displayName=l.displayName||null,i.photoURL=l.photoUrl||null;const c=i.providerData.find(({providerId:h})=>h==="password");c&&(c.displayName=i.displayName,c.photoURL=i.photoURL),await i._updateTokensIfNecessary(l)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(n,e){return xt(n).setPersistence(e)}function cV(n,e,t,i){return xt(n).onIdTokenChanged(e,t,i)}function dV(n,e,t){return xt(n).beforeAuthStateChanged(e,t)}function hV(n,e,t,i){return xt(n).onAuthStateChanged(e,t,i)}function fV(n){return xt(n).signOut()}const Wf="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qI{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Wf,"1"),this.storage.removeItem(Wf),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pV=1e3,mV=10;class BI extends qI{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MI(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((l,c,h)=>{this.notifyListeners(l,h)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const l=this.storage.getItem(i);!t&&this.localCache[i]===l||this.notifyListeners(i,l)},a=this.storage.getItem(i);A4()&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,mV):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},pV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}BI.type="LOCAL";const Jy=BI;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI extends qI{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}HI.type="SESSION";const Jv=HI;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new Dp(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:a}=t.data,l=this.handlersMap[r];if(!(l!=null&&l.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const c=Array.from(l).map(async f=>f(t.origin,a)),h=await gV(c);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:h})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Dp.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yV{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let a,l;return new Promise((c,h)=>{const f=Yv("",20);r.port1.start();const _=setTimeout(()=>{h(new Error("unsupported_event"))},i);l={messageChannel:r,onMessage(T){const x=T;if(x.data.eventId===f)switch(x.data.status){case"ack":clearTimeout(_),a=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),c(x.data.response);break;default:clearTimeout(_),clearTimeout(a),h(new Error("invalid_response"));break}}},this.handlers.add(l),r.port1.addEventListener("message",l.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[r.port2])}).finally(()=>{l&&this.removeMessageHandler(l)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hr(){return window}function vV(n){hr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jI(){return typeof hr().WorkerGlobalScope<"u"&&typeof hr().importScripts=="function"}async function _V(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function EV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function TV(){return jI()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I="firebaseLocalStorageDb",xV=1,Xf="firebaseLocalStorage",KI="fbase_key";class gd{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Mp(n,e){return n.transaction([Xf],e?"readwrite":"readonly").objectStore(Xf)}function bV(){const n=indexedDB.deleteDatabase($I);return new gd(n).toPromise()}function Yy(){const n=indexedDB.open($I,xV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Xf,{keyPath:KI})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Xf)?e(i):(i.close(),await bV(),e(await Yy()))})})}async function _b(n,e,t){const i=Mp(n,!0).put({[KI]:e,value:t});return new gd(i).toPromise()}async function SV(n,e){const t=Mp(n,!1).get(e),i=await new gd(t).toPromise();return i===void 0?null:i.value}function Eb(n,e){const t=Mp(n,!0).delete(e);return new gd(t).toPromise()}const wV=800,AV=3;class JI{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Yy(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>AV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jI()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Dp._getInstance(TV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await _V(),!this.activeServiceWorker)return;this.sender=new yV(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||EV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yy();return await _b(e,Wf,"1"),await Eb(e,Wf),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>_b(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>SV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Eb(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const a=Mp(r,!1).getAll();return new gd(a).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:a}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(a)&&(this.notifyListeners(r,a),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}JI.type="LOCAL";const IV=JI;new fd(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CV(n,e){return e?Fr(e):(De(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv extends $v{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Al(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Al(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Al(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function RV(n){return FI(n.auth,new Qv(n),n.bypassAuthState)}function NV(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),nV(t,new Qv(n),n.bypassAuthState)}async function DV(n){const{auth:e,user:t}=n;return De(t,e,"internal-error"),tV(t,new Qv(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e,t,i,r,a=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:a,error:l,type:c}=e;if(l){this.reject(l);return}const h={auth:this.auth,requestUri:t,sessionId:i,tenantId:a||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(h))}catch(f){this.reject(f)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return RV;case"linkViaPopup":case"linkViaRedirect":return DV;case"reauthViaPopup":case"reauthViaRedirect":return NV;default:Vi(this.auth,"internal-error")}}resolve(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MV=new fd(2e3,1e4);class Tl extends YI{constructor(e,t,i,r,a){super(e,t,r,a),this.provider=i,this.authWindow=null,this.pollId=null,Tl.currentPopupAction&&Tl.currentPopupAction.cancel(),Tl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return De(e,this.auth,"internal-error"),e}async onExecution(){Hr(this.filter.length===1,"Popup operations only handle one event");const e=Yv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(dr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(dr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Tl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(dr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,MV.get())};e()}}Tl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV="pendingRedirect",Sf=new Map;class kV extends YI{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sf.get(this.auth._key());if(!e){try{const i=await VV(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sf.set(this.auth._key(),e)}return this.bypassAuthState||Sf.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function VV(n,e){const t=UV(e),i=OV(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function LV(n,e){Sf.set(n._key(),e)}function OV(n){return Fr(n._redirectPersistence)}function UV(n){return bf(PV,n.config.apiKey,n.name)}async function GV(n,e,t=!1){if(ci(n.app))return Promise.reject(qr(n));const i=no(n),r=CV(i,e),l=await new kV(i,r,t).execute();return l&&!t&&(delete l.user._redirectEventId,await i._persistUserIfCurrent(l.user),await i._setRedirectUser(null,e)),l}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FV=600*1e3;class zV{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!qV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!QI(e)){const r=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(dr(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FV&&this.cachedEventUids.clear(),this.cachedEventUids.has(Tb(e))}saveEventToCache(e){this.cachedEventUids.add(Tb(e)),this.lastProcessedEventTime=Date.now()}}function Tb(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function QI({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function qV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return QI(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BV(n,e={}){return yr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,jV=/^https?/;async function $V(n){if(n.config.emulator)return;const{authorizedDomains:e}=await BV(n);for(const t of e)try{if(KV(t))return}catch{}Vi(n,"unauthorized-domain")}function KV(n){const e=$y(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const l=new URL(n);return l.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&l.hostname===i}if(!jV.test(t))return!1;if(HV.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JV=new fd(3e4,6e4);function xb(){const n=hr().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function YV(n){return new Promise((e,t)=>{var r,a,l;function i(){xb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xb(),t(dr(n,"network-request-failed"))},timeout:JV.get()})}if((a=(r=hr().gapi)==null?void 0:r.iframes)!=null&&a.Iframe)e(gapi.iframes.getContext());else if((l=hr().gapi)!=null&&l.load)i();else{const c=V4("iframefcb");return hr()[c]=()=>{gapi.load?i():t(dr(n,"network-request-failed"))},kI(`${k4()}?onload=${c}`).catch(h=>t(h))}}).catch(e=>{throw wf=null,e})}let wf=null;function QV(n){return wf=wf||YV(n),wf}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WV=new fd(5e3,15e3),XV="__/auth/iframe",ZV="emulator/auth/iframe",eL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nL(n){const e=n.config;De(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Bv(e,ZV):`https://${n.config.authDomain}/${XV}`,i={apiKey:e.apiKey,appName:n.name,v:eu},r=tL.get(n.config.apiHost);r&&(i.eid=r);const a=n._getFrameworks();return a.length&&(i.fw=a.join(",")),`${t}?${hd(i).slice(1)}`}async function iL(n){const e=await QV(n),t=hr().gapi;return De(t,n,"internal-error"),e.open({where:document.body,url:nL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eL,dontclear:!0},i=>new Promise(async(r,a)=>{await i.restyle({setHideOnLeave:!1});const l=dr(n,"network-request-failed"),c=hr().setTimeout(()=>{a(l)},WV.get());function h(){hr().clearTimeout(c),r(i)}i.ping(h).then(h,()=>{a(l)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},sL=500,oL=600,aL="_blank",lL="http://localhost";class bb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uL(n,e,t,i=sL,r=oL){const a=Math.max((window.screen.availHeight-r)/2,0).toString(),l=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const h={...rL,width:i.toString(),height:r.toString(),top:a,left:l},f=Yt().toLowerCase();t&&(c=II(f)?aL:t),wI(f)&&(e=e||lL,h.scrollbars="yes");const _=Object.entries(h).reduce((x,[A,V])=>`${x}${A}=${V},`,"");if(w4(f)&&c!=="_self")return cL(e||"",c),new bb(null);const T=window.open(e||"",c,_);De(T,n,"popup-blocked");try{T.focus()}catch{}return new bb(T)}function cL(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dL="__/auth/handler",hL="emulator/auth/handler",fL=encodeURIComponent("fac");async function Sb(n,e,t,i,r,a){De(n.config.authDomain,n,"auth-domain-config-required"),De(n.config.apiKey,n,"invalid-api-key");const l={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:eu,eventId:r};if(e instanceof UI){e.setDefaultLanguage(n.languageCode),l.providerId=e.providerId||"",qP(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,T]of Object.entries({}))l[_]=T}if(e instanceof md){const _=e.getScopes().filter(T=>T!=="");_.length>0&&(l.scopes=_.join(","))}n.tenantId&&(l.tid=n.tenantId);const c=l;for(const _ of Object.keys(c))c[_]===void 0&&delete c[_];const h=await n._getAppCheckToken(),f=h?`#${fL}=${encodeURIComponent(h)}`:"";return`${pL(n)}?${hd(c).slice(1)}${f}`}function pL({config:n}){return n.emulator?Bv(n,hL):`https://${n.authDomain}/${dL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty="webStorageSupport";class mL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Jv,this._completeRedirectFn=GV,this._overrideRedirectResult=LV}async _openPopup(e,t,i,r){var l;Hr((l=this.eventManagers[e._key()])==null?void 0:l.manager,"_initialize() not called before _openPopup()");const a=await Sb(e,t,i,$y(),r);return uL(e,a,Yv())}async _openRedirect(e,t,i,r){await this._originValidation(e);const a=await Sb(e,t,i,$y(),r);return vV(a),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:a}=this.eventManagers[t];return r?Promise.resolve(r):(Hr(a,"If manager is not set, promise should be"),a)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await iL(e),i=new zV(e);return t.register("authEvent",r=>(De(r==null?void 0:r.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Ty,{type:Ty},r=>{var l;const a=(l=r==null?void 0:r[0])==null?void 0:l[Ty];a!==void 0&&t(!!a),Vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=$V(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return MI()||AI()||jv()}}const gL=mL;var wb="@firebase/auth",Ab="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){De(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _L(n){mr(new ki("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),{apiKey:l,authDomain:c}=i.options;De(l&&!l.includes(":"),"invalid-api-key",{appName:i.name});const h={apiKey:l,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PI(n)},f=new D4(i,r,a,h);return z4(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),mr(new ki("auth-internal",e=>{const t=no(e.getProvider("auth").getImmediate());return(i=>new yL(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fi(wb,Ab,vL(n)),fi(wb,Ab,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=300,TL=iI("authIdTokenMaxAge")||EL;let Ib=null;const xL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>TL)return;const r=t==null?void 0:t.token;Ib!==r&&(Ib=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function bL(n=pI()){const e=ga(n,"auth");if(e.isInitialized())return e.getImmediate();const t=F4(n,{popupRedirectResolver:gL,persistence:[IV,Jy,Jv]}),i=iI("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const a=new URL(i,location.origin);if(location.origin===a.origin){const l=xL(a.toString());dV(t,l,()=>l(t.currentUser)),cV(t,c=>l(c))}}const r=RP("auth");return r&&q4(t,`http://${r}`),t}function SL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}M4({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const a=dr("internal-error");a.customData=r,t(a)},i.type="text/javascript",i.charset="UTF-8",SL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_L("Browser");const WI="@firebase/installations",Wv="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=1e4,ZI=`w:${Wv}`,e1="FIS_v2",wL="https://firebaseinstallations.googleapis.com/v1",AL=3600*1e3,IL="installations",CL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},oa=new ma(IL,CL,RL);function t1(n){return n instanceof Li&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function n1({projectId:n}){return`${wL}/projects/${n}/installations`}function i1(n){return{token:n.token,requestStatus:2,expiresIn:DL(n.expiresIn),creationTime:Date.now()}}async function r1(n,e){const i=(await e.json()).error;return oa.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function s1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function NL(n,{refreshToken:e}){const t=s1(n);return t.append("Authorization",ML(e)),t}async function o1(n){const e=await n();return e.status>=500&&e.status<600?n():e}function DL(n){return Number(n.replace("s","000"))}function ML(n){return`${e1} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const i=n1(n),r=s1(n),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={fid:t,authVersion:e1,appId:n.appId,sdkVersion:ZI},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await o1(()=>fetch(i,c));if(h.ok){const f=await h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:i1(f.authToken)}}else throw await r1("Create Installation",h)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kL(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL=/^[cdef][\w-]{21}$/,Qy="";function LL(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=OL(n);return VL.test(t)?t:Qy}catch{return Qy}}function OL(n){return kL(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1=new Map;function u1(n,e){const t=Pp(n);c1(t,e),UL(t,e)}function c1(n,e){const t=l1.get(n);if(t)for(const i of t)i(e)}function UL(n,e){const t=GL();t&&t.postMessage({key:n,fid:e}),FL()}let Yo=null;function GL(){return!Yo&&"BroadcastChannel"in self&&(Yo=new BroadcastChannel("[Firebase] FID Change"),Yo.onmessage=n=>{c1(n.data.key,n.data.fid)}),Yo}function FL(){l1.size===0&&Yo&&(Yo.close(),Yo=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zL="firebase-installations-database",qL=1,aa="firebase-installations-store";let xy=null;function Xv(){return xy||(xy=hI(zL,qL,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(aa)}}})),xy}async function Zf(n,e){const t=Pp(n),r=(await Xv()).transaction(aa,"readwrite"),a=r.objectStore(aa),l=await a.get(t);return await a.put(e,t),await r.done,(!l||l.fid!==e.fid)&&u1(n,e.fid),e}async function d1(n){const e=Pp(n),i=(await Xv()).transaction(aa,"readwrite");await i.objectStore(aa).delete(e),await i.done}async function kp(n,e){const t=Pp(n),r=(await Xv()).transaction(aa,"readwrite"),a=r.objectStore(aa),l=await a.get(t),c=e(l);return c===void 0?await a.delete(t):await a.put(c,t),await r.done,c&&(!l||l.fid!==c.fid)&&u1(n,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zv(n){let e;const t=await kp(n.appConfig,i=>{const r=BL(i),a=HL(n,r);return e=a.registrationPromise,a.installationEntry});return t.fid===Qy?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function BL(n){const e=n||{fid:LL(),registrationStatus:0};return h1(e)}function HL(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(oa.create("app-offline"));return{installationEntry:e,registrationPromise:r}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jL(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:$L(n)}:{installationEntry:e}}async function jL(n,e){try{const t=await PL(n,e);return Zf(n.appConfig,t)}catch(t){throw t1(t)&&t.customData.serverCode===409?await d1(n.appConfig):await Zf(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function $L(n){let e=await Cb(n.appConfig);for(;e.registrationStatus===1;)await a1(100),e=await Cb(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:i}=await Zv(n);return i||t}return e}function Cb(n){return kp(n,e=>{if(!e)throw oa.create("installation-not-found");return h1(e)})}function h1(n){return KL(n)?{fid:n.fid,registrationStatus:0}:n}function KL(n){return n.registrationStatus===1&&n.registrationTime+XI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JL({appConfig:n,heartbeatServiceProvider:e},t){const i=YL(n,t),r=NL(n,t),a=e.getImmediate({optional:!0});if(a){const f=await a.getHeartbeatsHeader();f&&r.append("x-firebase-client",f)}const l={installation:{sdkVersion:ZI,appId:n.appId}},c={method:"POST",headers:r,body:JSON.stringify(l)},h=await o1(()=>fetch(i,c));if(h.ok){const f=await h.json();return i1(f)}else throw await r1("Generate Auth Token",h)}function YL(n,{fid:e}){return`${n1(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e0(n,e=!1){let t;const i=await kp(n.appConfig,a=>{if(!f1(a))throw oa.create("not-registered");const l=a.authToken;if(!e&&XL(l))return a;if(l.requestStatus===1)return t=QL(n,e),a;{if(!navigator.onLine)throw oa.create("app-offline");const c=e5(a);return t=WL(n,c),c}});return t?await t:i.authToken}async function QL(n,e){let t=await Rb(n.appConfig);for(;t.authToken.requestStatus===1;)await a1(100),t=await Rb(n.appConfig);const i=t.authToken;return i.requestStatus===0?e0(n,e):i}function Rb(n){return kp(n,e=>{if(!f1(e))throw oa.create("not-registered");const t=e.authToken;return t5(t)?{...e,authToken:{requestStatus:0}}:e})}async function WL(n,e){try{const t=await JL(n,e),i={...e,authToken:t};return await Zf(n.appConfig,i),t}catch(t){if(t1(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await d1(n.appConfig);else{const i={...e,authToken:{requestStatus:0}};await Zf(n.appConfig,i)}throw t}}function f1(n){return n!==void 0&&n.registrationStatus===2}function XL(n){return n.requestStatus===2&&!ZL(n)}function ZL(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+AL}function e5(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function t5(n){return n.requestStatus===1&&n.requestTime+XI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n5(n){const e=n,{installationEntry:t,registrationPromise:i}=await Zv(e);return i?i.catch(console.error):e0(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5(n,e=!1){const t=n;return await r5(t),(await e0(t,e)).token}async function r5(n){const{registrationPromise:e}=await Zv(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s5(n){if(!n||!n.options)throw by("App Configuration");if(!n.name)throw by("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw by(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function by(n){return oa.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="installations",o5="installations-internal",a5=n=>{const e=n.getProvider("app").getImmediate(),t=s5(e),i=ga(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},l5=n=>{const e=n.getProvider("app").getImmediate(),t=ga(e,p1).getImmediate();return{getId:()=>n5(t),getToken:r=>i5(t,r)}};function u5(){mr(new ki(p1,a5,"PUBLIC")),mr(new ki(o5,l5,"PRIVATE"))}u5();fi(WI,Wv);fi(WI,Wv,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="analytics",c5="firebase_id",d5="origin",h5=60*1e3,f5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",t0="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bn=new Rp("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p5={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Kn=new ma("analytics","Analytics",p5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m5(n){if(!n.startsWith(t0)){const e=Kn.create("invalid-gtag-resource",{gtagURL:n});return bn.warn(e.message),""}return n}function m1(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function g5(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function y5(n,e){const t=g5("firebase-js-sdk-policy",{createScriptURL:m5}),i=document.createElement("script"),r=`${t0}?l=${n}&id=${e}`;i.src=t?t==null?void 0:t.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function v5(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function _5(n,e,t,i,r,a){const l=i[r];try{if(l)await e[l];else{const h=(await m1(t)).find(f=>f.measurementId===r);h&&await e[h.appId]}}catch(c){bn.error(c)}n("config",r,a)}async function E5(n,e,t,i,r){try{let a=[];if(r&&r.send_to){let l=r.send_to;Array.isArray(l)||(l=[l]);const c=await m1(t);for(const h of l){const f=c.find(T=>T.measurementId===h),_=f&&e[f.appId];if(_)a.push(_);else{a=[];break}}}a.length===0&&(a=Object.values(e)),await Promise.all(a),n("event",i,r||{})}catch(a){bn.error(a)}}function T5(n,e,t,i){async function r(a,...l){try{if(a==="event"){const[c,h]=l;await E5(n,e,t,c,h)}else if(a==="config"){const[c,h]=l;await _5(n,e,t,i,c,h)}else if(a==="consent"){const[c,h]=l;n("consent",c,h)}else if(a==="get"){const[c,h,f]=l;n("get",c,h,f)}else if(a==="set"){const[c]=l;n("set",c)}else n(a,...l)}catch(c){bn.error(c)}}return r}function x5(n,e,t,i,r){let a=function(...l){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(a=window[r]),window[r]=T5(a,n,e,t),{gtagCore:a,wrappedGtag:window[r]}}function b5(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(t0)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5=30,w5=1e3;class A5{constructor(e={},t=w5){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const g1=new A5;function I5(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function C5(n){var l;const{appId:e,apiKey:t}=n,i={method:"GET",headers:I5(t)},r=f5.replace("{app-id}",e),a=await fetch(r,i);if(a.status!==200&&a.status!==304){let c="";try{const h=await a.json();(l=h.error)!=null&&l.message&&(c=h.error.message)}catch{}throw Kn.create("config-fetch-failed",{httpStatus:a.status,responseMessage:c})}return a.json()}async function R5(n,e=g1,t){const{appId:i,apiKey:r,measurementId:a}=n.options;if(!i)throw Kn.create("no-app-id");if(!r){if(a)return{measurementId:a,appId:i};throw Kn.create("no-api-key")}const l=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new M5;return setTimeout(async()=>{c.abort()},h5),y1({appId:i,apiKey:r,measurementId:a},l,c,e)}async function y1(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=g1){var c;const{appId:a,measurementId:l}=n;try{await N5(i,e)}catch(h){if(l)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${h==null?void 0:h.message}]`),{appId:a,measurementId:l};throw h}try{const h=await C5(n);return r.deleteThrottleMetadata(a),h}catch(h){const f=h;if(!D5(f)){if(r.deleteThrottleMetadata(a),l)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${f==null?void 0:f.message}]`),{appId:a,measurementId:l};throw h}const _=Number((c=f==null?void 0:f.customData)==null?void 0:c.httpStatus)===503?Zx(t,r.intervalMillis,S5):Zx(t,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+_,backoffCount:t+1};return r.setThrottleMetadata(a,T),bn.debug(`Calling attemptFetch again in ${_} millis`),y1(n,T,i,r)}}function N5(n,e){return new Promise((t,i)=>{const r=Math.max(e-Date.now(),0),a=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(a),i(Kn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function D5(n){if(!(n instanceof Li)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class M5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function P5(n,e,t,i,r){if(r&&r.global){n("event",t,i);return}else{const a=await e,l={...i,send_to:a};n("event",t,l)}}async function k5(n,e,t,i){if(i&&i.global){const r={};for(const a of Object.keys(t))r[`user_properties.${a}`]=t[a];return n("set",r),Promise.resolve()}else{const r=await e;n("config",r,{update:!0,user_properties:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V5(){if(Fv())try{await uI()}catch(n){return bn.warn(Kn.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return bn.warn(Kn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function L5(n,e,t,i,r,a,l){const c=R5(n);c.then(x=>{t[x.measurementId]=x.appId,n.options.measurementId&&x.measurementId!==n.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${x.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(x=>bn.error(x)),e.push(c);const h=V5().then(x=>{if(x)return i.getId()}),[f,_]=await Promise.all([c,h]);b5(a)||y5(a,f.measurementId),r("js",new Date);const T=(l==null?void 0:l.config)??{};return T[d5]="firebase",T.update=!0,_!=null&&(T[c5]=_),r("config",f.measurementId,T),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5{constructor(e){this.app=e}_delete(){return delete Il[this.app.options.appId],Promise.resolve()}}let Il={},Nb=[];const Db={};let Sy="dataLayer",U5="gtag",Mb,n0,Pb=!1;function G5(){const n=[];if(oI()&&n.push("This is a browser extension environment."),UP()||n.push("Cookies are not available."),n.length>0){const e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Kn.create("invalid-analytics-context",{errorInfo:e});bn.warn(t.message)}}function F5(n,e,t){G5();const i=n.options.appId;if(!i)throw Kn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Kn.create("no-api-key");if(Il[i]!=null)throw Kn.create("already-exists",{id:i});if(!Pb){v5(Sy);const{wrappedGtag:a,gtagCore:l}=x5(Il,Nb,Db,Sy,U5);n0=a,Mb=l,Pb=!0}return Il[i]=L5(n,Nb,Db,e,Mb,Sy,t),new O5(n)}function z5(n=pI()){n=xt(n);const e=ga(n,ep);return e.isInitialized()?e.getImmediate():q5(n)}function q5(n,e={}){const t=ga(n,ep);if(t.isInitialized()){const r=t.getImmediate();if(Qs(e,t.getOptions()))return r;throw Kn.create("already-initialized")}return t.initialize({options:e})}function B5(n,e,t){n=xt(n),k5(n0,Il[n.app.options.appId],e,t).catch(i=>bn.error(i))}function H5(n,e,t,i){n=xt(n),P5(n0,Il[n.app.options.appId],e,t,i).catch(r=>bn.error(r))}const kb="@firebase/analytics",Vb="0.10.19";function j5(){mr(new ki(ep,(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return F5(i,r,t)},"PUBLIC")),mr(new ki("analytics-internal",n,"PRIVATE")),fi(kb,Vb),fi(kb,Vb,"esm2020");function n(e){try{const t=e.getProvider(ep).getImmediate();return{logEvent:(i,r,a)=>H5(t,i,r,a),setUserProperties:(i,r)=>B5(t,i,r)}}catch(t){throw Kn.create("interop-component-reg-failed",{reason:t})}}}j5();var Lb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $s,v1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,M){function P(){}P.prototype=M.prototype,R.F=M.prototype,R.prototype=new P,R.prototype.constructor=R,R.D=function(O,C,F){for(var N=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)N[Ee-2]=arguments[Ee];return M.prototype[C].apply(O,N)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(R,M,P){P||(P=0);const O=Array(16);if(typeof M=="string")for(var C=0;C<16;++C)O[C]=M.charCodeAt(P++)|M.charCodeAt(P++)<<8|M.charCodeAt(P++)<<16|M.charCodeAt(P++)<<24;else for(C=0;C<16;++C)O[C]=M[P++]|M[P++]<<8|M[P++]<<16|M[P++]<<24;M=R.g[0],P=R.g[1],C=R.g[2];let F=R.g[3],N;N=M+(F^P&(C^F))+O[0]+3614090360&4294967295,M=P+(N<<7&4294967295|N>>>25),N=F+(C^M&(P^C))+O[1]+3905402710&4294967295,F=M+(N<<12&4294967295|N>>>20),N=C+(P^F&(M^P))+O[2]+606105819&4294967295,C=F+(N<<17&4294967295|N>>>15),N=P+(M^C&(F^M))+O[3]+3250441966&4294967295,P=C+(N<<22&4294967295|N>>>10),N=M+(F^P&(C^F))+O[4]+4118548399&4294967295,M=P+(N<<7&4294967295|N>>>25),N=F+(C^M&(P^C))+O[5]+1200080426&4294967295,F=M+(N<<12&4294967295|N>>>20),N=C+(P^F&(M^P))+O[6]+2821735955&4294967295,C=F+(N<<17&4294967295|N>>>15),N=P+(M^C&(F^M))+O[7]+4249261313&4294967295,P=C+(N<<22&4294967295|N>>>10),N=M+(F^P&(C^F))+O[8]+1770035416&4294967295,M=P+(N<<7&4294967295|N>>>25),N=F+(C^M&(P^C))+O[9]+2336552879&4294967295,F=M+(N<<12&4294967295|N>>>20),N=C+(P^F&(M^P))+O[10]+4294925233&4294967295,C=F+(N<<17&4294967295|N>>>15),N=P+(M^C&(F^M))+O[11]+2304563134&4294967295,P=C+(N<<22&4294967295|N>>>10),N=M+(F^P&(C^F))+O[12]+1804603682&4294967295,M=P+(N<<7&4294967295|N>>>25),N=F+(C^M&(P^C))+O[13]+4254626195&4294967295,F=M+(N<<12&4294967295|N>>>20),N=C+(P^F&(M^P))+O[14]+2792965006&4294967295,C=F+(N<<17&4294967295|N>>>15),N=P+(M^C&(F^M))+O[15]+1236535329&4294967295,P=C+(N<<22&4294967295|N>>>10),N=M+(C^F&(P^C))+O[1]+4129170786&4294967295,M=P+(N<<5&4294967295|N>>>27),N=F+(P^C&(M^P))+O[6]+3225465664&4294967295,F=M+(N<<9&4294967295|N>>>23),N=C+(M^P&(F^M))+O[11]+643717713&4294967295,C=F+(N<<14&4294967295|N>>>18),N=P+(F^M&(C^F))+O[0]+3921069994&4294967295,P=C+(N<<20&4294967295|N>>>12),N=M+(C^F&(P^C))+O[5]+3593408605&4294967295,M=P+(N<<5&4294967295|N>>>27),N=F+(P^C&(M^P))+O[10]+38016083&4294967295,F=M+(N<<9&4294967295|N>>>23),N=C+(M^P&(F^M))+O[15]+3634488961&4294967295,C=F+(N<<14&4294967295|N>>>18),N=P+(F^M&(C^F))+O[4]+3889429448&4294967295,P=C+(N<<20&4294967295|N>>>12),N=M+(C^F&(P^C))+O[9]+568446438&4294967295,M=P+(N<<5&4294967295|N>>>27),N=F+(P^C&(M^P))+O[14]+3275163606&4294967295,F=M+(N<<9&4294967295|N>>>23),N=C+(M^P&(F^M))+O[3]+4107603335&4294967295,C=F+(N<<14&4294967295|N>>>18),N=P+(F^M&(C^F))+O[8]+1163531501&4294967295,P=C+(N<<20&4294967295|N>>>12),N=M+(C^F&(P^C))+O[13]+2850285829&4294967295,M=P+(N<<5&4294967295|N>>>27),N=F+(P^C&(M^P))+O[2]+4243563512&4294967295,F=M+(N<<9&4294967295|N>>>23),N=C+(M^P&(F^M))+O[7]+1735328473&4294967295,C=F+(N<<14&4294967295|N>>>18),N=P+(F^M&(C^F))+O[12]+2368359562&4294967295,P=C+(N<<20&4294967295|N>>>12),N=M+(P^C^F)+O[5]+4294588738&4294967295,M=P+(N<<4&4294967295|N>>>28),N=F+(M^P^C)+O[8]+2272392833&4294967295,F=M+(N<<11&4294967295|N>>>21),N=C+(F^M^P)+O[11]+1839030562&4294967295,C=F+(N<<16&4294967295|N>>>16),N=P+(C^F^M)+O[14]+4259657740&4294967295,P=C+(N<<23&4294967295|N>>>9),N=M+(P^C^F)+O[1]+2763975236&4294967295,M=P+(N<<4&4294967295|N>>>28),N=F+(M^P^C)+O[4]+1272893353&4294967295,F=M+(N<<11&4294967295|N>>>21),N=C+(F^M^P)+O[7]+4139469664&4294967295,C=F+(N<<16&4294967295|N>>>16),N=P+(C^F^M)+O[10]+3200236656&4294967295,P=C+(N<<23&4294967295|N>>>9),N=M+(P^C^F)+O[13]+681279174&4294967295,M=P+(N<<4&4294967295|N>>>28),N=F+(M^P^C)+O[0]+3936430074&4294967295,F=M+(N<<11&4294967295|N>>>21),N=C+(F^M^P)+O[3]+3572445317&4294967295,C=F+(N<<16&4294967295|N>>>16),N=P+(C^F^M)+O[6]+76029189&4294967295,P=C+(N<<23&4294967295|N>>>9),N=M+(P^C^F)+O[9]+3654602809&4294967295,M=P+(N<<4&4294967295|N>>>28),N=F+(M^P^C)+O[12]+3873151461&4294967295,F=M+(N<<11&4294967295|N>>>21),N=C+(F^M^P)+O[15]+530742520&4294967295,C=F+(N<<16&4294967295|N>>>16),N=P+(C^F^M)+O[2]+3299628645&4294967295,P=C+(N<<23&4294967295|N>>>9),N=M+(C^(P|~F))+O[0]+4096336452&4294967295,M=P+(N<<6&4294967295|N>>>26),N=F+(P^(M|~C))+O[7]+1126891415&4294967295,F=M+(N<<10&4294967295|N>>>22),N=C+(M^(F|~P))+O[14]+2878612391&4294967295,C=F+(N<<15&4294967295|N>>>17),N=P+(F^(C|~M))+O[5]+4237533241&4294967295,P=C+(N<<21&4294967295|N>>>11),N=M+(C^(P|~F))+O[12]+1700485571&4294967295,M=P+(N<<6&4294967295|N>>>26),N=F+(P^(M|~C))+O[3]+2399980690&4294967295,F=M+(N<<10&4294967295|N>>>22),N=C+(M^(F|~P))+O[10]+4293915773&4294967295,C=F+(N<<15&4294967295|N>>>17),N=P+(F^(C|~M))+O[1]+2240044497&4294967295,P=C+(N<<21&4294967295|N>>>11),N=M+(C^(P|~F))+O[8]+1873313359&4294967295,M=P+(N<<6&4294967295|N>>>26),N=F+(P^(M|~C))+O[15]+4264355552&4294967295,F=M+(N<<10&4294967295|N>>>22),N=C+(M^(F|~P))+O[6]+2734768916&4294967295,C=F+(N<<15&4294967295|N>>>17),N=P+(F^(C|~M))+O[13]+1309151649&4294967295,P=C+(N<<21&4294967295|N>>>11),N=M+(C^(P|~F))+O[4]+4149444226&4294967295,M=P+(N<<6&4294967295|N>>>26),N=F+(P^(M|~C))+O[11]+3174756917&4294967295,F=M+(N<<10&4294967295|N>>>22),N=C+(M^(F|~P))+O[2]+718787259&4294967295,C=F+(N<<15&4294967295|N>>>17),N=P+(F^(C|~M))+O[9]+3951481745&4294967295,R.g[0]=R.g[0]+M&4294967295,R.g[1]=R.g[1]+(C+(N<<21&4294967295|N>>>11))&4294967295,R.g[2]=R.g[2]+C&4294967295,R.g[3]=R.g[3]+F&4294967295}i.prototype.v=function(R,M){M===void 0&&(M=R.length);const P=M-this.blockSize,O=this.C;let C=this.h,F=0;for(;F<M;){if(C==0)for(;F<=P;)r(this,R,F),F+=this.blockSize;if(typeof R=="string"){for(;F<M;)if(O[C++]=R.charCodeAt(F++),C==this.blockSize){r(this,O),C=0;break}}else for(;F<M;)if(O[C++]=R[F++],C==this.blockSize){r(this,O),C=0;break}}this.h=C,this.o+=M},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var M=1;M<R.length-8;++M)R[M]=0;M=this.o*8;for(var P=R.length-8;P<R.length;++P)R[P]=M&255,M/=256;for(this.v(R),R=Array(16),M=0,P=0;P<4;++P)for(let O=0;O<32;O+=8)R[M++]=this.g[P]>>>O&255;return R};function a(R,M){var P=c;return Object.prototype.hasOwnProperty.call(P,R)?P[R]:P[R]=M(R)}function l(R,M){this.h=M;const P=[];let O=!0;for(let C=R.length-1;C>=0;C--){const F=R[C]|0;O&&F==M||(P[C]=F,O=!1)}this.g=P}var c={};function h(R){return-128<=R&&R<128?a(R,function(M){return new l([M|0],M<0?-1:0)}):new l([R|0],R<0?-1:0)}function f(R){if(isNaN(R)||!isFinite(R))return T;if(R<0)return L(f(-R));const M=[];let P=1;for(let O=0;R>=P;O++)M[O]=R/P|0,P*=4294967296;return new l(M,0)}function _(R,M){if(R.length==0)throw Error("number format error: empty string");if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(R.charAt(0)=="-")return L(_(R.substring(1),M));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const P=f(Math.pow(M,8));let O=T;for(let F=0;F<R.length;F+=8){var C=Math.min(8,R.length-F);const N=parseInt(R.substring(F,F+C),M);C<8?(C=f(Math.pow(M,C)),O=O.j(C).add(f(N))):(O=O.j(P),O=O.add(f(N)))}return O}var T=h(0),x=h(1),A=h(16777216);n=l.prototype,n.m=function(){if(k(this))return-L(this).m();let R=0,M=1;for(let P=0;P<this.g.length;P++){const O=this.i(P);R+=(O>=0?O:4294967296+O)*M,M*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(V(this))return"0";if(k(this))return"-"+L(this).toString(R);const M=f(Math.pow(R,6));var P=this;let O="";for(;;){const C=Z(P,M).g;P=$(P,C.j(M));let F=((P.g.length>0?P.g[0]:P.h)>>>0).toString(R);if(P=C,V(P))return F+O;for(;F.length<6;)F="0"+F;O=F+O}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function V(R){if(R.h!=0)return!1;for(let M=0;M<R.g.length;M++)if(R.g[M]!=0)return!1;return!0}function k(R){return R.h==-1}n.l=function(R){return R=$(this,R),k(R)?-1:V(R)?0:1};function L(R){const M=R.g.length,P=[];for(let O=0;O<M;O++)P[O]=~R.g[O];return new l(P,~R.h).add(x)}n.abs=function(){return k(this)?L(this):this},n.add=function(R){const M=Math.max(this.g.length,R.g.length),P=[];let O=0;for(let C=0;C<=M;C++){let F=O+(this.i(C)&65535)+(R.i(C)&65535),N=(F>>>16)+(this.i(C)>>>16)+(R.i(C)>>>16);O=N>>>16,F&=65535,N&=65535,P[C]=N<<16|F}return new l(P,P[P.length-1]&-2147483648?-1:0)};function $(R,M){return R.add(L(M))}n.j=function(R){if(V(this)||V(R))return T;if(k(this))return k(R)?L(this).j(L(R)):L(L(this).j(R));if(k(R))return L(this.j(L(R)));if(this.l(A)<0&&R.l(A)<0)return f(this.m()*R.m());const M=this.g.length+R.g.length,P=[];for(var O=0;O<2*M;O++)P[O]=0;for(O=0;O<this.g.length;O++)for(let C=0;C<R.g.length;C++){const F=this.i(O)>>>16,N=this.i(O)&65535,Ee=R.i(C)>>>16,de=R.i(C)&65535;P[2*O+2*C]+=N*de,z(P,2*O+2*C),P[2*O+2*C+1]+=F*de,z(P,2*O+2*C+1),P[2*O+2*C+1]+=N*Ee,z(P,2*O+2*C+1),P[2*O+2*C+2]+=F*Ee,z(P,2*O+2*C+2)}for(R=0;R<M;R++)P[R]=P[2*R+1]<<16|P[2*R];for(R=M;R<2*M;R++)P[R]=0;return new l(P,0)};function z(R,M){for(;(R[M]&65535)!=R[M];)R[M+1]+=R[M]>>>16,R[M]&=65535,M++}function H(R,M){this.g=R,this.h=M}function Z(R,M){if(V(M))throw Error("division by zero");if(V(R))return new H(T,T);if(k(R))return M=Z(L(R),M),new H(L(M.g),L(M.h));if(k(M))return M=Z(R,L(M)),new H(L(M.g),M.h);if(R.g.length>30){if(k(R)||k(M))throw Error("slowDivide_ only works with positive integers.");for(var P=x,O=M;O.l(R)<=0;)P=ie(P),O=ie(O);var C=J(P,1),F=J(O,1);for(O=J(O,2),P=J(P,2);!V(O);){var N=F.add(O);N.l(R)<=0&&(C=C.add(P),F=N),O=J(O,1),P=J(P,1)}return M=$(R,C.j(M)),new H(C,M)}for(C=T;R.l(M)>=0;){for(P=Math.max(1,Math.floor(R.m()/M.m())),O=Math.ceil(Math.log(P)/Math.LN2),O=O<=48?1:Math.pow(2,O-48),F=f(P),N=F.j(M);k(N)||N.l(R)>0;)P-=O,F=f(P),N=F.j(M);V(F)&&(F=x),C=C.add(F),R=$(R,N)}return new H(C,R)}n.B=function(R){return Z(this,R).h},n.and=function(R){const M=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<M;O++)P[O]=this.i(O)&R.i(O);return new l(P,this.h&R.h)},n.or=function(R){const M=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<M;O++)P[O]=this.i(O)|R.i(O);return new l(P,this.h|R.h)},n.xor=function(R){const M=Math.max(this.g.length,R.g.length),P=[];for(let O=0;O<M;O++)P[O]=this.i(O)^R.i(O);return new l(P,this.h^R.h)};function ie(R){const M=R.g.length+1,P=[];for(let O=0;O<M;O++)P[O]=R.i(O)<<1|R.i(O-1)>>>31;return new l(P,R.h)}function J(R,M){const P=M>>5;M%=32;const O=R.g.length-P,C=[];for(let F=0;F<O;F++)C[F]=M>0?R.i(F+P)>>>M|R.i(F+P+1)<<32-M:R.i(F+P);return new l(C,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,v1=i,l.prototype.add=l.prototype.add,l.prototype.multiply=l.prototype.j,l.prototype.modulo=l.prototype.B,l.prototype.compare=l.prototype.l,l.prototype.toNumber=l.prototype.m,l.prototype.toString=l.prototype.toString,l.prototype.getBits=l.prototype.i,l.fromNumber=f,l.fromString=_,$s=l}).apply(typeof Lb<"u"?Lb:typeof self<"u"?self:typeof window<"u"?window:{});var rf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _1,Rc,E1,Af,Wy,T1,x1,b1;(function(){var n,e=Object.defineProperty;function t(g){g=[typeof globalThis=="object"&&globalThis,g,typeof window=="object"&&window,typeof self=="object"&&self,typeof rf=="object"&&rf];for(var b=0;b<g.length;++b){var w=g[b];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=t(this);function r(g,b){if(b)e:{var w=i;g=g.split(".");for(var D=0;D<g.length-1;D++){var Q=g[D];if(!(Q in w))break e;w=w[Q]}g=g[g.length-1],D=w[g],b=b(D),b!=D&&b!=null&&e(w,g,{configurable:!0,writable:!0,value:b})}}r("Symbol.dispose",function(g){return g||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(g){return g||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(g){return g||function(b){var w=[],D;for(D in b)Object.prototype.hasOwnProperty.call(b,D)&&w.push([D,b[D]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(g){var b=typeof g;return b=="object"&&g!=null||b=="function"}function h(g,b,w){return g.call.apply(g.bind,arguments)}function f(g,b,w){return f=h,f.apply(null,arguments)}function _(g,b){var w=Array.prototype.slice.call(arguments,1);return function(){var D=w.slice();return D.push.apply(D,arguments),g.apply(this,D)}}function T(g,b){function w(){}w.prototype=b.prototype,g.Z=b.prototype,g.prototype=new w,g.prototype.constructor=g,g.Ob=function(D,Q,te){for(var me=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)me[Ue-2]=arguments[Ue];return b.prototype[Q].apply(D,me)}}var x=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?g=>g&&AsyncContext.Snapshot.wrap(g):g=>g;function A(g){const b=g.length;if(b>0){const w=Array(b);for(let D=0;D<b;D++)w[D]=g[D];return w}return[]}function V(g,b){for(let D=1;D<arguments.length;D++){const Q=arguments[D];var w=typeof Q;if(w=w!="object"?w:Q?Array.isArray(Q)?"array":w:"null",w=="array"||w=="object"&&typeof Q.length=="number"){w=g.length||0;const te=Q.length||0;g.length=w+te;for(let me=0;me<te;me++)g[w+me]=Q[me]}else g.push(Q)}}class k{constructor(b,w){this.i=b,this.j=w,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function L(g){l.setTimeout(()=>{throw g},0)}function $(){var g=R;let b=null;return g.g&&(b=g.g,g.g=g.g.next,g.g||(g.h=null),b.next=null),b}class z{constructor(){this.h=this.g=null}add(b,w){const D=H.get();D.set(b,w),this.h?this.h.next=D:this.g=D,this.h=D}}var H=new k(()=>new Z,g=>g.reset());class Z{constructor(){this.next=this.g=this.h=null}set(b,w){this.h=b,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let ie,J=!1,R=new z,M=()=>{const g=Promise.resolve(void 0);ie=()=>{g.then(P)}};function P(){for(var g;g=$();){try{g.h.call(g.g)}catch(w){L(w)}var b=H;b.j(g),b.h<100&&(b.h++,g.next=b.g,b.g=g)}J=!1}function O(){this.u=this.u,this.C=this.C}O.prototype.u=!1,O.prototype.dispose=function(){this.u||(this.u=!0,this.N())},O.prototype[Symbol.dispose]=function(){this.dispose()},O.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(g,b){this.type=g,this.g=this.target=b,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var F=(function(){if(!l.addEventListener||!Object.defineProperty)return!1;var g=!1,b=Object.defineProperty({},"passive",{get:function(){g=!0}});try{const w=()=>{};l.addEventListener("test",w,b),l.removeEventListener("test",w,b)}catch{}return g})();function N(g){return/^[\s\xa0]*$/.test(g)}function Ee(g,b){C.call(this,g?g.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,g&&this.init(g,b)}T(Ee,C),Ee.prototype.init=function(g,b){const w=this.type=g.type,D=g.changedTouches&&g.changedTouches.length?g.changedTouches[0]:null;this.target=g.target||g.srcElement,this.g=b,b=g.relatedTarget,b||(w=="mouseover"?b=g.fromElement:w=="mouseout"&&(b=g.toElement)),this.relatedTarget=b,D?(this.clientX=D.clientX!==void 0?D.clientX:D.pageX,this.clientY=D.clientY!==void 0?D.clientY:D.pageY,this.screenX=D.screenX||0,this.screenY=D.screenY||0):(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0),this.button=g.button,this.key=g.key||"",this.ctrlKey=g.ctrlKey,this.altKey=g.altKey,this.shiftKey=g.shiftKey,this.metaKey=g.metaKey,this.pointerId=g.pointerId||0,this.pointerType=g.pointerType,this.state=g.state,this.i=g,g.defaultPrevented&&Ee.Z.h.call(this)},Ee.prototype.h=function(){Ee.Z.h.call(this);const g=this.i;g.preventDefault?g.preventDefault():g.returnValue=!1};var de="closure_listenable_"+(Math.random()*1e6|0),G=0;function re(g,b,w,D,Q){this.listener=g,this.proxy=null,this.src=b,this.type=w,this.capture=!!D,this.ha=Q,this.key=++G,this.da=this.fa=!1}function he(g){g.da=!0,g.listener=null,g.proxy=null,g.src=null,g.ha=null}function Ie(g,b,w){for(const D in g)b.call(w,g[D],D,g)}function Oe(g,b){for(const w in g)b.call(void 0,g[w],w,g)}function q(g){const b={};for(const w in g)b[w]=g[w];return b}const se="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pe(g,b){let w,D;for(let Q=1;Q<arguments.length;Q++){D=arguments[Q];for(w in D)g[w]=D[w];for(let te=0;te<se.length;te++)w=se[te],Object.prototype.hasOwnProperty.call(D,w)&&(g[w]=D[w])}}function ve(g){this.src=g,this.g={},this.h=0}ve.prototype.add=function(g,b,w,D,Q){const te=g.toString();g=this.g[te],g||(g=this.g[te]=[],this.h++);const me=j(g,b,D,Q);return me>-1?(b=g[me],w||(b.fa=!1)):(b=new re(b,this.src,te,!!D,Q),b.fa=w,g.push(b)),b};function Me(g,b){const w=b.type;if(w in g.g){var D=g.g[w],Q=Array.prototype.indexOf.call(D,b,void 0),te;(te=Q>=0)&&Array.prototype.splice.call(D,Q,1),te&&(he(b),g.g[w].length==0&&(delete g.g[w],g.h--))}}function j(g,b,w,D){for(let Q=0;Q<g.length;++Q){const te=g[Q];if(!te.da&&te.listener==b&&te.capture==!!w&&te.ha==D)return Q}return-1}var Le="closure_lm_"+(Math.random()*1e6|0),It={};function vt(g,b,w,D,Q){if(Array.isArray(b)){for(let te=0;te<b.length;te++)vt(g,b[te],w,D,Q);return null}return w=fu(w),g&&g[de]?g.J(b,w,c(D)?!!D.capture:!1,Q):lo(g,b,w,!1,D,Q)}function lo(g,b,w,D,Q,te){if(!b)throw Error("Invalid event type");const me=c(Q)?!!Q.capture:!!Q;let Ue=uo(g);if(Ue||(g[Le]=Ue=new ve(g)),w=Ue.add(b,w,D,me,te),w.proxy)return w;if(D=_a(),w.proxy=D,D.src=g,D.listener=w,g.addEventListener)F||(Q=me),Q===void 0&&(Q=!1),g.addEventListener(b.toString(),D,Q);else if(g.attachEvent)g.attachEvent(Ui(b.toString()),D);else if(g.addListener&&g.removeListener)g.addListener(D);else throw Error("addEventListener and attachEvent are unavailable.");return w}function _a(){function g(w){return b.call(g.src,g.listener,w)}const b=du;return g}function Ea(g,b,w,D,Q){if(Array.isArray(b))for(var te=0;te<b.length;te++)Ea(g,b[te],w,D,Q);else D=c(D)?!!D.capture:!!D,w=fu(w),g&&g[de]?(g=g.i,te=String(b).toString(),te in g.g&&(b=g.g[te],w=j(b,w,D,Q),w>-1&&(he(b[w]),Array.prototype.splice.call(b,w,1),b.length==0&&(delete g.g[te],g.h--)))):g&&(g=uo(g))&&(b=g.g[b.toString()],g=-1,b&&(g=j(b,w,D,Q)),(w=g>-1?b[g]:null)&&Ta(w))}function Ta(g){if(typeof g!="number"&&g&&!g.da){var b=g.src;if(b&&b[de])Me(b.i,g);else{var w=g.type,D=g.proxy;b.removeEventListener?b.removeEventListener(w,D,g.capture):b.detachEvent?b.detachEvent(Ui(w),D):b.addListener&&b.removeListener&&b.removeListener(D),(w=uo(b))?(Me(w,g),w.h==0&&(w.src=null,b[Le]=null)):he(g)}}}function Ui(g){return g in It?It[g]:It[g]="on"+g}function du(g,b){if(g.da)g=!0;else{b=new Ee(b,this);const w=g.listener,D=g.ha||g.src;g.fa&&Ta(g),g=w.call(D,b)}return g}function uo(g){return g=g[Le],g instanceof ve?g:null}var hu="__closure_events_fn_"+(Math.random()*1e9>>>0);function fu(g){return typeof g=="function"?g:(g[hu]||(g[hu]=function(b){return g.handleEvent(b)}),g[hu])}function Vt(){O.call(this),this.i=new ve(this),this.M=this,this.G=null}T(Vt,O),Vt.prototype[de]=!0,Vt.prototype.removeEventListener=function(g,b,w,D){Ea(this,g,b,w,D)};function Kt(g,b){var w,D=g.G;if(D)for(w=[];D;D=D.G)w.push(D);if(g=g.M,D=b.type||b,typeof b=="string")b=new C(b,g);else if(b instanceof C)b.target=b.target||g;else{var Q=b;b=new C(D,g),pe(b,Q)}Q=!0;let te,me;if(w)for(me=w.length-1;me>=0;me--)te=b.g=w[me],Q=Zr(te,D,!0,b)&&Q;if(te=b.g=g,Q=Zr(te,D,!0,b)&&Q,Q=Zr(te,D,!1,b)&&Q,w)for(me=0;me<w.length;me++)te=b.g=w[me],Q=Zr(te,D,!1,b)&&Q}Vt.prototype.N=function(){if(Vt.Z.N.call(this),this.i){var g=this.i;for(const b in g.g){const w=g.g[b];for(let D=0;D<w.length;D++)he(w[D]);delete g.g[b],g.h--}}this.G=null},Vt.prototype.J=function(g,b,w,D){return this.i.add(String(g),b,!1,w,D)},Vt.prototype.K=function(g,b,w,D){return this.i.add(String(g),b,!0,w,D)};function Zr(g,b,w,D){if(b=g.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let te=0;te<b.length;++te){const me=b[te];if(me&&!me.da&&me.capture==w){const Ue=me.listener,Rt=me.ha||me.src;me.fa&&Me(g.i,me),Q=Ue.call(Rt,D)!==!1&&Q}}return Q&&!D.defaultPrevented}function um(g,b){if(typeof g!="function")if(g&&typeof g.handleEvent=="function")g=f(g.handleEvent,g);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:l.setTimeout(g,b||0)}function Ad(g){g.g=um(()=>{g.g=null,g.i&&(g.i=!1,Ad(g))},g.l);const b=g.h;g.h=null,g.m.apply(null,b)}class vn extends O{constructor(b,w){super(),this.m=b,this.l=w,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Ad(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function co(g){O.call(this),this.h=g,this.g={}}T(co,O);var pu=[];function mu(g){Ie(g.g,function(b,w){this.g.hasOwnProperty(w)&&Ta(b)},g),g.g={}}co.prototype.N=function(){co.Z.N.call(this),mu(this)},co.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var es=l.JSON.stringify,cm=l.JSON.parse,Id=class{stringify(g){return l.JSON.stringify(g,void 0)}parse(g){return l.JSON.parse(g,void 0)}};function Cd(){}function Rd(){}var yi={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rn(){C.call(this,"d")}T(rn,C);function Qn(){C.call(this,"c")}T(Qn,C);var Ct={},Nd=null;function xa(){return Nd=Nd||new Vt}Ct.Ia="serverreachability";function Dd(g){C.call(this,Ct.Ia,g)}T(Dd,C);function Gi(g){const b=xa();Kt(b,new Dd(b))}Ct.STAT_EVENT="statevent";function ho(g,b){C.call(this,Ct.STAT_EVENT,g),this.stat=b}T(ho,C);function Lt(g){const b=xa();Kt(b,new ho(b,g))}Ct.Ja="timingevent";function Fi(g,b){C.call(this,Ct.Ja,g),this.size=b}T(Fi,C);function zi(g,b){if(typeof g!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){g()},b)}function vi(){this.g=!0}vi.prototype.ua=function(){this.g=!1};function dm(g,b,w,D,Q,te){g.info(function(){if(g.g)if(te){var me="",Ue=te.split("&");for(let Ze=0;Ze<Ue.length;Ze++){var Rt=Ue[Ze].split("=");if(Rt.length>1){const _t=Rt[0];Rt=Rt[1];const ei=_t.split("_");me=ei.length>=2&&ei[1]=="type"?me+(_t+"="+Rt+"&"):me+(_t+"=redacted&")}}}else me=null;else me=te;return"XMLHTTP REQ ("+D+") [attempt "+Q+"]: "+b+`
`+w+`
`+me})}function Md(g,b,w,D,Q,te,me){g.info(function(){return"XMLHTTP RESP ("+D+") [ attempt "+Q+"]: "+b+`
`+w+`
`+te+" "+me})}function qi(g,b,w,D){g.info(function(){return"XMLHTTP TEXT ("+b+"): "+hm(g,w)+(D?" "+D:"")})}function fo(g,b){g.info(function(){return"TIMEOUT: "+b})}vi.prototype.info=function(){};function hm(g,b){if(!g.g)return b;if(!b)return null;try{const te=JSON.parse(b);if(te){for(g=0;g<te.length;g++)if(Array.isArray(te[g])){var w=te[g];if(!(w.length<2)){var D=w[1];if(Array.isArray(D)&&!(D.length<1)){var Q=D[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let me=1;me<D.length;me++)D[me]=""}}}}return es(te)}catch{return b}}var po={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},gu={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},yu;function mo(){}T(mo,Cd),mo.prototype.g=function(){return new XMLHttpRequest},yu=new mo;function vr(g){return encodeURIComponent(String(g))}function Pd(g){var b=1;g=g.split(":");const w=[];for(;b>0&&g.length;)w.push(g.shift()),b--;return g.length&&w.push(g.join(":")),w}function _i(g,b,w,D){this.j=g,this.i=b,this.l=w,this.S=D||1,this.V=new co(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ei}function Ei(){this.i=null,this.g="",this.h=!1}var Ot={},Wt={};function Bi(g,b,w){g.M=1,g.A=go(Gt(b)),g.u=w,g.R=!0,ba(g,null)}function ba(g,b){g.F=Date.now(),Hi(g),g.B=Gt(g.A);var w=g.B,D=g.S;Array.isArray(D)||(D=[String(D)]),Ia(w.i,"t",D),g.C=0,w=g.j.L,g.h=new Ei,g.g=Jd(g.j,w?b:null,!g.u),g.P>0&&(g.O=new vn(f(g.Y,g,g.g),g.P)),b=g.V,w=g.g,D=g.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(pu[0]=Q.toString()),Q=pu);for(let te=0;te<Q.length;te++){const me=vt(w,Q[te],D||b.handleEvent,!1,b.h||b);if(!me)break;b.g[me.key]=me}b=g.J?q(g.J):{},g.u?(g.v||(g.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",g.g.ea(g.B,g.v,g.u,b)):(g.v="GET",g.g.ea(g.B,g.v,null,b)),Gi(),dm(g.i,g.v,g.B,g.l,g.S,g.u)}_i.prototype.ba=function(g){g=g.target;const b=this.O;b&&bi(g)==3?b.j():this.Y(g)},_i.prototype.Y=function(g){try{if(g==this.g)e:{const Ue=bi(this.g),Rt=this.g.ya(),Ze=this.g.ca();if(!(Ue<3)&&(Ue!=3||this.g&&(this.h.h||this.g.la()||sn(this.g)))){this.K||Ue!=4||Rt==7||(Rt==8||Ze<=0?Gi(3):Gi(2)),ji(this);var b=this.g.ca();this.X=b;var w=fm(this);if(this.o=b==200,Md(this.i,this.v,this.B,this.l,this.S,Ue,b),this.o){if(this.U&&!this.L){t:{if(this.g){var D,Q=this.g;if((D=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(D)){var te=D;break t}}te=null}if(g=te)qi(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$i(this,g);else{this.o=!1,this.m=3,Lt(12),Ln(this),Wn(this);break e}}if(this.R){g=!0;let _t;for(;!this.K&&this.C<w.length;)if(_t=Vd(this,w),_t==Wt){Ue==4&&(this.m=4,Lt(14),g=!1),qi(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==Ot){this.m=4,Lt(15),qi(this.i,this.l,w,"[Invalid Chunk]"),g=!1;break}else qi(this.i,this.l,_t,null),$i(this,_t);if(kd(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ue!=4||w.length!=0||this.h.h||(this.m=1,Lt(16),g=!1),this.o=this.o&&g,!g)qi(this.i,this.l,w,"[Invalid Chunked Response]"),Ln(this),Wn(this);else if(w.length>0&&!this.W){this.W=!0;var me=this.j;me.g==this&&me.aa&&!me.P&&(me.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Mu(me),me.P=!0,Lt(11))}}else qi(this.i,this.l,w,null),$i(this,w);Ue==4&&Ln(this),this.o&&!this.K&&(Ue==4?Hd(this.j,this):(this.o=!1,Hi(this)))}else Er(this.g),b==400&&w.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Ln(this),Wn(this)}}}catch{}finally{}};function fm(g){if(!kd(g))return g.g.la();const b=sn(g.g);if(b==="")return"";let w="";const D=b.length,Q=bi(g.g)==4;if(!g.h.i){if(typeof TextDecoder>"u")return Ln(g),Wn(g),"";g.h.i=new l.TextDecoder}for(let te=0;te<D;te++)g.h.h=!0,w+=g.h.i.decode(b[te],{stream:!(Q&&te==D-1)});return b.length=0,g.h.g+=w,g.C=0,g.h.g}function kd(g){return g.g?g.v=="GET"&&g.M!=2&&g.j.Aa:!1}function Vd(g,b){var w=g.C,D=b.indexOf(`
`,w);return D==-1?Wt:(w=Number(b.substring(w,D)),isNaN(w)?Ot:(D+=1,D+w>b.length?Wt:(b=b.slice(D,D+w),g.C=D+w,b)))}_i.prototype.cancel=function(){this.K=!0,Ln(this)};function Hi(g){g.T=Date.now()+g.H,Sa(g,g.H)}function Sa(g,b){if(g.D!=null)throw Error("WatchDog timer not null");g.D=zi(f(g.aa,g),b)}function ji(g){g.D&&(l.clearTimeout(g.D),g.D=null)}_i.prototype.aa=function(){this.D=null;const g=Date.now();g-this.T>=0?(fo(this.i,this.B),this.M!=2&&(Gi(),Lt(17)),Ln(this),this.m=2,Wn(this)):Sa(this,this.T-g)};function Wn(g){g.j.I==0||g.K||Hd(g.j,g)}function Ln(g){ji(g);var b=g.O;b&&typeof b.dispose=="function"&&b.dispose(),g.O=null,mu(g.V),g.g&&(b=g.g,g.g=null,b.abort(),b.dispose())}function $i(g,b){try{var w=g.j;if(w.I!=0&&(w.g==g||Ji(w.h,g))){if(!g.L&&Ji(w.h,g)&&w.I==3){try{var D=w.Ba.g.parse(b)}catch{D=null}if(Array.isArray(D)&&D.length==3){var Q=D;if(Q[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<g.F)Ma(w),ls(w);else break e;bo(w),Lt(18)}}else w.xa=Q[1],0<w.xa-w.K&&Q[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=zi(f(w.Va,w),6e3));Ki(w.h)<=1&&w.ta&&(w.ta=void 0)}else er(w,11)}else if((g.L||w.g==g)&&Ma(w),!N(b))for(Q=w.Ba.g.parse(b),b=0;b<Q.length;b++){let Ze=Q[b];const _t=Ze[0];if(!(_t<=w.K))if(w.K=_t,Ze=Ze[1],w.I==2)if(Ze[0]=="c"){w.M=Ze[1],w.ba=Ze[2];const ei=Ze[3];ei!=null&&(w.ka=ei,w.j.info("VER="+w.ka));const tr=Ze[4];tr!=null&&(w.za=tr,w.j.info("SVER="+w.za));const Si=Ze[5];Si!=null&&typeof Si=="number"&&Si>0&&(D=1.5*Si,w.O=D,w.j.info("backChannelRequestTimeoutMs_="+D)),D=w;const wi=g.g;if(wi){const So=wi.g?wi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(So){var te=D.h;te.g||So.indexOf("spdy")==-1&&So.indexOf("quic")==-1&&So.indexOf("h2")==-1||(te.j=te.l,te.g=new Set,te.h&&(Eu(te,te.h),te.h=null))}if(D.G){const Pa=wi.g?wi.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(D.wa=Pa,it(D.J,D.G,Pa))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-g.F,w.j.info("Handshake RTT: "+w.T+"ms")),D=w;var me=g;if(D.na=Kd(D,D.L?D.ba:null,D.W),me.L){Tu(D.h,me);var Ue=me,Rt=D.O;Rt&&(Ue.H=Rt),Ue.D&&(ji(Ue),Hi(Ue)),D.g=me}else qd(D);w.i.length>0&&Zi(w)}else Ze[0]!="stop"&&Ze[0]!="close"||er(w,7);else w.I==3&&(Ze[0]=="stop"||Ze[0]=="close"?Ze[0]=="stop"?er(w,7):Nu(w):Ze[0]!="noop"&&w.l&&w.l.qa(Ze),w.A=0)}}Gi(4)}catch{}}var Ut=class{constructor(g,b){this.g=g,this.map=b}};function vu(g){this.l=g||10,l.PerformanceNavigationTiming?(g=l.performance.getEntriesByType("navigation"),g=g.length>0&&(g[0].nextHopProtocol=="hq"||g[0].nextHopProtocol=="h2")):g=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=g?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _u(g){return g.h?!0:g.g?g.g.size>=g.j:!1}function Ki(g){return g.h?1:g.g?g.g.size:0}function Ji(g,b){return g.h?g.h==b:g.g?g.g.has(b):!1}function Eu(g,b){g.g?g.g.add(b):g.h=b}function Tu(g,b){g.h&&g.h==b?g.h=null:g.g&&g.g.has(b)&&g.g.delete(b)}vu.prototype.cancel=function(){if(this.i=xu(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const g of this.g.values())g.cancel();this.g.clear()}};function xu(g){if(g.h!=null)return g.i.concat(g.h.G);if(g.g!=null&&g.g.size!==0){let b=g.i;for(const w of g.g.values())b=b.concat(w.G);return b}return A(g.i)}var Ld=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wa(g,b){if(g){g=g.split("&");for(let w=0;w<g.length;w++){const D=g[w].indexOf("=");let Q,te=null;D>=0?(Q=g[w].substring(0,D),te=g[w].substring(D+1)):Q=g[w],b(Q,te?decodeURIComponent(te.replace(/\+/g," ")):"")}}}function On(g){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;g instanceof On?(this.l=g.l,Xt(this,g.j),this.o=g.o,this.g=g.g,ts(this,g.u),this.h=g.h,bu(this,Fd(g.i)),this.m=g.m):g&&(b=String(g).match(Ld))?(this.l=!1,Xt(this,b[1]||"",!0),this.o=Yi(b[2]||""),this.g=Yi(b[3]||"",!0),ts(this,b[4]),this.h=Yi(b[5]||"",!0),bu(this,b[6]||"",!0),this.m=Yi(b[7]||"")):(this.l=!1,this.i=new is(null,this.l))}On.prototype.toString=function(){const g=[];var b=this.j;b&&g.push(yo(b,Aa,!0),":");var w=this.g;return(w||b=="file")&&(g.push("//"),(b=this.o)&&g.push(yo(b,Aa,!0),"@"),g.push(vr(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&g.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&g.push("/"),g.push(yo(w,w.charAt(0)=="/"?Su:Od,!0))),(w=this.i.toString())&&g.push("?",w),(w=this.m)&&g.push("#",yo(w,Ud)),g.join("")},On.prototype.resolve=function(g){const b=Gt(this);let w=!!g.j;w?Xt(b,g.j):w=!!g.o,w?b.o=g.o:w=!!g.g,w?b.g=g.g:w=g.u!=null;var D=g.h;if(w)ts(b,g.u);else if(w=!!g.h){if(D.charAt(0)!="/")if(this.g&&!this.h)D="/"+D;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(D=b.h.slice(0,Q+1)+D)}if(Q=D,Q==".."||Q==".")D="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){D=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const te=[];for(let me=0;me<Q.length;){const Ue=Q[me++];Ue=="."?D&&me==Q.length&&te.push(""):Ue==".."?((te.length>1||te.length==1&&te[0]!="")&&te.pop(),D&&me==Q.length&&te.push("")):(te.push(Ue),D=!0)}D=te.join("/")}else D=Q}return w?b.h=D:w=g.i.toString()!=="",w?bu(b,Fd(g.i)):w=!!g.m,w&&(b.m=g.m),b};function Gt(g){return new On(g)}function Xt(g,b,w){g.j=w?Yi(b,!0):b,g.j&&(g.j=g.j.replace(/:$/,""))}function ts(g,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);g.u=b}else g.u=null}function bu(g,b,w){b instanceof is?(g.i=b,Ca(g.i,g.l)):(w||(b=yo(b,ns)),g.i=new is(b,g.l))}function it(g,b,w){g.i.set(b,w)}function go(g){return it(g,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),g}function Yi(g,b){return g?b?decodeURI(g.replace(/%25/g,"%2525")):decodeURIComponent(g):""}function yo(g,b,w){return typeof g=="string"?(g=encodeURI(g).replace(b,An),w&&(g=g.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g):null}function An(g){return g=g.charCodeAt(0),"%"+(g>>4&15).toString(16)+(g&15).toString(16)}var Aa=/[#\/\?@]/g,Od=/[#\?:]/g,Su=/[#\?]/g,ns=/[#\?@]/g,Ud=/#/g;function is(g,b){this.h=this.g=null,this.i=g||null,this.j=!!b}function In(g){g.g||(g.g=new Map,g.h=0,g.i&&wa(g.i,function(b,w){g.add(decodeURIComponent(b.replace(/\+/g," ")),w)}))}n=is.prototype,n.add=function(g,b){In(this),this.i=null,g=rs(this,g);let w=this.g.get(g);return w||this.g.set(g,w=[]),w.push(b),this.h+=1,this};function Gd(g,b){In(g),b=rs(g,b),g.g.has(b)&&(g.i=null,g.h-=g.g.get(b).length,g.g.delete(b))}function wu(g,b){return In(g),b=rs(g,b),g.g.has(b)}n.forEach=function(g,b){In(this),this.g.forEach(function(w,D){w.forEach(function(Q){g.call(b,Q,D,this)},this)},this)};function Au(g,b){In(g);let w=[];if(typeof b=="string")wu(g,b)&&(w=w.concat(g.g.get(rs(g,b))));else for(g=Array.from(g.g.values()),b=0;b<g.length;b++)w=w.concat(g[b]);return w}n.set=function(g,b){return In(this),this.i=null,g=rs(this,g),wu(this,g)&&(this.h-=this.g.get(g).length),this.g.set(g,[b]),this.h+=1,this},n.get=function(g,b){return g?(g=Au(this,g),g.length>0?String(g[0]):b):b};function Ia(g,b,w){Gd(g,b),w.length>0&&(g.i=null,g.g.set(rs(g,b),A(w)),g.h+=w.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const g=[],b=Array.from(this.g.keys());for(let D=0;D<b.length;D++){var w=b[D];const Q=vr(w);w=Au(this,w);for(let te=0;te<w.length;te++){let me=Q;w[te]!==""&&(me+="="+vr(w[te])),g.push(me)}}return this.i=g.join("&")};function Fd(g){const b=new is;return b.i=g.i,g.g&&(b.g=new Map(g.g),b.h=g.h),b}function rs(g,b){return b=String(b),g.j&&(b=b.toLowerCase()),b}function Ca(g,b){b&&!g.j&&(In(g),g.i=null,g.g.forEach(function(w,D){const Q=D.toLowerCase();D!=Q&&(Gd(this,D),Ia(this,Q,w))},g)),g.j=b}function Ti(g,b){const w=new vi;if(l.Image){const D=new Image;D.onload=_(Xn,w,"TestLoadImage: loaded",!0,b,D),D.onerror=_(Xn,w,"TestLoadImage: error",!1,b,D),D.onabort=_(Xn,w,"TestLoadImage: abort",!1,b,D),D.ontimeout=_(Xn,w,"TestLoadImage: timeout",!1,b,D),l.setTimeout(function(){D.ontimeout&&D.ontimeout()},1e4),D.src=g}else b(!1)}function Iu(g,b){const w=new vi,D=new AbortController,Q=setTimeout(()=>{D.abort(),Xn(w,"TestPingServer: timeout",!1,b)},1e4);fetch(g,{signal:D.signal}).then(te=>{clearTimeout(Q),te.ok?Xn(w,"TestPingServer: ok",!0,b):Xn(w,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),Xn(w,"TestPingServer: error",!1,b)})}function Xn(g,b,w,D,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),D(w)}catch{}}function ss(){this.g=new Id}function Qi(g){this.i=g.Sb||null,this.h=g.ab||!1}T(Qi,Cd),Qi.prototype.g=function(){return new vo(this.i,this.h)};function vo(g,b){Vt.call(this),this.H=g,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}T(vo,Vt),n=vo.prototype,n.open=function(g,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=g,this.D=b,this.readyState=1,xi(this)},n.send=function(g){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};g&&(b.body=g),(this.H||l).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,os(this)),this.readyState=0},n.Pa=function(g){if(this.g&&(this.l=g,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=g.headers,this.readyState=2,xi(this)),this.g&&(this.readyState=3,xi(this),this.g)))if(this.responseType==="arraybuffer")g.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in g){if(this.j=g.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ra(this)}else g.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ra(g){g.j.read().then(g.Ma.bind(g)).catch(g.ga.bind(g))}n.Ma=function(g){if(this.g){if(this.o&&g.value)this.response.push(g.value);else if(!this.o){var b=g.value?g.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!g.done}))&&(this.response=this.responseText+=b)}g.done?os(this):xi(this),this.readyState==3&&Ra(this)}},n.Oa=function(g){this.g&&(this.response=this.responseText=g,os(this))},n.Na=function(g){this.g&&(this.response=g,os(this))},n.ga=function(){this.g&&os(this)};function os(g){g.readyState=4,g.l=null,g.j=null,g.B=null,xi(g)}n.setRequestHeader=function(g,b){this.A.append(g,b)},n.getResponseHeader=function(g){return this.h&&this.h.get(g.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const g=[],b=this.h.entries();for(var w=b.next();!w.done;)w=w.value,g.push(w[0]+": "+w[1]),w=b.next();return g.join(`\r
`)};function xi(g){g.onreadystatechange&&g.onreadystatechange.call(g)}Object.defineProperty(vo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(g){this.m=g?"include":"same-origin"}});function Zn(g){let b="";return Ie(g,function(w,D){b+=D,b+=":",b+=w,b+=`\r
`}),b}function _o(g,b,w){e:{for(D in w){var D=!1;break e}D=!0}D||(w=Zn(w),typeof g=="string"?w!=null&&vr(w):it(g,b,w))}function lt(g){Vt.call(this),this.headers=new Map,this.L=g||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}T(lt,Vt);var Wi=/^https?$/i,Cu=["POST","PUT"];n=lt.prototype,n.Fa=function(g){this.H=g},n.ea=function(g,b,w,D){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+g);b=b?b.toUpperCase():"GET",this.D=g,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():yu.g(),this.g.onreadystatechange=x(f(this.Ca,this));try{this.B=!0,this.g.open(b,String(g),!0),this.B=!1}catch(te){Eo(this,te);return}if(g=w||"",w=new Map(this.headers),D)if(Object.getPrototypeOf(D)===Object.prototype)for(var Q in D)w.set(Q,D[Q]);else if(typeof D.keys=="function"&&typeof D.get=="function")for(const te of D.keys())w.set(te,D.get(te));else throw Error("Unknown input type for opt_headers: "+String(D));D=Array.from(w.keys()).find(te=>te.toLowerCase()=="content-type"),Q=l.FormData&&g instanceof l.FormData,!(Array.prototype.indexOf.call(Cu,b,void 0)>=0)||D||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[te,me]of w)this.g.setRequestHeader(te,me);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(g),this.v=!1}catch(te){Eo(this,te)}};function Eo(g,b){g.h=!1,g.g&&(g.j=!0,g.g.abort(),g.j=!1),g.l=b,g.o=5,Ru(g),_r(g)}function Ru(g){g.A||(g.A=!0,Kt(g,"complete"),Kt(g,"error"))}n.abort=function(g){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=g||7,Kt(this,"complete"),Kt(this,"abort"),_r(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_r(this,!0)),lt.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?To(this):this.Xa())},n.Xa=function(){To(this)};function To(g){if(g.h&&typeof a<"u"){if(g.v&&bi(g)==4)setTimeout(g.Ca.bind(g),0);else if(Kt(g,"readystatechange"),bi(g)==4){g.h=!1;try{const te=g.ca();e:switch(te){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var w;if(!(w=b)){var D;if(D=te===0){let me=String(g.D).match(Ld)[1]||null;!me&&l.self&&l.self.location&&(me=l.self.location.protocol.slice(0,-1)),D=!Wi.test(me?me.toLowerCase():"")}w=D}if(w)Kt(g,"complete"),Kt(g,"success");else{g.o=6;try{var Q=bi(g)>2?g.g.statusText:""}catch{Q=""}g.l=Q+" ["+g.ca()+"]",Ru(g)}}finally{_r(g)}}}}function _r(g,b){if(g.g){g.m&&(clearTimeout(g.m),g.m=null);const w=g.g;g.g=null,b||Kt(g,"ready");try{w.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function bi(g){return g.g?g.g.readyState:0}n.ca=function(){try{return bi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(g){if(this.g){var b=this.g.responseText;return g&&b.indexOf(g)==0&&(b=b.substring(g.length)),cm(b)}};function sn(g){try{if(!g.g)return null;if("response"in g.g)return g.g.response;switch(g.F){case"":case"text":return g.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in g.g)return g.g.mozResponseArrayBuffer}return null}catch{return null}}function Er(g){const b={};g=(g.g&&bi(g)>=2&&g.g.getAllResponseHeaders()||"").split(`\r
`);for(let D=0;D<g.length;D++){if(N(g[D]))continue;var w=Pd(g[D]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const te=b[Q]||[];b[Q]=te,te.push(w)}Oe(b,function(D){return D.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xi(g,b,w){return w&&w.internalChannelParams&&w.internalChannelParams[g]||b}function as(g){this.za=0,this.i=[],this.j=new vi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xi("failFast",!1,g),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xi("baseRetryDelayMs",5e3,g),this.Za=Xi("retryDelaySeedMs",1e4,g),this.Ta=Xi("forwardChannelMaxRetries",2,g),this.va=Xi("forwardChannelRequestTimeoutMs",2e4,g),this.ma=g&&g.xmlHttpFactory||void 0,this.Ua=g&&g.Rb||void 0,this.Aa=g&&g.useFetchStreams||!1,this.O=void 0,this.L=g&&g.supportsCrossDomainXhr||!1,this.M="",this.h=new vu(g&&g.concurrentRequestLimit),this.Ba=new ss,this.S=g&&g.fastHandshake||!1,this.R=g&&g.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=g&&g.Pb||!1,g&&g.ua&&this.j.ua(),g&&g.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&g&&g.detectBufferingProxy||!1,this.ia=void 0,g&&g.longPollingTimeout&&g.longPollingTimeout>0&&(this.ia=g.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=as.prototype,n.ka=8,n.I=1,n.connect=function(g,b,w,D){Lt(0),this.W=g,this.H=b||{},w&&D!==void 0&&(this.H.OSID=w,this.H.OAID=D),this.F=this.X,this.J=Kd(this,null,this.W),Zi(this)};function Nu(g){if(Na(g),g.I==3){var b=g.V++,w=Gt(g.J);if(it(w,"SID",g.M),it(w,"RID",b),it(w,"TYPE","terminate"),xo(g,w),b=new _i(g,g.j,b),b.M=2,b.A=go(Gt(w)),w=!1,l.navigator&&l.navigator.sendBeacon)try{w=l.navigator.sendBeacon(b.A.toString(),"")}catch{}!w&&l.Image&&(new Image().src=b.A,w=!0),w||(b.g=Jd(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Hi(b)}$d(g)}function ls(g){g.g&&(Mu(g),g.g.cancel(),g.g=null)}function Na(g){ls(g),g.v&&(l.clearTimeout(g.v),g.v=null),Ma(g),g.h.cancel(),g.m&&(typeof g.m=="number"&&l.clearTimeout(g.m),g.m=null)}function Zi(g){if(!_u(g.h)&&!g.m){g.m=!0;var b=g.Ea;ie||M(),J||(ie(),J=!0),R.add(b,g),g.D=0}}function Da(g,b){return Ki(g.h)>=g.h.j-(g.m?1:0)?!1:g.m?(g.i=b.G.concat(g.i),!0):g.I==1||g.I==2||g.D>=(g.Sa?0:g.Ta)?!1:(g.m=zi(f(g.Ea,g,b),jd(g,g.D)),g.D++,!0)}n.Ea=function(g){if(this.m)if(this.m=null,this.I==1){if(!g){this.V=Math.floor(Math.random()*1e5),g=this.V++;const Q=new _i(this,this.j,g);let te=this.o;if(this.U&&(te?(te=q(te),pe(te,this.U)):te=this.U),this.u!==null||this.R||(Q.J=te,te=null),this.S)e:{for(var b=0,w=0;w<this.i.length;w++){t:{var D=this.i[w];if("__data__"in D.map&&(D=D.map.__data__,typeof D=="string")){D=D.length;break t}D=void 0}if(D===void 0)break;if(b+=D,b>4096){b=w;break e}if(b===4096||w===this.i.length-1){b=w+1;break e}}b=1e3}else b=1e3;b=zd(this,Q,b),w=Gt(this.J),it(w,"RID",g),it(w,"CVER",22),this.G&&it(w,"X-HTTP-Session-Id",this.G),xo(this,w),te&&(this.R?b="headers="+vr(Zn(te))+"&"+b:this.u&&_o(w,this.u,te)),Eu(this.h,Q),this.Ra&&it(w,"TYPE","init"),this.S?(it(w,"$req",b),it(w,"SID","null"),Q.U=!0,Bi(Q,w,null)):Bi(Q,w,b),this.I=2}}else this.I==3&&(g?Du(this,g):this.i.length==0||_u(this.h)||Du(this))};function Du(g,b){var w;b?w=b.l:w=g.V++;const D=Gt(g.J);it(D,"SID",g.M),it(D,"RID",w),it(D,"AID",g.K),xo(g,D),g.u&&g.o&&_o(D,g.u,g.o),w=new _i(g,g.j,w,g.D+1),g.u===null&&(w.J=g.o),b&&(g.i=b.G.concat(g.i)),b=zd(g,w,1e3),w.H=Math.round(g.va*.5)+Math.round(g.va*.5*Math.random()),Eu(g.h,w),Bi(w,D,b)}function xo(g,b){g.H&&Ie(g.H,function(w,D){it(b,D,w)}),g.l&&Ie({},function(w,D){it(b,D,w)})}function zd(g,b,w){w=Math.min(g.i.length,w);const D=g.l?f(g.l.Ka,g.l,g):null;e:{var Q=g.i;let Ue=-1;for(;;){const Rt=["count="+w];Ue==-1?w>0?(Ue=Q[0].g,Rt.push("ofs="+Ue)):Ue=0:Rt.push("ofs="+Ue);let Ze=!0;for(let _t=0;_t<w;_t++){var te=Q[_t].g;const ei=Q[_t].map;if(te-=Ue,te<0)Ue=Math.max(0,Q[_t].g-100),Ze=!1;else try{te="req"+te+"_"||"";try{var me=ei instanceof Map?ei:Object.entries(ei);for(const[tr,Si]of me){let wi=Si;c(Si)&&(wi=es(Si)),Rt.push(te+tr+"="+encodeURIComponent(wi))}}catch(tr){throw Rt.push(te+"type="+encodeURIComponent("_badmap")),tr}}catch{D&&D(ei)}}if(Ze){me=Rt.join("&");break e}}me=void 0}return g=g.i.splice(0,w),b.G=g,me}function qd(g){if(!g.g&&!g.v){g.Y=1;var b=g.Da;ie||M(),J||(ie(),J=!0),R.add(b,g),g.A=0}}function bo(g){return g.g||g.v||g.A>=3?!1:(g.Y++,g.v=zi(f(g.Da,g),jd(g,g.A)),g.A++,!0)}n.Da=function(){if(this.v=null,Bd(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var g=4*this.T;this.j.info("BP detection timer enabled: "+g),this.B=zi(f(this.Wa,this),g)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),ls(this),Bd(this))};function Mu(g){g.B!=null&&(l.clearTimeout(g.B),g.B=null)}function Bd(g){g.g=new _i(g,g.j,"rpc",g.Y),g.u===null&&(g.g.J=g.o),g.g.P=0;var b=Gt(g.na);it(b,"RID","rpc"),it(b,"SID",g.M),it(b,"AID",g.K),it(b,"CI",g.F?"0":"1"),!g.F&&g.ia&&it(b,"TO",g.ia),it(b,"TYPE","xmlhttp"),xo(g,b),g.u&&g.o&&_o(b,g.u,g.o),g.O&&(g.g.H=g.O);var w=g.g;g=g.ba,w.M=1,w.A=go(Gt(b)),w.u=null,w.R=!0,ba(w,g)}n.Va=function(){this.C!=null&&(this.C=null,ls(this),bo(this),Lt(19))};function Ma(g){g.C!=null&&(l.clearTimeout(g.C),g.C=null)}function Hd(g,b){var w=null;if(g.g==b){Ma(g),Mu(g),g.g=null;var D=2}else if(Ji(g.h,b))w=b.G,Tu(g.h,b),D=1;else return;if(g.I!=0){if(b.o)if(D==1){w=b.u?b.u.length:0,b=Date.now()-b.F;var Q=g.D;D=xa(),Kt(D,new Fi(D,w)),Zi(g)}else qd(g);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(D==1&&Da(g,b)||D==2&&bo(g)))switch(w&&w.length>0&&(b=g.h,b.i=b.i.concat(w)),Q){case 1:er(g,5);break;case 4:er(g,10);break;case 3:er(g,6);break;default:er(g,2)}}}function jd(g,b){let w=g.Qa+Math.floor(Math.random()*g.Za);return g.isActive()||(w*=2),w*b}function er(g,b){if(g.j.info("Error code "+b),b==2){var w=f(g.bb,g),D=g.Ua;const Q=!D;D=new On(D||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Xt(D,"https"),go(D),Q?Ti(D.toString(),w):Iu(D.toString(),w)}else Lt(2);g.I=0,g.l&&g.l.pa(b),$d(g),Na(g)}n.bb=function(g){g?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function $d(g){if(g.I=0,g.ja=[],g.l){const b=xu(g.h);(b.length!=0||g.i.length!=0)&&(V(g.ja,b),V(g.ja,g.i),g.h.i.length=0,A(g.i),g.i.length=0),g.l.oa()}}function Kd(g,b,w){var D=w instanceof On?Gt(w):new On(w);if(D.g!="")b&&(D.g=b+"."+D.g),ts(D,D.u);else{var Q=l.location;D=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const te=new On(null);D&&Xt(te,D),b&&(te.g=b),Q&&ts(te,Q),w&&(te.h=w),D=te}return w=g.G,b=g.wa,w&&b&&it(D,w,b),it(D,"VER",g.ka),xo(g,D),D}function Jd(g,b,w){if(b&&!g.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=g.Aa&&!g.ma?new lt(new Qi({ab:w})):new lt(g.ma),b.Fa(g.L),b}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Yd(){}n=Yd.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function us(){}us.prototype.g=function(g,b){return new _n(g,b)};function _n(g,b){Vt.call(this),this.g=new as(b),this.l=g,this.h=b&&b.messageUrlParams||null,g=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(g?g["X-Client-Protocol"]="webchannel":g={"X-Client-Protocol":"webchannel"}),this.g.o=g,g=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(g?g["X-WebChannel-Content-Type"]=b.messageContentType:g={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(g?g["X-WebChannel-Client-Profile"]=b.sa:g={"X-WebChannel-Client-Profile":b.sa}),this.g.U=g,(g=b&&b.Qb)&&!N(g)&&(this.g.u=g),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!N(b)&&(this.g.G=b,g=this.h,g!==null&&b in g&&(g=this.h,b in g&&delete g[b])),this.j=new Tr(this)}T(_n,Vt),_n.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},_n.prototype.close=function(){Nu(this.g)},_n.prototype.o=function(g){var b=this.g;if(typeof g=="string"){var w={};w.__data__=g,g=w}else this.v&&(w={},w.__data__=es(g),g=w);b.i.push(new Ut(b.Ya++,g)),b.I==3&&Zi(b)},_n.prototype.N=function(){this.g.l=null,delete this.j,Nu(this.g),delete this.g,_n.Z.N.call(this)};function Qd(g){rn.call(this),g.__headers__&&(this.headers=g.__headers__,this.statusCode=g.__status__,delete g.__headers__,delete g.__status__);var b=g.__sm__;if(b){e:{for(const w in b){g=w;break e}g=void 0}(this.i=g)&&(g=this.i,b=b!==null&&g in b?b[g]:void 0),this.data=b}else this.data=g}T(Qd,rn);function Wd(){Qn.call(this),this.status=1}T(Wd,Qn);function Tr(g){this.g=g}T(Tr,Yd),Tr.prototype.ra=function(){Kt(this.g,"a")},Tr.prototype.qa=function(g){Kt(this.g,new Qd(g))},Tr.prototype.pa=function(g){Kt(this.g,new Wd)},Tr.prototype.oa=function(){Kt(this.g,"b")},us.prototype.createWebChannel=us.prototype.g,_n.prototype.send=_n.prototype.o,_n.prototype.open=_n.prototype.m,_n.prototype.close=_n.prototype.close,b1=function(){return new us},x1=function(){return xa()},T1=Ct,Wy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},po.NO_ERROR=0,po.TIMEOUT=8,po.HTTP_ERROR=6,Af=po,gu.COMPLETE="complete",E1=gu,Rd.EventType=yi,yi.OPEN="a",yi.CLOSE="b",yi.ERROR="c",yi.MESSAGE="d",Vt.prototype.listen=Vt.prototype.J,Rc=Rd,lt.prototype.listenOnce=lt.prototype.K,lt.prototype.getLastError=lt.prototype.Ha,lt.prototype.getLastErrorCode=lt.prototype.ya,lt.prototype.getStatus=lt.prototype.ca,lt.prototype.getResponseJson=lt.prototype.La,lt.prototype.getResponseText=lt.prototype.la,lt.prototype.send=lt.prototype.ea,lt.prototype.setWithCredentials=lt.prototype.Fa,_1=lt}).apply(typeof rf<"u"?rf:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fn.UNAUTHENTICATED=new fn(null),fn.GOOGLE_CREDENTIALS=new fn("google-credentials-uid"),fn.FIRST_PARTY=new fn("first-party-uid"),fn.MOCK_USER=new fn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu="12.9.0";function $5(n){nu=n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const la=new Rp("@firebase/firestore");function ml(){return la.logLevel}function fe(n,...e){if(la.logLevel<=$e.DEBUG){const t=e.map(i0);la.debug(`Firestore (${nu}): ${n}`,...t)}}function Mt(n,...e){if(la.logLevel<=$e.ERROR){const t=e.map(i0);la.error(`Firestore (${nu}): ${n}`,...t)}}function kl(n,...e){if(la.logLevel<=$e.WARN){const t=e.map(i0);la.warn(`Firestore (${nu}): ${n}`,...t)}}function i0(n){if(typeof n=="string")return n;try{return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,S1(n,i,t)}function S1(n,e,t){let i=`FIRESTORE (${nu}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw Mt(i),new Error(i)}function Ae(n,e,t,i){let r="Unexpected state";typeof t=="string"?r=t:i=t,n||S1(e,r,i)}function Se(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ge extends Li{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class J5{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(fn.UNAUTHENTICATED)))}shutdown(){}}class Y5{constructor(e){this.t=e,this.currentUser=fn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ae(this.o===void 0,42304);let i=this.i;const r=h=>this.i!==i?(i=this.i,t(h)):Promise.resolve();let a=new fr;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new fr,e.enqueueRetryable((()=>r(this.currentUser)))};const l=()=>{const h=a;e.enqueueRetryable((async()=>{await h.promise,await r(this.currentUser)}))},c=h=>{fe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.o&&(this.auth.addAuthTokenListener(this.o),l())};this.t.onInit((h=>c(h))),setTimeout((()=>{if(!this.auth){const h=this.t.getImmediate({optional:!0});h?c(h):(fe("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new fr)}}),0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(fe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string",31837,{l:i}),new K5(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new fn(e)}}class Q5{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=fn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class W5{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new Q5(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(fn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Ob{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X5{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ci(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ae(this.o===void 0,3512);const i=a=>{a.error!=null&&fe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.m;return this.m=a.token,fe("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable((()=>i(a)))};const r=a=>{fe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((a=>r(a))),setTimeout((()=>{if(!this.appCheck){const a=this.V.getImmediate({optional:!0});a?r(a):fe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Ob(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ae(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new Ob(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z5(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Z5(40);for(let a=0;a<r.length;++a)i.length<20&&r[a]<t&&(i+=e.charAt(r[a]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function Xy(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const r=n.charAt(i),a=e.charAt(i);if(r!==a)return wy(r)===wy(a)?Pe(r,a):wy(r)?1:-1}return Pe(n.length,e.length)}const eO=55296,tO=57343;function wy(n){const e=n.charCodeAt(0);return e>=eO&&e<=tO}function Vl(n,e,t){return n.length===e.length&&n.every(((i,r)=>t(i,e[r])))}function w1(n){return n+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ub="__name__";class ar{constructor(e,t,i){t===void 0?t=0:t>e.length&&xe(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&xe(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ar.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ar?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const a=ar.compareSegments(e.get(r),t.get(r));if(a!==0)return a}return Pe(e.length,t.length)}static compareSegments(e,t){const i=ar.isNumericId(e),r=ar.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?ar.extractNumericId(e).compare(ar.extractNumericId(t)):Xy(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return $s.fromString(e.substring(4,e.length-2))}}class nt extends ar{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ge(ue.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((r=>r.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const nO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class bt extends ar{construct(e,t,i){return new bt(e,t,i)}static isValidIdentifier(e){return nO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ub}static keyField(){return new bt([Ub])}static fromServerFormat(e){const t=[];let i="",r=0;const a=()=>{if(i.length===0)throw new ge(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let l=!1;for(;r<e.length;){const c=e[r];if(c==="\\"){if(r+1===e.length)throw new ge(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const h=e[r+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new ge(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=h,r+=2}else c==="`"?(l=!l,r++):c!=="."||l?(i+=c,r++):(a(),r++)}if(a(),l)throw new ge(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new bt(t)}static emptyPath(){return new bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ye{constructor(e){this.path=e}static fromPath(e){return new ye(nt.fromString(e))}static fromName(e){return new ye(nt.fromString(e).popFirst(5))}static empty(){return new ye(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ye(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A1(n,e,t){if(!t)throw new ge(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function iO(n,e,t,i){if(e===!0&&i===!0)throw new ge(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Gb(n){if(!ye.isDocumentKey(n))throw new ge(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Fb(n){if(ye.isDocumentKey(n))throw new ge(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function I1(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function s0(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":xe(12329,{type:typeof n})}function pi(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ge(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=s0(n);throw new ge(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $t(n,e){const t={typeString:n};return e&&(t.value=e),t}function yd(n,e){if(!I1(n))throw new ge(ue.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const r=e[i].typeString,a="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const l=n[i];if(r&&typeof l!==r){t=`JSON field '${i}' must be a ${r}.`;break}if(a!==void 0&&l!==a.value){t=`Expected '${i}' field to equal '${a.value}'`;break}}if(t)throw new ge(ue.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=-62135596800,qb=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*qb);return new ot(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ge(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ge(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<zb)throw new ge(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ge(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/qb}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(yd(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-zb;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:$t("string",ot._jsonSchemaVersion),seconds:$t("number"),nanoseconds:$t("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new ot(0,0))}static max(){return new Re(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ll=-1;class tp{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}}function Zy(n){return n.fields.find((e=>e.kind===2))}function qo(n){return n.fields.filter((e=>e.kind!==2))}tp.UNKNOWN_ID=-1;class If{constructor(e,t){this.fieldPath=e,this.kind=t}}class Qc{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Qc(0,Yn.min())}}function C1(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Re.fromTimestamp(i===1e9?new ot(t+1,0):new ot(t,i));return new Yn(r,ye.empty(),e)}function R1(n){return new Yn(n.readTime,n.key,Ll)}class Yn{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Yn(Re.min(),ye.empty(),Ll)}static max(){return new Yn(Re.max(),ye.empty(),Ll)}}function o0(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=ye.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class D1{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==N1)throw n;fe("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xe(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Y(((i,r)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(i,r)},this.catchCallback=a=>{this.wrapFailure(t,a).next(i,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof Y?t:Y.resolve(t)}catch(t){return Y.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):Y.reject(t)}static resolve(e){return new Y(((t,i)=>{t(e)}))}static reject(e){return new Y(((t,i)=>{i(e)}))}static waitFor(e){return new Y(((t,i)=>{let r=0,a=0,l=!1;e.forEach((c=>{++r,c.next((()=>{++a,l&&a===r&&t()}),(h=>i(h)))})),l=!0,a===r&&t()}))}static or(e){let t=Y.resolve(!1);for(const i of e)t=t.next((r=>r?Y.resolve(r):i()));return t}static forEach(e,t){const i=[];return e.forEach(((r,a)=>{i.push(t.call(this,r,a))})),this.waitFor(i)}static mapArray(e,t){return new Y(((i,r)=>{const a=e.length,l=new Array(a);let c=0;for(let h=0;h<a;h++){const f=h;t(e[f]).next((_=>{l[f]=_,++c,c===a&&i(l)}),(_=>r(_)))}}))}static doWhile(e,t){return new Y(((i,r)=>{const a=()=>{e()===!0?t().next((()=>{a()}),r):i()};a()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn="SimpleDb";class Vp{static open(e,t,i,r){try{return new Vp(t,e.transaction(r,i))}catch(a){throw new Gc(t,a)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new fr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Gc(e,t.error)):this.S.resolve()},this.transaction.onerror=i=>{const r=a0(i.target.error);this.S.reject(new Gc(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(fe(jn,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const t=this.transaction.objectStore(e);return new sO(t)}}class Ks{static delete(e){return fe(jn,"Removing database:",e),jo(tI().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!Fv())return!1;if(Ks.F())return!0;const e=Yt(),t=Ks.M(e),i=0<t&&t<10,r=M1(e),a=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||a)}static F(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)==null?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}constructor(e,t,i){this.name=e,this.version=t,this.N=i,this.B=null,Ks.M(Yt())===12.2&&Mt("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(fe(jn,"Opening database:",this.name),this.db=await new Promise(((t,i)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=a=>{const l=a.target.result;t(l)},r.onblocked=()=>{i(new Gc(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const l=a.target.error;l.name==="VersionError"?i(new ge(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):l.name==="InvalidStateError"?i(new ge(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l)):i(new Gc(e,l))},r.onupgradeneeded=a=>{fe(jn,'Database "'+this.name+'" requires upgrade from version:',a.oldVersion);const l=a.target.result;this.N.k(l,r.transaction,a.oldVersion,this.version).next((()=>{fe(jn,"Database upgrade to version "+this.version+" complete")}))}}))),this.K&&(this.db.onversionchange=t=>this.K(t)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,i,r){const a=t==="readonly";let l=0;for(;;){++l;try{this.db=await this.L(e);const c=Vp.open(this.db,e,a?"readonly":"readwrite",i),h=r(c).next((f=>(c.C(),f))).catch((f=>(c.abort(f),Y.reject(f)))).toPromise();return h.catch((()=>{})),await c.D,h}catch(c){const h=c,f=h.name!=="FirebaseError"&&l<3;if(fe(jn,"Transaction failed with error:",h.message,"Retrying:",f),this.close(),!f)return Promise.reject(h)}}}close(){this.db&&this.db.close(),this.db=void 0}}function M1(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}class rO{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return jo(this.U.delete())}}class Gc extends ge{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ro(n){return n.name==="IndexedDbTransactionError"}class sO{constructor(e){this.store=e}put(e,t){let i;return t!==void 0?(fe(jn,"PUT",this.store.name,e,t),i=this.store.put(t,e)):(fe(jn,"PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),jo(i)}add(e){return fe(jn,"ADD",this.store.name,e,e),jo(this.store.add(e))}get(e){return jo(this.store.get(e)).next((t=>(t===void 0&&(t=null),fe(jn,"GET",this.store.name,e,t),t)))}delete(e){return fe(jn,"DELETE",this.store.name,e),jo(this.store.delete(e))}count(){return fe(jn,"COUNT",this.store.name),jo(this.store.count())}H(e,t){const i=this.options(e,t),r=i.index?this.store.index(i.index):this.store;if(typeof r.getAll=="function"){const a=r.getAll(i.range);return new Y(((l,c)=>{a.onerror=h=>{c(h.target.error)},a.onsuccess=h=>{l(h.target.result)}}))}{const a=this.cursor(i),l=[];return this.J(a,((c,h)=>{l.push(h)})).next((()=>l))}}Z(e,t){const i=this.store.getAll(e,t===null?void 0:t);return new Y(((r,a)=>{i.onerror=l=>{a(l.target.error)},i.onsuccess=l=>{r(l.target.result)}}))}X(e,t){fe(jn,"DELETE ALL",this.store.name);const i=this.options(e,t);i.Y=!1;const r=this.cursor(i);return this.J(r,((a,l,c)=>c.delete()))}ee(e,t){let i;t?i=e:(i={},t=e);const r=this.cursor(i);return this.J(r,t)}te(e){const t=this.cursor({});return new Y(((i,r)=>{t.onerror=a=>{const l=a0(a.target.error);r(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next((c=>{c?l.continue():i()})):i()}}))}J(e,t){const i=[];return new Y(((r,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const c=l.target.result;if(!c)return void r();const h=new rO(c),f=t(c.primaryKey,c.value,h);if(f instanceof Y){const _=f.catch((T=>(h.done(),Y.reject(T))));i.push(_)}h.isDone?r():h.G===null?c.continue():c.continue(h.G)}})).next((()=>Y.waitFor(i)))}options(e,t){let i;return e!==void 0&&(typeof e=="string"?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.Y?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function jo(n){return new Y(((e,t)=>{n.onsuccess=i=>{const r=i.target.result;e(r)},n.onerror=i=>{const r=a0(i.target.error);t(r)}}))}let Bb=!1;function a0(n){const e=Ks.M(Yt());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new ge("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Bb||(Bb=!0,setTimeout((()=>{throw i}),0)),i}}return n}const Fc="IndexBackfiller";class oO{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(e){fe(Fc,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{const t=await this.ne.ie();fe(Fc,`Documents written: ${t}`)}catch(t){ro(t)?fe(Fc,"Ignoring IndexedDB error during index backfill: ",t):await io(t)}await this.re(6e4)}))}}class aO{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.se(t,e)))}se(e,t){const i=new Set;let r=t,a=!0;return Y.doWhile((()=>a===!0&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((l=>{if(l!==null&&!i.has(l))return fe(Fc,`Processing collection: ${l}`),this.oe(e,l,r).next((c=>{r-=c,i.add(l)}));a=!1})))).next((()=>t-r))}oe(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,i).next((a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next((()=>this._e(r,a))).next((c=>(fe(Fc,`Updating offset: ${c}`),this.localStore.indexManager.updateCollectionGroup(e,t,c)))).next((()=>l.size))}))))}_e(e,t){let i=e;return t.changes.forEach(((r,a)=>{const l=R1(a);o0(l,i)>0&&(i=l)})),new Yn(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}kn.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wo=-1;function Lp(n){return n==null}function Wc(n){return n===0&&1/n==-1/0}function P1(n){return typeof n=="number"&&Number.isInteger(n)&&!Wc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np="";function yn(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hb(e)),e=lO(n.get(t),e);return Hb(e)}function lO(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const a=n.charAt(r);switch(a){case"\0":t+="";break;case np:t+="";break;default:t+=a}}return t}function Hb(n){return n+np+""}function ur(n){const e=n.length;if(Ae(e>=2,64408,{path:n}),e===2)return Ae(n.charAt(0)===np&&n.charAt(1)==="",56145,{path:n}),nt.emptyPath();const t=e-2,i=[];let r="";for(let a=0;a<e;){const l=n.indexOf(np,a);switch((l<0||l>t)&&xe(50515,{path:n}),n.charAt(l+1)){case"":const c=n.substring(a,l);let h;r.length===0?h=c:(r+=c,h=r,r=""),i.push(h);break;case"":r+=n.substring(a,l),r+="\0";break;case"":r+=n.substring(a,l+1);break;default:xe(61167,{path:n})}a=l+2}return new nt(i)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bo="remoteDocuments",vd="owner",ul="owner",Xc="mutationQueues",uO="userId",Ri="mutations",jb="batchId",Qo="userMutationsIndex",$b=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cf(n,e){return[n,yn(e)]}function k1(n,e,t){return[n,yn(e),t]}const cO={},Ol="documentMutations",ip="remoteDocumentsV14",dO=["prefixPath","collectionGroup","readTime","documentId"],Rf="documentKeyIndex",hO=["prefixPath","collectionGroup","documentId"],V1="collectionGroupIndex",fO=["collectionGroup","readTime","prefixPath","documentId"],Zc="remoteDocumentGlobal",ev="remoteDocumentGlobalKey",Ul="targets",L1="queryTargetsIndex",pO=["canonicalId","targetId"],Gl="targetDocuments",mO=["targetId","path"],l0="documentTargetsIndex",gO=["path","targetId"],rp="targetGlobalKey",Xo="targetGlobal",ed="collectionParents",yO=["collectionId","parent"],Fl="clientMetadata",vO="clientId",Op="bundles",_O="bundleId",Up="namedQueries",EO="name",u0="indexConfiguration",TO="indexId",tv="collectionGroupIndex",xO="collectionGroup",zc="indexState",bO=["indexId","uid"],O1="sequenceNumberIndex",SO=["uid","sequenceNumber"],qc="indexEntries",wO=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],U1="documentKeyIndex",AO=["indexId","uid","orderedDocumentKey"],Gp="documentOverlays",IO=["userId","collectionPath","documentId"],nv="collectionPathOverlayIndex",CO=["userId","collectionPath","largestBatchId"],G1="collectionGroupOverlayIndex",RO=["userId","collectionGroup","largestBatchId"],c0="globals",NO="name",F1=[Xc,Ri,Ol,Bo,Ul,vd,Xo,Gl,Fl,Zc,ed,Op,Up],DO=[...F1,Gp],z1=[Xc,Ri,Ol,ip,Ul,vd,Xo,Gl,Fl,Zc,ed,Op,Up,Gp],q1=z1,d0=[...q1,u0,zc,qc],MO=d0,B1=[...d0,c0],PO=B1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv extends D1{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function Qt(n,e){const t=Se(n);return Ks.O(t.le,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function so(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function H1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e,t){this.comparator=e,this.root=t||cn.EMPTY}insert(e,t){return new pt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,cn.BLACK,null,null))}remove(e){return new pt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sf(this.root,e,this.comparator,!1)}getReverseIterator(){return new sf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sf(this.root,e,this.comparator,!0)}}class sf{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?i(e.key,t):1,t&&r&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(a===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class cn{constructor(e,t,i,r,a){this.key=e,this.value=t,this.color=i??cn.RED,this.left=r??cn.EMPTY,this.right=a??cn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,a){return new cn(e??this.key,t??this.value,i??this.color,r??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const a=i(e,r.key);return r=a<0?r.copy(null,null,null,r.left.insert(e,t,i),null):a===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return cn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return cn.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,cn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,cn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xe(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xe(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xe(27949);return e+(this.isRed()?0:1)}}cn.EMPTY=null,cn.RED=!0,cn.BLACK=!1;cn.EMPTY=new class{constructor(){this.size=0}get key(){throw xe(57766)}get value(){throw xe(16141)}get color(){throw xe(16727)}get left(){throw xe(29726)}get right(){throw xe(36894)}copy(e,t,i,r,a){return this}insert(e,t,i){return new cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at{constructor(e){this.comparator=e,this.data=new pt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Jb(this.data.getIterator())}getIteratorFrom(e){return new Jb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof at)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(this.comparator(r,a)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new at(this.comparator);return t.data=e,t}}class Jb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function cl(n){return n.hasNext()?n.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new Vn([])}unionWith(e){let t=new at(bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Vn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(r){try{return atob(r)}catch(a){throw typeof DOMException<"u"&&a instanceof DOMException?new j1("Invalid base64 string: "+a):a}})(e);return new kt(t)}static fromUint8Array(e){const t=(function(r){let a="";for(let l=0;l<r.length;++l)a+=String.fromCharCode(r[l]);return a})(e);return new kt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}kt.EMPTY_BYTE_STRING=new kt("");const kO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jr(n){if(Ae(!!n,39018),typeof n=="string"){let e=0;const t=kO.exec(n);if(Ae(!!t,46558,{timestamp:n}),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Tt(n.seconds),nanos:Tt(n.nanos)}}function Tt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function $r(n){return typeof n=="string"?kt.fromBase64String(n):kt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="server_timestamp",K1="__type__",J1="__previous_value__",Y1="__local_write_time__";function h0(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[K1])==null?void 0:i.stringValue)===$1}function Fp(n){const e=n.mapValue.fields[J1];return h0(e)?Fp(e):e}function td(n){const e=jr(n.mapValue.fields[Y1].timestampValue);return new ot(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VO{constructor(e,t,i,r,a,l,c,h,f,_,T){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=c,this.longPollingOptions=h,this.useFetchStreams=f,this.isUsingEmulator=_,this.apiKey=T}}const sp="(default)";class ua{constructor(e,t){this.projectId=e,this.database=t||sp}static empty(){return new ua("","")}get isDefaultDatabase(){return this.database===sp}isEqual(e){return e instanceof ua&&e.projectId===this.projectId&&e.database===this.database}}function LO(n,e){if(!Object.prototype.hasOwnProperty.apply(n.options,["projectId"]))throw new ge(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ua(n.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0="__type__",Q1="__max__",qs={mapValue:{fields:{__type__:{stringValue:Q1}}}},p0="__vector__",zl="value",Nf={nullValue:"NULL_VALUE"};function Ws(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?h0(n)?4:W1(n)?9007199254740991:zp(n)?10:11:xe(28295,{value:n})}function gr(n,e){if(n===e)return!0;const t=Ws(n);if(t!==Ws(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return td(n).isEqual(td(e));case 3:return(function(r,a){if(typeof r.timestampValue=="string"&&typeof a.timestampValue=="string"&&r.timestampValue.length===a.timestampValue.length)return r.timestampValue===a.timestampValue;const l=jr(r.timestampValue),c=jr(a.timestampValue);return l.seconds===c.seconds&&l.nanos===c.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(r,a){return $r(r.bytesValue).isEqual($r(a.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(r,a){return Tt(r.geoPointValue.latitude)===Tt(a.geoPointValue.latitude)&&Tt(r.geoPointValue.longitude)===Tt(a.geoPointValue.longitude)})(n,e);case 2:return(function(r,a){if("integerValue"in r&&"integerValue"in a)return Tt(r.integerValue)===Tt(a.integerValue);if("doubleValue"in r&&"doubleValue"in a){const l=Tt(r.doubleValue),c=Tt(a.doubleValue);return l===c?Wc(l)===Wc(c):isNaN(l)&&isNaN(c)}return!1})(n,e);case 9:return Vl(n.arrayValue.values||[],e.arrayValue.values||[],gr);case 10:case 11:return(function(r,a){const l=r.mapValue.fields||{},c=a.mapValue.fields||{};if(Kb(l)!==Kb(c))return!1;for(const h in l)if(l.hasOwnProperty(h)&&(c[h]===void 0||!gr(l[h],c[h])))return!1;return!0})(n,e);default:return xe(52216,{left:n})}}function nd(n,e){return(n.values||[]).find((t=>gr(t,e)))!==void 0}function Xs(n,e){if(n===e)return 0;const t=Ws(n),i=Ws(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(a,l){const c=Tt(a.integerValue||a.doubleValue),h=Tt(l.integerValue||l.doubleValue);return c<h?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1})(n,e);case 3:return Yb(n.timestampValue,e.timestampValue);case 4:return Yb(td(n),td(e));case 5:return Xy(n.stringValue,e.stringValue);case 6:return(function(a,l){const c=$r(a),h=$r(l);return c.compareTo(h)})(n.bytesValue,e.bytesValue);case 7:return(function(a,l){const c=a.split("/"),h=l.split("/");for(let f=0;f<c.length&&f<h.length;f++){const _=Pe(c[f],h[f]);if(_!==0)return _}return Pe(c.length,h.length)})(n.referenceValue,e.referenceValue);case 8:return(function(a,l){const c=Pe(Tt(a.latitude),Tt(l.latitude));return c!==0?c:Pe(Tt(a.longitude),Tt(l.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Qb(n.arrayValue,e.arrayValue);case 10:return(function(a,l){var x,A,V,k;const c=a.fields||{},h=l.fields||{},f=(x=c[zl])==null?void 0:x.arrayValue,_=(A=h[zl])==null?void 0:A.arrayValue,T=Pe(((V=f==null?void 0:f.values)==null?void 0:V.length)||0,((k=_==null?void 0:_.values)==null?void 0:k.length)||0);return T!==0?T:Qb(f,_)})(n.mapValue,e.mapValue);case 11:return(function(a,l){if(a===qs.mapValue&&l===qs.mapValue)return 0;if(a===qs.mapValue)return 1;if(l===qs.mapValue)return-1;const c=a.fields||{},h=Object.keys(c),f=l.fields||{},_=Object.keys(f);h.sort(),_.sort();for(let T=0;T<h.length&&T<_.length;++T){const x=Xy(h[T],_[T]);if(x!==0)return x;const A=Xs(c[h[T]],f[_[T]]);if(A!==0)return A}return Pe(h.length,_.length)})(n.mapValue,e.mapValue);default:throw xe(23264,{he:t})}}function Yb(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=jr(n),i=jr(e),r=Pe(t.seconds,i.seconds);return r!==0?r:Pe(t.nanos,i.nanos)}function Qb(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const a=Xs(t[r],i[r]);if(a)return a}return Pe(t.length,i.length)}function ql(n){return rv(n)}function rv(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=jr(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return $r(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return ye.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",r=!0;for(const a of t.values||[])r?r=!1:i+=",",i+=rv(a);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let r="{",a=!0;for(const l of i)a?a=!1:r+=",",r+=`${l}:${rv(t.fields[l])}`;return r+"}"})(n.mapValue):xe(61005,{value:n})}function Df(n){switch(Ws(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Fp(n);return e?16+Df(e):16;case 5:return 2*n.stringValue.length;case 6:return $r(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((r,a)=>r+Df(a)),0)})(n.arrayValue);case 10:case 11:return(function(i){let r=0;return so(i.fields,((a,l)=>{r+=a.length+Df(l)})),r})(n.mapValue);default:throw xe(13486,{value:n})}}function m0(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function sv(n){return!!n&&"integerValue"in n}function id(n){return!!n&&"arrayValue"in n}function Wb(n){return!!n&&"nullValue"in n}function Xb(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Mf(n){return!!n&&"mapValue"in n}function zp(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[f0])==null?void 0:i.stringValue)===p0}function Bc(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return so(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Bc(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Bc(n.arrayValue.values[t]);return e}return{...n}}function W1(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Q1}const X1={mapValue:{fields:{[f0]:{stringValue:p0},[zl]:{arrayValue:{}}}}};function OO(n){return"nullValue"in n?Nf:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?m0(ua.empty(),ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?zp(n)?X1:{mapValue:{}}:xe(35942,{value:n})}function UO(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?m0(ua.empty(),ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?X1:"mapValue"in n?zp(n)?{mapValue:{}}:qs:xe(61959,{value:n})}function Zb(n,e){const t=Xs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function eS(n,e){const t=Xs(n.value,e.value);return t!==0?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e){this.value=e}static empty(){return new mn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Mf(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Bc(t)}setAll(e){let t=bt.emptyPath(),i={},r=[];e.forEach(((l,c)=>{if(!t.isImmediateParentOf(c)){const h=this.getFieldsMap(t);this.applyChanges(h,i,r),i={},r=[],t=c.popLast()}l?i[c.lastSegment()]=Bc(l):r.push(c.lastSegment())}));const a=this.getFieldsMap(t);this.applyChanges(a,i,r)}delete(e){const t=this.field(e.popLast());Mf(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return gr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Mf(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){so(t,((r,a)=>e[r]=a));for(const r of i)delete e[r]}clone(){return new mn(Bc(this.value))}}function Z1(n){const e=[];return so(n.fields,((t,i)=>{const r=new bt([t]);if(Mf(i)){const a=Z1(i.mapValue).fields;if(a.length===0)e.push(r);else for(const l of a)e.push(r.child(l))}else e.push(r)})),new Vn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e,t,i,r,a,l,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=a,this.data=l,this.documentState=c}static newInvalidDocument(e){return new At(e,0,Re.min(),Re.min(),Re.min(),mn.empty(),0)}static newFoundDocument(e,t,i,r){return new At(e,1,t,Re.min(),i,r,0)}static newNoDocument(e,t){return new At(e,2,t,Re.min(),Re.min(),mn.empty(),0)}static newUnknownDocument(e,t){return new At(e,3,t,Re.min(),Re.min(),mn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=mn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=mn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof At&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new At(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bl{constructor(e,t){this.position=e,this.inclusive=t}}function tS(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const a=e[r],l=n.position[r];if(a.field.isKeyField()?i=ye.comparator(ye.fromName(l.referenceValue),t.key):i=Xs(l,t.data.field(a.field)),a.dir==="desc"&&(i*=-1),i!==0)break}return i}function nS(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!gr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op{constructor(e,t="asc"){this.field=e,this.dir=t}}function GO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{}class Je extends eC{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new FO(e,t,i):t==="array-contains"?new BO(e,i):t==="in"?new oC(e,i):t==="not-in"?new HO(e,i):t==="array-contains-any"?new jO(e,i):new Je(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new zO(e,i):new qO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Xs(t,this.value)):t!==null&&Ws(this.value)===Ws(t)&&this.matchesComparison(Xs(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return xe(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ht extends eC{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ht(e,t)}matches(e){return Hl(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Hl(n){return n.op==="and"}function ov(n){return n.op==="or"}function g0(n){return tC(n)&&Hl(n)}function tC(n){for(const e of n.filters)if(e instanceof ht)return!1;return!0}function av(n){if(n instanceof Je)return n.field.canonicalString()+n.op.toString()+ql(n.value);if(g0(n))return n.filters.map((e=>av(e))).join(",");{const e=n.filters.map((t=>av(t))).join(",");return`${n.op}(${e})`}}function nC(n,e){return n instanceof Je?(function(i,r){return r instanceof Je&&i.op===r.op&&i.field.isEqual(r.field)&&gr(i.value,r.value)})(n,e):n instanceof ht?(function(i,r){return r instanceof ht&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce(((a,l,c)=>a&&nC(l,r.filters[c])),!0):!1})(n,e):void xe(19439)}function iC(n,e){const t=n.filters.concat(e);return ht.create(t,n.op)}function rC(n){return n instanceof Je?(function(t){return`${t.field.canonicalString()} ${t.op} ${ql(t.value)}`})(n):n instanceof ht?(function(t){return t.op.toString()+" {"+t.getFilters().map(rC).join(" ,")+"}"})(n):"Filter"}class FO extends Je{constructor(e,t,i){super(e,t,i),this.key=ye.fromName(i.referenceValue)}matches(e){const t=ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class zO extends Je{constructor(e,t){super(e,"in",t),this.keys=sC("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class qO extends Je{constructor(e,t){super(e,"not-in",t),this.keys=sC("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function sC(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>ye.fromName(i.referenceValue)))}class BO extends Je{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return id(t)&&nd(t.arrayValue,this.value)}}class oC extends Je{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&nd(this.value.arrayValue,t)}}class HO extends Je{constructor(e,t){super(e,"not-in",t)}matches(e){if(nd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!nd(this.value.arrayValue,t)}}class jO extends Je{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!id(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>nd(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,t=null,i=[],r=[],a=null,l=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=a,this.startAt=l,this.endAt=c,this.Te=null}}function lv(n,e=null,t=[],i=[],r=null,a=null,l=null){return new $O(n,e,t,i,r,a,l)}function ca(n){const e=Se(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>av(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(a){return a.field.canonicalString()+a.dir})(i))).join(","),Lp(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>ql(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>ql(i))).join(",")),e.Te=t}return e.Te}function _d(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!GO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!nC(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!nS(n.startAt,e.startAt)&&nS(n.endAt,e.endAt)}function ap(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function lp(n,e){return n.filters.filter((t=>t instanceof Je&&t.field.isEqual(e)))}function iS(n,e,t){let i=Nf,r=!0;for(const a of lp(n,e)){let l=Nf,c=!0;switch(a.op){case"<":case"<=":l=OO(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,c=!1;break;case"!=":case"not-in":l=Nf}Zb({value:i,inclusive:r},{value:l,inclusive:c})<0&&(i=l,r=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Zb({value:i,inclusive:r},{value:l,inclusive:t.inclusive})<0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}function rS(n,e,t){let i=qs,r=!0;for(const a of lp(n,e)){let l=qs,c=!0;switch(a.op){case">=":case">":l=UO(a.value),c=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,c=!1;break;case"!=":case"not-in":l=qs}eS({value:i,inclusive:r},{value:l,inclusive:c})>0&&(i=l,r=c)}if(t!==null){for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];eS({value:i,inclusive:r},{value:l,inclusive:t.inclusive})>0&&(i=l,r=t.inclusive);break}}return{value:i,inclusive:r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t=null,i=[],r=[],a=null,l="F",c=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=a,this.limitType=l,this.startAt=c,this.endAt=h,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function aC(n,e,t,i,r,a,l,c){return new qp(n,e,t,i,r,a,l,c)}function Ed(n){return new qp(n)}function sS(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function KO(n){return ye.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}function JO(n){return n.collectionGroup!==null}function Hc(n){const e=Se(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const a of e.explicitOrderBy)e.Ie.push(a),t.add(a.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(l){let c=new at(bt.comparator);return l.filters.forEach((h=>{h.getFlattenedFilters().forEach((f=>{f.isInequality()&&(c=c.add(f.field))}))})),c})(e).forEach((a=>{t.has(a.canonicalString())||a.isKeyField()||e.Ie.push(new op(a,i))})),t.has(bt.keyField().canonicalString())||e.Ie.push(new op(bt.keyField(),i))}return e.Ie}function Jn(n){const e=Se(n);return e.Ee||(e.Ee=YO(e,Hc(n))),e.Ee}function YO(n,e){if(n.limitType==="F")return lv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((r=>{const a=r.dir==="desc"?"asc":"desc";return new op(r.field,a)}));const t=n.endAt?new Bl(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Bl(n.startAt.position,n.startAt.inclusive):null;return lv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function uv(n,e,t){return new qp(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bp(n,e){return _d(Jn(n),Jn(e))&&n.limitType===e.limitType}function lC(n){return`${ca(Jn(n))}|lt:${n.limitType}`}function gl(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((r=>rC(r))).join(", ")}]`),Lp(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((r=>(function(l){return`${l.field.canonicalString()} (${l.dir})`})(r))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((r=>ql(r))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((r=>ql(r))).join(",")),`Target(${i})`})(Jn(n))}; limitType=${n.limitType})`}function Td(n,e){return e.isFoundDocument()&&(function(i,r){const a=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(a):ye.isDocumentKey(i.path)?i.path.isEqual(a):i.path.isImmediateParentOf(a)})(n,e)&&(function(i,r){for(const a of Hc(i))if(!a.field.isKeyField()&&r.data.field(a.field)===null)return!1;return!0})(n,e)&&(function(i,r){for(const a of i.filters)if(!a.matches(r))return!1;return!0})(n,e)&&(function(i,r){return!(i.startAt&&!(function(l,c,h){const f=tS(l,c,h);return l.inclusive?f<=0:f<0})(i.startAt,Hc(i),r)||i.endAt&&!(function(l,c,h){const f=tS(l,c,h);return l.inclusive?f>=0:f>0})(i.endAt,Hc(i),r))})(n,e)}function uC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cC(n){return(e,t)=>{let i=!1;for(const r of Hc(n)){const a=QO(r,e,t);if(a!==0)return a;i=i||r.field.isKeyField()}return 0}}function QO(n,e,t){const i=n.field.isKeyField()?ye.comparator(e.key,t.key):(function(a,l,c){const h=l.data.field(a),f=c.data.field(a);return h!==null&&f!==null?Xs(h,f):xe(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return xe(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,a]of i)if(this.equalsFn(r,e))return a}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let a=0;a<r.length;a++)if(this.equalsFn(r[a][0],e))return void(r[a]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){so(this.inner,((t,i)=>{for(const[r,a]of i)e(r,a)}))}isEmpty(){return H1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=new pt(ye.comparator);function $n(){return WO}const dC=new pt(ye.comparator);function Nc(...n){let e=dC;for(const t of n)e=e.insert(t.key,t);return e}function hC(n){let e=dC;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function cr(){return jc()}function fC(){return jc()}function jc(){return new Yr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const XO=new pt(ye.comparator),ZO=new at(ye.comparator);function ze(...n){let e=ZO;for(const t of n)e=e.add(t);return e}const eU=new at(Pe);function y0(){return eU}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v0(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wc(e)?"-0":e}}function pC(n){return{integerValue:""+n}}function tU(n,e){return P1(e)?pC(e):v0(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this._=void 0}}function nU(n,e,t){return n instanceof rd?(function(r,a){const l={fields:{[K1]:{stringValue:$1},[Y1]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return a&&h0(a)&&(a=Fp(a)),a&&(l.fields[J1]=a),{mapValue:l}})(t,e):n instanceof jl?gC(n,e):n instanceof $l?yC(n,e):(function(r,a){const l=mC(r,a),c=oS(l)+oS(r.Ae);return sv(l)&&sv(r.Ae)?pC(c):v0(r.serializer,c)})(n,e)}function iU(n,e,t){return n instanceof jl?gC(n,e):n instanceof $l?yC(n,e):t}function mC(n,e){return n instanceof sd?(function(i){return sv(i)||(function(a){return!!a&&"doubleValue"in a})(i)})(e)?e:{integerValue:0}:null}class rd extends Hp{}class jl extends Hp{constructor(e){super(),this.elements=e}}function gC(n,e){const t=vC(e);for(const i of n.elements)t.some((r=>gr(r,i)))||t.push(i);return{arrayValue:{values:t}}}class $l extends Hp{constructor(e){super(),this.elements=e}}function yC(n,e){let t=vC(e);for(const i of n.elements)t=t.filter((r=>!gr(r,i)));return{arrayValue:{values:t}}}class sd extends Hp{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function oS(n){return Tt(n.integerValue||n.doubleValue)}function vC(n){return id(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rU{constructor(e,t){this.field=e,this.transform=t}}function sU(n,e){return n.field.isEqual(e.field)&&(function(i,r){return i instanceof jl&&r instanceof jl||i instanceof $l&&r instanceof $l?Vl(i.elements,r.elements,gr):i instanceof sd&&r instanceof sd?gr(i.Ae,r.Ae):i instanceof rd&&r instanceof rd})(n.transform,e.transform)}class oU{constructor(e,t){this.version=e,this.transformResults=t}}class xn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new xn}static exists(e){return new xn(void 0,e)}static updateTime(e){return new xn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pf(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class jp{}function _C(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new $p(n.key,xn.none()):new iu(n.key,n.data,xn.none());{const t=n.data,i=mn.empty();let r=new at(bt.comparator);for(let a of e.fields)if(!r.has(a)){let l=t.field(a);l===null&&a.length>1&&(a=a.popLast(),l=t.field(a)),l===null?i.delete(a):i.set(a,l),r=r.add(a)}return new Qr(n.key,i,new Vn(r.toArray()),xn.none())}}function aU(n,e,t){n instanceof iu?(function(r,a,l){const c=r.value.clone(),h=lS(r.fieldTransforms,a,l.transformResults);c.setAll(h),a.convertToFoundDocument(l.version,c).setHasCommittedMutations()})(n,e,t):n instanceof Qr?(function(r,a,l){if(!Pf(r.precondition,a))return void a.convertToUnknownDocument(l.version);const c=lS(r.fieldTransforms,a,l.transformResults),h=a.data;h.setAll(EC(r)),h.setAll(c),a.convertToFoundDocument(l.version,h).setHasCommittedMutations()})(n,e,t):(function(r,a,l){a.convertToNoDocument(l.version).setHasCommittedMutations()})(0,e,t)}function $c(n,e,t,i){return n instanceof iu?(function(a,l,c,h){if(!Pf(a.precondition,l))return c;const f=a.value.clone(),_=uS(a.fieldTransforms,h,l);return f.setAll(_),l.convertToFoundDocument(l.version,f).setHasLocalMutations(),null})(n,e,t,i):n instanceof Qr?(function(a,l,c,h){if(!Pf(a.precondition,l))return c;const f=uS(a.fieldTransforms,h,l),_=l.data;return _.setAll(EC(a)),_.setAll(f),l.convertToFoundDocument(l.version,_).setHasLocalMutations(),c===null?null:c.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map((T=>T.field)))})(n,e,t,i):(function(a,l,c){return Pf(a.precondition,l)?(l.convertToNoDocument(l.version).setHasLocalMutations(),null):c})(n,e,t)}function lU(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),a=mC(i.transform,r||null);a!=null&&(t===null&&(t=mn.empty()),t.set(i.field,a))}return t||null}function aS(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Vl(i,r,((a,l)=>sU(a,l)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class iu extends jp{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qr extends jp{constructor(e,t,i,r,a=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function EC(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function lS(n,e,t){const i=new Map;Ae(n.length===t.length,32656,{Ve:t.length,de:n.length});for(let r=0;r<t.length;r++){const a=n[r],l=a.transform,c=e.data.field(a.field);i.set(a.field,iU(l,c,t[r]))}return i}function uS(n,e,t){const i=new Map;for(const r of n){const a=r.transform,l=t.data.field(r.field);i.set(r.field,nU(a,l,e))}return i}class $p extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TC extends jp{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const a=this.mutations[r];a.key.isEqual(e.key)&&aU(a,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=$c(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=fC();return this.mutations.forEach((r=>{const a=e.get(r.key),l=a.overlayedDocument;let c=this.applyToLocalView(l,a.mutatedFields);c=t.has(r.key)?null:c;const h=_C(l,c);h!==null&&i.set(r.key,h),l.isValidDocument()||l.convertToNoDocument(Re.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,((t,i)=>aS(t,i)))&&Vl(this.baseMutations,e.baseMutations,((t,i)=>aS(t,i)))}}class E0{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ae(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let r=(function(){return XO})();const a=e.mutations;for(let l=0;l<a.length;l++)r=r.insert(a[l].key,i[l].version);return new E0(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uU{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ht,Ye;function cU(n){switch(n){case ue.OK:return xe(64938);case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0;default:return xe(15467,{code:n})}}function xC(n){if(n===void 0)return Mt("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Ht.OK:return ue.OK;case Ht.CANCELLED:return ue.CANCELLED;case Ht.UNKNOWN:return ue.UNKNOWN;case Ht.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Ht.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Ht.INTERNAL:return ue.INTERNAL;case Ht.UNAVAILABLE:return ue.UNAVAILABLE;case Ht.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Ht.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Ht.NOT_FOUND:return ue.NOT_FOUND;case Ht.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Ht.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Ht.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Ht.ABORTED:return ue.ABORTED;case Ht.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Ht.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Ht.DATA_LOSS:return ue.DATA_LOSS;default:return xe(39323,{code:n})}}(Ye=Ht||(Ht={}))[Ye.OK=0]="OK",Ye[Ye.CANCELLED=1]="CANCELLED",Ye[Ye.UNKNOWN=2]="UNKNOWN",Ye[Ye.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ye[Ye.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ye[Ye.NOT_FOUND=5]="NOT_FOUND",Ye[Ye.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ye[Ye.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ye[Ye.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ye[Ye.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ye[Ye.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ye[Ye.ABORTED=10]="ABORTED",Ye[Ye.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ye[Ye.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ye[Ye.INTERNAL=13]="INTERNAL",Ye[Ye.UNAVAILABLE=14]="UNAVAILABLE",Ye[Ye.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dU(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hU=new $s([4294967295,4294967295],0);function cS(n){const e=dU().encode(n),t=new v1;return t.update(e),new Uint8Array(t.digest())}function dS(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new $s([t,i],0),new $s([r,a],0)]}class x0{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Dc(`Invalid padding: ${t}`);if(i<0)throw new Dc(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Dc(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Dc(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=$s.fromNumber(this.ge)}ye(e,t,i){let r=e.add(t.multiply($s.fromNumber(i)));return r.compare(hU)===1&&(r=new $s([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=cS(e),[i,r]=dS(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);if(!this.we(l))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new x0(a,r,t);return i.forEach((c=>l.insert(c))),l}insert(e){if(this.ge===0)return;const t=cS(e),[i,r]=dS(t);for(let a=0;a<this.hashCount;a++){const l=this.ye(i,r,a);this.be(l)}}be(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Dc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,t,i,r,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,bd.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new xd(Re.min(),r,new pt(Pe),$n(),ze())}}class bd{constructor(e,t,i,r,a){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new bd(i,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e,t,i,r){this.Se=e,this.removedTargetIds=t,this.key=i,this.De=r}}class bC{constructor(e,t){this.targetId=e,this.Ce=t}}class SC{constructor(e,t,i=kt.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class hS{constructor(){this.ve=0,this.Fe=fS(),this.Me=kt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),i=ze();return this.Fe.forEach(((r,a)=>{switch(a){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:xe(38017,{changeType:a})}})),new bd(this.Me,this.xe,e,t,i)}Ke(){this.Oe=!1,this.Fe=fS()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class fU{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.He=of(),this.Je=of(),this.Ze=new pt(Pe)}Xe(e){for(const t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.We(),i.Ne||i.Ke(),i.Le(e.resumeToken);break;case 2:i.We(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.Qe(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:xe(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,r)=>{this.rt(r)&&t(r)}))}st(e){const t=e.targetId,i=e.Ce.count,r=this.ot(t);if(r){const a=r.target;if(ap(a))if(i===0){const l=new ye(a.path);this.et(t,l,At.newNoDocument(l,Re.min()))}else Ae(i===1,20013,{expectedCount:i});else{const l=this._t(t);if(l!==i){const c=this.ut(e),h=c?this.ct(c,e,l):1;if(h!==0){this.it(t);const f=h===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,f)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:a=0}=t;let l,c;try{l=$r(i).toUint8Array()}catch(h){if(h instanceof j1)return kl("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw h}try{c=new x0(l,r,a)}catch(h){return kl(h instanceof Dc?"BloomFilter error: ":"Applying bloom filter failed: ",h),null}return c.ge===0?null:c}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let r=0;return i.forEach((a=>{const l=this.Ge.ht(),c=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;e.mightContain(c)||(this.et(t,a,null),r++)})),r}Tt(e){const t=new Map;this.ze.forEach(((a,l)=>{const c=this.ot(l);if(c){if(a.current&&ap(c.target)){const h=new ye(c.target.path);this.It(h).has(l)||this.Et(l,h)||this.et(l,h,At.newNoDocument(h,e))}a.Be&&(t.set(l,a.ke()),a.Ke())}}));let i=ze();this.Je.forEach(((a,l)=>{let c=!0;l.forEachWhile((h=>{const f=this.ot(h);return!f||f.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(i=i.add(a))})),this.je.forEach(((a,l)=>l.setReadTime(e)));const r=new xd(e,t,this.Ze,this.je,i);return this.je=$n(),this.He=of(),this.Je=of(),this.Ze=new pt(Pe),r}Ye(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).qe(t.key,i),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.qe(t,1):r.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new hS,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new at(Pe),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new at(Pe),this.He=this.He.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||fe("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new hS),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function of(){return new pt(ye.comparator)}function fS(){return new pt(ye.comparator)}const pU={asc:"ASCENDING",desc:"DESCENDING"},mU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},gU={and:"AND",or:"OR"};class yU{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function cv(n,e){return n.useProto3Json||Lp(e)?e:{value:e}}function Kl(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function wC(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function vU(n,e){return Kl(n,e.toTimestamp())}function Sn(n){return Ae(!!n,49232),Re.fromTimestamp((function(t){const i=jr(t);return new ot(i.seconds,i.nanos)})(n))}function b0(n,e){return dv(n,e).canonicalString()}function dv(n,e){const t=(function(r){return new nt(["projects",r.projectId,"databases",r.database])})(n).child("documents");return e===void 0?t:t.child(e)}function AC(n){const e=nt.fromString(n);return Ae(VC(e),10190,{key:e.toString()}),e}function up(n,e){return b0(n.databaseId,e.path)}function Zo(n,e){const t=AC(e);if(t.get(1)!==n.databaseId.projectId)throw new ge(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ge(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new ye(RC(t))}function IC(n,e){return b0(n.databaseId,e)}function CC(n){const e=AC(n);return e.length===4?nt.emptyPath():RC(e)}function hv(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function RC(n){return Ae(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function pS(n,e,t){return{name:up(n,e),fields:t.value.mapValue.fields}}function _U(n,e,t){const i=Zo(n,e.name),r=Sn(e.updateTime),a=e.createTime?Sn(e.createTime):Re.min(),l=new mn({mapValue:{fields:e.fields}}),c=At.newFoundDocument(i,r,a,l);return t&&c.setHasCommittedMutations(),t?c.setHasCommittedMutations():c}function EU(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:xe(39313,{state:f})})(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],a=(function(f,_){return f.useProto3Json?(Ae(_===void 0||typeof _=="string",58123),kt.fromBase64String(_||"")):(Ae(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),kt.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),l=e.targetChange.cause,c=l&&(function(f){const _=f.code===void 0?ue.UNKNOWN:xC(f.code);return new ge(_,f.message||"")})(l);t=new SC(i,r,a,c||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=Zo(n,i.document.name),a=Sn(i.document.updateTime),l=i.document.createTime?Sn(i.document.createTime):Re.min(),c=new mn({mapValue:{fields:i.document.fields}}),h=At.newFoundDocument(r,a,l,c),f=i.targetIds||[],_=i.removedTargetIds||[];t=new kf(f,_,h.key,h)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=Zo(n,i.document),a=i.readTime?Sn(i.readTime):Re.min(),l=At.newNoDocument(r,a),c=i.removedTargetIds||[];t=new kf([],c,l.key,l)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=Zo(n,i.document),a=i.removedTargetIds||[];t=new kf([],a,r,null)}else{if(!("filter"in e))return xe(11601,{Vt:e});{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:a}=i,l=new uU(r,a),c=i.targetId;t=new bC(c,l)}}return t}function cp(n,e){let t;if(e instanceof iu)t={update:pS(n,e.key,e.value)};else if(e instanceof $p)t={delete:up(n,e.key)};else if(e instanceof Qr)t={update:pS(n,e.key,e.data),updateMask:AU(e.fieldMask)};else{if(!(e instanceof TC))return xe(16599,{dt:e.type});t={verify:up(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(a,l){const c=l.transform;if(c instanceof rd)return{fieldPath:l.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof jl)return{fieldPath:l.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof $l)return{fieldPath:l.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof sd)return{fieldPath:l.field.canonicalString(),increment:c.Ae};throw xe(20930,{transform:l.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(r,a){return a.updateTime!==void 0?{updateTime:vU(r,a.updateTime)}:a.exists!==void 0?{exists:a.exists}:xe(27497)})(n,e.precondition)),t}function fv(n,e){const t=e.currentDocument?(function(a){return a.updateTime!==void 0?xn.updateTime(Sn(a.updateTime)):a.exists!==void 0?xn.exists(a.exists):xn.none()})(e.currentDocument):xn.none(),i=e.updateTransforms?e.updateTransforms.map((r=>(function(l,c){let h=null;if("setToServerValue"in c)Ae(c.setToServerValue==="REQUEST_TIME",16630,{proto:c}),h=new rd;else if("appendMissingElements"in c){const _=c.appendMissingElements.values||[];h=new jl(_)}else if("removeAllFromArray"in c){const _=c.removeAllFromArray.values||[];h=new $l(_)}else"increment"in c?h=new sd(l,c.increment):xe(16584,{proto:c});const f=bt.fromServerFormat(c.fieldPath);return new rU(f,h)})(n,r))):[];if(e.update){e.update.name;const r=Zo(n,e.update.name),a=new mn({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=(function(h){const f=h.fieldPaths||[];return new Vn(f.map((_=>bt.fromServerFormat(_))))})(e.updateMask);return new Qr(r,a,l,t,i)}return new iu(r,a,t,i)}if(e.delete){const r=Zo(n,e.delete);return new $p(r,t)}if(e.verify){const r=Zo(n,e.verify);return new TC(r,t)}return xe(1463,{proto:e})}function TU(n,e){return n&&n.length>0?(Ae(e!==void 0,14353),n.map((t=>(function(r,a){let l=r.updateTime?Sn(r.updateTime):Sn(a);return l.isEqual(Re.min())&&(l=Sn(a)),new oU(l,r.transformResults||[])})(t,e)))):[]}function NC(n,e){return{documents:[IC(n,e.path)]}}function DC(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=IC(n,r);const a=(function(f){if(f.length!==0)return kC(ht.create(f,"and"))})(e.filters);a&&(t.structuredQuery.where=a);const l=(function(f){if(f.length!==0)return f.map((_=>(function(x){return{field:yl(x.field),direction:bU(x.dir)}})(_)))})(e.orderBy);l&&(t.structuredQuery.orderBy=l);const c=cv(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(e.endAt)),{ft:t,parent:r}}function MC(n){let e=CC(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){Ae(i===1,65062);const _=t.from[0];_.allDescendants?r=_.collectionId:e=e.child(_.collectionId)}let a=[];t.where&&(a=(function(T){const x=PC(T);return x instanceof ht&&g0(x)?x.getFilters():[x]})(t.where));let l=[];t.orderBy&&(l=(function(T){return T.map((x=>(function(V){return new op(vl(V.field),(function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(V.direction))})(x)))})(t.orderBy));let c=null;t.limit&&(c=(function(T){let x;return x=typeof T=="object"?T.value:T,Lp(x)?null:x})(t.limit));let h=null;t.startAt&&(h=(function(T){const x=!!T.before,A=T.values||[];return new Bl(A,x)})(t.startAt));let f=null;return t.endAt&&(f=(function(T){const x=!T.before,A=T.values||[];return new Bl(A,x)})(t.endAt)),aC(e,r,l,a,c,"F",h,f)}function xU(n,e){const t=(function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return xe(28987,{purpose:r})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function PC(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=vl(t.unaryFilter.field);return Je.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=vl(t.unaryFilter.field);return Je.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const a=vl(t.unaryFilter.field);return Je.create(a,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const l=vl(t.unaryFilter.field);return Je.create(l,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xe(61313);default:return xe(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Je.create(vl(t.fieldFilter.field),(function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xe(58110);default:return xe(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return ht.create(t.compositeFilter.filters.map((i=>PC(i))),(function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return xe(1026)}})(t.compositeFilter.op))})(n):xe(30097,{filter:n})}function bU(n){return pU[n]}function SU(n){return mU[n]}function wU(n){return gU[n]}function yl(n){return{fieldPath:n.canonicalString()}}function vl(n){return bt.fromServerFormat(n.fieldPath)}function kC(n){return n instanceof Je?(function(t){if(t.op==="=="){if(Xb(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NAN"}};if(Wb(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xb(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NAN"}};if(Wb(t.value))return{unaryFilter:{field:yl(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yl(t.field),op:SU(t.op),value:t.value}}})(n):n instanceof ht?(function(t){const i=t.getFilters().map((r=>kC(r)));return i.length===1?i[0]:{compositeFilter:{op:wU(t.op),filters:i}}})(n):xe(54877,{filter:n})}function AU(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function VC(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}function LC(n){return!!n&&typeof n._toProto=="function"&&n._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(e,t,i,r,a=Re.min(),l=Re.min(),c=kt.EMPTY_BYTE_STRING,h=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=c,this.expectedCount=h}withSequenceNumber(e){return new zr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new zr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{constructor(e){this.yt=e}}function IU(n,e){let t;if(e.document)t=_U(n.yt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=ye.fromSegments(e.noDocument.path),r=ha(e.noDocument.readTime);t=At.newNoDocument(i,r),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return xe(56709);{const i=ye.fromSegments(e.unknownDocument.path),r=ha(e.unknownDocument.version);t=At.newUnknownDocument(i,r)}}return e.readTime&&t.setReadTime((function(r){const a=new ot(r[0],r[1]);return Re.fromTimestamp(a)})(e.readTime)),t}function mS(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:dp(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=(function(a,l){return{name:up(a,l.key),fields:l.data.value.mapValue.fields,updateTime:Kl(a,l.version.toTimestamp()),createTime:Kl(a,l.createTime.toTimestamp())}})(n.yt,e);else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:da(e.version)};else{if(!e.isUnknownDocument())return xe(57904,{document:e});i.unknownDocument={path:t.path.toArray(),version:da(e.version)}}return i}function dp(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function da(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function ha(n){const e=new ot(n.seconds,n.nanoseconds);return Re.fromTimestamp(e)}function $o(n,e){const t=(e.baseMutations||[]).map((a=>fv(n.yt,a)));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];if(a+1<e.mutations.length&&e.mutations[a+1].transform!==void 0){const c=e.mutations[a+1];l.updateTransforms=c.transform.fieldTransforms,e.mutations.splice(a+1,1),++a}}const i=e.mutations.map((a=>fv(n.yt,a))),r=ot.fromMillis(e.localWriteTimeMs);return new _0(e.batchId,r,t,i)}function Mc(n){const e=ha(n.readTime),t=n.lastLimboFreeSnapshotVersion!==void 0?ha(n.lastLimboFreeSnapshotVersion):Re.min();let i;return i=(function(a){return a.documents!==void 0})(n.query)?(function(a){const l=a.documents.length;return Ae(l===1,1966,{count:l}),Jn(Ed(CC(a.documents[0])))})(n.query):(function(a){return Jn(MC(a))})(n.query),new zr(i,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,kt.fromBase64String(n.resumeToken))}function UC(n,e){const t=da(e.snapshotVersion),i=da(e.lastLimboFreeSnapshotVersion);let r;r=ap(e.target)?NC(n.yt,e.target):DC(n.yt,e.target).ft;const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ca(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function GC(n){const e=MC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?uv(e,e.limit,"L"):e}function Ay(n,e){return new T0(e.largestBatchId,fv(n.yt,e.overlayMutation))}function gS(n,e){const t=e.path.lastSegment();return[n,yn(e.path.popLast()),t]}function yS(n,e,t,i){return{indexId:n,uid:e,sequenceNumber:t,readTime:da(i.readTime),documentKey:yn(i.documentKey.path),largestBatchId:i.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CU{getBundleMetadata(e,t){return vS(e).get(t).next((i=>{if(i)return(function(a){return{id:a.bundleId,createTime:ha(a.createTime),version:a.version}})(i)}))}saveBundleMetadata(e,t){return vS(e).put((function(r){return{bundleId:r.id,createTime:da(Sn(r.createTime)),version:r.version}})(t))}getNamedQuery(e,t){return _S(e).get(t).next((i=>{if(i)return(function(a){return{name:a.name,query:GC(a.bundledQuery),readTime:ha(a.readTime)}})(i)}))}saveNamedQuery(e,t){return _S(e).put((function(r){return{name:r.name,readTime:da(Sn(r.readTime)),bundledQuery:r.bundledQuery}})(t))}}function vS(n){return Qt(n,Op)}function _S(n){return Qt(n,Up)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const i=t.uid||"";return new Kp(e,i)}getOverlay(e,t){return yc(e).get(gS(this.userId,t)).next((i=>i?Ay(this.serializer,i):null))}getOverlays(e,t){const i=cr();return Y.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){const r=[];return i.forEach(((a,l)=>{const c=new T0(t,l);r.push(this.bt(e,c))})),Y.waitFor(r)}removeOverlaysForBatchId(e,t,i){const r=new Set;t.forEach((l=>r.add(yn(l.getCollectionPath()))));const a=[];return r.forEach((l=>{const c=IDBKeyRange.bound([this.userId,l,i],[this.userId,l,i+1],!1,!0);a.push(yc(e).X(nv,c))})),Y.waitFor(a)}getOverlaysForCollection(e,t,i){const r=cr(),a=yn(t),l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,Number.POSITIVE_INFINITY],!0);return yc(e).H(nv,l).next((c=>{for(const h of c){const f=Ay(this.serializer,h);r.set(f.getKey(),f)}return r}))}getOverlaysForCollectionGroup(e,t,i,r){const a=cr();let l;const c=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yc(e).ee({index:G1,range:c},((h,f,_)=>{const T=Ay(this.serializer,f);a.size()<r||T.largestBatchId===l?(a.set(T.getKey(),T),l=T.largestBatchId):_.done()})).next((()=>a))}bt(e,t){return yc(e).put((function(r,a,l){const[c,h,f]=gS(a,l.mutation.key);return{userId:a,collectionPath:h,documentId:f,collectionGroup:l.mutation.key.getCollectionGroup(),largestBatchId:l.largestBatchId,overlayMutation:cp(r.yt,l.mutation)}})(this.serializer,this.userId,t))}}function yc(n){return Qt(n,Gp)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RU{St(e){return Qt(e,c0)}getSessionToken(e){return this.St(e).get("sessionToken").next((t=>{const i=t==null?void 0:t.value;return i?kt.fromUint8Array(i):kt.EMPTY_BYTE_STRING}))}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Tt(e.integerValue));else if("doubleValue"in e){const i=Tt(e.doubleValue);isNaN(i)?this.Ft(t,13):(this.Ft(t,15),Wc(i)?t.Mt(0):t.Mt(i))}else if("timestampValue"in e){let i=e.timestampValue;this.Ft(t,20),typeof i=="string"&&(i=jr(i)),t.xt(`${i.seconds||""}`),t.Mt(i.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt($r(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.Ft(t,45),t.Mt(i.latitude||0),t.Mt(i.longitude||0)}else"mapValue"in e?W1(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):zp(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):xe(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){const i=e.fields||{};this.Ft(t,55);for(const r of Object.keys(i))this.Ot(r,t),this.Ct(i[r],t)}kt(e,t){var l,c;const i=e.fields||{};this.Ft(t,53);const r=zl,a=((c=(l=i[r].arrayValue)==null?void 0:l.values)==null?void 0:c.length)||0;this.Ft(t,15),t.Mt(Tt(a)),this.Ot(r,t),this.Ct(i[r],t)}qt(e,t){const i=e.values||[];this.Ft(t,50);for(const r of i)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ye.fromName(e).path.forEach((i=>{this.Ft(t,60),this.$t(i,t)}))}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ko.Wt=new Ko;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dl=255;function NU(n){if(n===0)return 8;let e=0;return n>>4||(e+=4,n<<=4),n>>6||(e+=2,n<<=2),n>>7||(e+=1),e}function ES(n){const e=64-(function(i){let r=0;for(let a=0;a<8;++a){const l=NU(255&i[a]);if(r+=l,l!==8)break}return r})(n);return Math.ceil(e/8)}class DU{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Gt(i.value),i=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ht(i.value),i=t.next();this.Jt()}Zt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Gt(i);else if(i<2048)this.Gt(960|i>>>6),this.Gt(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|i>>>12),this.Gt(128|63&i>>>6),this.Gt(128|63&i);else{const r=t.codePointAt(0);this.Gt(240|r>>>18),this.Gt(128|63&r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r)}}this.zt()}Xt(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ht(i);else if(i<2048)this.Ht(960|i>>>6),this.Ht(128|63&i);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|i>>>12),this.Ht(128|63&i>>>6),this.Ht(128|63&i);else{const r=t.codePointAt(0);this.Ht(240|r>>>18),this.Ht(128|63&r>>>12),this.Ht(128|63&r>>>6),this.Ht(128|63&r)}}this.Jt()}Yt(e){const t=this.en(e),i=ES(t);this.tn(1+i),this.buffer[this.position++]=255&i;for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),i=ES(t);this.tn(1+i),this.buffer[this.position++]=~(255&i);for(let r=t.length-i;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(dl),this.sn(255)}_n(){this.an(dl),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=(function(a){const l=new DataView(new ArrayBuffer(8));return l.setFloat64(0,a,!1),new Uint8Array(l.buffer)})(e),i=!!(128&t[0]);t[0]^=i?255:128;for(let r=1;r<t.length;++r)t[r]^=i?255:0;return t}Gt(e){const t=255&e;t===0?(this.sn(0),this.sn(255)):t===dl?(this.sn(dl),this.sn(0)):this.sn(t)}Ht(e){const t=255&e;t===0?(this.an(0),this.an(255)):t===dl?(this.an(dl),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const r=new Uint8Array(i);r.set(this.buffer),this.buffer=r}}class MU{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class PU{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class vc{constructor(){this.cn=new DU,this.ascending=new MU(this.cn),this.descending=new PU(this.cn)}seed(e){this.cn.seed(e)}ln(e){return e===0?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{constructor(e,t,i,r){this.hn=e,this.Pn=t,this.Tn=i,this.In=r}En(){const e=this.In.length,t=e===0||this.In[e-1]===255?e+1:e,i=new Uint8Array(t);return i.set(this.In,0),t!==e?i.set([0],this.In.length):++i[i.length-1],new Jo(this.hn,this.Pn,this.Tn,i)}Rn(e,t,i){return{indexId:this.hn,uid:e,arrayValue:Vf(this.Tn),directionalValue:Vf(this.In),orderedDocumentKey:Vf(t),documentKey:i.path.toArray()}}An(e,t,i){const r=this.Rn(e,t,i);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function Ps(n,e){let t=n.hn-e.hn;return t!==0?t:(t=TS(n.Tn,e.Tn),t!==0?t:(t=TS(n.In,e.In),t!==0?t:ye.comparator(n.Pn,e.Pn)))}function TS(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(i!==0)return i}return n.length-e.length}function Vf(n){return lI()?(function(t){let i="";for(let r=0;r<t.length;r++)i+=String.fromCharCode(t[r]);return i})(n):n}function xS(n){return typeof n!="string"?n:(function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i})(n)}class bS{constructor(e){this.Vn=new at(((t,i)=>bt.comparator(t.field,i.field))),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[];for(const t of e.filters){const i=t;i.isInequality()?this.Vn=this.Vn.add(i):this.mn.push(i)}}get fn(){return this.Vn.size>1}gn(e){if(Ae(e.collectionGroup===this.collectionId,49279),this.fn)return!1;const t=Zy(e);if(t!==void 0&&!this.pn(t))return!1;const i=qo(e);let r=new Set,a=0,l=0;for(;a<i.length&&this.pn(i[a]);++a)r=r.add(i[a].fieldPath.canonicalString());if(a===i.length)return!0;if(this.Vn.size>0){const c=this.Vn.getIterator().getNext();if(!r.has(c.field.canonicalString())){const h=i[a];if(!this.yn(c,h)||!this.wn(this.dn[l++],h))return!1}++a}for(;a<i.length;++a){const c=i[a];if(l>=this.dn.length||!this.wn(this.dn[l++],c))return!1}return!0}bn(){if(this.fn)return null;let e=new at(bt.comparator);const t=[];for(const i of this.mn)if(!i.field.isKeyField())if(i.op==="array-contains"||i.op==="array-contains-any")t.push(new If(i.field,2));else{if(e.has(i.field))continue;e=e.add(i.field),t.push(new If(i.field,0))}for(const i of this.dn)i.field.isKeyField()||e.has(i.field)||(e=e.add(i.field),t.push(new If(i.field,i.dir==="asc"?0:1)));return new tp(tp.UNKNOWN_ID,this.collectionId,t,Qc.empty())}pn(e){for(const t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(e===void 0||!e.field.isEqual(t.fieldPath))return!1;const i=e.op==="array-contains"||e.op==="array-contains-any";return t.kind===2===i}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(t.kind===0&&e.dir==="asc"||t.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FC(n){var t,i;if(Ae(n instanceof Je||n instanceof ht,20012),n instanceof Je){if(n instanceof oC){const r=((i=(t=n.value.arrayValue)==null?void 0:t.values)==null?void 0:i.map((a=>Je.create(n.field,"==",a))))||[];return ht.create(r,"or")}return n}const e=n.filters.map((r=>FC(r)));return ht.create(e,n.op)}function kU(n){if(n.getFilters().length===0)return[];const e=gv(FC(n));return Ae(zC(e),7391),pv(e)||mv(e)?[e]:e.getFilters()}function pv(n){return n instanceof Je}function mv(n){return n instanceof ht&&g0(n)}function zC(n){return pv(n)||mv(n)||(function(t){if(t instanceof ht&&ov(t)){for(const i of t.getFilters())if(!pv(i)&&!mv(i))return!1;return!0}return!1})(n)}function gv(n){if(Ae(n instanceof Je||n instanceof ht,34018),n instanceof Je)return n;if(n.filters.length===1)return gv(n.filters[0]);const e=n.filters.map((i=>gv(i)));let t=ht.create(e,n.op);return t=hp(t),zC(t)?t:(Ae(t instanceof ht,64498),Ae(Hl(t),40251),Ae(t.filters.length>1,57927),t.filters.reduce(((i,r)=>S0(i,r))))}function S0(n,e){let t;return Ae(n instanceof Je||n instanceof ht,38388),Ae(e instanceof Je||e instanceof ht,25473),t=n instanceof Je?e instanceof Je?(function(r,a){return ht.create([r,a],"and")})(n,e):SS(n,e):e instanceof Je?SS(e,n):(function(r,a){if(Ae(r.filters.length>0&&a.filters.length>0,48005),Hl(r)&&Hl(a))return iC(r,a.getFilters());const l=ov(r)?r:a,c=ov(r)?a:r,h=l.filters.map((f=>S0(f,c)));return ht.create(h,"or")})(n,e),hp(t)}function SS(n,e){if(Hl(e))return iC(e,n.getFilters());{const t=e.filters.map((i=>S0(n,i)));return ht.create(t,"or")}}function hp(n){if(Ae(n instanceof Je||n instanceof ht,11850),n instanceof Je)return n;const e=n.getFilters();if(e.length===1)return hp(e[0]);if(tC(n))return n;const t=e.map((r=>hp(r))),i=[];return t.forEach((r=>{r instanceof Je?i.push(r):r instanceof ht&&(r.op===n.op?i.push(...r.filters):i.push(r))})),i.length===1?i[0]:ht.create(i,n.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VU{constructor(){this.Sn=new w0}addToCollectionParentIndex(e,t){return this.Sn.add(t),Y.resolve()}getCollectionParents(e,t){return Y.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return Y.resolve()}deleteFieldIndex(e,t){return Y.resolve()}deleteAllFieldIndexes(e){return Y.resolve()}createTargetIndexes(e,t){return Y.resolve()}getDocumentsMatchingTarget(e,t){return Y.resolve(null)}getIndexType(e,t){return Y.resolve(0)}getFieldIndexes(e,t){return Y.resolve([])}getNextCollectionGroupToUpdate(e){return Y.resolve(null)}getMinOffset(e,t){return Y.resolve(Yn.min())}getMinOffsetFromCollectionGroup(e,t){return Y.resolve(Yn.min())}updateCollectionGroup(e,t,i){return Y.resolve()}updateIndexEntries(e,t){return Y.resolve()}}class w0{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new at(nt.comparator),a=!r.has(i);return this.index[t]=r.add(i),a}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new at(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS="IndexedDbIndexManager",af=new Uint8Array(0);class LU{constructor(e,t){this.databaseId=t,this.Dn=new w0,this.Cn=new Yr((i=>ca(i)),((i,r)=>_d(i,r))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){const i=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.Dn.add(t)}));const a={collectionId:i,parent:yn(r)};return AS(e).put(a)}return Y.resolve()}getCollectionParents(e,t){const i=[],r=IDBKeyRange.bound([t,""],[w1(t),""],!1,!0);return AS(e).H(r).next((a=>{for(const l of a){if(l.collectionId!==t)break;i.push(ur(l.parent))}return i}))}addFieldIndex(e,t){const i=_c(e),r=(function(c){return{indexId:c.indexId,collectionGroup:c.collectionGroup,fields:c.fields.map((h=>[h.fieldPath.canonicalString(),h.kind]))}})(t);delete r.indexId;const a=i.add(r);if(t.indexState){const l=fl(e);return a.next((c=>{l.put(yS(c,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}deleteFieldIndex(e,t){const i=_c(e),r=fl(e),a=hl(e);return i.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=_c(e),i=hl(e),r=fl(e);return t.X().next((()=>i.X())).next((()=>r.X()))}createTargetIndexes(e,t){return Y.forEach(this.vn(t),(i=>this.getIndexType(e,i).next((r=>{if(r===0||r===1){const a=new bS(i).bn();if(a!=null)return this.addFieldIndex(e,a)}}))))}getDocumentsMatchingTarget(e,t){const i=hl(e);let r=!0;const a=new Map;return Y.forEach(this.vn(t),(l=>this.Fn(e,l).next((c=>{r&&(r=!!c),a.set(l,c)})))).next((()=>{if(r){let l=ze();const c=[];return Y.forEach(a,((h,f)=>{fe(wS,`Using index ${(function(H){return`id=${H.indexId}|cg=${H.collectionGroup}|f=${H.fields.map((Z=>`${Z.fieldPath}:${Z.kind}`)).join(",")}`})(h)} to execute ${ca(t)}`);const _=(function(H,Z){const ie=Zy(Z);if(ie===void 0)return null;for(const J of lp(H,ie.fieldPath))switch(J.op){case"array-contains-any":return J.value.arrayValue.values||[];case"array-contains":return[J.value]}return null})(f,h),T=(function(H,Z){const ie=new Map;for(const J of qo(Z))for(const R of lp(H,J.fieldPath))switch(R.op){case"==":case"in":ie.set(J.fieldPath.canonicalString(),R.value);break;case"not-in":case"!=":return ie.set(J.fieldPath.canonicalString(),R.value),Array.from(ie.values())}return null})(f,h),x=(function(H,Z){const ie=[];let J=!0;for(const R of qo(Z)){const M=R.kind===0?iS(H,R.fieldPath,H.startAt):rS(H,R.fieldPath,H.startAt);ie.push(M.value),J&&(J=M.inclusive)}return new Bl(ie,J)})(f,h),A=(function(H,Z){const ie=[];let J=!0;for(const R of qo(Z)){const M=R.kind===0?rS(H,R.fieldPath,H.endAt):iS(H,R.fieldPath,H.endAt);ie.push(M.value),J&&(J=M.inclusive)}return new Bl(ie,J)})(f,h),V=this.Mn(h,f,x),k=this.Mn(h,f,A),L=this.xn(h,f,T),$=this.On(h.indexId,_,V,x.inclusive,k,A.inclusive,L);return Y.forEach($,(z=>i.Z(z,t.limit).next((H=>{H.forEach((Z=>{const ie=ye.fromSegments(Z.documentKey);l.has(ie)||(l=l.add(ie),c.push(ie))}))}))))})).next((()=>c))}return Y.resolve(null)}))}vn(e){let t=this.Cn.get(e);return t||(e.filters.length===0?t=[e]:t=kU(ht.create(e.filters,"and")).map((i=>lv(e.path,e.collectionGroup,e.orderBy,i.getFilters(),e.limit,e.startAt,e.endAt))),this.Cn.set(e,t),t)}On(e,t,i,r,a,l,c){const h=(t!=null?t.length:1)*Math.max(i.length,a.length),f=h/(t!=null?t.length:1),_=[];for(let T=0;T<h;++T){const x=t?this.Nn(t[T/f]):af,A=this.Bn(e,x,i[T%f],r),V=this.Ln(e,x,a[T%f],l),k=c.map((L=>this.Bn(e,x,L,!0)));_.push(...this.createRange(A,V,k))}return _}Bn(e,t,i,r){const a=new Jo(e,ye.empty(),t,i);return r?a:a.En()}Ln(e,t,i,r){const a=new Jo(e,ye.empty(),t,i);return r?a.En():a}Fn(e,t){const i=new bS(t),r=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((a=>{let l=null;for(const c of a)i.gn(c)&&(!l||c.fields.length>l.fields.length)&&(l=c);return l}))}getIndexType(e,t){let i=2;const r=this.vn(t);return Y.forEach(r,(a=>this.Fn(e,a).next((l=>{l?i!==0&&l.fields.length<(function(h){let f=new at(bt.comparator),_=!1;for(const T of h.filters)for(const x of T.getFlattenedFilters())x.field.isKeyField()||(x.op==="array-contains"||x.op==="array-contains-any"?_=!0:f=f.add(x.field));for(const T of h.orderBy)T.field.isKeyField()||(f=f.add(T.field));return f.size+(_?1:0)})(a)&&(i=1):i=0})))).next((()=>(function(l){return l.limit!==null})(t)&&r.length>1&&i===2?1:i))}kn(e,t){const i=new vc;for(const r of qo(e)){const a=t.data.field(r.fieldPath);if(a==null)return null;const l=i.ln(r.kind);Ko.Wt.Dt(a,l)}return i.un()}Nn(e){const t=new vc;return Ko.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){const i=new vc;return Ko.Wt.Dt(m0(this.databaseId,t),i.ln((function(a){const l=qo(a);return l.length===0?0:l[l.length-1].kind})(e))),i.un()}xn(e,t,i){if(i===null)return[];let r=[];r.push(new vc);let a=0;for(const l of qo(e)){const c=i[a++];for(const h of r)if(this.qn(t,l.fieldPath)&&id(c))r=this.Un(r,l,c);else{const f=h.ln(l.kind);Ko.Wt.Dt(c,f)}}return this.$n(r)}Mn(e,t,i){return this.xn(e,t,i.position)}$n(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].un();return t}Un(e,t,i){const r=[...e],a=[];for(const l of i.arrayValue.values||[])for(const c of r){const h=new vc;h.seed(c.un()),Ko.Wt.Dt(l,h.ln(t.kind)),a.push(h)}return a}qn(e,t){return!!e.filters.find((i=>i instanceof Je&&i.field.isEqual(t)&&(i.op==="in"||i.op==="not-in")))}getFieldIndexes(e,t){const i=_c(e),r=fl(e);return(t?i.H(tv,IDBKeyRange.bound(t,t)):i.H()).next((a=>{const l=[];return Y.forEach(a,(c=>r.get([c.indexId,this.uid]).next((h=>{l.push((function(_,T){const x=T?new Qc(T.sequenceNumber,new Yn(ha(T.readTime),new ye(ur(T.documentKey)),T.largestBatchId)):Qc.empty(),A=_.fields.map((([V,k])=>new If(bt.fromServerFormat(V),k)));return new tp(_.indexId,_.collectionGroup,A,x)})(c,h))})))).next((()=>l))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((t=>t.length===0?null:(t.sort(((i,r)=>{const a=i.indexState.sequenceNumber-r.indexState.sequenceNumber;return a!==0?a:Pe(i.collectionGroup,r.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(e,t,i){const r=_c(e),a=fl(e);return this.Wn(e).next((l=>r.H(tv,IDBKeyRange.bound(t,t)).next((c=>Y.forEach(c,(h=>a.put(yS(h.indexId,this.uid,l,i))))))))}updateIndexEntries(e,t){const i=new Map;return Y.forEach(t,((r,a)=>{const l=i.get(r.collectionGroup);return(l?Y.resolve(l):this.getFieldIndexes(e,r.collectionGroup)).next((c=>(i.set(r.collectionGroup,c),Y.forEach(c,(h=>this.Qn(e,r,h).next((f=>{const _=this.Gn(a,h);return f.isEqual(_)?Y.resolve():this.zn(e,a,h,f,_)})))))))}))}jn(e,t,i,r){return hl(e).put(r.Rn(this.uid,this.Kn(i,t.key),t.key))}Hn(e,t,i,r){return hl(e).delete(r.An(this.uid,this.Kn(i,t.key),t.key))}Qn(e,t,i){const r=hl(e);let a=new at(Ps);return r.ee({index:U1,range:IDBKeyRange.only([i.indexId,this.uid,Vf(this.Kn(i,t))])},((l,c)=>{a=a.add(new Jo(i.indexId,t,xS(c.arrayValue),xS(c.directionalValue)))})).next((()=>a))}Gn(e,t){let i=new at(Ps);const r=this.kn(t,e);if(r==null)return i;const a=Zy(t);if(a!=null){const l=e.data.field(a.fieldPath);if(id(l))for(const c of l.arrayValue.values||[])i=i.add(new Jo(t.indexId,e.key,this.Nn(c),r))}else i=i.add(new Jo(t.indexId,e.key,af,r));return i}zn(e,t,i,r,a){fe(wS,"Updating index entries for document '%s'",t.key);const l=[];return(function(h,f,_,T,x){const A=h.getIterator(),V=f.getIterator();let k=cl(A),L=cl(V);for(;k||L;){let $=!1,z=!1;if(k&&L){const H=_(k,L);H<0?z=!0:H>0&&($=!0)}else k!=null?z=!0:$=!0;$?(T(L),L=cl(V)):z?(x(k),k=cl(A)):(k=cl(A),L=cl(V))}})(r,a,Ps,(c=>{l.push(this.jn(e,t,i,c))}),(c=>{l.push(this.Hn(e,t,i,c))})),Y.waitFor(l)}Wn(e){let t=1;return fl(e).ee({index:O1,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((i,r,a)=>{a.done(),t=r.sequenceNumber+1})).next((()=>t))}createRange(e,t,i){i=i.sort(((l,c)=>Ps(l,c))).filter(((l,c,h)=>!c||Ps(l,h[c-1])!==0));const r=[];r.push(e);for(const l of i){const c=Ps(l,e),h=Ps(l,t);if(c===0)r[0]=e.En();else if(c>0&&h<0)r.push(l),r.push(l.En());else if(h>0)break}r.push(t);const a=[];for(let l=0;l<r.length;l+=2){if(this.Jn(r[l],r[l+1]))return[];const c=r[l].An(this.uid,af,ye.empty()),h=r[l+1].An(this.uid,af,ye.empty());a.push(IDBKeyRange.bound(c,h))}return a}Jn(e,t){return Ps(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(IS)}getMinOffset(e,t){return Y.mapArray(this.vn(t),(i=>this.Fn(e,i).next((r=>r||xe(44426))))).next(IS)}}function AS(n){return Qt(n,ed)}function hl(n){return Qt(n,qc)}function _c(n){return Qt(n,u0)}function fl(n){return Qt(n,zc)}function IS(n){Ae(n.length!==0,28825);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const r=n[i].indexState.offset;o0(r,e)<0&&(e=r),t<r.largestBatchId&&(t=r.largestBatchId)}return new Yn(e.readTime,e.documentKey,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CS={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},qC=41943040;class pn{static withCacheSize(e){return new pn(e,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(n,e,t){const i=n.store(Ri),r=n.store(Ol),a=[],l=IDBKeyRange.only(t.batchId);let c=0;const h=i.ee({range:l},((_,T,x)=>(c++,x.delete())));a.push(h.next((()=>{Ae(c===1,47070,{batchId:t.batchId})})));const f=[];for(const _ of t.mutations){const T=k1(e,_.key.path,t.batchId);a.push(r.delete(T)),f.push(_.key)}return Y.waitFor(a).next((()=>f))}function fp(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw xe(14731);e=n.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pn.DEFAULT_COLLECTION_PERCENTILE=10,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,pn.DEFAULT=new pn(qC,pn.DEFAULT_COLLECTION_PERCENTILE,pn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),pn.DISABLED=new pn(-1,0,0);class Jp{constructor(e,t,i,r){this.userId=e,this.serializer=t,this.indexManager=i,this.referenceDelegate=r,this.Zn={}}static wt(e,t,i,r){Ae(e.uid!=="",64387);const a=e.isAuthenticated()?e.uid:"";return new Jp(a,t,i,r)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).ee({index:Qo,range:i},((r,a,l)=>{t=!1,l.done()})).next((()=>t))}addMutationBatch(e,t,i,r){const a=_l(e),l=ks(e);return l.add({}).next((c=>{Ae(typeof c=="number",49019);const h=new _0(c,t,i,r),f=(function(A,V,k){const L=k.baseMutations.map((z=>cp(A.yt,z))),$=k.mutations.map((z=>cp(A.yt,z)));return{userId:V,batchId:k.batchId,localWriteTimeMs:k.localWriteTime.toMillis(),baseMutations:L,mutations:$}})(this.serializer,this.userId,h),_=[];let T=new at(((x,A)=>Pe(x.canonicalString(),A.canonicalString())));for(const x of r){const A=k1(this.userId,x.key.path,c);T=T.add(x.key.path.popLast()),_.push(l.put(f)),_.push(a.put(A,cO))}return T.forEach((x=>{_.push(this.indexManager.addToCollectionParentIndex(e,x))})),e.addOnCommittedListener((()=>{this.Zn[c]=h.keys()})),Y.waitFor(_).next((()=>h))}))}lookupMutationBatch(e,t){return ks(e).get(t).next((i=>i?(Ae(i.userId===this.userId,48,"Unexpected user for mutation batch",{userId:i.userId,batchId:t}),$o(this.serializer,i)):null))}Xn(e,t){return this.Zn[t]?Y.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next((i=>{if(i){const r=i.keys();return this.Zn[t]=r,r}return null}))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=IDBKeyRange.lowerBound([this.userId,i]);let a=null;return ks(e).ee({index:Qo,range:r},((l,c,h)=>{c.userId===this.userId&&(Ae(c.batchId>=i,47524,{Yn:i}),a=$o(this.serializer,c)),h.done()})).next((()=>a))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=Wo;return ks(e).ee({index:Qo,range:t,reverse:!0},((r,a,l)=>{i=a.batchId,l.done()})).next((()=>i))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Wo],[this.userId,Number.POSITIVE_INFINITY]);return ks(e).H(Qo,t).next((i=>i.map((r=>$o(this.serializer,r)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Cf(this.userId,t.path),r=IDBKeyRange.lowerBound(i),a=[];return _l(e).ee({range:r},((l,c,h)=>{const[f,_,T]=l,x=ur(_);if(f===this.userId&&t.path.isEqual(x))return ks(e).get(T).next((A=>{if(!A)throw xe(61480,{er:l,batchId:T});Ae(A.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:A.userId,batchId:T}),a.push($o(this.serializer,A))}));h.done()})).next((()=>a))}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Pe);const r=[];return t.forEach((a=>{const l=Cf(this.userId,a.path),c=IDBKeyRange.lowerBound(l),h=_l(e).ee({range:c},((f,_,T)=>{const[x,A,V]=f,k=ur(A);x===this.userId&&a.path.isEqual(k)?i=i.add(V):T.done()}));r.push(h)})),Y.waitFor(r).next((()=>this.tr(e,i)))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1,a=Cf(this.userId,i),l=IDBKeyRange.lowerBound(a);let c=new at(Pe);return _l(e).ee({range:l},((h,f,_)=>{const[T,x,A]=h,V=ur(x);T===this.userId&&i.isPrefixOf(V)?V.length===r&&(c=c.add(A)):_.done()})).next((()=>this.tr(e,c)))}tr(e,t){const i=[],r=[];return t.forEach((a=>{r.push(ks(e).get(a).next((l=>{if(l===null)throw xe(35274,{batchId:a});Ae(l.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:l.userId,batchId:a}),i.push($o(this.serializer,l))})))})),Y.waitFor(r).next((()=>i))}removeMutationBatch(e,t){return BC(e.le,this.userId,t).next((i=>(e.addOnCommittedListener((()=>{this.nr(t.batchId)})),Y.forEach(i,(r=>this.referenceDelegate.markPotentiallyOrphaned(e,r))))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return Y.resolve();const i=IDBKeyRange.lowerBound((function(l){return[l]})(this.userId)),r=[];return _l(e).ee({range:i},((a,l,c)=>{if(a[0]===this.userId){const h=ur(a[1]);r.push(h)}else c.done()})).next((()=>{Ae(r.length===0,56720,{rr:r.map((a=>a.canonicalString()))})}))}))}containsKey(e,t){return HC(e,this.userId,t)}ir(e){return jC(e).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:Wo,lastStreamToken:""}))}}function HC(n,e,t){const i=Cf(e,t.path),r=i[1],a=IDBKeyRange.lowerBound(i);let l=!1;return _l(n).ee({range:a,Y:!0},((c,h,f)=>{const[_,T,x]=c;_===e&&T===r&&(l=!0),f.done()})).next((()=>l))}function ks(n){return Qt(n,Ri)}function _l(n){return Qt(n,Ol)}function jC(n){return Qt(n,Xc)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new fa(0)}static ar(){return new fa(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OU{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next((t=>{const i=new fa(t.highestTargetId);return t.highestTargetId=i.next(),this.cr(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.ur(e).next((t=>Re.fromTimestamp(new ot(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.ur(e).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(e,t,i){return this.ur(e).next((r=>(r.highestListenSequenceNumber=t,i&&(r.lastRemoteSnapshotVersion=i.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.cr(e,r))))}addTargetData(e,t){return this.lr(e,t).next((()=>this.ur(e).next((i=>(i.targetCount+=1,this.hr(t,i),this.cr(e,i))))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>pl(e).delete(t.targetId))).next((()=>this.ur(e))).next((i=>(Ae(i.targetCount>0,8065),i.targetCount-=1,this.cr(e,i))))}removeTargets(e,t,i){let r=0;const a=[];return pl(e).ee(((l,c)=>{const h=Mc(c);h.sequenceNumber<=t&&i.get(h.targetId)===null&&(r++,a.push(this.removeTargetData(e,h)))})).next((()=>Y.waitFor(a))).next((()=>r))}forEachTarget(e,t){return pl(e).ee(((i,r)=>{const a=Mc(r);t(a)}))}ur(e){return RS(e).get(rp).next((t=>(Ae(t!==null,2888),t)))}cr(e,t){return RS(e).put(rp,t)}lr(e,t){return pl(e).put(UC(this.serializer,t))}hr(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.ur(e).next((t=>t.targetCount))}getTargetData(e,t){const i=ca(t),r=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let a=null;return pl(e).ee({range:r,index:L1},((l,c,h)=>{const f=Mc(c);_d(t,f.target)&&(a=f,h.done())})).next((()=>a))}addMatchingKeys(e,t,i){const r=[],a=Fs(e);return t.forEach((l=>{const c=yn(l.path);r.push(a.put({targetId:i,path:c})),r.push(this.referenceDelegate.addReference(e,i,l))})),Y.waitFor(r)}removeMatchingKeys(e,t,i){const r=Fs(e);return Y.forEach(t,(a=>{const l=yn(a.path);return Y.waitFor([r.delete([i,l]),this.referenceDelegate.removeReference(e,i,a)])}))}removeMatchingKeysForTargetId(e,t){const i=Fs(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(r)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fs(e);let a=ze();return r.ee({range:i,Y:!0},((l,c,h)=>{const f=ur(l[1]),_=new ye(f);a=a.add(_)})).next((()=>a))}containsKey(e,t){const i=yn(t.path),r=IDBKeyRange.bound([i],[w1(i)],!1,!0);let a=0;return Fs(e).ee({index:l0,Y:!0,range:r},(([l,c],h,f)=>{l!==0&&(a++,f.done())})).next((()=>a>0))}At(e,t){return pl(e).get(t).next((i=>i?Mc(i):null))}}function pl(n){return Qt(n,Ul)}function RS(n){return Qt(n,Xo)}function Fs(n){return Qt(n,Gl)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NS="LruGarbageCollector",$C=1048576;function DS([n,e],[t,i]){const r=Pe(n,t);return r===0?Pe(e,i):r}class UU{constructor(e){this.Pr=e,this.buffer=new at(DS),this.Tr=0}Ir(){return++this.Tr}Er(e){const t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();DS(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){fe(NS,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ro(t)?fe(NS,"Ignoring IndexedDB error during garbage collection: ",t):await io(t)}await this.Ar(3e5)}))}}class GU{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return Y.resolve(kn.ce);const i=new UU(t);return this.Vr.forEachTarget(e,(r=>i.Er(r.sequenceNumber))).next((()=>this.Vr.mr(e,(r=>i.Er(r))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.Vr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(fe("LruGarbageCollector","Garbage collection skipped; disabled"),Y.resolve(CS)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(fe("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CS):this.gr(e,t)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let i,r,a,l,c,h,f;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((T=>(T>this.params.maximumSequenceNumbersToCollect?(fe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${T}`),r=this.params.maximumSequenceNumbersToCollect):r=T,l=Date.now(),this.nthSequenceNumber(e,r)))).next((T=>(i=T,c=Date.now(),this.removeTargets(e,i,t)))).next((T=>(a=T,h=Date.now(),this.removeOrphanedDocuments(e,i)))).next((T=>(f=Date.now(),ml()<=$e.DEBUG&&fe("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${l-_}ms
	Determined least recently used ${r} in `+(c-l)+`ms
	Removed ${a} targets in `+(h-c)+`ms
	Removed ${T} documents in `+(f-h)+`ms
Total Duration: ${f-_}ms`),Y.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:a,documentsRemoved:T}))))}}function JC(n,e){return new GU(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FU{constructor(e,t){this.db=e,this.garbageCollector=JC(this,t)}dr(e){const t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,((i,r)=>t(r)))}addReference(e,t,i){return lf(e,i)}removeReference(e,t,i){return lf(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return lf(e,t)}wr(e,t){return(function(r,a){let l=!1;return jC(r).te((c=>HC(r,c,a).next((h=>(h&&(l=!0),Y.resolve(!h)))))).next((()=>l))})(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let a=0;return this.yr(e,((l,c)=>{if(c<=t){const h=this.wr(e,l).next((f=>{if(!f)return a++,i.getEntry(e,l).next((()=>(i.removeEntry(l,Re.min()),Fs(e).delete((function(T){return[0,yn(T.path)]})(l)))))}));r.push(h)}})).next((()=>Y.waitFor(r))).next((()=>i.apply(e))).next((()=>a))}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return lf(e,t)}yr(e,t){const i=Fs(e);let r,a=kn.ce;return i.ee({index:l0},(([l,c],{path:h,sequenceNumber:f})=>{l===0?(a!==kn.ce&&t(new ye(ur(r)),a),a=f,r=h):a=kn.ce})).next((()=>{a!==kn.ce&&t(new ye(ur(r)),a)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function lf(n,e){return Fs(n).put((function(i,r){return{targetId:0,path:yn(i.path),sequenceNumber:r}})(e,n.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.changes=new Yr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,At.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Y.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zU{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return Fo(e).put(i)}removeEntry(e,t,i){return Fo(e).delete((function(a,l){const c=a.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],dp(l),c[c.length-1]]})(t,i))}updateMetadata(e,t){return this.getMetadata(e).next((i=>(i.byteSize+=t,this.br(e,i))))}getEntry(e,t){let i=At.newInvalidDocument(t);return Fo(e).ee({index:Rf,range:IDBKeyRange.only(Ec(t))},((r,a)=>{i=this.Sr(t,a)})).next((()=>i))}Dr(e,t){let i={size:0,document:At.newInvalidDocument(t)};return Fo(e).ee({index:Rf,range:IDBKeyRange.only(Ec(t))},((r,a)=>{i={document:this.Sr(t,a),size:fp(a)}})).next((()=>i))}getEntries(e,t){let i=$n();return this.Cr(e,t,((r,a)=>{const l=this.Sr(r,a);i=i.insert(r,l)})).next((()=>i))}vr(e,t){let i=$n(),r=new pt(ye.comparator);return this.Cr(e,t,((a,l)=>{const c=this.Sr(a,l);i=i.insert(a,c),r=r.insert(a,fp(l))})).next((()=>({documents:i,Fr:r})))}Cr(e,t,i){if(t.isEmpty())return Y.resolve();let r=new at(kS);t.forEach((h=>r=r.add(h)));const a=IDBKeyRange.bound(Ec(r.first()),Ec(r.last())),l=r.getIterator();let c=l.getNext();return Fo(e).ee({index:Rf,range:a},((h,f,_)=>{const T=ye.fromSegments([...f.prefixPath,f.collectionGroup,f.documentId]);for(;c&&kS(c,T)<0;)i(c,null),c=l.getNext();c&&c.isEqual(T)&&(i(c,f),c=l.hasNext()?l.getNext():null),c?_.j(Ec(c)):_.done()})).next((()=>{for(;c;)i(c,null),c=l.hasNext()?l.getNext():null}))}getDocumentsMatchingQuery(e,t,i,r,a){const l=t.path,c=[l.popLast().toArray(),l.lastSegment(),dp(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],h=[l.popLast().toArray(),l.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Fo(e).H(IDBKeyRange.bound(c,h,!0)).next((f=>{a==null||a.incrementDocumentReadCount(f.length);let _=$n();for(const T of f){const x=this.Sr(ye.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);x.isFoundDocument()&&(Td(t,x)||r.has(x.key))&&(_=_.insert(x.key,x))}return _}))}getAllFromCollectionGroup(e,t,i,r){let a=$n();const l=PS(t,i),c=PS(t,Yn.max());return Fo(e).ee({index:V1,range:IDBKeyRange.bound(l,c,!0)},((h,f,_)=>{const T=this.Sr(ye.fromSegments(f.prefixPath.concat(f.collectionGroup,f.documentId)),f);a=a.insert(T.key,T),a.size===r&&_.done()})).next((()=>a))}newChangeBuffer(e){return new qU(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((t=>t.byteSize))}getMetadata(e){return MS(e).get(ev).next((t=>(Ae(!!t,20021),t)))}br(e,t){return MS(e).put(ev,t)}Sr(e,t){if(t){const i=IU(this.serializer,t);if(!(i.isNoDocument()&&i.version.isEqual(Re.min())))return i}return At.newInvalidDocument(e)}}function QC(n){return new zU(n)}class qU extends YC{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new Yr((i=>i.toString()),((i,r)=>i.isEqual(r)))}applyChanges(e){const t=[];let i=0,r=new at(((a,l)=>Pe(a.canonicalString(),l.canonicalString())));return this.changes.forEach(((a,l)=>{const c=this.Or.get(a);if(t.push(this.Mr.removeEntry(e,a,c.readTime)),l.isValidDocument()){const h=mS(this.Mr.serializer,l);r=r.add(a.path.popLast());const f=fp(h);i+=f-c.size,t.push(this.Mr.addEntry(e,a,h))}else if(i-=c.size,this.trackRemovals){const h=mS(this.Mr.serializer,l.convertToNoDocument(Re.min()));t.push(this.Mr.addEntry(e,a,h))}})),r.forEach((a=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,a))})),t.push(this.Mr.updateMetadata(e,i)),Y.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next((i=>(this.Or.set(t,{size:i.size,readTime:i.document.readTime}),i.document)))}getAllFromCache(e,t){return this.Mr.vr(e,t).next((({documents:i,Fr:r})=>(r.forEach(((a,l)=>{this.Or.set(a,{size:l,readTime:i.get(a).readTime})})),i)))}}function MS(n){return Qt(n,Zc)}function Fo(n){return Qt(n,ip)}function Ec(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function PS(n,e){const t=e.documentKey.path.toArray();return[n,dp(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function kS(n,e){const t=n.path.toArray(),i=e.path.toArray();let r=0;for(let a=0;a<t.length-2&&a<i.length-2;++a)if(r=Pe(t[a],i[a]),r)return r;return r=Pe(t.length,i.length),r||(r=Pe(t[t.length-2],i[i.length-2]),r||Pe(t[t.length-1],i[i.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BU{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(i=r,this.remoteDocumentCache.getEntry(e,t)))).next((r=>(i!==null&&$c(i.mutation,r,Vn.empty(),ot.now()),r)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ze()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ze()){const r=cr();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,i).next((a=>{let l=Nc();return a.forEach(((c,h)=>{l=l.insert(c,h.overlayedDocument)})),l}))))}getOverlayedDocuments(e,t){const i=cr();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ze())))}populateOverlays(e,t,i){const r=[];return i.forEach((a=>{t.has(a)||r.push(a)})),this.documentOverlayCache.getOverlays(e,r).next((a=>{a.forEach(((l,c)=>{t.set(l,c)}))}))}computeViews(e,t,i,r){let a=$n();const l=jc(),c=(function(){return jc()})();return t.forEach(((h,f)=>{const _=i.get(f.key);r.has(f.key)&&(_===void 0||_.mutation instanceof Qr)?a=a.insert(f.key,f):_!==void 0?(l.set(f.key,_.mutation.getFieldMask()),$c(_.mutation,f,_.mutation.getFieldMask(),ot.now())):l.set(f.key,Vn.empty())})),this.recalculateAndSaveOverlays(e,a).next((h=>(h.forEach(((f,_)=>l.set(f,_))),t.forEach(((f,_)=>c.set(f,new BU(_,l.get(f)??null)))),c)))}recalculateAndSaveOverlays(e,t){const i=jc();let r=new pt(((l,c)=>l-c)),a=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((l=>{for(const c of l)c.keys().forEach((h=>{const f=t.get(h);if(f===null)return;let _=i.get(h)||Vn.empty();_=c.applyToLocalView(f,_),i.set(h,_);const T=(r.get(c.batchId)||ze()).add(h);r=r.insert(c.batchId,T)}))})).next((()=>{const l=[],c=r.getReverseIterator();for(;c.hasNext();){const h=c.getNext(),f=h.key,_=h.value,T=fC();_.forEach((x=>{if(!a.has(x)){const A=_C(t.get(x),i.get(x));A!==null&&T.set(x,A),a=a.add(x)}})),l.push(this.documentOverlayCache.saveOverlays(e,f,T))}return Y.waitFor(l)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,r){return KO(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):JO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next((a=>{const l=r-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-a.size):Y.resolve(cr());let c=Ll,h=a;return l.next((f=>Y.forEach(f,((_,T)=>(c<T.largestBatchId&&(c=T.largestBatchId),a.get(_)?Y.resolve():this.remoteDocumentCache.getEntry(e,_).next((x=>{h=h.insert(_,x)}))))).next((()=>this.populateOverlays(e,f,a))).next((()=>this.computeViews(e,h,f,ze()))).next((_=>({batchId:c,changes:hC(_)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ye(t)).next((i=>{let r=Nc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const a=t.collectionGroup;let l=Nc();return this.indexManager.getCollectionParents(e,a).next((c=>Y.forEach(c,(h=>{const f=(function(T,x){return new qp(x,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt)})(t,h.child(a));return this.getDocumentsMatchingCollectionQuery(e,f,i,r).next((_=>{_.forEach(((T,x)=>{l=l.insert(T,x)}))}))})).next((()=>l))))}getDocumentsMatchingCollectionQuery(e,t,i,r){let a;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((l=>(a=l,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,a,r)))).next((l=>{a.forEach(((h,f)=>{const _=f.getKey();l.get(_)===null&&(l=l.insert(_,At.newInvalidDocument(_)))}));let c=Nc();return l.forEach(((h,f)=>{const _=a.get(h);_!==void 0&&$c(_.mutation,f,Vn.empty(),ot.now()),Td(t,f)&&(c=c.insert(h,f))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HU{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return Y.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,(function(r){return{id:r.id,version:r.version,createTime:Sn(r.createTime)}})(t)),Y.resolve()}getNamedQuery(e,t){return Y.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,(function(r){return{name:r.name,query:GC(r.bundledQuery),readTime:Sn(r.readTime)}})(t)),Y.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jU{constructor(){this.overlays=new pt(ye.comparator),this.Lr=new Map}getOverlay(e,t){return Y.resolve(this.overlays.get(t))}getOverlays(e,t){const i=cr();return Y.forEach(t,(r=>this.getOverlay(e,r).next((a=>{a!==null&&i.set(r,a)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((r,a)=>{this.bt(e,t,a)})),Y.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Lr.get(i);return r!==void 0&&(r.forEach((a=>this.overlays=this.overlays.remove(a))),this.Lr.delete(i)),Y.resolve()}getOverlaysForCollection(e,t,i){const r=cr(),a=t.length+1,l=new ye(t.child("")),c=this.overlays.getIteratorFrom(l);for(;c.hasNext();){const h=c.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===a&&h.largestBatchId>i&&r.set(h.getKey(),h)}return Y.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let a=new pt(((f,_)=>f-_));const l=this.overlays.getIterator();for(;l.hasNext();){const f=l.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>i){let _=a.get(f.largestBatchId);_===null&&(_=cr(),a=a.insert(f.largestBatchId,_)),_.set(f.getKey(),f)}}const c=cr(),h=a.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach(((f,_)=>c.set(f,_))),!(c.size()>=r)););return Y.resolve(c)}bt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const l=this.Lr.get(r.largestBatchId).delete(i.key);this.Lr.set(r.largestBatchId,l)}this.overlays=this.overlays.insert(i.key,new T0(t,i));let a=this.Lr.get(t);a===void 0&&(a=ze(),this.Lr.set(t,a)),this.Lr.set(t,a.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $U{constructor(){this.sessionToken=kt.EMPTY_BYTE_STRING}getSessionToken(e){return Y.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Y.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.kr=new at(tn.Kr),this.qr=new at(tn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){const i=new tn(e,t);this.kr=this.kr.add(i),this.qr=this.qr.add(i)}$r(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Wr(new tn(e,t))}Qr(e,t){e.forEach((i=>this.removeReference(i,t)))}Gr(e){const t=new ye(new nt([])),i=new tn(t,e),r=new tn(t,e+1),a=[];return this.qr.forEachInRange([i,r],(l=>{this.Wr(l),a.push(l.key)})),a}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const t=new ye(new nt([])),i=new tn(t,e),r=new tn(t,e+1);let a=ze();return this.qr.forEachInRange([i,r],(l=>{a=a.add(l.key)})),a}containsKey(e){const t=new tn(e,0),i=this.kr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class tn{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return ye.comparator(e.key,t.key)||Pe(e.Hr,t.Hr)}static Ur(e,t){return Pe(e.Hr,t.Hr)||ye.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new at(tn.Kr)}checkEmpty(e){return Y.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const a=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const l=new _0(a,t,i,r);this.mutationQueue.push(l);for(const c of r)this.Jr=this.Jr.add(new tn(c.key,a)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Y.resolve(l)}lookupMutationBatch(e,t){return Y.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Xr(i),a=r<0?0:r;return Y.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return Y.resolve(this.mutationQueue.length===0?Wo:this.Yn-1)}getAllMutationBatches(e){return Y.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new tn(t,0),r=new tn(t,Number.POSITIVE_INFINITY),a=[];return this.Jr.forEachInRange([i,r],(l=>{const c=this.Zr(l.Hr);a.push(c)})),Y.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new at(Pe);return t.forEach((r=>{const a=new tn(r,0),l=new tn(r,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([a,l],(c=>{i=i.add(c.Hr)}))})),Y.resolve(this.Yr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let a=i;ye.isDocumentKey(a)||(a=a.child(""));const l=new tn(new ye(a),0);let c=new at(Pe);return this.Jr.forEachWhile((h=>{const f=h.key.path;return!!i.isPrefixOf(f)&&(f.length===r&&(c=c.add(h.Hr)),!0)}),l),Y.resolve(this.Yr(c))}Yr(e){const t=[];return e.forEach((i=>{const r=this.Zr(i);r!==null&&t.push(r)})),t}removeMutationBatch(e,t){Ae(this.ei(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Jr;return Y.forEach(t.mutations,(r=>{const a=new tn(r.key,t.batchId);return i=i.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.Jr=i}))}nr(e){}containsKey(e,t){const i=new tn(t,0),r=this.Jr.firstAfterOrEqual(i);return Y.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Y.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JU{constructor(e){this.ti=e,this.docs=(function(){return new pt(ye.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),a=r?r.size:0,l=this.ti(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Y.resolve(i?i.document.mutableCopy():At.newInvalidDocument(t))}getEntries(e,t){let i=$n();return t.forEach((r=>{const a=this.docs.get(r);i=i.insert(r,a?a.document.mutableCopy():At.newInvalidDocument(r))})),Y.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let a=$n();const l=t.path,c=new ye(l.child("__id-9223372036854775808__")),h=this.docs.getIteratorFrom(c);for(;h.hasNext();){const{key:f,value:{document:_}}=h.getNext();if(!l.isPrefixOf(f.path))break;f.path.length>l.length+1||o0(R1(_),i)<=0||(r.has(_.key)||Td(t,_))&&(a=a.insert(_.key,_.mutableCopy()))}return Y.resolve(a)}getAllFromCollectionGroup(e,t,i,r){xe(9500)}ni(e,t){return Y.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new YU(this)}getSize(e){return Y.resolve(this.size)}}class YU extends YC{constructor(e){super(),this.Mr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,r)=>{r.isValidDocument()?t.push(this.Mr.addEntry(e,r)):this.Mr.removeEntry(i)})),Y.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QU{constructor(e){this.persistence=e,this.ri=new Yr((t=>ca(t)),_d),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.ii=0,this.si=new A0,this.targetCount=0,this.oi=fa._r()}forEachTarget(e,t){return this.ri.forEach(((i,r)=>t(r))),Y.resolve()}getLastRemoteSnapshotVersion(e){return Y.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Y.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Y.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.ii&&(this.ii=t),Y.resolve()}lr(e){this.ri.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.oi=new fa(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,Y.resolve()}updateTargetData(e,t){return this.lr(t),Y.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,Y.resolve()}removeTargets(e,t,i){let r=0;const a=[];return this.ri.forEach(((l,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.ri.delete(l),a.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)})),Y.waitFor(a).next((()=>r))}getTargetCount(e){return Y.resolve(this.targetCount)}getTargetData(e,t){const i=this.ri.get(t)||null;return Y.resolve(i)}addMatchingKeys(e,t,i){return this.si.$r(t,i),Y.resolve()}removeMatchingKeys(e,t,i){this.si.Qr(t,i);const r=this.persistence.referenceDelegate,a=[];return r&&t.forEach((l=>{a.push(r.markPotentiallyOrphaned(e,l))})),Y.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),Y.resolve()}getMatchingKeysForTargetId(e,t){const i=this.si.jr(t);return Y.resolve(i)}containsKey(e,t){return Y.resolve(this.si.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I0{constructor(e,t){this._i={},this.overlays={},this.ai=new kn(0),this.ui=!1,this.ui=!0,this.ci=new $U,this.referenceDelegate=e(this),this.li=new QU(this),this.indexManager=new VU,this.remoteDocumentCache=(function(r){return new JU(r)})((i=>this.referenceDelegate.hi(i))),this.serializer=new OC(t),this.Pi=new HU(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new jU,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this._i[e.toKey()];return i||(i=new KU(t,this.referenceDelegate),this._i[e.toKey()]=i),i}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,i){fe("MemoryPersistence","Starting transaction:",e);const r=new WU(this.ai.next());return this.referenceDelegate.Ti(),i(r).next((a=>this.referenceDelegate.Ii(r).next((()=>a)))).toPromise().then((a=>(r.raiseOnCommittedEvent(),a)))}Ei(e,t){return Y.or(Object.values(this._i).map((i=>()=>i.containsKey(e,t))))}}class WU extends D1{constructor(e){super(),this.currentSequenceNumber=e}}class Yp{constructor(e){this.persistence=e,this.Ri=new A0,this.Ai=null}static Vi(e){return new Yp(e)}get di(){if(this.Ai)return this.Ai;throw xe(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.di.delete(i.toString()),Y.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.di.add(i.toString()),Y.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),Y.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach((r=>this.di.add(r.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((r=>{r.forEach((a=>this.di.add(a.toString())))})).next((()=>i.removeTargetData(e,t)))}Ti(){this.Ai=new Set}Ii(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Y.forEach(this.di,(i=>{const r=ye.fromPath(i);return this.mi(e,r).next((a=>{a||t.removeEntry(r,Re.min())}))})).next((()=>(this.Ai=null,t.apply(e))))}updateLimboDocument(e,t){return this.mi(e,t).next((i=>{i?this.di.delete(t.toString()):this.di.add(t.toString())}))}hi(e){return 0}mi(e,t){return Y.or([()=>Y.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class pp{constructor(e,t){this.persistence=e,this.fi=new Yr((i=>yn(i.path)),((i,r)=>i.isEqual(r))),this.garbageCollector=JC(this,t)}static Vi(e,t){return new pp(e,t)}Ti(){}Ii(e){return Y.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((r=>i+r))))}pr(e){let t=0;return this.mr(e,(i=>{t++})).next((()=>t))}mr(e,t){return Y.forEach(this.fi,((i,r)=>this.wr(e,i,r).next((a=>a?Y.resolve():t(r)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),a=r.newChangeBuffer();return r.ni(e,(l=>this.wr(e,l,t).next((c=>{c||(i++,a.removeEntry(l,Re.min()))})))).next((()=>a.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Y.resolve()}removeReference(e,t,i){return this.fi.set(i,e.currentSequenceNumber),Y.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),Y.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Df(e.data.value)),t}wr(e,t,i){return Y.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.fi.get(t);return Y.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XU{constructor(e){this.serializer=e}k(e,t,i,r){const a=new Vp("createOrUpgrade",t);i<1&&r>=1&&((function(h){h.createObjectStore(vd)})(e),(function(h){h.createObjectStore(Xc,{keyPath:uO}),h.createObjectStore(Ri,{keyPath:jb,autoIncrement:!0}).createIndex(Qo,$b,{unique:!0}),h.createObjectStore(Ol)})(e),VS(e),(function(h){h.createObjectStore(Bo)})(e));let l=Y.resolve();return i<3&&r>=3&&(i!==0&&((function(h){h.deleteObjectStore(Gl),h.deleteObjectStore(Ul),h.deleteObjectStore(Xo)})(e),VS(e)),l=l.next((()=>(function(h){const f=h.store(Xo),_={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Re.min().toTimestamp(),targetCount:0};return f.put(rp,_)})(a)))),i<4&&r>=4&&(i!==0&&(l=l.next((()=>(function(h,f){return f.store(Ri).H().next((T=>{h.deleteObjectStore(Ri),h.createObjectStore(Ri,{keyPath:jb,autoIncrement:!0}).createIndex(Qo,$b,{unique:!0});const x=f.store(Ri),A=T.map((V=>x.put(V)));return Y.waitFor(A)}))})(e,a)))),l=l.next((()=>{(function(h){h.createObjectStore(Fl,{keyPath:vO})})(e)}))),i<5&&r>=5&&(l=l.next((()=>this.gi(a)))),i<6&&r>=6&&(l=l.next((()=>((function(h){h.createObjectStore(Zc)})(e),this.pi(a))))),i<7&&r>=7&&(l=l.next((()=>this.yi(a)))),i<8&&r>=8&&(l=l.next((()=>this.wi(e,a)))),i<9&&r>=9&&(l=l.next((()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e)}))),i<10&&r>=10&&(l=l.next((()=>this.bi(a)))),i<11&&r>=11&&(l=l.next((()=>{(function(h){h.createObjectStore(Op,{keyPath:_O})})(e),(function(h){h.createObjectStore(Up,{keyPath:EO})})(e)}))),i<12&&r>=12&&(l=l.next((()=>{(function(h){const f=h.createObjectStore(Gp,{keyPath:IO});f.createIndex(nv,CO,{unique:!1}),f.createIndex(G1,RO,{unique:!1})})(e)}))),i<13&&r>=13&&(l=l.next((()=>(function(h){const f=h.createObjectStore(ip,{keyPath:dO});f.createIndex(Rf,hO),f.createIndex(V1,fO)})(e))).next((()=>this.Si(e,a))).next((()=>e.deleteObjectStore(Bo)))),i<14&&r>=14&&(l=l.next((()=>this.Di(e,a)))),i<15&&r>=15&&(l=l.next((()=>(function(h){h.createObjectStore(u0,{keyPath:TO,autoIncrement:!0}).createIndex(tv,xO,{unique:!1}),h.createObjectStore(zc,{keyPath:bO}).createIndex(O1,SO,{unique:!1}),h.createObjectStore(qc,{keyPath:wO}).createIndex(U1,AO,{unique:!1})})(e)))),i<16&&r>=16&&(l=l.next((()=>{t.objectStore(zc).clear()})).next((()=>{t.objectStore(qc).clear()}))),i<17&&r>=17&&(l=l.next((()=>{(function(h){h.createObjectStore(c0,{keyPath:NO})})(e)}))),i<18&&r>=18&&lI()&&(l=l.next((()=>{t.objectStore(zc).clear()})).next((()=>{t.objectStore(qc).clear()}))),l}pi(e){let t=0;return e.store(Bo).ee(((i,r)=>{t+=fp(r)})).next((()=>{const i={byteSize:t};return e.store(Zc).put(ev,i)}))}gi(e){const t=e.store(Xc),i=e.store(Ri);return t.H().next((r=>Y.forEach(r,(a=>{const l=IDBKeyRange.bound([a.userId,Wo],[a.userId,a.lastAcknowledgedBatchId]);return i.H(Qo,l).next((c=>Y.forEach(c,(h=>{Ae(h.userId===a.userId,18650,"Cannot process batch from unexpected user",{batchId:h.batchId});const f=$o(this.serializer,h);return BC(e,a.userId,f).next((()=>{}))}))))}))))}yi(e){const t=e.store(Gl),i=e.store(Bo);return e.store(Xo).get(rp).next((r=>{const a=[];return i.ee(((l,c)=>{const h=new nt(l),f=(function(T){return[0,yn(T)]})(h);a.push(t.get(f).next((_=>_?Y.resolve():(T=>t.put({targetId:0,path:yn(T),sequenceNumber:r.highestListenSequenceNumber}))(h))))})).next((()=>Y.waitFor(a)))}))}wi(e,t){e.createObjectStore(ed,{keyPath:yO});const i=t.store(ed),r=new w0,a=l=>{if(r.add(l)){const c=l.lastSegment(),h=l.popLast();return i.put({collectionId:c,parent:yn(h)})}};return t.store(Bo).ee({Y:!0},((l,c)=>{const h=new nt(l);return a(h.popLast())})).next((()=>t.store(Ol).ee({Y:!0},(([l,c,h],f)=>{const _=ur(c);return a(_.popLast())}))))}bi(e){const t=e.store(Ul);return t.ee(((i,r)=>{const a=Mc(r),l=UC(this.serializer,a);return t.put(l)}))}Si(e,t){const i=t.store(Bo),r=[];return i.ee(((a,l)=>{const c=t.store(ip),h=(function(T){return T.document?new ye(nt.fromString(T.document.name).popFirst(5)):T.noDocument?ye.fromSegments(T.noDocument.path):T.unknownDocument?ye.fromSegments(T.unknownDocument.path):xe(36783)})(l).path.toArray(),f={prefixPath:h.slice(0,h.length-2),collectionGroup:h[h.length-2],documentId:h[h.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};r.push(c.put(f))})).next((()=>Y.waitFor(r)))}Di(e,t){const i=t.store(Ri),r=QC(this.serializer),a=new I0(Yp.Vi,this.serializer.yt);return i.H().next((l=>{const c=new Map;return l.forEach((h=>{let f=c.get(h.userId)??ze();$o(this.serializer,h).keys().forEach((_=>f=f.add(_))),c.set(h.userId,f)})),Y.forEach(c,((h,f)=>{const _=new fn(f),T=Kp.wt(this.serializer,_),x=a.getIndexManager(_),A=Jp.wt(_,this.serializer,x,a.referenceDelegate);return new WC(r,A,T,x).recalculateAndSaveOverlaysForDocumentKeys(new iv(t,kn.ce),h).next()}))}))}}function VS(n){n.createObjectStore(Gl,{keyPath:mO}).createIndex(l0,gO,{unique:!0}),n.createObjectStore(Ul,{keyPath:"targetId"}).createIndex(L1,pO,{unique:!0}),n.createObjectStore(Xo)}const Vs="IndexedDbPersistence",Iy=18e5,Cy=5e3,Ry="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",ZU="main";class C0{constructor(e,t,i,r,a,l,c,h,f,_,T=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Ci=a,this.window=l,this.document=c,this.Fi=f,this.Mi=_,this.xi=T,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=Number.NEGATIVE_INFINITY,this.ki=x=>Promise.resolve(),!C0.v())throw new ge(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new FU(this,r),this.Ki=t+ZU,this.serializer=new OC(h),this.qi=new Ks(this.Ki,this.xi,new XU(this.serializer)),this.ci=new RU,this.li=new OU(this.referenceDelegate,this.serializer),this.remoteDocumentCache=QC(this.serializer),this.Pi=new CU,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,_===!1&&Mt(Vs,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ge(ue.FAILED_PRECONDITION,Ry);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.li.getHighestSequenceNumber(e)))})).then((e=>{this.ai=new kn(e,this.Fi)})).then((()=>{this.ui=!0})).catch((e=>(this.qi&&this.qi.close(),Promise.reject(e))))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q((async t=>{t.newVersion===null&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget((async()=>{this.started&&await this.$i()})))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uf(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.ji(e).next((t=>{t||(this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))))}))})).next((()=>this.Hi(e))).next((t=>this.isPrimary&&!t?this.Ji(e).next((()=>!1)):!!t&&this.Zi(e).next((()=>!0)))))).catch((e=>{if(ro(e))return fe(Vs,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return fe(Vs,"Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable((()=>this.ki(e))),this.isPrimary=e}))}ji(e){return Tc(e).get(ul).next((t=>Y.resolve(this.Xi(t))))}Yi(e){return uf(e).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,Iy)){this.Li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const i=Qt(t,Fl);return i.H().next((r=>{const a=this.ns(r,Iy),l=r.filter((c=>a.indexOf(c)===-1));return Y.forEach(l,(c=>i.delete(c.clientId))).next((()=>l))}))})).catch((()=>[]));if(this.Ui)for(const t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.$i().then((()=>this.es())).then((()=>this.Gi()))))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?Y.resolve(!0):Tc(e).get(ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cy)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new ge(ue.FAILED_PRECONDITION,Ry);return!1}}return!(!this.networkEnabled||!this.inForeground)||uf(e).H().next((i=>this.ns(i,Cy).find((r=>{if(this.clientId!==r.clientId){const a=!this.networkEnabled&&r.networkEnabled,l=!this.inForeground&&r.inForeground,c=this.networkEnabled===r.networkEnabled;if(a||l&&c)return!0}return!1}))===void 0))})).next((t=>(this.isPrimary!==t&&fe(Vs,`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[vd,Fl],(e=>{const t=new iv(e,kn.ce);return this.Ji(t).next((()=>this.Yi(t)))})),this.qi.close(),this.ls()}ns(e,t){return e.filter((i=>this.ts(i.updateTimeMs,t)&&!this.ss(i.clientId)))}hs(){return this.runTransaction("getActiveClients","readonly",(e=>uf(e).H().next((t=>this.ns(t,Iy).map((i=>i.clientId))))))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return Jp.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new LU(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return Kp.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,i){fe(Vs,"Starting transaction:",e);const r=t==="readonly"?"readonly":"readwrite",a=(function(h){return h===18?PO:h===17?B1:h===16?MO:h===15?d0:h===14?q1:h===13?z1:h===12?DO:h===11?F1:void xe(60245)})(this.xi);let l;return this.qi.runTransaction(e,r,a,(c=>(l=new iv(c,this.ai?this.ai.next():kn.ce),t==="readwrite-primary"?this.ji(l).next((h=>!!h||this.Hi(l))).next((h=>{if(!h)throw Mt(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable((()=>this.ki(!1))),new ge(ue.FAILED_PRECONDITION,N1);return i(l)})).next((h=>this.Zi(l).next((()=>h)))):this.Ps(l).next((()=>i(l)))))).then((c=>(l.raiseOnCommittedEvent(),c)))}Ps(e){return Tc(e).get(ul).next((t=>{if(t!==null&&this.ts(t.leaseTimestampMs,Cy)&&!this.ss(t.ownerId)&&!this.Xi(t)&&!(this.Mi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new ge(ue.FAILED_PRECONDITION,Ry)}))}Zi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Tc(e).put(ul,t)}static v(){return Ks.v()}Ji(e){const t=Tc(e);return t.get(ul).next((i=>this.Xi(i)?(fe(Vs,"Releasing primary lease."),t.delete(ul)):Y.resolve()))}ts(e,t){const i=Date.now();return!(e<i-t)&&(!(e>i)||(Mt(`Detected an update time that is in the future: ${e} > ${i}`),!1))}Wi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Ni=()=>{this.Ci.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.$i())))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground=this.document.visibilityState==="visible")}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){var e;typeof((e=this.window)==null?void 0:e.addEventListener)=="function"&&(this.Oi=()=>{this._s();const t=/(?:Version|Mobile)\/1[456]/;aI()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){var t;try{const i=((t=this.Ui)==null?void 0:t.getItem(this.rs(e)))!==null;return fe(Vs,`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return Mt(Vs,"Failed to get zombied client id.",i),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){Mt("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch{}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Tc(n){return Qt(n,vd)}function uf(n){return Qt(n,Fl)}function XC(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ts=i,this.Is=r}static Es(e,t){let i=ze(),r=ze();for(const a of t.docChanges)switch(a.type){case 0:i=i.add(a.doc.key);break;case 1:r=r.add(a.doc.key)}return new R0(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e3{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return aI()?8:M1(Yt())>0?6:4})()}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,r){const a={result:null};return this.gs(e,t).next((l=>{a.result=l})).next((()=>{if(!a.result)return this.ps(e,t,r,i).next((l=>{a.result=l}))})).next((()=>{if(a.result)return;const l=new e3;return this.ys(e,t,l).next((c=>{if(a.result=c,this.As)return this.ws(e,t,l,c.size)}))})).next((()=>a.result))}ws(e,t,i,r){return i.documentReadCount<this.Vs?(ml()<=$e.DEBUG&&fe("QueryEngine","SDK will not create cache indexes for query:",gl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Y.resolve()):(ml()<=$e.DEBUG&&fe("QueryEngine","Query:",gl(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ds*r?(ml()<=$e.DEBUG&&fe("QueryEngine","The SDK decides to create cache indexes for query:",gl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Jn(t))):Y.resolve())}gs(e,t){if(sS(t))return Y.resolve(null);let i=Jn(t);return this.indexManager.getIndexType(e,i).next((r=>r===0?null:(t.limit!==null&&r===1&&(t=uv(t,null,"F"),i=Jn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((a=>{const l=ze(...a);return this.fs.getDocuments(e,l).next((c=>this.indexManager.getMinOffset(e,i).next((h=>{const f=this.bs(t,c);return this.Ss(t,f,l,h.readTime)?this.gs(e,uv(t,null,"F")):this.Ds(e,f,t,h)}))))})))))}ps(e,t,i,r){return sS(t)||r.isEqual(Re.min())?Y.resolve(null):this.fs.getDocuments(e,i).next((a=>{const l=this.bs(t,a);return this.Ss(t,l,i,r)?Y.resolve(null):(ml()<=$e.DEBUG&&fe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),gl(t)),this.Ds(e,l,t,C1(r,Ll)).next((c=>c)))}))}bs(e,t){let i=new at(cC(e));return t.forEach(((r,a)=>{Td(e,a)&&(i=i.add(a))})),i}Ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const a=e.limitType==="F"?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(r)>0)}ys(e,t,i){return ml()<=$e.DEBUG&&fe("QueryEngine","Using full collection scan to execute query:",gl(t)),this.fs.getDocumentsMatchingQuery(e,t,Yn.min(),i)}Ds(e,t,i,r){return this.fs.getDocumentsMatchingQuery(e,i,r).next((a=>(t.forEach((l=>{a=a.insert(l.key,l)})),a)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0="LocalStore",t3=3e8;class n3{constructor(e,t,i,r){this.persistence=e,this.Cs=t,this.serializer=r,this.vs=new pt(Pe),this.Fs=new Yr((a=>ca(a)),_d),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(i)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.vs)))}}function eR(n,e,t,i){return new n3(n,e,t,i)}async function tR(n,e){const t=Se(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next((a=>(r=a,t.Os(e),t.mutationQueue.getAllMutationBatches(i)))).next((a=>{const l=[],c=[];let h=ze();for(const f of r){l.push(f.batchId);for(const _ of f.mutations)h=h.add(_.key)}for(const f of a){c.push(f.batchId);for(const _ of f.mutations)h=h.add(_.key)}return t.localDocuments.getDocuments(i,h).next((f=>({Ns:f,removedBatchIds:l,addedBatchIds:c})))}))}))}function i3(n,e){const t=Se(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const r=e.batch.keys(),a=t.xs.newChangeBuffer({trackRemovals:!0});return(function(c,h,f,_){const T=f.batch,x=T.keys();let A=Y.resolve();return x.forEach((V=>{A=A.next((()=>_.getEntry(h,V))).next((k=>{const L=f.docVersions.get(V);Ae(L!==null,48541),k.version.compareTo(L)<0&&(T.applyToRemoteDocument(k,f),k.isValidDocument()&&(k.setReadTime(f.commitVersion),_.addEntry(k)))}))})),A.next((()=>c.mutationQueue.removeMutationBatch(h,T)))})(t,i,e,a).next((()=>a.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(c){let h=ze();for(let f=0;f<c.mutationResults.length;++f)c.mutationResults[f].transformResults.length>0&&(h=h.add(c.batch.mutations[f].key));return h})(e)))).next((()=>t.localDocuments.getDocuments(i,r)))}))}function nR(n){const e=Se(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.li.getLastRemoteSnapshotVersion(t)))}function r3(n,e){const t=Se(n),i=e.snapshotVersion;let r=t.vs;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(a=>{const l=t.xs.newChangeBuffer({trackRemovals:!0});r=t.vs;const c=[];e.targetChanges.forEach(((_,T)=>{const x=r.get(T);if(!x)return;c.push(t.li.removeMatchingKeys(a,_.removedDocuments,T).next((()=>t.li.addMatchingKeys(a,_.addedDocuments,T))));let A=x.withSequenceNumber(a.currentSequenceNumber);e.targetMismatches.get(T)!==null?A=A.withResumeToken(kt.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):_.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(_.resumeToken,i)),r=r.insert(T,A),(function(k,L,$){return k.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=t3?!0:$.addedDocuments.size+$.modifiedDocuments.size+$.removedDocuments.size>0})(x,A,_)&&c.push(t.li.updateTargetData(a,A))}));let h=$n(),f=ze();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(a,_))})),c.push(s3(a,l,e.documentUpdates).next((_=>{h=_.Bs,f=_.Ls}))),!i.isEqual(Re.min())){const _=t.li.getLastRemoteSnapshotVersion(a).next((T=>t.li.setTargetsMetadata(a,a.currentSequenceNumber,i)));c.push(_)}return Y.waitFor(c).next((()=>l.apply(a))).next((()=>t.localDocuments.getLocalViewOfDocuments(a,h,f))).next((()=>h))})).then((a=>(t.vs=r,a)))}function s3(n,e,t){let i=ze(),r=ze();return t.forEach((a=>i=i.add(a))),e.getEntries(n,i).next((a=>{let l=$n();return t.forEach(((c,h)=>{const f=a.get(c);h.isFoundDocument()!==f.isFoundDocument()&&(r=r.add(c)),h.isNoDocument()&&h.version.isEqual(Re.min())?(e.removeEntry(c,h.readTime),l=l.insert(c,h)):!f.isValidDocument()||h.version.compareTo(f.version)>0||h.version.compareTo(f.version)===0&&f.hasPendingWrites?(e.addEntry(h),l=l.insert(c,h)):fe(N0,"Ignoring outdated watch update for ",c,". Current version:",f.version," Watch version:",h.version)})),{Bs:l,Ls:r}}))}function o3(n,e){const t=Se(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=Wo),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function mp(n,e){const t=Se(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let r;return t.li.getTargetData(i,e).next((a=>a?(r=a,Y.resolve(r)):t.li.allocateTargetId(i).next((l=>(r=new zr(e,l,"TargetPurposeListen",i.currentSequenceNumber),t.li.addTargetData(i,r).next((()=>r)))))))})).then((i=>{const r=t.vs.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.vs=t.vs.insert(i.targetId,i),t.Fs.set(e,i.targetId)),i}))}async function Jl(n,e,t){const i=Se(n),r=i.vs.get(e),a=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",a,(l=>i.persistence.referenceDelegate.removeTarget(l,r)))}catch(l){if(!ro(l))throw l;fe(N0,`Failed to update sequence numbers for target ${e}: ${l}`)}i.vs=i.vs.remove(e),i.Fs.delete(r.target)}function yv(n,e,t){const i=Se(n);let r=Re.min(),a=ze();return i.persistence.runTransaction("Execute query","readwrite",(l=>(function(h,f,_){const T=Se(h),x=T.Fs.get(_);return x!==void 0?Y.resolve(T.vs.get(x)):T.li.getTargetData(f,_)})(i,l,Jn(e)).next((c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.li.getMatchingKeysForTargetId(l,c.targetId).next((h=>{a=h}))})).next((()=>i.Cs.getDocumentsMatchingQuery(l,e,t?r:Re.min(),t?a:ze()))).next((c=>(sR(i,uC(e),c),{documents:c,ks:a})))))}function iR(n,e){const t=Se(n),i=Se(t.li),r=t.vs.get(e);return r?Promise.resolve(r.target):t.persistence.runTransaction("Get target data","readonly",(a=>i.At(a,e).next((l=>l?l.target:null))))}function rR(n,e){const t=Se(n),i=t.Ms.get(e)||Re.min();return t.persistence.runTransaction("Get new document changes","readonly",(r=>t.xs.getAllFromCollectionGroup(r,e,C1(i,Ll),Number.MAX_SAFE_INTEGER))).then((r=>(sR(t,e,r),r)))}function sR(n,e,t){let i=n.Ms.get(e)||Re.min();t.forEach(((r,a)=>{a.readTime.compareTo(i)>0&&(i=a.readTime)})),n.Ms.set(e,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="firestore_clients";function LS(n,e){return`${oR}_${n}_${e}`}const aR="firestore_mutations";function OS(n,e,t){let i=`${aR}_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}const lR="firestore_targets";function Ny(n,e){return`${lR}_${n}_${e}`}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="SharedClientState";class gp{constructor(e,t,i,r){this.user=e,this.batchId=t,this.state=i,this.error=r}static $s(e,t,i){const r=JSON.parse(i);let a,l=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return l&&r.error&&(l=typeof r.error.message=="string"&&typeof r.error.code=="string",l&&(a=new ge(r.error.code,r.error.message))),l?new gp(e,t,r.state,a):(Mt(lr,`Failed to parse mutation state for ID '${t}': ${i}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Kc{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static $s(e,t){const i=JSON.parse(t);let r,a=typeof i=="object"&&["not-current","current","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return a&&i.error&&(a=typeof i.error.message=="string"&&typeof i.error.code=="string",a&&(r=new ge(i.error.code,i.error.message))),a?new Kc(e,i.state,r):(Mt(lr,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class yp{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const i=JSON.parse(t);let r=typeof i=="object"&&i.activeTargetIds instanceof Array,a=y0();for(let l=0;r&&l<i.activeTargetIds.length;++l)r=P1(i.activeTargetIds[l]),a=a.add(i.activeTargetIds[l]);return r?new yp(e,a):(Mt(lr,`Failed to parse client data for instance '${e}': ${t}`),null)}}class D0{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return typeof t=="object"&&["Unknown","Online","Offline"].indexOf(t.onlineState)!==-1&&typeof t.clientId=="string"?new D0(t.clientId,t.onlineState):(Mt(lr,`Failed to parse online state: ${e}`),null)}}class vv{constructor(){this.activeTargetIds=y0()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dy{constructor(e,t,i,r,a){this.window=e,this.Ci=t,this.persistenceKey=i,this.zs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new pt(Pe),this.started=!1,this.Zs=[];const l=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Xs=LS(this.persistenceKey,this.zs),this.Ys=(function(h){return`firestore_sequence_number_${h}`})(this.persistenceKey),this.Js=this.Js.insert(this.zs,new vv),this.eo=new RegExp(`^${oR}_${l}_([^_]*)$`),this.no=new RegExp(`^${aR}_${l}_(\\d+)(?:_(.*))?$`),this.ro=new RegExp(`^${lR}_${l}_(\\d+)$`),this.io=(function(h){return`firestore_online_state_${h}`})(this.persistenceKey),this.so=(function(h){return`firestore_bundle_loaded_v2_${h}`})(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.hs();for(const i of e){if(i===this.zs)continue;const r=this.getItem(LS(this.persistenceKey,i));if(r){const a=yp.$s(i,r);a&&(this.Js=this.Js.insert(a.clientId,a))}}this.oo();const t=this.storage.getItem(this.io);if(t){const i=this._o(t);i&&this.ao(i)}for(const i of this.Zs)this.Hs(i);this.Zs=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach(((i,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,i){this.co(e,t,i),this.lo(e)}addLocalQueryTarget(e,t=!0){let i="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Ny(this.persistenceKey,e));if(r){const a=Kc.$s(e,r);a&&(i=a.state)}}return t&&this.ho.Qs(e),this.oo(),i}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ny(this.persistenceKey,e))}updateQueryState(e,t,i){this.Po(e,t,i)}handleUserChange(e,t,i){t.forEach((r=>{this.lo(r)})),this.currentUser=e,i.forEach((r=>{this.addPendingMutation(r)}))}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return fe(lr,"READ",e,t),t}setItem(e,t){fe(lr,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){fe(lr,"REMOVE",e),this.storage.removeItem(e)}Hs(e){const t=e;if(t.storageArea===this.storage){if(fe(lr,"EVENT",t.key,t.newValue),t.key===this.Xs)return void Mt("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable((async()=>{if(this.started){if(t.key!==null){if(this.eo.test(t.key)){if(t.newValue==null){const i=this.Eo(t.key);return this.Ro(i,null)}{const i=this.Ao(t.key,t.newValue);if(i)return this.Ro(i.clientId,i)}}else if(this.no.test(t.key)){if(t.newValue!==null){const i=this.Vo(t.key,t.newValue);if(i)return this.mo(i)}}else if(this.ro.test(t.key)){if(t.newValue!==null){const i=this.fo(t.key,t.newValue);if(i)return this.po(i)}}else if(t.key===this.io){if(t.newValue!==null){const i=this._o(t.newValue);if(i)return this.ao(i)}}else if(t.key===this.Ys){const i=(function(a){let l=kn.ce;if(a!=null)try{const c=JSON.parse(a);Ae(typeof c=="number",30636,{yo:a}),l=c}catch(c){Mt(lr,"Failed to read sequence number from WebStorage",c)}return l})(t.newValue);i!==kn.ce&&this.sequenceNumberHandler(i)}else if(t.key===this.so){const i=this.wo(t.newValue);await Promise.all(i.map((r=>this.syncEngine.bo(r))))}}}else this.Zs.push(t)}))}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,i){const r=new gp(this.currentUser,e,t,i),a=OS(this.persistenceKey,this.currentUser,e);this.setItem(a,r.Ws())}lo(e){const t=OS(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){const t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,i){const r=Ny(this.persistenceKey,e),a=new Kc(e,t,i);this.setItem(r,a.Ws())}Io(e){const t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){const t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){const i=this.Eo(e);return yp.$s(i,t)}Vo(e,t){const i=this.no.exec(e),r=Number(i[1]),a=i[2]!==void 0?i[2]:null;return gp.$s(new fn(a),r,t)}fo(e,t){const i=this.ro.exec(e),r=Number(i[1]);return Kc.$s(r,t)}_o(e){return D0.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);fe(lr,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){const i=t?this.Js.insert(e,t):this.Js.remove(e),r=this.uo(this.Js),a=this.uo(i),l=[],c=[];return a.forEach((h=>{r.has(h)||l.push(h)})),r.forEach((h=>{a.has(h)||c.push(h)})),this.syncEngine.Co(l,c).then((()=>{this.Js=i}))}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=y0();return e.forEach(((i,r)=>{t=t.unionWith(r.activeTargetIds)})),t}}class uR{constructor(){this.vo=new vv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,i){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new vv,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a3{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const US="ConnectivityMonitor";class GS{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){fe(US,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){fe(US,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cf=null;function _v(){return cf===null?cf=(function(){return 268435456+Math.round(2147483648*Math.random())})():cf++,"0x"+cf.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="RestConnection",l3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class u3{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${i}/databases/${r}`,this.$o=this.databaseId.database===sp?`project_id=${i}`:`project_id=${i}&database_id=${r}`}Wo(e,t,i,r,a){const l=_v(),c=this.Qo(e,t.toUriEncodedString());fe(My,`Sending RPC '${e}' ${l}:`,c,i);const h={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(h,r,a);const{host:f}=new URL(c),_=Zl(f);return this.zo(e,c,h,i,_).then((T=>(fe(My,`Received RPC '${e}' ${l}: `,T),T)),(T=>{throw kl(My,`RPC '${e}' ${l} failed with error: `,T,"url: ",c,"request:",i),T}))}jo(e,t,i,r,a,l){return this.Wo(e,t,i,r,a)}Go(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+nu})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((r,a)=>e[a]=r)),i&&i.headers.forEach(((r,a)=>e[a]=r))}Qo(e,t){const i=l3[e];let r=`${this.qo}/v1/${t}:${i}`;return this.databaseInfo.apiKey&&(r=`${r}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),r}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c3{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="WebChannelConnection",xc=(n,e,t)=>{n.listen(e,(i=>{try{t(i)}catch(r){setTimeout((()=>{throw r}),0)}}))};class Cl extends u3{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Cl.c_){const e=x1();xc(e,T1.STAT_EVENT,(t=>{t.stat===Wy.PROXY?fe(hn,"STAT_EVENT: detected buffering proxy"):t.stat===Wy.NOPROXY&&fe(hn,"STAT_EVENT: detected no buffering proxy")})),Cl.c_=!0}}zo(e,t,i,r,a){const l=_v();return new Promise(((c,h)=>{const f=new _1;f.setWithCredentials(!0),f.listenOnce(E1.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Af.NO_ERROR:const T=f.getResponseJson();fe(hn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(T)),c(T);break;case Af.TIMEOUT:fe(hn,`RPC '${e}' ${l} timed out`),h(new ge(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Af.HTTP_ERROR:const x=f.getStatus();if(fe(hn,`RPC '${e}' ${l} failed with status:`,x,"response text:",f.getResponseText()),x>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const V=A==null?void 0:A.error;if(V&&V.status&&V.message){const k=(function($){const z=$.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(z)>=0?z:ue.UNKNOWN})(V.status);h(new ge(k,V.message))}else h(new ge(ue.UNKNOWN,"Server responded with status "+f.getStatus()))}else h(new ge(ue.UNAVAILABLE,"Connection failed."));break;default:xe(9055,{l_:e,streamId:l,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{fe(hn,`RPC '${e}' ${l} completed.`)}}));const _=JSON.stringify(r);fe(hn,`RPC '${e}' ${l} sending request:`,r),f.send(t,"POST",_,i,15)}))}T_(e,t,i){const r=_v(),a=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},h=this.longPollingOptions.timeoutSeconds;h!==void 0&&(c.longPollingTimeout=Math.round(1e3*h)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;const f=a.join("");fe(hn,`Creating RPC '${e}' stream ${r}: ${f}`,c);const _=l.createWebChannel(f,c);this.I_(_);let T=!1,x=!1;const A=new c3({Ho:V=>{x?fe(hn,`Not sending because RPC '${e}' stream ${r} is closed:`,V):(T||(fe(hn,`Opening RPC '${e}' stream ${r} transport.`),_.open(),T=!0),fe(hn,`RPC '${e}' stream ${r} sending:`,V),_.send(V))},Jo:()=>_.close()});return xc(_,Rc.EventType.OPEN,(()=>{x||(fe(hn,`RPC '${e}' stream ${r} transport opened.`),A.i_())})),xc(_,Rc.EventType.CLOSE,(()=>{x||(x=!0,fe(hn,`RPC '${e}' stream ${r} transport closed`),A.o_(),this.E_(_))})),xc(_,Rc.EventType.ERROR,(V=>{x||(x=!0,kl(hn,`RPC '${e}' stream ${r} transport errored. Name:`,V.name,"Message:",V.message),A.o_(new ge(ue.UNAVAILABLE,"The operation could not be completed")))})),xc(_,Rc.EventType.MESSAGE,(V=>{var k;if(!x){const L=V.data[0];Ae(!!L,16349);const $=L,z=($==null?void 0:$.error)||((k=$[0])==null?void 0:k.error);if(z){fe(hn,`RPC '${e}' stream ${r} received error:`,z);const H=z.status;let Z=(function(R){const M=Ht[R];if(M!==void 0)return xC(M)})(H),ie=z.message;H==="NOT_FOUND"&&ie.includes("database")&&ie.includes("does not exist")&&ie.includes(this.databaseId.database)&&kl(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),Z===void 0&&(Z=ue.INTERNAL,ie="Unknown error status: "+H+" with message "+z.message),x=!0,A.o_(new ge(Z,ie)),_.close()}else fe(hn,`RPC '${e}' stream ${r} received:`,L),A.__(L)}})),Cl.u_(),setTimeout((()=>{A.s_()}),0),A}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((t=>t===e))}Go(e,t,i){super.Go(e,t,i),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return b1()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d3(n){return new Cl(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cR(){return typeof window<"u"?window:null}function Lf(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(n){return new yU(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cl.c_=!1;class dR{constructor(e,t,i=1e3,r=1.5,a=6e4){this.Ci=e,this.timerId=t,this.R_=i,this.A_=r,this.V_=a,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const t=Math.floor(this.d_+this.y_()),i=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-i);r>0&&fe("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,r,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS="PersistentStream";class hR{constructor(e,t,i,r,a,l,c,h){this.Ci=e,this.b_=i,this.S_=r,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=c,this.listener=h,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new dR(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Mt(t.toString()),Mt("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===ue.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,r])=>{this.D_===t&&this.G_(i,r)}),(i=>{e((()=>{const r=new ge(ue.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(r)}))}))}G_(e,t){const i=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo((()=>{i((()=>this.listener.Zo()))})),this.stream.Yo((()=>{i((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((r=>{i((()=>this.z_(r)))})),this.stream.onMessage((r=>{i((()=>++this.F_==1?this.H_(r):this.onNext(r)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return fe(FS,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget((()=>this.D_===e?t():(fe(FS,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class h3 extends hR{constructor(e,t,i,r,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=EU(this.serializer,e),i=(function(a){if(!("targetChange"in a))return Re.min();const l=a.targetChange;return l.targetIds&&l.targetIds.length?Re.min():l.readTime?Sn(l.readTime):Re.min()})(e);return this.listener.J_(t,i)}Z_(e){const t={};t.database=hv(this.serializer),t.addTarget=(function(a,l){let c;const h=l.target;if(c=ap(h)?{documents:NC(a,h)}:{query:DC(a,h).ft},c.targetId=l.targetId,l.resumeToken.approximateByteSize()>0){c.resumeToken=wC(a,l.resumeToken);const f=cv(a,l.expectedCount);f!==null&&(c.expectedCount=f)}else if(l.snapshotVersion.compareTo(Re.min())>0){c.readTime=Kl(a,l.snapshotVersion.toTimestamp());const f=cv(a,l.expectedCount);f!==null&&(c.expectedCount=f)}return c})(this.serializer,e);const i=xU(this.serializer,e);i&&(t.labels=i),this.K_(t)}X_(e){const t={};t.database=hv(this.serializer),t.removeTarget=e,this.K_(t)}}class f3 extends hR{constructor(e,t,i,r,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,l),this.serializer=a}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=TU(e.writeResults,e.commitTime),i=Sn(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=hv(this.serializer),this.K_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>cp(this.serializer,i)))};this.K_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p3{}class m3 extends p3{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new ge(ue.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,i,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Wo(e,dv(t,i),r,a,l))).catch((a=>{throw a.name==="FirebaseError"?(a.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new ge(ue.UNKNOWN,a.toString())}))}jo(e,t,i,r,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.jo(e,dv(t,i),r,l,c,a))).catch((l=>{throw l.name==="FirebaseError"?(l.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new ge(ue.UNKNOWN,l.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function g3(n,e,t,i){return new m3(n,e,t,i)}class y3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Mt(t),this.aa=!1):fe("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class v3{constructor(e,t,i,r,a){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=a,this.Aa.Mo((l=>{i.enqueueAndForget((async()=>{ya(this)&&(fe(pa,"Restarting streams for network reachability change."),await(async function(h){const f=Se(h);f.Ea.add(4),await Sd(f),f.Va.set("Unknown"),f.Ea.delete(4),await Wp(f)})(this))}))})),this.Va=new y3(i,r)}}async function Wp(n){if(ya(n))for(const e of n.Ra)await e(!0)}async function Sd(n){for(const e of n.Ra)await e(!1)}function Xp(n,e){const t=Se(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),k0(t)?P0(t):su(t).O_()&&M0(t,e))}function Yl(n,e){const t=Se(n),i=su(t);t.Ia.delete(e),i.O_()&&fR(t,e),t.Ia.size===0&&(i.O_()?i.L_():ya(t)&&t.Va.set("Unknown"))}function M0(n,e){if(n.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}su(n).Z_(e)}function fR(n,e){n.da.$e(e),su(n).X_(e)}function P0(n){n.da=new fU({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),su(n).start(),n.Va.ua()}function k0(n){return ya(n)&&!su(n).x_()&&n.Ia.size>0}function ya(n){return Se(n).Ea.size===0}function pR(n){n.da=void 0}async function _3(n){n.Va.set("Online")}async function E3(n){n.Ia.forEach(((e,t)=>{M0(n,e)}))}async function T3(n,e){pR(n),k0(n)?(n.Va.ha(e),P0(n)):n.Va.set("Unknown")}async function x3(n,e,t){if(n.Va.set("Online"),e instanceof SC&&e.state===2&&e.cause)try{await(async function(r,a){const l=a.cause;for(const c of a.targetIds)r.Ia.has(c)&&(await r.remoteSyncer.rejectListen(c,l),r.Ia.delete(c),r.da.removeTarget(c))})(n,e)}catch(i){fe(pa,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await vp(n,i)}else if(e instanceof kf?n.da.Xe(e):e instanceof bC?n.da.st(e):n.da.tt(e),!t.isEqual(Re.min()))try{const i=await nR(n.localStore);t.compareTo(i)>=0&&await(function(a,l){const c=a.da.Tt(l);return c.targetChanges.forEach(((h,f)=>{if(h.resumeToken.approximateByteSize()>0){const _=a.Ia.get(f);_&&a.Ia.set(f,_.withResumeToken(h.resumeToken,l))}})),c.targetMismatches.forEach(((h,f)=>{const _=a.Ia.get(h);if(!_)return;a.Ia.set(h,_.withResumeToken(kt.EMPTY_BYTE_STRING,_.snapshotVersion)),fR(a,h);const T=new zr(_.target,h,f,_.sequenceNumber);M0(a,T)})),a.remoteSyncer.applyRemoteEvent(c)})(n,t)}catch(i){fe(pa,"Failed to raise snapshot:",i),await vp(n,i)}}async function vp(n,e,t){if(!ro(e))throw e;n.Ea.add(1),await Sd(n),n.Va.set("Offline"),t||(t=()=>nR(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{fe(pa,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Wp(n)}))}function mR(n,e){return e().catch((t=>vp(n,t,e)))}async function ru(n){const e=Se(n),t=Zs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wo;for(;b3(e);)try{const r=await o3(e.localStore,i);if(r===null){e.Ta.length===0&&t.L_();break}i=r.batchId,S3(e,r)}catch(r){await vp(e,r)}gR(e)&&yR(e)}function b3(n){return ya(n)&&n.Ta.length<10}function S3(n,e){n.Ta.push(e);const t=Zs(n);t.O_()&&t.Y_&&t.ea(e.mutations)}function gR(n){return ya(n)&&!Zs(n).x_()&&n.Ta.length>0}function yR(n){Zs(n).start()}async function w3(n){Zs(n).ra()}async function A3(n){const e=Zs(n);for(const t of n.Ta)e.ea(t.mutations)}async function I3(n,e,t){const i=n.Ta.shift(),r=E0.from(i,e,t);await mR(n,(()=>n.remoteSyncer.applySuccessfulWrite(r))),await ru(n)}async function C3(n,e){e&&Zs(n).Y_&&await(async function(i,r){if((function(l){return cU(l)&&l!==ue.ABORTED})(r.code)){const a=i.Ta.shift();Zs(i).B_(),await mR(i,(()=>i.remoteSyncer.rejectFailedWrite(a.batchId,r))),await ru(i)}})(n,e),gR(n)&&yR(n)}async function zS(n,e){const t=Se(n);t.asyncQueue.verifyOperationInProgress(),fe(pa,"RemoteStore received new credentials");const i=ya(t);t.Ea.add(3),await Sd(t),i&&t.Va.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Wp(t)}async function Ev(n,e){const t=Se(n);e?(t.Ea.delete(2),await Wp(t)):e||(t.Ea.add(2),await Sd(t),t.Va.set("Unknown"))}function su(n){return n.ma||(n.ma=(function(t,i,r){const a=Se(t);return a.sa(),new h3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:_3.bind(null,n),Yo:E3.bind(null,n),t_:T3.bind(null,n),J_:x3.bind(null,n)}),n.Ra.push((async e=>{e?(n.ma.B_(),k0(n)?P0(n):n.Va.set("Unknown")):(await n.ma.stop(),pR(n))}))),n.ma}function Zs(n){return n.fa||(n.fa=(function(t,i,r){const a=Se(t);return a.sa(),new f3(i,a.connection,a.authCredentials,a.appCheckCredentials,a.serializer,r)})(n.datastore,n.asyncQueue,{Zo:()=>Promise.resolve(),Yo:w3.bind(null,n),t_:C3.bind(null,n),ta:A3.bind(null,n),na:I3.bind(null,n)}),n.Ra.push((async e=>{e?(n.fa.B_(),await ru(n)):(await n.fa.stop(),n.Ta.length>0&&(fe(pa,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e,t,i,r,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=a,this.deferred=new fr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((l=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,a){const l=Date.now()+i,c=new V0(e,t,l,r,a);return c.start(i),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ge(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function L0(n,e){if(Mt("AsyncQueue",`${e}: ${n}`),ro(n))return new ge(ue.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{static emptySet(e){return new Rl(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||ye.comparator(t.key,i.key):(t,i)=>ye.comparator(t.key,i.key),this.keyedMap=Nc(),this.sortedSet=new pt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,a=i.getNext().key;if(!r.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Rl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{constructor(){this.ga=new pt(ye.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):xe(63341,{Vt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class Ql{constructor(e,t,i,r,a,l,c,h,f){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=c,this.excludesMetadataChanges=h,this.hasCachedResults=f}static fromInitialDocuments(e,t,i,r,a){const l=[];return t.forEach((c=>{l.push({type:0,doc:c})})),new Ql(e,t,Rl.emptySet(t),l,i,r,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bp(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R3{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class N3{constructor(){this.queries=BS(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const r=Se(t),a=r.queries;r.queries=BS(),a.forEach(((l,c)=>{for(const h of c.ba)h.onError(i)}))})(this,new ge(ue.ABORTED,"Firestore shutting down"))}}function BS(){return new Yr((n=>lC(n)),Bp)}async function O0(n,e){const t=Se(n);let i=3;const r=e.query;let a=t.queries.get(r);a?!a.Sa()&&e.Da()&&(i=2):(a=new R3,i=e.Da()?0:1);try{switch(i){case 0:a.wa=await t.onListen(r,!0);break;case 1:a.wa=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(l){const c=L0(l,`Initialization of query '${gl(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,a),a.ba.push(e),e.va(t.onlineState),a.wa&&e.Fa(a.wa)&&G0(t)}async function U0(n,e){const t=Se(n),i=e.query;let r=3;const a=t.queries.get(i);if(a){const l=a.ba.indexOf(e);l>=0&&(a.ba.splice(l,1),a.ba.length===0?r=e.Da()?0:1:!a.Sa()&&e.Da()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function D3(n,e){const t=Se(n);let i=!1;for(const r of e){const a=r.query,l=t.queries.get(a);if(l){for(const c of l.ba)c.Fa(r)&&(i=!0);l.wa=r}}i&&G0(t)}function M3(n,e,t){const i=Se(n),r=i.queries.get(e);if(r)for(const a of r.ba)a.onError(t);i.queries.delete(e)}function G0(n){n.Ca.forEach((e=>{e.next()}))}var Tv,HS;(HS=Tv||(Tv={})).Ma="default",HS.Cache="cache";class F0{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new Ql(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.Ka||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Ql.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tv.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.key=e}}class _R{constructor(e){this.key=e}}class P3{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ze(),this.mutatedKeys=ze(),this.eu=cC(e),this.tu=new Rl(this.eu)}get nu(){return this.Za}ru(e,t){const i=t?t.iu:new qS,r=t?t.tu:this.tu;let a=t?t.mutatedKeys:this.mutatedKeys,l=r,c=!1;const h=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,f=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((_,T)=>{const x=r.get(_),A=Td(this.query,T)?T:null,V=!!x&&this.mutatedKeys.has(x.key),k=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let L=!1;x&&A?x.data.isEqual(A.data)?V!==k&&(i.track({type:3,doc:A}),L=!0):this.su(x,A)||(i.track({type:2,doc:A}),L=!0,(h&&this.eu(A,h)>0||f&&this.eu(A,f)<0)&&(c=!0)):!x&&A?(i.track({type:0,doc:A}),L=!0):x&&!A&&(i.track({type:1,doc:x}),L=!0,(h||f)&&(c=!0)),L&&(A?(l=l.add(A),a=k?a.add(_):a.delete(_)):(l=l.delete(_),a=a.delete(_)))})),this.query.limit!==null)for(;l.size>this.query.limit;){const _=this.query.limitType==="F"?l.last():l.first();l=l.delete(_.key),a=a.delete(_.key),i.track({type:1,doc:_})}return{tu:l,iu:i,Ss:c,mutatedKeys:a}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const a=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const l=e.iu.ya();l.sort(((_,T)=>(function(A,V){const k=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return xe(20277,{Vt:L})}};return k(A)-k(V)})(_.type,T.type)||this.eu(_.doc,T.doc))),this.ou(i),r=r??!1;const c=t&&!r?this._u():[],h=this.Ya.size===0&&this.current&&!r?1:0,f=h!==this.Xa;return this.Xa=h,l.length!==0||f?{snapshot:new Ql(this.query,e.tu,a,l,e.mutatedKeys,h===0,f,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new qS,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Za=this.Za.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Za=this.Za.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ze(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Ya=this.Ya.add(i.key))}));const t=[];return e.forEach((i=>{this.Ya.has(i)||t.push(new _R(i))})),this.Ya.forEach((i=>{e.has(i)||t.push(new vR(i))})),t}cu(e){this.Za=e.ks,this.Ya=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ql.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ou="SyncEngine";class k3{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class V3{constructor(e){this.key=e,this.hu=!1}}class L3{constructor(e,t,i,r,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Pu={},this.Tu=new Yr((c=>lC(c)),Bp),this.Iu=new Map,this.Eu=new Set,this.Ru=new pt(ye.comparator),this.Au=new Map,this.Vu=new A0,this.du={},this.mu=new Map,this.fu=fa.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function O3(n,e,t=!0){const i=Zp(n);let r;const a=i.Tu.get(e);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),r=a.view.lu()):r=await ER(i,e,t,!0),r}async function U3(n,e){const t=Zp(n);await ER(t,e,!0,!1)}async function ER(n,e,t,i){const r=await mp(n.localStore,Jn(e)),a=r.targetId,l=n.sharedClientState.addLocalQueryTarget(a,t);let c;return i&&(c=await z0(n,e,a,l==="current",r.resumeToken)),n.isPrimaryClient&&t&&Xp(n.remoteStore,r),c}async function z0(n,e,t,i,r){n.pu=(T,x,A)=>(async function(k,L,$,z){let H=L.view.ru($);H.Ss&&(H=await yv(k.localStore,L.query,!1).then((({documents:R})=>L.view.ru(R,H))));const Z=z&&z.targetChanges.get(L.targetId),ie=z&&z.targetMismatches.get(L.targetId)!=null,J=L.view.applyChanges(H,k.isPrimaryClient,Z,ie);return xv(k,L.targetId,J.au),J.snapshot})(n,T,x,A);const a=await yv(n.localStore,e,!0),l=new P3(e,a.ks),c=l.ru(a.documents),h=bd.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),f=l.applyChanges(c,n.isPrimaryClient,h);xv(n,t,f.au);const _=new k3(e,t,l);return n.Tu.set(e,_),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),f.snapshot}async function G3(n,e,t){const i=Se(n),r=i.Tu.get(e),a=i.Iu.get(r.targetId);if(a.length>1)return i.Iu.set(r.targetId,a.filter((l=>!Bp(l,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await Jl(i.localStore,r.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Yl(i.remoteStore,r.targetId),Wl(i,r.targetId)})).catch(io)):(Wl(i,r.targetId),await Jl(i.localStore,r.targetId,!0))}async function F3(n,e){const t=Se(n),i=t.Tu.get(e),r=t.Iu.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Yl(t.remoteStore,i.targetId))}async function z3(n,e,t){const i=j0(n);try{const r=await(function(l,c){const h=Se(l),f=ot.now(),_=c.reduce(((A,V)=>A.add(V.key)),ze());let T,x;return h.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let V=$n(),k=ze();return h.xs.getEntries(A,_).next((L=>{V=L,V.forEach((($,z)=>{z.isValidDocument()||(k=k.add($))}))})).next((()=>h.localDocuments.getOverlayedDocuments(A,V))).next((L=>{T=L;const $=[];for(const z of c){const H=lU(z,T.get(z.key).overlayedDocument);H!=null&&$.push(new Qr(z.key,H,Z1(H.value.mapValue),xn.exists(!0)))}return h.mutationQueue.addMutationBatch(A,f,$,c)})).next((L=>{x=L;const $=L.applyToLocalDocumentSet(T,k);return h.documentOverlayCache.saveOverlays(A,L.batchId,$)}))})).then((()=>({batchId:x.batchId,changes:hC(T)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),(function(l,c,h){let f=l.du[l.currentUser.toKey()];f||(f=new pt(Pe)),f=f.insert(c,h),l.du[l.currentUser.toKey()]=f})(i,r.batchId,t),await oo(i,r.changes),await ru(i.remoteStore)}catch(r){const a=L0(r,"Failed to persist write");t.reject(a)}}async function TR(n,e){const t=Se(n);try{const i=await r3(t.localStore,e);e.targetChanges.forEach(((r,a)=>{const l=t.Au.get(a);l&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1,22616),r.addedDocuments.size>0?l.hu=!0:r.modifiedDocuments.size>0?Ae(l.hu,14607):r.removedDocuments.size>0&&(Ae(l.hu,42227),l.hu=!1))})),await oo(t,i,e)}catch(i){await io(i)}}function jS(n,e,t){const i=Se(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.Tu.forEach(((a,l)=>{const c=l.view.va(e);c.snapshot&&r.push(c.snapshot)})),(function(l,c){const h=Se(l);h.onlineState=c;let f=!1;h.queries.forEach(((_,T)=>{for(const x of T.ba)x.va(c)&&(f=!0)})),f&&G0(h)})(i.eventManager,e),r.length&&i.Pu.J_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function q3(n,e,t){const i=Se(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Au.get(e),a=r&&r.key;if(a){let l=new pt(ye.comparator);l=l.insert(a,At.newNoDocument(a,Re.min()));const c=ze().add(a),h=new xd(Re.min(),new Map,new pt(Pe),l,c);await TR(i,h),i.Ru=i.Ru.remove(a),i.Au.delete(e),H0(i)}else await Jl(i.localStore,e,!1).then((()=>Wl(i,e,t))).catch(io)}async function B3(n,e){const t=Se(n),i=e.batch.batchId;try{const r=await i3(t.localStore,e);B0(t,i,null),q0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await oo(t,r)}catch(r){await io(r)}}async function H3(n,e,t){const i=Se(n);try{const r=await(function(l,c){const h=Se(l);return h.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let _;return h.mutationQueue.lookupMutationBatch(f,c).next((T=>(Ae(T!==null,37113),_=T.keys(),h.mutationQueue.removeMutationBatch(f,T)))).next((()=>h.mutationQueue.performConsistencyCheck(f))).next((()=>h.documentOverlayCache.removeOverlaysForBatchId(f,_,c))).next((()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,_))).next((()=>h.localDocuments.getDocuments(f,_)))}))})(i.localStore,e);B0(i,e,t),q0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await oo(i,r)}catch(r){await io(r)}}function q0(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function B0(n,e,t){const i=Se(n);let r=i.du[i.currentUser.toKey()];if(r){const a=r.get(e);a&&(t?a.reject(t):a.resolve(),r=r.remove(e)),i.du[i.currentUser.toKey()]=r}}function Wl(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Vu.Gr(e).forEach((i=>{n.Vu.containsKey(i)||xR(n,i)}))}function xR(n,e){n.Eu.delete(e.path.canonicalString());const t=n.Ru.get(e);t!==null&&(Yl(n.remoteStore,t),n.Ru=n.Ru.remove(e),n.Au.delete(t),H0(n))}function xv(n,e,t){for(const i of t)i instanceof vR?(n.Vu.addReference(i.key,e),j3(n,i)):i instanceof _R?(fe(ou,"Document no longer in limbo: "+i.key),n.Vu.removeReference(i.key,e),n.Vu.containsKey(i.key)||xR(n,i.key)):xe(19791,{wu:i})}function j3(n,e){const t=e.key,i=t.path.canonicalString();n.Ru.get(t)||n.Eu.has(i)||(fe(ou,"New document in limbo: "+t),n.Eu.add(i),H0(n))}function H0(n){for(;n.Eu.size>0&&n.Ru.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new ye(nt.fromString(e)),i=n.fu.next();n.Au.set(i,new V3(t)),n.Ru=n.Ru.insert(t,i),Xp(n.remoteStore,new zr(Jn(Ed(t.path)),i,"TargetPurposeLimboResolution",kn.ce))}}async function oo(n,e,t){const i=Se(n),r=[],a=[],l=[];i.Tu.isEmpty()||(i.Tu.forEach(((c,h)=>{l.push(i.pu(h,e,t).then((f=>{var _;if((f||t)&&i.isPrimaryClient){const T=f?!f.fromCache:(_=t==null?void 0:t.targetChanges.get(h.targetId))==null?void 0:_.current;i.sharedClientState.updateQueryState(h.targetId,T?"current":"not-current")}if(f){r.push(f);const T=R0.Es(h.targetId,f);a.push(T)}})))})),await Promise.all(l),i.Pu.J_(r),await(async function(h,f){const _=Se(h);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(T=>Y.forEach(f,(x=>Y.forEach(x.Ts,(A=>_.persistence.referenceDelegate.addReference(T,x.targetId,A))).next((()=>Y.forEach(x.Is,(A=>_.persistence.referenceDelegate.removeReference(T,x.targetId,A)))))))))}catch(T){if(!ro(T))throw T;fe(N0,"Failed to update sequence numbers: "+T)}for(const T of f){const x=T.targetId;if(!T.fromCache){const A=_.vs.get(x),V=A.snapshotVersion,k=A.withLastLimboFreeSnapshotVersion(V);_.vs=_.vs.insert(x,k)}}})(i.localStore,a))}async function $3(n,e){const t=Se(n);if(!t.currentUser.isEqual(e)){fe(ou,"User change. New user:",e.toKey());const i=await tR(t.localStore,e);t.currentUser=e,(function(a,l){a.mu.forEach((c=>{c.forEach((h=>{h.reject(new ge(ue.CANCELLED,l))}))})),a.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await oo(t,i.Ns)}}function K3(n,e){const t=Se(n),i=t.Au.get(e);if(i&&i.hu)return ze().add(i.key);{let r=ze();const a=t.Iu.get(e);if(!a)return r;for(const l of a){const c=t.Tu.get(l);r=r.unionWith(c.view.nu)}return r}}async function J3(n,e){const t=Se(n),i=await yv(t.localStore,e.query,!0),r=e.view.cu(i);return t.isPrimaryClient&&xv(t,e.targetId,r.au),r}async function Y3(n,e){const t=Se(n);return rR(t.localStore,e).then((i=>oo(t,i)))}async function Q3(n,e,t,i){const r=Se(n),a=await(function(c,h){const f=Se(c),_=Se(f.mutationQueue);return f.persistence.runTransaction("Lookup mutation documents","readonly",(T=>_.Xn(T,h).next((x=>x?f.localDocuments.getDocuments(T,x):Y.resolve(null)))))})(r.localStore,e);a!==null?(t==="pending"?await ru(r.remoteStore):t==="acknowledged"||t==="rejected"?(B0(r,e,i||null),q0(r,e),(function(c,h){Se(Se(c).mutationQueue).nr(h)})(r.localStore,e)):xe(6720,"Unknown batchState",{bu:t}),await oo(r,a)):fe(ou,"Cannot apply mutation batch with id: "+e)}async function W3(n,e){const t=Se(n);if(Zp(t),j0(t),e===!0&&t.gu!==!0){const i=t.sharedClientState.getAllActiveQueryTargets(),r=await $S(t,i.toArray());t.gu=!0,await Ev(t.remoteStore,!0);for(const a of r)Xp(t.remoteStore,a)}else if(e===!1&&t.gu!==!1){const i=[];let r=Promise.resolve();t.Iu.forEach(((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?i.push(l):r=r.then((()=>(Wl(t,l),Jl(t.localStore,l,!0)))),Yl(t.remoteStore,l)})),await r,await $S(t,i),(function(l){const c=Se(l);c.Au.forEach(((h,f)=>{Yl(c.remoteStore,f)})),c.Vu.zr(),c.Au=new Map,c.Ru=new pt(ye.comparator)})(t),t.gu=!1,await Ev(t.remoteStore,!1)}}async function $S(n,e,t){const i=Se(n),r=[],a=[];for(const l of e){let c;const h=i.Iu.get(l);if(h&&h.length!==0){c=await mp(i.localStore,Jn(h[0]));for(const f of h){const _=i.Tu.get(f),T=await J3(i,_);T.snapshot&&a.push(T.snapshot)}}else{const f=await iR(i.localStore,l);c=await mp(i.localStore,f),await z0(i,bR(f),l,!1,c.resumeToken)}r.push(c)}return i.Pu.J_(a),r}function bR(n){return aC(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function X3(n){return(function(t){return Se(Se(t).persistence).hs()})(Se(n).localStore)}async function Z3(n,e,t,i){const r=Se(n);if(r.gu)return void fe(ou,"Ignoring unexpected query state notification.");const a=r.Iu.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=await rR(r.localStore,uC(a[0])),c=xd.createSynthesizedRemoteEventForCurrentChange(e,t==="current",kt.EMPTY_BYTE_STRING);await oo(r,l,c);break}case"rejected":await Jl(r.localStore,e,!0),Wl(r,e,i);break;default:xe(64155,t)}}async function e6(n,e,t){const i=Zp(n);if(i.gu){for(const r of e){if(i.Iu.has(r)&&i.sharedClientState.isActiveQueryTarget(r)){fe(ou,"Adding an already active target "+r);continue}const a=await iR(i.localStore,r),l=await mp(i.localStore,a);await z0(i,bR(a),l.targetId,!1,l.resumeToken),Xp(i.remoteStore,l)}for(const r of t)i.Iu.has(r)&&await Jl(i.localStore,r,!1).then((()=>{Yl(i.remoteStore,r),Wl(i,r)})).catch(io)}}function Zp(n){const e=Se(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=TR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=K3.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=q3.bind(null,e),e.Pu.J_=D3.bind(null,e.eventManager),e.Pu.yu=M3.bind(null,e.eventManager),e}function j0(n){const e=Se(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=B3.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=H3.bind(null,e),e}class od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Qp(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return eR(this.persistence,new ZC,e.initialUser,this.serializer)}Cu(e){return new I0(Yp.Vi,this.serializer)}Du(e){return new uR}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}od.provider={build:()=>new od};class t6 extends od{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ae(this.persistence.referenceDelegate instanceof pp,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new I0((i=>pp.Vi(i,t)),this.serializer)}}class SR extends od{constructor(e,t,i){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await j0(this.xu.syncEngine),await ru(this.xu.remoteStore),await this.persistence.zi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(e){return eR(this.persistence,new ZC,e.initialUser,this.serializer)}Fu(e,t){const i=this.persistence.referenceDelegate.garbageCollector;return new KC(i,e.asyncQueue,t)}Mu(e,t){const i=new aO(t,this.persistence);return new oO(e.asyncQueue,i)}Cu(e){const t=XC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=this.cacheSizeBytes!==void 0?pn.withCacheSize(this.cacheSizeBytes):pn.DEFAULT;return new C0(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,cR(),Lf(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new uR}}class n6 extends SR{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Dy&&(this.sharedClientState.syncEngine={So:Q3.bind(null,t),Do:Z3.bind(null,t),Co:e6.bind(null,t),hs:X3.bind(null,t),bo:Y3.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi((async i=>{await W3(this.xu.syncEngine,i),this.gcScheduler&&(i&&!this.gcScheduler.started?this.gcScheduler.start():i||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(i&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():i||this.indexBackfillerScheduler.stop())}))}Du(e){const t=cR();if(!Dy.v(t))throw new ge(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=XC(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Dy(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class ad{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>jS(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$3.bind(null,this.syncEngine),await Ev(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new N3})()}createDatastore(e){const t=Qp(e.databaseInfo.databaseId),i=d3(e.databaseInfo);return g3(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,r,a,l,c){return new v3(i,r,a,l,c)})(this.localStore,this.datastore,e.asyncQueue,(t=>jS(this.syncEngine,t,0)),(function(){return GS.v()?new GS:new a3})())}createSyncEngine(e,t){return(function(r,a,l,c,h,f,_){const T=new L3(r,a,l,c,h,f);return _&&(T.gu=!0),T})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(r){const a=Se(r);fe(pa,"RemoteStore shutting down."),a.Ea.add(5),await Sd(a),a.Aa.shutdown(),a.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}ad.provider={build:()=>new ad};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Mt("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eo="FirestoreClient";class i6{constructor(e,t,i,r,a){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this._databaseInfo=r,this.user=fn.UNAUTHENTICATED,this.clientId=r0.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=a,this.authCredentials.start(i,(async l=>{fe(eo,"Received user=",l.uid),await this.authCredentialListener(l),this.user=l})),this.appCheckCredentials.start(i,(l=>(fe(eo,"Received new app check token=",l),this.appCheckCredentialListener(l,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=L0(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Py(n,e){n.asyncQueue.verifyOperationInProgress(),fe(eo,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async r=>{i.isEqual(r)||(await tR(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function KS(n,e){n.asyncQueue.verifyOperationInProgress();const t=await r6(n);fe(eo,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>zS(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,r)=>zS(e.remoteStore,r))),n._onlineComponents=e}async function r6(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){fe(eo,"Using user provided OfflineComponentProvider");try{await Py(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(r){return r.name==="FirebaseError"?r.code===ue.FAILED_PRECONDITION||r.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11})(t))throw t;kl("Error using user provided cache. Falling back to memory cache: "+t),await Py(n,new od)}}else fe(eo,"Using default OfflineComponentProvider"),await Py(n,new t6(void 0));return n._offlineComponents}async function wR(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(fe(eo,"Using user provided OnlineComponentProvider"),await KS(n,n._uninitializedComponentsProvider._online)):(fe(eo,"Using default OnlineComponentProvider"),await KS(n,new ad))),n._onlineComponents}function s6(n){return wR(n).then((e=>e.syncEngine))}async function _p(n){const e=await wR(n),t=e.eventManager;return t.onListen=O3.bind(null,e.syncEngine),t.onUnlisten=G3.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=U3.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=F3.bind(null,e.syncEngine),t}function o6(n,e,t,i){const r=new $0(i),a=new F0(e,r,t);return n.asyncQueue.enqueueAndForget((async()=>O0(await _p(n),a))),()=>{r.Nu(),n.asyncQueue.enqueueAndForget((async()=>U0(await _p(n),a)))}}function a6(n,e,t={}){const i=new fr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,f){const _=new $0({next:x=>{_.Nu(),l.enqueueAndForget((()=>U0(a,T)));const A=x.docs.has(c);!A&&x.fromCache?f.reject(new ge(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):A&&x.fromCache&&h&&h.source==="server"?f.reject(new ge(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):f.resolve(x)},error:x=>f.reject(x)}),T=new F0(Ed(c.path),_,{includeMetadataChanges:!0,Ka:!0});return O0(a,T)})(await _p(n),n.asyncQueue,e,t,i))),i.promise}function l6(n,e,t={}){const i=new fr;return n.asyncQueue.enqueueAndForget((async()=>(function(a,l,c,h,f){const _=new $0({next:x=>{_.Nu(),l.enqueueAndForget((()=>U0(a,T))),x.fromCache&&h.source==="server"?f.reject(new ge(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(x)},error:x=>f.reject(x)}),T=new F0(c,_,{includeMetadataChanges:!0,Ka:!0});return O0(a,T)})(await _p(n),n.asyncQueue,e,t,i))),i.promise}function u6(n,e){const t=new fr;return n.asyncQueue.enqueueAndForget((async()=>z3(await s6(n),e,t))),t.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c6="ComponentProvider",JS=new Map;function d6(n,e,t,i,r){return new VO(n,e,t,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,AR(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h6="firestore.googleapis.com",YS=!0;class QS{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ge(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=h6,this.ssl=YS}else this.host=e.host,this.ssl=e.ssl??YS;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=qC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$C)throw new ge(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AR(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ge(ue.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,r){return i.timeoutSeconds===r.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class K0{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new QS({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ge(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ge(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new QS(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new J5;switch(i.type){case"firstParty":return new W5(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ge(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=JS.get(t);i&&(fe(c6,"Removing Datastore"),JS.delete(t),i.terminate())})(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new wd(this.firestore,e,this._query)}}class Pt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Js(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Pt(this.firestore,e,this._key)}toJSON(){return{type:Pt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(yd(t,Pt._jsonSchema))return new Pt(e,i||null,new ye(nt.fromString(t.referencePath)))}}Pt._jsonSchemaVersion="firestore/documentReference/1.0",Pt._jsonSchema={type:$t("string",Pt._jsonSchemaVersion),referencePath:$t("string")};class Js extends wd{constructor(e,t,i){super(e,t,Ed(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Pt(this.firestore,null,new ye(e))}withConverter(e){return new Js(this.firestore,e,this._path)}}function bc(n,e,...t){if(n=xt(n),A1("collection","path",e),n instanceof K0){const i=nt.fromString(e,...t);return Fb(i),new Js(n,null,i)}{if(!(n instanceof Pt||n instanceof Js))throw new ge(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return Fb(i),new Js(n.firestore,null,i)}}function yt(n,e,...t){if(n=xt(n),arguments.length===1&&(e=r0.newId()),A1("doc","path",e),n instanceof K0){const i=nt.fromString(e,...t);return Gb(i),new Pt(n,null,new ye(i))}{if(!(n instanceof Pt||n instanceof Js))throw new ge(ue.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return Gb(i),new Pt(n.firestore,n instanceof Js?n.converter:null,new ye(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WS="AsyncQueue";class XS{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new dR(this,"async_queue_retry"),this._c=()=>{const i=Lf();i&&fe(WS,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=Lf();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Lf();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new fr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ro(e))throw e;fe(WS,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,Mt("INTERNAL UNHANDLED ERROR: ",ZS(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=V0.createAndSchedule(this,e,t,i,(a=>this.hc(a)));return this.tc.push(r),r}uc(){this.nc&&xe(47125,{Pc:ZS(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ZS(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class to extends K0{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new XS,this._persistenceKey=(r==null?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new XS(e),this._firestoreClient=void 0,await e}}}function f6(n,e,t){t||(t=sp);const i=ga(n,"firestore");if(i.isInitialized(t)){const r=i.getImmediate({identifier:t}),a=i.getOptions(t);if(Qs(a,e))return r;throw new ge(ue.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(e.cacheSizeBytes!==void 0&&e.localCache!==void 0)throw new ge(ue.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(e.cacheSizeBytes!==void 0&&e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$C)throw new ge(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return e.host&&Zl(e.host)&&rI(e.host),i.initialize({options:e,instanceIdentifier:t})}function em(n){if(n._terminated)throw new ge(ue.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||p6(n),n._firestoreClient}function p6(n){var i,r,a,l;const e=n._freezeSettings(),t=d6(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,(r=n._app)==null?void 0:r.options.apiKey,e);n._componentsProvider||(a=e.localCache)!=null&&a._offlineComponentProvider&&((l=e.localCache)!=null&&l._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new i6(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(h){const f=h==null?void 0:h._online.build();return{_offline:h==null?void 0:h._offline.build(f),_online:f}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new di(kt.fromBase64String(e))}catch(t){throw new ge(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new di(kt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:di._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(yd(e,di._jsonSchema))return di.fromBase64String(e.bytes)}}di._jsonSchemaVersion="firestore/bytes/1.0",di._jsonSchema={type:$t("string",di._jsonSchemaVersion),bytes:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J0{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ge(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ge(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ge(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:pr._jsonSchemaVersion}}static fromJSON(e){if(yd(e,pr._jsonSchema))return new pr(e.latitude,e.longitude)}}pr._jsonSchemaVersion="firestore/geoPoint/1.0",pr._jsonSchema={type:$t("string",pr._jsonSchemaVersion),latitude:$t("number"),longitude:$t("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,r){if(i.length!==r.length)return!1;for(let a=0;a<i.length;++a)if(i[a]!==r[a])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Di._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(yd(e,Di._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Di(e.vectorValues);throw new ge(ue.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Di._jsonSchemaVersion="firestore/vectorValue/1.0",Di._jsonSchema={type:$t("string",Di._jsonSchemaVersion),vectorValues:$t("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m6=/^__.*__$/;class g6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms):new iu(e,this.data,t,this.fieldTransforms)}}class IR{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Qr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CR(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xe(40011,{dataSource:n})}}class Q0{constructor(e,t,i,r,a,l){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,a===void 0&&this.validatePath(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new Q0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePathSegment(e),i}childContextForFieldPath(e){var r;const t=(r=this.path)==null?void 0:r.child(e),i=this.contextWith({path:t,arrayElement:!1});return i.validatePath(),i}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Ep(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(CR(this.dataSource)&&m6.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class y6{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Qp(e)}createContext(e,t,i,r=!1){return new Q0({dataSource:e,methodName:t,targetDoc:i,path:bt.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function RR(n){const e=n._freezeSettings(),t=Qp(n._databaseId);return new y6(n._databaseId,!!e.ignoreUndefinedProperties,t)}function v6(n,e,t,i,r,a={}){const l=n.createContext(a.merge||a.mergeFields?2:0,e,t,r);W0("Data must be an object, but it was:",l,i);const c=NR(i,l);let h,f;if(a.merge)h=new Vn(l.fieldMask),f=l.fieldTransforms;else if(a.mergeFields){const _=[];for(const T of a.mergeFields){const x=ld(e,T,t);if(!l.contains(x))throw new ge(ue.INVALID_ARGUMENT,`Field '${x}' is specified in your field mask but missing from your input data.`);PR(_,x)||_.push(x)}h=new Vn(_),f=l.fieldTransforms.filter((T=>h.covers(T.field)))}else h=null,f=l.fieldTransforms;return new g6(new mn(c),h,f)}class tm extends Y0{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof tm}}function _6(n,e,t,i){const r=n.createContext(1,e,t);W0("Data must be an object, but it was:",r,i);const a=[],l=mn.empty();so(i,((h,f)=>{const _=MR(e,h,t);f=xt(f);const T=r.childContextForFieldPath(_);if(f instanceof tm)a.push(_);else{const x=nm(f,T);x!=null&&(a.push(_),l.set(_,x))}}));const c=new Vn(a);return new IR(l,c,r.fieldTransforms)}function E6(n,e,t,i,r,a){const l=n.createContext(1,e,t),c=[ld(e,i,t)],h=[r];if(a.length%2!=0)throw new ge(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let x=0;x<a.length;x+=2)c.push(ld(e,a[x])),h.push(a[x+1]);const f=[],_=mn.empty();for(let x=c.length-1;x>=0;--x)if(!PR(f,c[x])){const A=c[x];let V=h[x];V=xt(V);const k=l.childContextForFieldPath(A);if(V instanceof tm)f.push(A);else{const L=nm(V,k);L!=null&&(f.push(A),_.set(A,L))}}const T=new Vn(f);return new IR(_,T,l.fieldTransforms)}function nm(n,e){if(DR(n=xt(n)))return W0("Unsupported field value:",e,n),NR(n,e);if(n instanceof Y0)return(function(i,r){if(!CR(r.dataSource))throw r.createError(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.createError(`${i._methodName}() is not currently supported inside arrays`);const a=i._toFieldTransform(r);a&&r.fieldTransforms.push(a)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(i,r){const a=[];let l=0;for(const c of i){let h=nm(c,r.childContextForArray(l));h==null&&(h={nullValue:"NULL_VALUE"}),a.push(h),l++}return{arrayValue:{values:a}}})(n,e)}return(function(i,r){if((i=xt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return tU(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const a=ot.fromDate(i);return{timestampValue:Kl(r.serializer,a)}}if(i instanceof ot){const a=new ot(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Kl(r.serializer,a)}}if(i instanceof pr)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof di)return{bytesValue:wC(r.serializer,i._byteString)};if(i instanceof Pt){const a=r.databaseId,l=i.firestore._databaseId;if(!l.isEqual(a))throw r.createError(`Document reference is for database ${l.projectId}/${l.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:b0(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof Di)return(function(l,c){const h=l instanceof Di?l.toArray():l;return{mapValue:{fields:{[f0]:{stringValue:p0},[zl]:{arrayValue:{values:h.map((_=>{if(typeof _!="number")throw c.createError("VectorValues must only contain numeric values.");return v0(c.serializer,_)}))}}}}}})(i,r);if(LC(i))return i._toProto(r.serializer);throw r.createError(`Unsupported field value: ${s0(i)}`)})(n,e)}function NR(n,e){const t={};return H1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):so(n,((i,r)=>{const a=nm(r,e.childContextForField(i));a!=null&&(t[i]=a)})),{mapValue:{fields:t}}}function DR(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ot||n instanceof pr||n instanceof di||n instanceof Pt||n instanceof Y0||n instanceof Di||LC(n))}function W0(n,e,t){if(!DR(t)||!I1(t)){const i=s0(t);throw i==="an object"?e.createError(n+" a custom object"):e.createError(n+" "+i)}}function ld(n,e,t){if((e=xt(e))instanceof J0)return e._internalPath;if(typeof e=="string")return MR(n,e);throw Ep("Field path arguments must be of type string or ",n,!1,void 0,t)}const T6=new RegExp("[~\\*/\\[\\]]");function MR(n,e,t){if(e.search(T6)>=0)throw Ep(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new J0(...e.split("."))._internalPath}catch{throw Ep(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Ep(n,e,t,i,r){const a=i&&!i.isEmpty(),l=r!==void 0;let c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let h="";return(a||l)&&(h+=" (found",a&&(h+=` in field ${i}`),l&&(h+=` in document ${r}`),h+=")"),new ge(ue.INVALID_ARGUMENT,c+n+h)}function PR(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x6{convertValue(e,t="none"){switch(Ws(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($r(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw xe(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return so(e,((r,a)=>{i[r]=this.convertValue(a,t)})),i}convertVectorValue(e){var i,r,a;const t=(a=(r=(i=e.fields)==null?void 0:i[zl].arrayValue)==null?void 0:r.values)==null?void 0:a.map((l=>Tt(l.doubleValue)));return new Di(t)}convertGeoPoint(e){return new pr(Tt(e.latitude),Tt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Fp(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(td(e));default:return null}}convertTimestamp(e){const t=jr(e);return new ot(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);Ae(VC(i),9688,{name:e});const r=new ua(i.get(1),i.get(3)),a=new ye(i.popFirst(5));return r.isEqual(t)||Mt(`Document ${a} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0 extends x6{constructor(e){super(),this.firestore=e}convertBytes(e){return new di(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Pt(this.firestore,null,t)}}const ew="@firebase/firestore",tw="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nw(n){return(function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const a of i)if(a in r&&typeof r[a]=="function")return!0;return!1})(n,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e,t,i,r,a){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new Pt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new b6(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const t=this._document.data.field(ld("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class b6 extends kR{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new ge(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function S6(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class w6{constructor(e){let t;this.kind="persistent",e!=null&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=R6(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}function A6(n){return new w6(n)}class I6{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ad.provider,this._offlineComponentProvider={build:t=>new SR(t,e==null?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class C6{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=ad.provider,this._offlineComponentProvider={build:t=>new n6(t,e==null?void 0:e.cacheSizeBytes)}}}function R6(n){return new I6(n==null?void 0:n.forceOwnership)}function N6(){return new C6}class Pc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ea extends kR{constructor(e,t,i,r,a,l){super(e,t,i,r,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Of(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ld("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ue.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ea._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ea._jsonSchemaVersion="firestore/documentSnapshot/1.0",ea._jsonSchema={type:$t("string",ea._jsonSchemaVersion),bundleSource:$t("string","DocumentSnapshot"),bundleName:$t("string"),bundle:$t("string")};class Of extends ea{data(e={}){return super.data(e)}}class ta{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Pc(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Of(this._firestore,this._userDataWriter,i.key,i,new Pc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ge(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(r,a){if(r._snapshot.oldDocs.isEmpty()){let l=0;return r._snapshot.docChanges.map((c=>{const h=new Of(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Pc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:h,oldIndex:-1,newIndex:l++}}))}{let l=r._snapshot.oldDocs;return r._snapshot.docChanges.filter((c=>a||c.type!==3)).map((c=>{const h=new Of(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Pc(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let f=-1,_=-1;return c.type!==0&&(f=l.indexOf(c.doc.key),l=l.delete(c.doc.key)),c.type!==1&&(l=l.add(c.doc),_=l.indexOf(c.doc.key)),{type:D6(c.type),doc:h,oldIndex:f,newIndex:_}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ge(ue.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=r0.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],r=[];return this.docs.forEach((a=>{a._document!==null&&(t.push(a._document),i.push(this._userDataWriter.convertObjectMap(a._document.data.value.mapValue.fields,"previous")),r.push(a.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function D6(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xe(61501,{type:n})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:$t("string",ta._jsonSchemaVersion),bundleSource:$t("string","QuerySnapshot"),bundleName:$t("string"),bundle:$t("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z0(n){n=pi(n,Pt);const e=pi(n.firestore,to),t=em(e);return a6(t,n._key).then((i=>LR(e,n,i)))}function Sc(n){n=pi(n,wd);const e=pi(n.firestore,to),t=em(e),i=new X0(e);return VR(n._query),l6(t,n._query).then((r=>new ta(e,i,n,r)))}function en(n,e,t){n=pi(n,Pt);const i=pi(n.firestore,to),r=S6(n.converter,e,t),a=RR(i);return e_(i,[v6(a,"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,xn.none())])}function iw(n,e,t,...i){n=pi(n,Pt);const r=pi(n.firestore,to),a=RR(r);let l;return l=typeof(e=xt(e))=="string"||e instanceof J0?E6(a,"updateDoc",n._key,e,t,i):_6(a,"updateDoc",n._key,e),e_(r,[l.toMutation(n._key,xn.exists(!0))])}function ky(n){return e_(pi(n.firestore,to),[new $p(n._key,xn.none())])}function M6(n,...e){var f,_,T;n=xt(n);let t={includeMetadataChanges:!1,source:"default"},i=0;typeof e[i]!="object"||nw(e[i])||(t=e[i++]);const r={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(nw(e[i])){const x=e[i];e[i]=(f=x.next)==null?void 0:f.bind(x),e[i+1]=(_=x.error)==null?void 0:_.bind(x),e[i+2]=(T=x.complete)==null?void 0:T.bind(x)}let a,l,c;if(n instanceof Pt)l=pi(n.firestore,to),c=Ed(n._key.path),a={next:x=>{e[i]&&e[i](LR(l,n,x))},error:e[i+1],complete:e[i+2]};else{const x=pi(n,wd);l=pi(x.firestore,to),c=x._query;const A=new X0(l);a={next:V=>{e[i]&&e[i](new ta(l,A,x,V))},error:e[i+1],complete:e[i+2]},VR(n._query)}const h=em(l);return o6(h,c,r,a)}function e_(n,e){const t=em(n);return u6(t,e)}function LR(n,e,t){const i=t.docs.get(e._key),r=new X0(n);return new ea(n,r,e._key,i,new Pc(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){$5(eu),mr(new ki("firestore",((i,{instanceIdentifier:r,options:a})=>{const l=i.getProvider("app").getImmediate(),c=new to(new Y5(i.getProvider("auth-internal")),new X5(l,i.getProvider("app-check-internal")),LO(l,r),l);return a={useFetchStreams:t,...a},c._setSettings(a),c}),"PUBLIC").setMultipleInstances(!0)),fi(ew,tw,e),fi(ew,tw,"esm2020")})();const P6={apiKey:"AIzaSyB49ZRitwjTpf0ofAKbdQybgCktEL-PXf4",authDomain:"ganadinerohispano-a3df1.firebaseapp.com",projectId:"ganadinerohispano-a3df1",storageBucket:"ganadinerohispano-a3df1.firebasestorage.app",messagingSenderId:"1000835736436",appId:"1:1000835736436:web:63ae9817d97ff773958221",measurementId:"G-LT0J264GQP"},t_=fI(P6);let k6;try{k6=z5(t_)}catch{console.warn("Analytics not supported in this environment")}const zs=bL(t_),tt=f6(t_,{localCache:A6({tabManager:N6()})}),rw={monthlyPrice:"9.99",currencySymbol:"",contactEmail:"soporte@ganadinerohispano.com"},V6="santiagogordillomartinezdeleon@gmail.com",OR=le.createContext(void 0),L6=({children:n})=>{const[e,t]=le.useState(Ef),[i,r]=le.useState(Tf),[a,l]=le.useState(_f),[c,h]=le.useState([]),[f,_]=le.useState([]),[T,x]=le.useState(rw),[A,V]=le.useState(!0),k=()=>{const G=zs.currentUser;if(!G||G.email!==V6)throw new Error("ACCESO DENEGADO: No tienes permisos de administrador.")};le.useEffect(()=>{(async()=>{const re=setTimeout(()=>{console.warn("DB Connection Slow/Hanging - Fallback to Local Data"),V(!1)},3e3);try{const he=await Sc(bc(tt,"methods"));if(he.empty){console.log("Seeding Methods...");for(const pe of Ef)await en(yt(tt,"methods",pe.id),pe);t(Ef)}else{const pe=he.docs.map(ve=>ve.data());t(pe)}const Ie=await Sc(bc(tt,"blogPosts"));if(Ie.empty){console.log("Seeding Blog...");for(const pe of Tf)await en(yt(tt,"blogPosts",pe.id),pe);r(Tf)}else{const pe=Ie.docs.map(ve=>ve.data());r(pe)}const Oe=await Sc(bc(tt,"scams"));if(Oe.empty){console.log("Seeding Scams...");for(const pe of _f)await en(yt(tt,"scams",pe.id),pe);l(_f)}else{const pe=Oe.docs.map(ve=>ve.data());l(pe)}const q=yt(tt,"config","global"),se=await Z0(q);se.exists()?x(se.data()):await en(q,rw)}catch(he){console.error("Error initializing data (Using local fallback):",he)}finally{clearTimeout(re),V(!1)}})()},[]);const L=le.useCallback(async G=>{k(),t(re=>[...re,G]),await en(yt(tt,"methods",G.id),G)},[]),$=le.useCallback(async G=>{k(),t(re=>re.map(he=>he.id===G.id?G:he)),await en(yt(tt,"methods",G.id),G)},[]),z=le.useCallback(async G=>{k(),t(re=>re.filter(he=>he.id!==G)),await ky(yt(tt,"methods",G))},[]),H=le.useCallback(async G=>{k(),r(re=>[...re,G]),await en(yt(tt,"blogPosts",G.id),G)},[]),Z=le.useCallback(async G=>{k(),r(re=>re.map(he=>he.id===G.id?G:he)),await en(yt(tt,"blogPosts",G.id),G)},[]),ie=le.useCallback(async G=>{k(),r(re=>re.filter(he=>he.id!==G)),await ky(yt(tt,"blogPosts",G))},[]),J=le.useCallback(async G=>{k(),l(re=>[...re,G]),await en(yt(tt,"scams",G.id),G)},[]),R=le.useCallback(async G=>{k(),l(re=>re.map(he=>he.id===G.id?G:he)),await en(yt(tt,"scams",G.id),G)},[]),M=le.useCallback(async G=>{k(),l(re=>re.filter(he=>he.id!==G)),await ky(yt(tt,"scams",G))},[]),P=le.useCallback(async()=>{k();try{const re=(await Sc(bc(tt,"users"))).docs.map(he=>({...he.data(),uid:he.id}));h(re)}catch(G){console.error("Error fetching users",G)}},[]),O=le.useCallback(async(G,re,he)=>{k(),h(Ie=>Ie.map(Oe=>Oe.uid===G?{...Oe,role:re,isPremium:he}:Oe)),await iw(yt(tt,"users",G),{role:re,isPremium:he})},[]),C=le.useCallback(async G=>{k(),x(G),await en(yt(tt,"config","global"),G)},[]),F=le.useCallback(async G=>{await en(yt(tt,"applications",G.id),G)},[]),N=le.useCallback(async()=>{k();const re=(await Sc(bc(tt,"applications"))).docs.map(he=>he.data());re.sort((he,Ie)=>new Date(Ie.date).getTime()-new Date(he.date).getTime()),_(re)},[]),Ee=le.useCallback(async(G,re)=>{k(),_(he=>he.map(Ie=>Ie.id===G?{...Ie,status:re}:Ie)),await iw(yt(tt,"applications",G),{status:re})},[]),de=le.useMemo(()=>({methods:e,blogPosts:i,allUsers:c,scams:a,applications:f,settings:T,loading:A,addMethod:L,updateMethod:$,deleteMethod:z,addBlogPost:H,updateBlogPost:Z,deleteBlogPost:ie,addScam:J,updateScam:R,deleteScam:M,updateUserRole:O,refreshUsers:P,updateSettings:C,refreshApplications:N,submitApplication:F,updateApplicationStatus:Ee}),[e,i,c,a,f,T,A,L,$,z,H,Z,ie,J,R,M,O,P,C,N,F,Ee]);return y.jsx(OR.Provider,{value:de,children:n})},au=()=>{const n=le.useContext(OR);if(n===void 0)throw new Error("useData must be used within a DataProvider");return n},sw="santiagogordillomartinezdeleon@gmail.com",O6=({isOpen:n,onClose:e,currentUser:t})=>{const{methods:i,blogPosts:r,allUsers:a,scams:l,settings:c,applications:h,refreshUsers:f,refreshApplications:_,addMethod:T,updateMethod:x,deleteMethod:A,addBlogPost:V,updateBlogPost:k,deleteBlogPost:L,addScam:$,updateScam:z,deleteScam:H,updateUserRole:Z,updateSettings:ie,updateApplicationStatus:J}=au(),[R,M]=le.useState("overview"),[P,O]=le.useState(""),[C,F]=le.useState(null),[N,Ee]=le.useState(null),[de,G]=le.useState(null),[re,he]=le.useState(c),[Ie,Oe]=le.useState(!1),[q,se]=le.useState(!1);if(le.useEffect(()=>{if(n){if(t.email!==sw){e();return}he(c)}n&&R==="users"&&f(),n&&R==="applications"&&_()},[n,R,c,t]),!n||t.email!==sw)return null;const pe=()=>y.jsxs("div",{className:"bg-[#1a1a1a] p-8 rounded-2xl border border-white/10 overflow-y-auto max-h-[85vh] custom-scrollbar w-full max-w-5xl shadow-2xl flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4 shrink-0",children:[y.jsx("h3",{className:"text-2xl font-display font-bold text-white",children:C!=null&&C.id?"Editar Mtodo":"Nuevo Mtodo"}),y.jsx("button",{onClick:()=>F(null),className:"p-2 hover:bg-white/10 rounded-full",children:y.jsx(ui,{size:20})})]}),y.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Nombre del Mtodo"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none transition-colors",value:(C==null?void 0:C.name)||"",onChange:j=>F({...C,name:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"ID (nico)"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none transition-colors",value:(C==null?void 0:C.id)||"",onChange:j=>F({...C,id:j.target.value}),disabled:!!(C!=null&&C.id)&&i.some(j=>j.id===C.id)})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Descripcin Corta (Tarjeta)"}),y.jsx("textarea",{className:"w-full bg-black border border-white/10 rounded-lg p-3 h-24 focus:border-neonGreen outline-none transition-colors resize-none",value:(C==null?void 0:C.description)||"",onChange:j=>F({...C,description:j.target.value})})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Categora"}),y.jsx("select",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:C==null?void 0:C.category,onChange:j=>F({...C,category:j.target.value}),children:Object.values(or).map(j=>y.jsx("option",{value:j,children:j},j))})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Dificultad"}),y.jsx("select",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:C==null?void 0:C.difficulty,onChange:j=>F({...C,difficulty:j.target.value}),children:Object.values(Or).map(j=>y.jsx("option",{value:j,children:j},j))})]})]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Ganancias Estimadas"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:(C==null?void 0:C.potentialEarnings)||"",onChange:j=>F({...C,potentialEarnings:j.target.value}),placeholder:"$100 - $500 / mes"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Enlace Oficial"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:(C==null?void 0:C.link)||"",onChange:j=>F({...C,link:j.target.value}),placeholder:"https://..."})]})]}),y.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-3",children:"Configuracin de Estado"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${C!=null&&C.isPremium?"bg-proGold border-proGold":"border-gray-500 group-hover:border-white"}`,children:(C==null?void 0:C.isPremium)&&y.jsx(Ur,{size:14,className:"text-black"})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:C==null?void 0:C.isPremium,onChange:j=>F({...C,isPremium:j.target.checked})}),y.jsx("span",{className:`text-sm font-bold ${C!=null&&C.isPremium?"text-proGold":"text-gray-400"}`,children:"Es Premium (Pago)"})]}),y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${C!=null&&C.investmentRequired?"bg-techPurple border-techPurple":"border-gray-500 group-hover:border-white"}`,children:(C==null?void 0:C.investmentRequired)&&y.jsx(Ur,{size:14,className:"text-white"})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:C==null?void 0:C.investmentRequired,onChange:j=>F({...C,investmentRequired:j.target.checked})}),y.jsx("span",{className:"text-sm text-gray-400",children:"Requiere Inversin"})]}),y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${C!=null&&C.verified?"bg-neonGreen border-neonGreen":"border-gray-500 group-hover:border-white"}`,children:(C==null?void 0:C.verified)&&y.jsx(Ur,{size:14,className:"text-black"})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:C==null?void 0:C.verified,onChange:j=>F({...C,verified:j.target.checked})}),y.jsx("span",{className:"text-sm text-gray-400",children:"Verificado GDH"})]})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Contenido HTML (Gua Completa)"}),y.jsx("button",{onClick:()=>Oe(!Ie),className:"flex items-center gap-2 text-xs font-bold text-neonGreen hover:text-white transition-colors",children:Ie?y.jsxs(y.Fragment,{children:[y.jsx($x,{size:14})," VER CDIGO"]}):y.jsxs(y.Fragment,{children:[y.jsx(Fy,{size:14})," PREVISUALIZAR"]})})]}),Ie?y.jsx("div",{className:"w-full bg-[#0a0a0a] border border-white/10 rounded-lg p-6 h-96 overflow-y-auto prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(C==null?void 0:C.content)||'<p class="text-gray-500 italic">Sin contenido...</p>'}}):y.jsxs("div",{className:"relative",children:[y.jsx("textarea",{className:"w-full bg-[#0a0a0a] border border-white/10 rounded-lg p-4 h-96 font-mono text-xs text-gray-300 focus:border-neonGreen outline-none resize-y",value:(C==null?void 0:C.content)||"",onChange:j=>F({...C,content:j.target.value}),placeholder:"<h1>Ttulo</h1><p>Contenido...</p>"}),y.jsx("div",{className:"absolute top-2 right-2 text-[10px] bg-white/10 px-2 py-1 rounded text-gray-500 pointer-events-none",children:"HTML MODE"})]})]})]}),y.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-white/5 shrink-0",children:[y.jsx("button",{onClick:()=>F(null),className:"px-6 py-3 rounded-lg text-gray-400 hover:text-white font-bold transition-colors",children:"Cancelar"}),y.jsxs("button",{disabled:q,onClick:async()=>{if(C!=null&&C.id){se(!0);try{i.find(Le=>Le.id===C.id)?await x(C):await T(C),F(null)}finally{se(!1)}}},className:"px-6 py-3 bg-neonGreen hover:bg-white text-black font-bold rounded-lg shadow-neon transition-all flex items-center gap-2",children:[q&&y.jsx(hi,{className:"animate-spin",size:16}),"Guardar Cambios"]})]})]}),ve=()=>y.jsxs("div",{className:"bg-[#1a1a1a] p-8 rounded-2xl border border-white/10 overflow-y-auto max-h-[85vh] custom-scrollbar w-full max-w-5xl shadow-2xl flex flex-col",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4 shrink-0",children:[y.jsx("h3",{className:"text-2xl font-display font-bold text-white",children:N!=null&&N.id?"Editar Noticia / Curso":"Nueva Noticia"}),y.jsx("button",{onClick:()=>Ee(null),className:"p-2 hover:bg-white/10 rounded-full",children:y.jsx(ui,{size:20})})]}),y.jsxs("div",{className:"space-y-6 flex-1 overflow-y-auto pr-2",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Ttulo del Post"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:(N==null?void 0:N.title)||"",onChange:j=>Ee({...N,title:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"ID (Slug URL)"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:(N==null?void 0:N.id)||"",onChange:j=>Ee({...N,id:j.target.value}),disabled:!!(N!=null&&N.id)&&r.some(j=>j.id===N.id)})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"URL Imagen de Portada"}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("input",{className:"flex-1 bg-black border border-white/10 rounded-lg p-3 focus:border-neonGreen outline-none",value:(N==null?void 0:N.imageUrl)||"",onChange:j=>Ee({...N,imageUrl:j.target.value}),placeholder:"https://..."}),(N==null?void 0:N.imageUrl)&&y.jsx("img",{src:N.imageUrl,className:"h-12 w-20 rounded object-cover border border-white/10"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Resumen (Excerpt)"}),y.jsx("textarea",{className:"w-full bg-black border border-white/10 rounded-lg p-3 h-20 focus:border-neonGreen outline-none resize-none",value:(N==null?void 0:N.excerpt)||"",onChange:j=>Ee({...N,excerpt:j.target.value})})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Categora"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(N==null?void 0:N.category)||"",onChange:j=>Ee({...N,category:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Tiempo Lectura"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(N==null?void 0:N.readTime)||"",onChange:j=>Ee({...N,readTime:j.target.value}),placeholder:"5 min"})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Fecha"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(N==null?void 0:N.date)||"",onChange:j=>Ee({...N,date:j.target.value})})]})]}),y.jsxs("div",{className:"bg-white/5 p-4 rounded-xl border border-white/5",children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-3",children:"Configuracin de Acceso"}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${N!=null&&N.isPremium?"bg-proGold border-proGold":"border-gray-500 group-hover:border-white"}`,children:(N==null?void 0:N.isPremium)&&y.jsx(Ur,{size:14,className:"text-black"})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:N==null?void 0:N.isPremium,onChange:j=>Ee({...N,isPremium:j.target.checked})}),y.jsx("span",{className:`text-sm font-bold ${N!=null&&N.isPremium?"text-proGold":"text-gray-400"}`,children:"Es Premium (Candado)"})]}),y.jsxs("label",{className:"flex items-center gap-3 cursor-pointer group",children:[y.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors ${N!=null&&N.hasApplicationForm?"bg-neonGreen border-neonGreen":"border-gray-500 group-hover:border-white"}`,children:(N==null?void 0:N.hasApplicationForm)&&y.jsx(Ur,{size:14,className:"text-black"})}),y.jsx("input",{type:"checkbox",className:"hidden",checked:N==null?void 0:N.hasApplicationForm,onChange:j=>Ee({...N,hasApplicationForm:j.target.checked})}),y.jsx("span",{className:"text-sm text-gray-400",children:"Tiene Formulario de Aplicacin"})]})]})]}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-center mb-2",children:[y.jsx("label",{className:"text-xs uppercase font-bold text-gray-500",children:"Contenido HTML"}),y.jsx("button",{onClick:()=>Oe(!Ie),className:"flex items-center gap-2 text-xs font-bold text-neonGreen hover:text-white transition-colors",children:Ie?y.jsxs(y.Fragment,{children:[y.jsx($x,{size:14})," VER CDIGO"]}):y.jsxs(y.Fragment,{children:[y.jsx(Fy,{size:14})," PREVISUALIZAR"]})})]}),Ie?y.jsx("div",{className:"w-full bg-[#0a0a0a] border border-white/10 rounded-lg p-6 h-96 overflow-y-auto prose prose-invert prose-sm max-w-none",dangerouslySetInnerHTML:{__html:(N==null?void 0:N.content)||'<p class="text-gray-500 italic">Sin contenido...</p>'}}):y.jsx("div",{className:"relative",children:y.jsx("textarea",{className:"w-full bg-[#0a0a0a] border border-white/10 rounded-lg p-4 h-96 font-mono text-xs text-gray-300 focus:border-neonGreen outline-none resize-y",value:(N==null?void 0:N.content)||"",onChange:j=>Ee({...N,content:j.target.value}),placeholder:"<p>Escribe aqu tu artculo...</p>"})})]})]}),y.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-white/5 shrink-0",children:[y.jsx("button",{onClick:()=>Ee(null),className:"px-6 py-3 rounded-lg text-gray-400 hover:text-white font-bold transition-colors",children:"Cancelar"}),y.jsxs("button",{disabled:q,onClick:async()=>{if(N!=null&&N.id){se(!0);try{r.find(Le=>Le.id===N.id)?await k(N):await V(N),Ee(null)}finally{se(!1)}}},className:"px-6 py-3 bg-neonGreen hover:bg-white text-black font-bold rounded-lg shadow-neon transition-all flex items-center gap-2",children:[q&&y.jsx(hi,{className:"animate-spin",size:16}),"Guardar Noticia"]})]})]}),Me=()=>y.jsxs("div",{className:"bg-[#1a1a1a] p-8 rounded-2xl border border-white/10 overflow-y-auto max-h-[85vh] custom-scrollbar w-full max-w-4xl shadow-2xl",children:[y.jsxs("div",{className:"flex justify-between items-center mb-6 border-b border-white/5 pb-4",children:[y.jsx("h3",{className:"text-2xl font-display font-bold text-white",children:de!=null&&de.id?"Editar Reporte de Estafa":"Nuevo Reporte"}),y.jsx("button",{onClick:()=>G(null),className:"p-2 hover:bg-white/10 rounded-full",children:y.jsx(ui,{size:20})})]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Nombre de la Plataforma"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-danger outline-none",value:(de==null?void 0:de.name)||"",onChange:j=>G({...de,name:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"ID (nico)"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 focus:border-danger outline-none",value:(de==null?void 0:de.id)||"",onChange:j=>G({...de,id:j.target.value}),disabled:!!(de!=null&&de.id)&&l.some(j=>j.id===de.id)})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Tipo (Ej: Ponzi, MLM)"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(de==null?void 0:de.type)||"",onChange:j=>G({...de,type:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Nivel de Riesgo"}),y.jsxs("select",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(de==null?void 0:de.riskLevel)||"High",onChange:j=>G({...de,riskLevel:j.target.value}),children:[y.jsx("option",{value:"Safe",children:"Safe"}),y.jsx("option",{value:"Warning",children:"Warning"}),y.jsx("option",{value:"High",children:"High"}),y.jsx("option",{value:"Critical",children:"Critical"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Estado"}),y.jsxs("select",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(de==null?void 0:de.status)||"SCAM",onChange:j=>G({...de,status:j.target.value}),children:[y.jsx("option",{value:"SCAM",children:"SCAM"}),y.jsx("option",{value:"WARNING",children:"WARNING"}),y.jsx("option",{value:"SUSPICIOUS",children:"SUSPICIOUS"}),y.jsx("option",{value:"LEGIT",children:"LEGIT"})]})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Motivo / Anlisis del Auditor"}),y.jsx("textarea",{className:"w-full bg-black border border-white/10 rounded-lg p-3 h-32 focus:border-danger outline-none resize-none",value:(de==null?void 0:de.reason)||"",onChange:j=>G({...de,reason:j.target.value})})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Fecha Reporte"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3",value:(de==null?void 0:de.dateReported)||new Date().getFullYear().toString(),onChange:j=>G({...de,dateReported:j.target.value})})]}),y.jsxs("div",{className:"flex gap-3 justify-end pt-4 border-t border-white/5",children:[y.jsx("button",{onClick:()=>G(null),className:"px-6 py-3 rounded-lg text-gray-400 hover:text-white font-bold transition-colors",children:"Cancelar"}),y.jsxs("button",{disabled:q,onClick:async()=>{if(de!=null&&de.id){se(!0);try{l.find(Le=>Le.id===de.id)?await z(de):await $(de),G(null)}finally{se(!1)}}},className:"px-6 py-3 bg-danger hover:bg-white text-white hover:text-black font-bold rounded-lg shadow-lg transition-all flex items-center gap-2",children:[q&&y.jsx(hi,{className:"animate-spin",size:16}),"Guardar Reporte"]})]})]})]});return y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-md",onClick:e}),y.jsxs("div",{className:"relative w-full max-w-[95rem] h-[95vh] bg-[#0c0c0c] border border-white/10 rounded-3xl flex overflow-hidden shadow-2xl animate-fadeIn",children:[y.jsxs("div",{className:"w-72 bg-[#080808] border-r border-white/5 flex flex-col p-6",children:[y.jsxs("div",{className:"mb-10 flex items-center gap-3 text-proGold pl-2",children:[y.jsx("div",{className:"bg-proGold/10 p-2 rounded-lg border border-proGold/20",children:y.jsx(Gv,{size:24})}),y.jsxs("div",{children:[y.jsx("span",{className:"font-display font-bold text-xl block text-white",children:"Panel Admin"}),y.jsx("span",{className:"text-[10px] uppercase tracking-widest text-proGold font-bold",children:"Modo Dios"})]})]}),y.jsxs("nav",{className:"space-y-2 flex-1",children:[y.jsxs("button",{onClick:()=>M("overview"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="overview"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(Jx,{size:20})," General"]}),y.jsxs("button",{onClick:()=>M("applications"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="applications"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(fy,{size:20})," Solicitudes"]}),y.jsxs("button",{onClick:()=>M("methods"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="methods"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(Ml,{size:20})," Mtodos"]}),y.jsxs("button",{onClick:()=>M("scams"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="scams"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(tf,{size:20})," Auditora Scams"]}),y.jsxs("button",{onClick:()=>M("blog"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="blog"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(zf,{size:20})," Blog & Noticias"]}),y.jsxs("button",{onClick:()=>M("users"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="users"?"bg-white text-black shadow-lg":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(vf,{size:20})," Usuarios"]}),y.jsx("div",{className:"pt-4 mt-4 border-t border-white/5",children:y.jsxs("button",{onClick:()=>M("settings"),className:`w-full flex items-center gap-4 px-4 py-4 rounded-xl transition-all font-bold ${R==="settings"?"bg-techPurple text-white shadow-purple":"text-gray-500 hover:bg-white/5 hover:text-white"}`,children:[y.jsx(Bf,{size:20})," Configuracin"]})})]}),y.jsxs("div",{className:"pt-6 border-t border-white/5 flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-800 flex items-center justify-center text-white font-bold text-sm",children:t.username.substring(0,2).toUpperCase()}),y.jsxs("div",{className:"overflow-hidden",children:[y.jsx("div",{className:"text-white font-bold text-sm truncate",children:t.username}),y.jsx("div",{className:"text-xs text-gray-600 truncate",children:t.email})]})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col bg-[#121212] relative",children:[y.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 hover:bg-white/10 rounded-full text-gray-500 hover:text-white transition-colors z-10",children:y.jsx(ui,{size:24})}),y.jsxs("div",{className:"p-8 border-b border-white/5 flex justify-between items-center bg-[#121212]",children:[y.jsxs("div",{children:[y.jsxs("h2",{className:"text-3xl font-display font-bold text-white capitalize flex items-center gap-3",children:[R==="overview"&&y.jsx(Jx,{className:"text-proGold"}),R==="applications"&&y.jsx(fy,{className:"text-neonGreen"}),R==="methods"&&y.jsx(Ml,{className:"text-neonGreen"}),R==="blog"&&y.jsx(zf,{className:"text-neonGreen"}),R==="users"&&y.jsx(vf,{className:"text-neonGreen"}),R==="scams"&&y.jsx(tf,{className:"text-danger"}),R==="settings"&&y.jsx(Bf,{className:"text-techPurple"}),R==="overview"?"Panel General":R==="scams"?"Escudo de Auditora":R==="settings"?"Configuracin Global":R]}),y.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Gestin completa sin necesidad de cdigo."})]}),R!=="users"&&R!=="settings"&&R!=="overview"&&R!=="applications"&&y.jsxs("button",{onClick:()=>{R==="methods"?F({}):R==="blog"?Ee({}):R==="scams"&&G({})},className:"bg-proGold hover:bg-white text-black px-6 py-3 rounded-xl font-bold flex items-center gap-2 transition-all shadow-gold hover:scale-105",children:[y.jsx(HM,{size:20})," AADIR NUEVO"]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-8 relative custom-scrollbar bg-[#0f0f0f]",children:[C&&y.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:y.jsx(pe,{})}),N&&y.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:y.jsx(ve,{})}),de&&y.jsx("div",{className:"absolute inset-0 bg-black/80 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:y.jsx(Me,{})}),R==="overview"&&y.jsx("div",{className:"space-y-8",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[y.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500/10 text-blue-500 flex items-center justify-center",children:y.jsx(vf,{size:20})}),y.jsx("div",{className:"text-sm font-bold text-gray-500 uppercase",children:"Total Usuarios"})]}),y.jsx("div",{className:"text-3xl font-bold text-white",children:a.length})]}),y.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-neonGreen/10 text-neonGreen flex items-center justify-center",children:y.jsx(fy,{size:20})}),y.jsx("div",{className:"text-sm font-bold text-gray-500 uppercase",children:"Solicitudes Pendientes"})]}),y.jsx("div",{className:"text-3xl font-bold text-white",children:h.filter(j=>j.status==="pending").length})]}),y.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-green-500/10 text-green-500 flex items-center justify-center",children:y.jsx(Gy,{size:20})}),y.jsx("div",{className:"text-sm font-bold text-gray-500 uppercase",children:"Ingresos Mensuales"})]}),y.jsxs("div",{className:"text-3xl font-bold text-white",children:[(a.filter(j=>j.isPremium).length*parseFloat(c.monthlyPrice)).toFixed(2),c.currencySymbol]})]}),y.jsxs("div",{className:"bg-[#1a1a1a] p-6 rounded-2xl border border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-red-500/10 text-red-500 flex items-center justify-center",children:y.jsx(tf,{size:20})}),y.jsx("div",{className:"text-sm font-bold text-gray-500 uppercase",children:"Estafas Detectadas"})]}),y.jsx("div",{className:"text-3xl font-bold text-white",children:l.length})]})]})}),R==="applications"&&y.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[h.length===0&&y.jsx("div",{className:"text-gray-500 text-center py-10",children:"No hay solicitudes nuevas."}),h.map(j=>y.jsxs("div",{className:"bg-[#181818] p-6 rounded-2xl border border-white/5 group hover:border-neonGreen/30 transition-all",children:[y.jsxs("div",{className:"flex justify-between items-start mb-4",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("h4",{className:"font-bold text-white text-lg",children:j.name}),y.jsx("span",{className:`px-2 py-0.5 rounded text-[10px] font-bold uppercase border ${j.status==="approved"?"bg-neonGreen/10 text-neonGreen border-neonGreen/30":j.status==="rejected"?"bg-danger/10 text-danger border-danger/30":"bg-yellow-500/10 text-yellow-500 border-yellow-500/30"}`,children:j.status})]}),y.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[j.email,"  ",new Date(j.date).toLocaleDateString()]})]}),y.jsx("div",{className:"flex gap-2",children:j.status==="pending"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:()=>J(j.id,"approved"),className:"p-2 bg-neonGreen/10 text-neonGreen rounded-lg hover:bg-neonGreen hover:text-black transition-colors",title:"Aprobar",children:y.jsx(Ur,{size:18})}),y.jsx("button",{onClick:()=>J(j.id,"rejected"),className:"p-2 bg-danger/10 text-danger rounded-lg hover:bg-danger hover:text-white transition-colors",title:"Rechazar",children:y.jsx(ui,{size:18})})]})})]}),y.jsxs("div",{className:"bg-black/30 p-4 rounded-xl border border-white/5 space-y-3",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-[10px] uppercase text-gray-500 font-bold",children:"Curso Solicitado"}),y.jsx("p",{className:"text-gray-300 text-sm font-medium",children:j.courseTitle})]}),y.jsxs("div",{children:[y.jsxs("span",{className:"text-[10px] uppercase text-gray-500 font-bold flex items-center gap-1",children:[y.jsx(jA,{size:10})," Usuario Discord"]}),y.jsx("p",{className:"text-techPurple text-sm font-medium",children:j.discord})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-[10px] uppercase text-gray-500 font-bold",children:"Motivo / Experiencia"}),y.jsx("p",{className:"text-gray-300 text-sm mt-1 leading-relaxed",children:j.reason})]})]})]},j.id))]}),R==="settings"&&y.jsx("div",{className:"max-w-2xl",children:y.jsxs("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-2xl p-8 shadow-2xl",children:[y.jsxs("h3",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[y.jsx(Gy,{className:"text-proGold"})," Precios y Pagos"]}),y.jsxs("div",{className:"space-y-6",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Precio Mensual"}),y.jsxs("div",{className:"relative",children:[y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 pl-10 text-white font-bold text-lg focus:border-proGold outline-none",value:re.monthlyPrice,onChange:j=>he({...re,monthlyPrice:j.target.value})}),y.jsx("span",{className:"absolute left-3 top-3.5 text-gray-500",children:"$"})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Smbolo Moneda"}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 text-white font-bold text-lg focus:border-proGold outline-none",value:re.currencySymbol,onChange:j=>he({...re,currencySymbol:j.target.value})})]})]}),y.jsxs("div",{children:[y.jsx("label",{className:"block text-xs uppercase font-bold text-gray-500 mb-2",children:"Email de Contacto (Footer)"}),y.jsxs("div",{className:"relative",children:[y.jsx(qf,{className:"absolute left-3 top-3.5 text-gray-500",size:18}),y.jsx("input",{className:"w-full bg-black border border-white/10 rounded-lg p-3 pl-10 text-white focus:border-techPurple outline-none",value:re.contactEmail,onChange:j=>he({...re,contactEmail:j.target.value})})]})]}),y.jsx("div",{className:"pt-6 border-t border-white/5 flex justify-end",children:y.jsx("button",{onClick:()=>ie(re),className:"px-8 py-3 bg-white text-black font-bold rounded-lg hover:bg-neonGreen transition-colors shadow-lg",children:"Guardar Configuracin"})})]})]})}),R==="users"&&y.jsxs("div",{className:"space-y-4",children:[y.jsx("div",{className:"flex gap-4 mb-6",children:y.jsxs("div",{className:"relative flex-1 max-w-md",children:[y.jsx(KA,{className:"absolute left-4 top-3.5 text-gray-500",size:18}),y.jsx("input",{placeholder:"Buscar por email o nombre...",className:"w-full bg-[#1a1a1a] border border-white/10 rounded-xl py-3 pl-12 text-white focus:border-neonGreen outline-none transition-colors",value:P,onChange:j=>O(j.target.value)})]})}),y.jsx("div",{className:"bg-[#1a1a1a] border border-white/5 rounded-2xl overflow-hidden shadow-xl",children:y.jsxs("table",{className:"w-full text-left text-sm text-gray-400",children:[y.jsx("thead",{className:"bg-black/40 uppercase font-bold text-xs tracking-wider",children:y.jsxs("tr",{children:[y.jsx("th",{className:"p-4 text-white",children:"Usuario"}),y.jsx("th",{className:"p-4 text-white",children:"Email"}),y.jsx("th",{className:"p-4 text-white",children:"Rol"}),y.jsx("th",{className:"p-4 text-white",children:"Estado"}),y.jsx("th",{className:"p-4 text-white",children:"Acciones"})]})}),y.jsx("tbody",{className:"divide-y divide-white/5",children:a.filter(j=>j.email.toLowerCase().includes(P.toLowerCase())).map(j=>{var Le;return y.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[y.jsxs("td",{className:"p-4 font-bold text-white flex items-center gap-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center text-xs",children:j.username[0]}),j.username]}),y.jsx("td",{className:"p-4",children:j.email}),y.jsx("td",{className:"p-4",children:y.jsxs("select",{className:`bg-black border border-white/10 rounded-lg p-2 text-xs font-bold outline-none cursor-pointer ${j.role==="admin"?"text-red-400 border-red-900/50":"text-gray-300"}`,value:j.role||"user",onChange:It=>Z(j.uid,It.target.value,j.isPremium||!1),children:[y.jsx("option",{value:"user",children:"Usuario"}),y.jsx("option",{value:"moderator",children:"Moderador"}),y.jsx("option",{value:"admin",children:"Administrador"})]})}),y.jsx("td",{className:"p-4",children:y.jsx("button",{onClick:()=>Z(j.uid,j.role||"user",!j.isPremium),className:`px-3 py-1 rounded-full text-xs font-bold transition-all ${j.isPremium?"bg-proGold text-black shadow-gold":"bg-white/5 text-gray-500 hover:bg-white/10"}`,children:j.isPremium?"PRO ACTIVO":"GRATIS"})}),y.jsxs("td",{className:"p-4 text-gray-600 font-mono text-xs",children:[(Le=j.uid)==null?void 0:Le.slice(0,8),"..."]})]},j.uid||j.email)})})]})})]}),R==="scams"&&y.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[l.map(j=>y.jsxs("div",{className:"bg-[#181818] p-5 rounded-2xl border border-white/5 flex justify-between items-center group hover:border-danger/20 hover:bg-[#1f1f1f] transition-all",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center ${j.status==="SCAM"?"bg-danger/20 text-danger border border-danger/20":"bg-neonGreen/20 text-neonGreen border border-neonGreen/20"}`,children:y.jsx(tf,{size:20})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("h4",{className:"font-bold text-white text-xl mb-1",children:j.name}),y.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded border ${j.riskLevel==="Critical"?"text-danger border-danger":"text-gray-400 border-gray-600"}`,children:j.riskLevel})]}),y.jsxs("div",{className:"flex gap-3 text-xs font-medium text-gray-500",children:[y.jsx("span",{children:j.type}),y.jsxs("span",{className:"text-gray-600",children:["ID: ",j.id]})]})]})]}),y.jsxs("div",{className:"flex gap-3 opacity-50 group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>G(j),className:"p-3 bg-white/5 rounded-xl hover:bg-white hover:text-black transition-colors border border-white/5",children:y.jsx(py,{size:20})}),y.jsx("button",{onClick:()=>H(j.id),className:"p-3 bg-danger/10 text-danger rounded-xl hover:bg-danger hover:text-white transition-colors border border-danger/20",children:y.jsx(yf,{size:20})})]})]},j.id)),l.length===0&&y.jsx("div",{className:"text-gray-500 text-center py-10",children:"Base de datos vaca."})]}),R==="methods"&&y.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.map(j=>y.jsxs("div",{className:"bg-[#181818] p-5 rounded-2xl border border-white/5 flex justify-between items-center group hover:border-white/20 hover:bg-[#1f1f1f] transition-all",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsx("div",{className:`w-1.5 h-16 rounded-full ${j.isPremium?"bg-proGold shadow-[0_0_15px_rgba(251,191,36,0.5)]":"bg-neonGreen shadow-neon"}`}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-white text-xl mb-1",children:j.name}),y.jsxs("div",{className:"flex gap-3 text-xs font-medium text-gray-500",children:[y.jsx("span",{className:"bg-white/5 px-2 py-1 rounded",children:j.category}),y.jsx("span",{className:"bg-white/5 px-2 py-1 rounded",children:j.difficulty}),j.isPremium&&y.jsxs("span",{className:"text-proGold flex items-center gap-1",children:[y.jsx(na,{size:12})," PRO"]})]})]})]}),y.jsxs("div",{className:"flex gap-3 opacity-50 group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>F(j),className:"p-3 bg-white/5 rounded-xl hover:bg-white hover:text-black transition-colors border border-white/5",children:y.jsx(py,{size:20})}),y.jsx("button",{onClick:()=>A(j.id),className:"p-3 bg-danger/10 text-danger rounded-xl hover:bg-danger hover:text-white transition-colors border border-danger/20",children:y.jsx(yf,{size:20})})]})]},j.id))}),R==="blog"&&y.jsx("div",{className:"grid grid-cols-1 gap-4",children:r.map(j=>y.jsxs("div",{className:"bg-[#181818] p-5 rounded-2xl border border-white/5 flex justify-between items-center group hover:border-white/20 hover:bg-[#1f1f1f] transition-all",children:[y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"relative h-16 w-24 shrink-0",children:[y.jsx("img",{src:j.imageUrl,className:"w-full h-full object-cover rounded-lg",alt:""}),j.isPremium&&y.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 bg-proGold rounded-full shadow-lg"})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-white text-lg mb-1",children:j.title}),y.jsxs("div",{className:"flex gap-3 text-xs font-medium text-gray-500",children:[y.jsx("span",{className:"bg-white/5 px-2 py-1 rounded",children:j.category}),j.hasApplicationForm&&y.jsx("span",{className:"text-neonGreen",children:" Formulario Activo"})]})]})]}),y.jsxs("div",{className:"flex gap-3 opacity-50 group-hover:opacity-100 transition-opacity",children:[y.jsx("button",{onClick:()=>Ee(j),className:"p-3 bg-white/5 rounded-xl hover:bg-white hover:text-black transition-colors border border-white/5",children:y.jsx(py,{size:20})}),y.jsx("button",{onClick:()=>L(j.id),className:"p-3 bg-danger/10 text-danger rounded-xl hover:bg-danger hover:text-white transition-colors border border-danger/20",children:y.jsx(yf,{size:20})})]})]},j.id))})]})]})]})]})},U6=({user:n,onLoginClick:e,onLogout:t,onOpenSubscription:i})=>{const[r,a]=le.useState(!1),[l,c]=le.useState(!1);return y.jsxs(y.Fragment,{children:[y.jsxs("header",{className:"fixed top-0 w-full z-50 glass border-b border-white/5 backdrop-blur-xl bg-black/60 shadow-lg",children:[y.jsxs("div",{className:"container mx-auto px-6 h-20 flex items-center justify-between",children:[y.jsxs("a",{href:"#",className:"text-2xl font-display font-bold text-white shrink-0 hover:opacity-80 transition-opacity relative z-20",children:["GD",y.jsx("span",{className:"text-neonGreen",children:"Hispano"}),"."]}),(n==null?void 0:n.role)==="admin"&&y.jsxs("button",{onClick:()=>c(!0),className:"hidden md:flex items-center gap-2 px-3 py-1 bg-red-900/30 text-red-400 border border-red-900/50 rounded-full text-xs font-bold hover:bg-red-900/50 hover:text-white transition-all absolute left-32 top-1/2 -translate-y-1/2",children:[y.jsx(Bf,{size:12})," PANEL ADMIN"]}),y.jsxs("nav",{className:"hidden md:flex items-center gap-1 absolute left-1/2 -translate-x-1/2 bg-black/40 p-1.5 rounded-full border border-white/5 backdrop-blur-md",children:[y.jsxs("a",{href:"#home",className:"relative flex items-center gap-2 px-4 py-2 rounded-full transition-all group overflow-hidden hover:bg-white/5",children:[y.jsx("div",{className:"absolute inset-0 bg-neonGreen/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx(Kx,{size:18,className:"text-gray-400 group-hover:text-neonGreen group-hover:scale-110 transition-transform relative z-10 duration-300"}),y.jsx("span",{className:"text-sm font-medium text-gray-400 group-hover:text-white relative z-10 transition-colors",children:"Inicio"})]}),y.jsxs("a",{href:"#directory",className:"relative flex items-center gap-2 px-4 py-2 rounded-full transition-all group overflow-hidden hover:bg-white/5",children:[y.jsx("div",{className:"absolute inset-0 bg-proGold/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx(Ml,{size:18,className:"text-gray-400 group-hover:text-proGold group-hover:scale-110 transition-transform relative z-10 duration-300"}),y.jsx("span",{className:"text-sm font-medium text-gray-400 group-hover:text-white relative z-10 transition-colors",children:"Mtodos"})]}),y.jsxs("a",{href:"#wall-of-shame",className:"relative flex items-center gap-2 px-4 py-2 rounded-full transition-all group overflow-hidden hover:bg-white/5",children:[y.jsx("div",{className:"absolute inset-0 bg-danger/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx(Ff,{size:18,className:"text-gray-400 group-hover:text-danger group-hover:scale-110 transition-transform relative z-10 duration-300"}),y.jsx("span",{className:"text-sm font-medium text-gray-400 group-hover:text-white relative z-10 transition-colors",children:"Estado de Sitios"})]}),y.jsxs("a",{href:"#guides",className:"relative flex items-center gap-2 px-4 py-2 rounded-full transition-all group overflow-hidden hover:bg-white/5",children:[y.jsx("div",{className:"absolute inset-0 bg-techPurple/10 blur-xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),y.jsx(zf,{size:18,className:"text-gray-400 group-hover:text-techPurple group-hover:scale-110 transition-transform relative z-10 duration-300"}),y.jsx("span",{className:"text-sm font-medium text-gray-400 group-hover:text-white relative z-10 transition-colors",children:"Blog"})]})]}),y.jsxs("div",{className:"hidden md:flex items-center gap-4 relative z-20",children:[!(n!=null&&n.isPremium)&&y.jsxs("button",{onClick:i,className:"group relative px-5 py-2 bg-gradient-to-r from-proGold to-yellow-500 text-black font-bold text-xs rounded-full shadow-gold hover:shadow-[0_0_20px_rgba(251,191,36,0.5)] hover:scale-105 transition-all duration-300 flex items-center gap-2 overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 w-full h-full bg-white/30 -translate-x-full group-hover:animate-[shimmer_1s_infinite]"}),y.jsx(na,{size:14,fill:"currentColor"})," HAZTE PRO"]}),n?y.jsxs("div",{className:"flex items-center gap-3 pl-2",children:[y.jsxs("div",{className:"flex flex-col text-right leading-none",children:[y.jsx("span",{className:"text-white font-bold text-sm",children:n.username}),y.jsx("span",{className:`text-[10px] uppercase font-bold tracking-wide ${n.isPremium?"text-proGold drop-shadow-sm":"text-gray-500"}`,children:n.role==="admin"?"ADMINISTRADOR":n.isPremium?"Miembro PRO":"Plan Gratuito"})]}),y.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${n.isPremium?"bg-proGold/10 border-proGold text-proGold":"bg-white/5 border-white/10 text-gray-400"}`,children:n.role==="admin"?y.jsx(Gv,{size:18}):y.jsx(QA,{size:18})}),y.jsx("button",{onClick:t,className:"w-10 h-10 rounded-full flex items-center justify-center hover:bg-white/10 text-gray-500 hover:text-white transition-colors",children:y.jsx(DM,{size:18})})]}):y.jsx("div",{className:"flex items-center gap-3",children:y.jsxs("button",{onClick:e,className:"flex items-center gap-2 px-5 py-2 rounded-full border border-white/10 bg-white/5 hover:bg-white/10 hover:border-white/20 text-white text-sm font-medium transition-all group",children:[y.jsx(RM,{size:16,className:"text-neonGreen group-hover:text-white transition-colors"})," Entrar"]})})]}),y.jsx("button",{className:"md:hidden text-white p-2 relative z-20",onClick:()=>a(!r),children:r?y.jsx(ui,{size:24}):y.jsx(kM,{size:24})})]}),r&&y.jsxs("div",{className:"md:hidden glass border-b border-white/10 absolute w-full left-0 top-20 p-6 flex flex-col gap-6 animate-fadeIn bg-[#0a0a0a]",children:[n&&y.jsx("div",{className:"flex items-center gap-3 pb-4 border-b border-white/10",children:y.jsx("div",{className:"text-white font-bold flex items-center gap-2 text-lg",children:n.username})}),(n==null?void 0:n.role)==="admin"&&y.jsxs("button",{onClick:()=>{a(!1),c(!0)},className:"w-full py-3 bg-red-900/30 text-red-400 font-bold rounded-xl border border-red-900 flex items-center justify-center gap-2",children:[y.jsx(Bf,{size:16})," ABRIR PANEL ADMIN"]}),y.jsxs("div",{className:"flex flex-col gap-2 text-lg",children:[y.jsxs("a",{href:"#home",className:"flex items-center gap-3 text-gray-300 p-3 rounded-lg hover:bg-white/5",onClick:()=>a(!1),children:[y.jsx(Kx,{size:20,className:"text-neonGreen"})," Inicio"]}),y.jsxs("a",{href:"#directory",className:"flex items-center gap-3 text-gray-300 p-3 rounded-lg hover:bg-white/5",onClick:()=>a(!1),children:[y.jsx(Ml,{size:20,className:"text-proGold"})," Mtodos"]}),y.jsxs("a",{href:"#wall-of-shame",className:"flex items-center gap-3 text-danger p-3 rounded-lg hover:bg-danger/10",onClick:()=>a(!1),children:[y.jsx(Ff,{size:20})," Estado de Sitios"]}),y.jsxs("a",{href:"#guides",className:"flex items-center gap-3 text-gray-300 p-3 rounded-lg hover:bg-white/5",onClick:()=>a(!1),children:[y.jsx(zf,{size:20,className:"text-techPurple"})," Blog"]})]}),n?y.jsx("button",{onClick:()=>{a(!1),t()},className:"w-full py-3 bg-red-500/10 text-red-500 rounded-xl font-bold",children:"Cerrar Sesin"}):y.jsx("button",{onClick:()=>{a(!1),e()},className:"w-full py-3 bg-white/10 border border-white/10 rounded-xl text-white font-bold",children:"Iniciar Sesin"})]})]}),n&&y.jsx(O6,{isOpen:l,onClose:()=>c(!1),currentUser:n})]})},G6=()=>{const n=e=>{e.preventDefault();const t=document.getElementById("wall-of-shame");if(t){const a=t.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:a,behavior:"smooth"})}};return y.jsxs("section",{id:"home",className:"relative min-h-[85vh] flex items-center justify-center overflow-hidden pt-20",children:[y.jsx("div",{className:"absolute inset-0 bg-grid animate-grid opacity-20 pointer-events-none"}),y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-gradient-to-b from-transparent via-[#050505]/80 to-[#050505] z-0"}),y.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-neonGreen/10 rounded-full blur-[100px] animate-float"}),y.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-techPurple/10 rounded-full blur-[100px] animate-float",style:{animationDelay:"2s"}}),y.jsx("div",{className:"container mx-auto px-6 relative z-10",children:y.jsxs("div",{className:"flex flex-col items-center text-center max-w-5xl mx-auto",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-1.5 rounded-full border border-white/10 bg-white/5 backdrop-blur-md mb-8 animate-fadeIn",children:[y.jsxs("span",{className:"relative flex h-2 w-2",children:[y.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-neonGreen opacity-75"}),y.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-neonGreen"})]}),y.jsx("span",{className:"text-gray-300 text-xs font-bold tracking-wider uppercase",children:"Central de Inteligencia Financiera v2.0"})]}),y.jsxs("h1",{className:"font-display text-6xl md:text-8xl font-bold leading-none mb-6 text-white tracking-tight drop-shadow-2xl",children:["Deja de ",y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-gray-500 to-gray-400",children:"Arriesgar"}),".",y.jsx("br",{}),"Empieza a ",y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-neonGreen to-emerald-400",children:"Facturar"}),"."]}),y.jsxs("p",{className:"text-gray-400 text-lg md:text-xl max-w-2xl mx-auto mb-10 font-light leading-relaxed",children:["La nica plataforma hispana que audita mtodos de ingresos con IA.",y.jsx("br",{className:"hidden md:block"}),"Filtrar el ruido es el primer paso para construir riqueza."]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 w-full sm:w-auto",children:[y.jsxs("a",{href:"https://discord.gg/xrZwFPtN",target:"_blank",rel:"noopener noreferrer",className:"group px-8 py-4 bg-[#5865F2] hover:bg-[#4752C4] text-white font-bold text-lg rounded-full shadow-[0_0_30px_rgba(88,101,242,0.3)] hover:shadow-[0_0_50px_rgba(88,101,242,0.5)] transition-all flex items-center justify-center gap-2 hover:-translate-y-1",children:[y.jsx(LM,{size:20,fill:"currentColor",className:"opacity-80"}),"UNIRME A DISCORD"]}),y.jsxs("a",{href:"#wall-of-shame",onClick:n,className:"cursor-pointer px-8 py-4 bg-white/5 text-white font-medium text-lg rounded-full hover:bg-white/10 border border-white/10 transition-all flex items-center justify-center gap-2 backdrop-blur-md hover:border-white/30",children:[y.jsx(Hf,{size:20}),"AUDITAR URL"]})]}),y.jsxs("div",{className:"mt-20 pt-8 border-t border-white/5 flex flex-wrap justify-center gap-8 md:gap-16 text-gray-500 grayscale opacity-70 hover:grayscale-0 hover:opacity-100 transition-all duration-500",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(vf,{size:18})," +2,400 Miembros"]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Hf,{size:18})," +150 Auditoras"]}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Ip,{size:18})," Actualizado 24/7"]})]})]})})]})},F6=Object.prototype.toString,z6=n=>F6.call(n)==="[object Error]",q6=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed","fetch failed","terminated"," A network error occurred.","Network connection lost"]);function B6(n){if(!(n&&z6(n)&&n.name==="TypeError"&&typeof n.message=="string"))return!1;const{message:t,stack:i}=n;return t==="Load failed"?i===void 0||"__sentry_captured__"in n:t.startsWith("error sending request for url")?!0:q6.has(t)}function H6(n){if(typeof n=="number"){if(n<0)throw new TypeError("Expected `retries` to be a non-negative number.");if(Number.isNaN(n))throw new TypeError("Expected `retries` to be a valid number or Infinity, got NaN.")}else if(n!==void 0)throw new TypeError("Expected `retries` to be a number or Infinity.")}function df(n,e,{min:t=0,allowInfinity:i=!1}={}){if(e!==void 0){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected \`${n}\` to be a number${i?" or Infinity":""}.`);if(!i&&!Number.isFinite(e))throw new TypeError(`Expected \`${n}\` to be a finite number.`);if(e<t)throw new TypeError(`Expected \`${n}\` to be  ${t}.`)}}class UR extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}function j6(n,e){const t=Math.max(1,n+1),i=e.randomize?Math.random()+1:1;let r=Math.round(i*e.minTimeout*e.factor**(t-1));return r=Math.min(r,e.maxTimeout),r}function ow(n,e){return Number.isFinite(e)?e-(performance.now()-n):e}async function $6({error:n,attemptNumber:e,retriesConsumed:t,startTime:i,options:r}){var A,V,k,L;const a=n instanceof Error?n:new TypeError(`Non-error was thrown: "${n}". You should only throw errors.`);if(a instanceof UR)throw a.originalError;const l=Number.isFinite(r.retries)?Math.max(0,r.retries-t):r.retries,c=r.maxRetryTime??Number.POSITIVE_INFINITY,h=Object.freeze({error:a,attemptNumber:e,retriesLeft:l,retriesConsumed:t});if(await r.onFailedAttempt(h),ow(i,c)<=0)throw a;const f=await r.shouldConsumeRetry(h),_=ow(i,c);if(_<=0||l<=0)throw a;if(a instanceof TypeError&&!B6(a)){if(f)throw a;return(A=r.signal)==null||A.throwIfAborted(),!1}if(!await r.shouldRetry(h))throw a;if(!f)return(V=r.signal)==null||V.throwIfAborted(),!1;const T=j6(t,r),x=Math.min(T,_);return(k=r.signal)==null||k.throwIfAborted(),x>0&&await new Promise(($,z)=>{var ie,J;const H=()=>{var R;clearTimeout(Z),(R=r.signal)==null||R.removeEventListener("abort",H),z(r.signal.reason)},Z=setTimeout(()=>{var R;(R=r.signal)==null||R.removeEventListener("abort",H),$()},x);r.unref&&((ie=Z.unref)==null||ie.call(Z)),(J=r.signal)==null||J.addEventListener("abort",H,{once:!0})}),(L=r.signal)==null||L.throwIfAborted(),!0}async function K6(n,e={}){var a,l,c;if(e={...e},H6(e.retries),Object.hasOwn(e,"forever"))throw new Error("The `forever` option is no longer supported. For many use-cases, you can set `retries: Infinity` instead.");e.retries??(e.retries=10),e.factor??(e.factor=2),e.minTimeout??(e.minTimeout=1e3),e.maxTimeout??(e.maxTimeout=Number.POSITIVE_INFINITY),e.maxRetryTime??(e.maxRetryTime=Number.POSITIVE_INFINITY),e.randomize??(e.randomize=!1),e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.shouldConsumeRetry??(e.shouldConsumeRetry=()=>!0),df("factor",e.factor,{min:0,allowInfinity:!1}),df("minTimeout",e.minTimeout,{min:0,allowInfinity:!1}),df("maxTimeout",e.maxTimeout,{min:0,allowInfinity:!0}),df("maxRetryTime",e.maxRetryTime,{min:0,allowInfinity:!0}),e.factor>0||(e.factor=1),(a=e.signal)==null||a.throwIfAborted();let t=0,i=0;const r=performance.now();for(;!Number.isFinite(e.retries)||i<=e.retries;){t++;try{(l=e.signal)==null||l.throwIfAborted();const h=await n(t);return(c=e.signal)==null||c.throwIfAborted(),h}catch(h){await $6({error:h,attemptNumber:t,retriesConsumed:i,startTime:r,options:e})&&i++}}throw new Error("Retry attempts exhausted without throwing an error.")}var J6={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Y6,Q6;function W6(){return{geminiUrl:Y6,vertexUrl:Q6}}function X6(n,e,t,i){var r,a;if(!(n!=null&&n.baseUrl)){const l=W6();return e?(r=l.vertexUrl)!==null&&r!==void 0?r:t:(a=l.geminiUrl)!==null&&a!==void 0?a:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Wr{}function _e(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const a=e[r];return a!=null?String(a):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function m(n,e,t){for(let a=0;a<e.length-1;a++){const l=e[a];if(l.endsWith("[]")){const c=l.slice(0,-2);if(!(c in n))if(Array.isArray(t))n[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${l}`);if(Array.isArray(n[c])){const h=n[c];if(Array.isArray(t))for(let f=0;f<h.length;f++){const _=h[f];m(_,e.slice(a+1),t[f])}else for(const f of h)m(f,e.slice(a+1),t)}return}else if(l.endsWith("[0]")){const c=l.slice(0,-3);c in n||(n[c]=[{}]);const h=n[c];m(h[0],e.slice(a+1),t);return}(!n[l]||typeof n[l]!="object")&&(n[l]={}),n=n[l]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else i==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(n,t):n[i]=t}function p(n,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return n;for(let i=0;i<e.length;i++){if(typeof n!="object"||n===null)return t;const r=e[i];if(r.endsWith("[]")){const a=r.slice(0,-2);if(a in n){const l=n[a];return Array.isArray(l)?l.map(c=>p(c,e.slice(i+1),t)):t}else return t}else n=n[r]}return n}catch(i){if(i instanceof TypeError)return t;throw i}}function Z6(n,e){for(const[t,i]of Object.entries(e)){const r=t.split("."),a=i.split("."),l=new Set;let c=-1;for(let h=0;h<r.length;h++)if(r[h]==="*"){c=h;break}if(c!==-1&&a.length>c)for(let h=c;h<a.length;h++){const f=a[h];f!=="*"&&!f.endsWith("[]")&&!f.endsWith("[0]")&&l.add(f)}bv(n,r,a,0,l)}}function bv(n,e,t,i,r){if(i>=e.length||typeof n!="object"||n===null)return;const a=e[i];if(a.endsWith("[]")){const l=a.slice(0,-2),c=n;if(l in c&&Array.isArray(c[l]))for(const h of c[l])bv(h,e,t,i+1,r)}else if(a==="*"){if(typeof n=="object"&&n!==null&&!Array.isArray(n)){const l=n,c=Object.keys(l).filter(f=>!f.startsWith("_")&&!r.has(f)),h={};for(const f of c)h[f]=l[f];for(const[f,_]of Object.entries(h)){const T=[];for(const x of t.slice(i))x==="*"?T.push(f):T.push(x);m(l,T,_)}for(const f of c)delete l[f]}}else{const l=n;a in l&&bv(l[a],e,t,i+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function n_(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function eG(n){const e={},t=p(n,["operationName"]);t!=null&&m(e,["operationName"],t);const i=p(n,["resourceName"]);return i!=null&&m(e,["_url","resourceName"],i),e}function tG(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response","generateVideoResponse"]);return l!=null&&m(e,["response"],iG(l)),e}function nG(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],rG(l)),e}function iG(n){const e={},t=p(n,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>sG(l))),m(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function rG(n){const e={},t=p(n,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(l=>oG(l))),m(e,["generatedVideos"],a)}const i=p(n,["raiMediaFilteredCount"]);i!=null&&m(e,["raiMediaFilteredCount"],i);const r=p(n,["raiMediaFilteredReasons"]);return r!=null&&m(e,["raiMediaFilteredReasons"],r),e}function sG(n){const e={},t=p(n,["video"]);return t!=null&&m(e,["video"],hG(t)),e}function oG(n){const e={},t=p(n,["_self"]);return t!=null&&m(e,["video"],fG(t)),e}function aG(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function lG(n){const e={},t=p(n,["operationName"]);return t!=null&&m(e,["_url","operationName"],t),e}function uG(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],cG(l)),e}function cG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function GR(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],dG(l)),e}function dG(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function hG(n){const e={},t=p(n,["uri"]);t!=null&&m(e,["uri"],t);const i=p(n,["encodedVideo"]);i!=null&&m(e,["videoBytes"],n_(i));const r=p(n,["encoding"]);return r!=null&&m(e,["mimeType"],r),e}function fG(n){const e={},t=p(n,["gcsUri"]);t!=null&&m(e,["uri"],t);const i=p(n,["bytesBase64Encoded"]);i!=null&&m(e,["videoBytes"],n_(i));const r=p(n,["mimeType"]);return r!=null&&m(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var aw;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(aw||(aw={}));var lw;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(lw||(lw={}));var uw;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(uw||(uw={}));var Bs;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Bs||(Bs={}));var cw;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cw||(cw={}));var dw;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(dw||(dw={}));var hw;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(hw||(hw={}));var fw;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(fw||(fw={}));var pw;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(pw||(pw={}));var mw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(mw||(mw={}));var gw;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(gw||(gw={}));var yw;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(yw||(yw={}));var vw;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(vw||(vw={}));var _w;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(_w||(_w={}));var Ew;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Ew||(Ew={}));var Tw;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Tw||(Tw={}));var xw;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(xw||(xw={}));var bw;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(bw||(bw={}));var Sw;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Sw||(Sw={}));var ww;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ww||(ww={}));var Aw;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Aw||(Aw={}));var Tp;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(Tp||(Tp={}));var Iw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(Iw||(Iw={}));var Cw;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Cw||(Cw={}));var Rw;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Rw||(Rw={}));var Sv;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(Sv||(Sv={}));var Nw;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(Nw||(Nw={}));var Dw;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(Dw||(Dw={}));var wv;(function(n){n.COLLECTION="COLLECTION"})(wv||(wv={}));var Mw;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Mw||(Mw={}));var Pw;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Pw||(Pw={}));var kw;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(kw||(kw={}));var Vw;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Vw||(Vw={}));var Lw;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(Lw||(Lw={}));var Ow;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Ow||(Ow={}));var Uw;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Uw||(Uw={}));var Gw;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Gw||(Gw={}));var Fw;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(Fw||(Fw={}));var zw;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(zw||(zw={}));var qw;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(qw||(qw={}));var Bw;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Bw||(Bw={}));var Hw;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(Hw||(Hw={}));var jw;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING",n.DISTILLATION="DISTILLATION"})(jw||(jw={}));var $w;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})($w||($w={}));var Kw;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Kw||(Kw={}));var Jw;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED",n.REGISTERED="REGISTERED"})(Jw||(Jw={}));var Yw;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Yw||(Yw={}));var Qw;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Qw||(Qw={}));var Ww;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ww||(Ww={}));var Xw;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.ACTIVITY_START="ACTIVITY_START",n.ACTIVITY_END="ACTIVITY_END"})(Xw||(Xw={}));var Zw;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Zw||(Zw={}));var eA;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(eA||(eA={}));var tA;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(tA||(tA={}));var nA;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(nA||(nA={}));var iA;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(iA||(iA={}));var rA;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(rA||(rA={}));var xl;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(xl||(xl={}));class Av{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class wc{get text(){var e,t,i,r,a,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let f="",_=!1;const T=[];for(const x of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[A,V]of Object.entries(x))A!=="text"&&A!=="thought"&&A!=="thoughtSignature"&&(V!==null||V!==void 0)&&T.push(A);if(typeof x.text=="string"){if(typeof x.thought=="boolean"&&x.thought)continue;_=!0,f+=x.text}}return T.length>0&&console.warn(`there are non-text parts ${T} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),_?f:void 0}get data(){var e,t,i,r,a,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let f="";const _=[];for(const T of(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)!==null&&h!==void 0?h:[]){for(const[x,A]of Object.entries(T))x!=="inlineData"&&(A!==null||A!==void 0)&&_.push(x);T.inlineData&&typeof T.inlineData.data=="string"&&(f+=atob(T.inlineData.data))}return _.length>0&&console.warn(`there are non-data parts ${_} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),f.length>0?btoa(f):void 0}get functionCalls(){var e,t,i,r,a,l,c,h;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const f=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(_=>_.functionCall).map(_=>_.functionCall).filter(_=>_!==void 0);if((f==null?void 0:f.length)!==0)return f}get executableCode(){var e,t,i,r,a,l,c,h,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const _=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(T=>T.executableCode).map(T=>T.executableCode).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(f=_==null?void 0:_[0])===null||f===void 0?void 0:f.code}get codeExecutionResult(){var e,t,i,r,a,l,c,h,f;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const _=(h=(c=(l=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content)===null||c===void 0?void 0:c.parts)===null||h===void 0?void 0:h.filter(T=>T.codeExecutionResult).map(T=>T.codeExecutionResult).filter(T=>T!==void 0);if((_==null?void 0:_.length)!==0)return(f=_==null?void 0:_[0])===null||f===void 0?void 0:f.output}}class sA{}class oA{}class pG{}class mG{}class gG{}class yG{}class aA{}class lA{}class uA{}class vG{}class xp{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new xp;let r;const a=e;return t?r=nG(a):r=tG(a),Object.assign(i,r),i}}class cA{}class dA{}class hA{}class fA{}class _G{}class EG{}class TG{}class i_{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new i_,a=uG(e);return Object.assign(i,a),i}}class xG{}class bG{}class SG{}class wG{}class pA{}class AG{get text(){var e,t,i;let r="",a=!1;const l=[];for(const c of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[h,f]of Object.entries(c))h!=="text"&&h!=="thought"&&f!==null&&l.push(h);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,r+=c.text}}return l.length>0&&console.warn(`there are non-text parts ${l} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?r:void 0}get data(){var e,t,i;let r="";const a=[];for(const l of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,h]of Object.entries(l))c!=="inlineData"&&h!==null&&a.push(c);l.inlineData&&typeof l.inlineData.data=="string"&&(r+=atob(l.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class IG{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class r_{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const i=new r_,a=GR(e);return Object.assign(i,a),i}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Xe(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function FR(n,e){const t=Xe(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function zR(n){return Array.isArray(n)?n.map(e=>bp(e)):[bp(n)]}function bp(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function qR(n){const e=bp(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function BR(n){const e=bp(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function mA(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function HR(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>mA(e)):[mA(n)]}function Iv(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function gA(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function yA(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function gn(n){if(n==null)throw new Error("ContentUnion is required");return Iv(n)?n:{role:"user",parts:HR(n)}}function s_(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=gn(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=gn(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>gn(t)):[gn(e)]}function mi(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(gA(n)||yA(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[gn(n)]}const e=[],t=[],i=Iv(n[0]);for(const r of n){const a=Iv(r);if(a!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(r);else{if(gA(r)||yA(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:HR(t)}),e}function CG(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(Bs).includes(t[0].toUpperCase())?t[0].toUpperCase():Bs.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(Bs).includes(i.toUpperCase())?i.toUpperCase():Bs.TYPE_UNSPECIFIED})}}function Nl(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=n.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,n=a[1]):a[1].type==="null"&&(e.nullable=!0,n=a[0])),n.type instanceof Array&&CG(n.type,e);for(const[l,c]of Object.entries(n))if(c!=null)if(l=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(Bs).includes(c.toUpperCase())?c.toUpperCase():Bs.TYPE_UNSPECIFIED}else if(t.includes(l))e[l]=Nl(c);else if(i.includes(l)){const h=[];for(const f of c){if(f.type=="null"){e.nullable=!0;continue}h.push(Nl(f))}e[l]=h}else if(r.includes(l)){const h={};for(const[f,_]of Object.entries(c))h[f]=Nl(_);e[l]=h}else{if(l==="additionalProperties")continue;e[l]=c}return e}function o_(n){return Nl(n)}function a_(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function l_(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function lu(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Nl(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Nl(e.response));return n}function uu(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function RG(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function Xr(n,e){if(typeof e!="string")throw new Error("name must be a string");return RG(n,e,"cachedContents")}function jR(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function ao(n){return n_(n)}function NG(n){return n!=null&&typeof n=="object"&&"name"in n}function DG(n){return n!=null&&typeof n=="object"&&"video"in n}function MG(n){return n!=null&&typeof n=="object"&&"uri"in n}function $R(n){var e;let t;if(NG(n)&&(t=n.name),!(MG(n)&&(t=n.uri,t===void 0))&&!(DG(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function KR(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function JR(n){for(const e of["models","tunedModels","publisherModels"])if(PG(n,e))return n[e];return[]}function PG(n,e){return n!==null&&typeof n=="object"&&e in n}function kG(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(i.responseJsonSchema=t.outputSchema),e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function VG(n,e={}){const t=[],i=new Set;for(const r of n){const a=r.name;if(i.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);i.add(a);const l=kG(r,e);l.functionDeclarations&&t.push(...l.functionDeclarations)}return{functionDeclarations:t}}function YR(n,e){let t;if(typeof e=="string")if(n.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(n.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const i=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,r=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(n.isVertexAI()){if(r>0||i!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(i>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function LG(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function QR(n){if(typeof n!="object"||n===null)return{};const e=n,t=e.inlinedResponses;if(typeof t!="object"||t===null)return n;const r=t.inlinedResponses;if(!Array.isArray(r)||r.length===0)return n;let a=!1;for(const l of r){if(typeof l!="object"||l===null)continue;const h=l.response;if(typeof h!="object"||h===null)continue;if(h.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),n}function cu(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function WR(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OG(n){const e={},t=p(n,["responsesFile"]);t!=null&&m(e,["fileName"],t);const i=p(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>yF(l))),m(e,["inlinedResponses"],a)}const r=p(n,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["inlinedEmbedContentResponses"],a)}return e}function UG(n){const e={},t=p(n,["predictionsFormat"]);t!=null&&m(e,["format"],t);const i=p(n,["gcsDestination","outputUriPrefix"]);i!=null&&m(e,["gcsUri"],i);const r=p(n,["bigqueryDestination","outputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function GG(n){const e={},t=p(n,["format"]);t!=null&&m(e,["predictionsFormat"],t);const i=p(n,["gcsUri"]);i!=null&&m(e,["gcsDestination","outputUriPrefix"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&m(e,["bigqueryDestination","outputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(p(n,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Uf(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata","displayName"]);i!=null&&m(e,["displayName"],i);const r=p(n,["metadata","state"]);r!=null&&m(e,["state"],WR(r));const a=p(n,["metadata","createTime"]);a!=null&&m(e,["createTime"],a);const l=p(n,["metadata","endTime"]);l!=null&&m(e,["endTime"],l);const c=p(n,["metadata","updateTime"]);c!=null&&m(e,["updateTime"],c);const h=p(n,["metadata","model"]);h!=null&&m(e,["model"],h);const f=p(n,["metadata","output"]);return f!=null&&m(e,["dest"],OG(QR(f))),e}function Cv(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["displayName"]);i!=null&&m(e,["displayName"],i);const r=p(n,["state"]);r!=null&&m(e,["state"],WR(r));const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["createTime"]);l!=null&&m(e,["createTime"],l);const c=p(n,["startTime"]);c!=null&&m(e,["startTime"],c);const h=p(n,["endTime"]);h!=null&&m(e,["endTime"],h);const f=p(n,["updateTime"]);f!=null&&m(e,["updateTime"],f);const _=p(n,["model"]);_!=null&&m(e,["model"],_);const T=p(n,["inputConfig"]);T!=null&&m(e,["src"],FG(T));const x=p(n,["outputConfig"]);x!=null&&m(e,["dest"],UG(QR(x)));const A=p(n,["completionStats"]);return A!=null&&m(e,["completionStats"],A),e}function FG(n){const e={},t=p(n,["instancesFormat"]);t!=null&&m(e,["format"],t);const i=p(n,["gcsSource","uris"]);i!=null&&m(e,["gcsUri"],i);const r=p(n,["bigquerySource","inputUri"]);return r!=null&&m(e,["bigqueryUri"],r),e}function zG(n,e){const t={};if(p(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(p(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=p(e,["fileName"]);i!=null&&m(t,["fileName"],i);const r=p(e,["inlinedRequests"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>gF(n,l))),m(t,["requests","requests"],a)}return t}function qG(n){const e={},t=p(n,["format"]);t!=null&&m(e,["instancesFormat"],t);const i=p(n,["gcsUri"]);i!=null&&m(e,["gcsSource","uris"],i);const r=p(n,["bigqueryUri"]);if(r!=null&&m(e,["bigquerySource","inputUri"],r),p(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(p(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function BG(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function HG(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function jG(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function $G(n){const e={},t=p(n,["content"]);t!=null&&m(e,["content"],t);const i=p(n,["citationMetadata"]);i!=null&&m(e,["citationMetadata"],KG(i));const r=p(n,["tokenCount"]);r!=null&&m(e,["tokenCount"],r);const a=p(n,["finishReason"]);a!=null&&m(e,["finishReason"],a);const l=p(n,["avgLogprobs"]);l!=null&&m(e,["avgLogprobs"],l);const c=p(n,["groundingMetadata"]);c!=null&&m(e,["groundingMetadata"],c);const h=p(n,["index"]);h!=null&&m(e,["index"],h);const f=p(n,["logprobsResult"]);f!=null&&m(e,["logprobsResult"],f);const _=p(n,["safetyRatings"]);if(_!=null){let x=_;Array.isArray(x)&&(x=x.map(A=>A)),m(e,["safetyRatings"],x)}const T=p(n,["urlContextMetadata"]);return T!=null&&m(e,["urlContextMetadata"],T),e}function KG(n){const e={},t=p(n,["citationSources"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["citations"],i)}return e}function XR(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>SF(a))),m(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function JG(n,e){const t={},i=p(n,["displayName"]);if(e!==void 0&&i!=null&&m(e,["batch","displayName"],i),p(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function YG(n,e){const t={},i=p(n,["displayName"]);e!==void 0&&i!=null&&m(e,["displayName"],i);const r=p(n,["dest"]);return e!==void 0&&r!=null&&m(e,["outputConfig"],GG(LG(r))),t}function vA(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const r=p(e,["src"]);r!=null&&m(t,["batch","inputConfig"],zG(n,YR(n,r)));const a=p(e,["config"]);return a!=null&&JG(a,t),t}function QG(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],Xe(n,i));const r=p(e,["src"]);r!=null&&m(t,["inputConfig"],qG(YR(n,r)));const a=p(e,["config"]);return a!=null&&YG(a,t),t}function WG(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["batch","displayName"],i),t}function XG(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["_url","model"],Xe(n,i));const r=p(e,["src"]);r!=null&&m(t,["batch","inputConfig"],sF(n,r));const a=p(e,["config"]);return a!=null&&WG(a,t),t}function ZG(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function eF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function tF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);return a!=null&&m(e,["error"],a),e}function nF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);return a!=null&&m(e,["error"],a),e}function iF(n,e){const t={},i=p(e,["contents"]);if(i!=null){let a=s_(n,i);Array.isArray(a)&&(a=a.map(l=>l)),m(t,["requests[]","request","content"],a)}const r=p(e,["config"]);return r!=null&&(m(t,["_self"],rF(r,t)),Z6(t,{"requests[].*":"requests[].request.*"})),t}function rF(n,e){const t={},i=p(n,["taskType"]);e!==void 0&&i!=null&&m(e,["requests[]","taskType"],i);const r=p(n,["title"]);e!==void 0&&r!=null&&m(e,["requests[]","title"],r);const a=p(n,["outputDimensionality"]);if(e!==void 0&&a!=null&&m(e,["requests[]","outputDimensionality"],a),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function sF(n,e){const t={},i=p(e,["fileName"]);i!=null&&m(t,["file_name"],i);const r=p(e,["inlinedRequests"]);return r!=null&&m(t,["requests"],iF(n,r)),t}function oF(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function aF(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const r=p(n,["name"]);if(r!=null&&m(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function lF(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=p(n,["mode"]);if(i!=null&&m(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function uF(n,e,t){const i={},r=p(e,["systemInstruction"]);t!==void 0&&r!=null&&m(t,["systemInstruction"],XR(gn(r)));const a=p(e,["temperature"]);a!=null&&m(i,["temperature"],a);const l=p(e,["topP"]);l!=null&&m(i,["topP"],l);const c=p(e,["topK"]);c!=null&&m(i,["topK"],c);const h=p(e,["candidateCount"]);h!=null&&m(i,["candidateCount"],h);const f=p(e,["maxOutputTokens"]);f!=null&&m(i,["maxOutputTokens"],f);const _=p(e,["stopSequences"]);_!=null&&m(i,["stopSequences"],_);const T=p(e,["responseLogprobs"]);T!=null&&m(i,["responseLogprobs"],T);const x=p(e,["logprobs"]);x!=null&&m(i,["logprobs"],x);const A=p(e,["presencePenalty"]);A!=null&&m(i,["presencePenalty"],A);const V=p(e,["frequencyPenalty"]);V!=null&&m(i,["frequencyPenalty"],V);const k=p(e,["seed"]);k!=null&&m(i,["seed"],k);const L=p(e,["responseMimeType"]);L!=null&&m(i,["responseMimeType"],L);const $=p(e,["responseSchema"]);$!=null&&m(i,["responseSchema"],o_($));const z=p(e,["responseJsonSchema"]);if(z!=null&&m(i,["responseJsonSchema"],z),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const H=p(e,["safetySettings"]);if(t!==void 0&&H!=null){let N=H;Array.isArray(N)&&(N=N.map(Ee=>wF(Ee))),m(t,["safetySettings"],N)}const Z=p(e,["tools"]);if(t!==void 0&&Z!=null){let N=uu(Z);Array.isArray(N)&&(N=N.map(Ee=>IF(lu(Ee)))),m(t,["tools"],N)}const ie=p(e,["toolConfig"]);if(t!==void 0&&ie!=null&&m(t,["toolConfig"],AF(ie)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const J=p(e,["cachedContent"]);t!==void 0&&J!=null&&m(t,["cachedContent"],Xr(n,J));const R=p(e,["responseModalities"]);R!=null&&m(i,["responseModalities"],R);const M=p(e,["mediaResolution"]);M!=null&&m(i,["mediaResolution"],M);const P=p(e,["speechConfig"]);if(P!=null&&m(i,["speechConfig"],a_(P)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const O=p(e,["thinkingConfig"]);O!=null&&m(i,["thinkingConfig"],O);const C=p(e,["imageConfig"]);C!=null&&m(i,["imageConfig"],mF(C));const F=p(e,["enableEnhancedCivicAnswers"]);if(F!=null&&m(i,["enableEnhancedCivicAnswers"],F),p(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function cF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(f=>$G(f))),m(e,["candidates"],h)}const r=p(n,["modelVersion"]);r!=null&&m(e,["modelVersion"],r);const a=p(n,["promptFeedback"]);a!=null&&m(e,["promptFeedback"],a);const l=p(n,["responseId"]);l!=null&&m(e,["responseId"],l);const c=p(n,["usageMetadata"]);return c!=null&&m(e,["usageMetadata"],c),e}function dF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function hF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],cu(n,i)),t}function fF(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function pF(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function mF(n){const e={},t=p(n,["aspectRatio"]);t!=null&&m(e,["aspectRatio"],t);const i=p(n,["imageSize"]);if(i!=null&&m(e,["imageSize"],i),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function gF(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["request","model"],Xe(n,i));const r=p(e,["contents"]);if(r!=null){let c=mi(r);Array.isArray(c)&&(c=c.map(h=>XR(h))),m(t,["request","contents"],c)}const a=p(e,["metadata"]);a!=null&&m(t,["metadata"],a);const l=p(e,["config"]);return l!=null&&m(t,["request","generationConfig"],uF(n,l,p(t,["request"],{}))),t}function yF(n){const e={},t=p(n,["response"]);t!=null&&m(e,["response"],cF(t));const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["error"]);return r!=null&&m(e,["error"],r),e}function vF(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);if(e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),p(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function _F(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);e!==void 0&&r!=null&&m(e,["_query","pageToken"],r);const a=p(n,["filter"]);return e!==void 0&&a!=null&&m(e,["_query","filter"],a),t}function EF(n){const e={},t=p(n,["config"]);return t!=null&&vF(t,e),e}function TF(n){const e={},t=p(n,["config"]);return t!=null&&_F(t,e),e}function xF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["operations"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Uf(l))),m(e,["batchJobs"],a)}return e}function bF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["batchPredictionJobs"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>Cv(l))),m(e,["batchJobs"],a)}return e}function SF(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],oF(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],aF(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const h=p(n,["inlineData"]);h!=null&&m(e,["inlineData"],BG(h));const f=p(n,["text"]);f!=null&&m(e,["text"],f);const _=p(n,["thought"]);_!=null&&m(e,["thought"],_);const T=p(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function wF(n){const e={},t=p(n,["category"]);if(t!=null&&m(e,["category"],t),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=p(n,["threshold"]);return i!=null&&m(e,["threshold"],i),e}function AF(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=p(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],lF(i)),e}function IF(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],fF(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],pF(c));const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const f=p(n,["urlContext"]);return f!=null&&m(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Kr;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Kr||(Kr={}));class va{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let l={config:{}};!i||Object.keys(i).length===0?l={config:{}}:typeof i=="object"?l=Object.assign({},i):l=i,l.config&&(l.config.pageToken=t.nextPageToken),this.paramsInternal=l,this.pageInternalSize=(a=(r=l.config)===null||r===void 0?void 0:r.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class CF extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new va(Kr.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=vA(this.apiClient,e),i=t._url,r=_e("{model}:batchGenerateContent",i),c=t.batch.inputConfig.requests,h=c.requests,f=[];for(const _ of h){const T=Object.assign({},_);if(T.systemInstruction){const x=T.systemInstruction;delete T.systemInstruction;const A=T.request;A.systemInstruction=x,T.request=A}f.push(T)}return c.requests=f,delete t.config,delete t._url,delete t._query,{path:r,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const i=t?Object.assign({},t):{},r=Date.now().toString();if(i.displayName||(i.displayName=`genaiBatchJob_${r}`),i.dest===void 0){const a=this.getGcsUri(e),l=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?i.dest=`${a.slice(0,-6)}/dest`:i.dest=`${a}_dest_${r}`;else if(l)i.dest=`${l}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return i}async createInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=QG(this.apiClient,e);return c=_e("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>Cv(_))}else{const f=vA(this.apiClient,e);return c=_e("{model}:batchGenerateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Uf(_))}}async createEmbeddingsInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=XG(this.apiClient,e);return a=_e("{model}:asyncBatchEmbedContent",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>Uf(h))}}async get(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=hF(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>Cv(_))}else{const f=dF(this.apiClient,e);return c=_e("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Uf(_))}}async cancel(e){var t,i,r,a;let l="",c={};if(this.apiClient.isVertexAI()){const h=jG(this.apiClient,e);l=_e("batchPredictionJobs/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const h=HG(this.apiClient,e);l=_e("batches/{name}:cancel",h._url),c=h._query,delete h._url,delete h._query,await this.apiClient.request({path:l,queryParams:c,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=TF(e);return c=_e("batchPredictionJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=bF(_),x=new pA;return Object.assign(x,T),x})}else{const f=EF(e);return c=_e("batches",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=xF(_),x=new pA;return Object.assign(x,T),x})}}async delete(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=eF(this.apiClient,e);return c=_e("batchPredictionJobs/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>nF(_))}else{const f=ZG(this.apiClient,e);return c=_e("batches/{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>tF(_))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function RF(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function _A(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>XF(a))),m(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function NF(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let _=mi(l);Array.isArray(_)&&(_=_.map(T=>_A(T))),m(e,["contents"],_)}const c=p(n,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],_A(gn(c)));const h=p(n,["tools"]);if(e!==void 0&&h!=null){let _=h;Array.isArray(_)&&(_=_.map(T=>ez(T))),m(e,["tools"],_)}const f=p(n,["toolConfig"]);if(e!==void 0&&f!=null&&m(e,["toolConfig"],ZF(f)),p(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function DF(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(n,["expireTime"]);e!==void 0&&r!=null&&m(e,["expireTime"],r);const a=p(n,["displayName"]);e!==void 0&&a!=null&&m(e,["displayName"],a);const l=p(n,["contents"]);if(e!==void 0&&l!=null){let T=mi(l);Array.isArray(T)&&(T=T.map(x=>x)),m(e,["contents"],T)}const c=p(n,["systemInstruction"]);e!==void 0&&c!=null&&m(e,["systemInstruction"],gn(c));const h=p(n,["tools"]);if(e!==void 0&&h!=null){let T=h;Array.isArray(T)&&(T=T.map(x=>tz(x))),m(e,["tools"],T)}const f=p(n,["toolConfig"]);e!==void 0&&f!=null&&m(e,["toolConfig"],f);const _=p(n,["kmsKeyName"]);return e!==void 0&&_!=null&&m(e,["encryption_spec","kmsKeyName"],_),t}function MF(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],FR(n,i));const r=p(e,["config"]);return r!=null&&NF(r,t),t}function PF(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["model"],FR(n,i));const r=p(e,["config"]);return r!=null&&DF(r,t),t}function kF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Xr(n,i)),t}function VF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Xr(n,i)),t}function LF(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function OF(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function UF(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function GF(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const r=p(n,["name"]);if(r!=null&&m(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function FF(n){const e={},t=p(n,["allowedFunctionNames"]);t!=null&&m(e,["allowedFunctionNames"],t);const i=p(n,["mode"]);if(i!=null&&m(e,["mode"],i),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function zF(n){const e={},t=p(n,["description"]);t!=null&&m(e,["description"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const r=p(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const c=p(n,["responseJsonSchema"]);if(c!=null&&m(e,["responseJsonSchema"],c),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function qF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Xr(n,i)),t}function BF(n,e){const t={},i=p(e,["name"]);return i!=null&&m(t,["_url","name"],Xr(n,i)),t}function HF(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function jF(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function $F(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function KF(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function JF(n){const e={},t=p(n,["config"]);return t!=null&&$F(t,e),e}function YF(n){const e={},t=p(n,["config"]);return t!=null&&KF(t,e),e}function QF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["cachedContents"],a)}return e}function WF(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["cachedContents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["cachedContents"],a)}return e}function XF(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],UF(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],GF(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const h=p(n,["inlineData"]);h!=null&&m(e,["inlineData"],RF(h));const f=p(n,["text"]);f!=null&&m(e,["text"],f);const _=p(n,["thought"]);_!=null&&m(e,["thought"],_);const T=p(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function ZF(n){const e={},t=p(n,["retrievalConfig"]);t!=null&&m(e,["retrievalConfig"],t);const i=p(n,["functionCallingConfig"]);return i!=null&&m(e,["functionCallingConfig"],FF(i)),e}function ez(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],HF(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],jF(c));const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const f=p(n,["urlContext"]);return f!=null&&m(e,["urlContext"],f),e}function tz(n){const e={},t=p(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=p(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=p(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=p(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=p(n,["functionDeclarations"]);if(l!=null){let T=l;Array.isArray(T)&&(T=T.map(x=>zF(x))),m(e,["functionDeclarations"],T)}const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const h=p(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const _=p(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function nz(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function iz(n,e){const t={},i=p(n,["ttl"]);e!==void 0&&i!=null&&m(e,["ttl"],i);const r=p(n,["expireTime"]);return e!==void 0&&r!=null&&m(e,["expireTime"],r),t}function rz(n,e){const t={},i=p(e,["name"]);i!=null&&m(t,["_url","name"],Xr(n,i));const r=p(e,["config"]);return r!=null&&nz(r,t),t}function sz(n,e){const t={},i=p(e,["name"]);i!=null&&m(t,["_url","name"],Xr(n,i));const r=p(e,["config"]);return r!=null&&iz(r,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oz extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new va(Kr.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=PF(this.apiClient,e);return c=_e("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const f=MF(this.apiClient,e);return c=_e("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async get(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=BF(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const f=qF(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async delete(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=VF(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=OF(_),x=new hA;return Object.assign(x,T),x})}else{const f=kF(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=LF(_),x=new hA;return Object.assign(x,T),x})}}async update(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=sz(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>_)}else{const f=rz(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>_)}}async listInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=YF(e);return c=_e("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=WF(_),x=new fA;return Object.assign(x,T),x})}else{const f=JF(e);return c=_e("cachedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=QF(_),x=new fA;return Object.assign(x,T),x})}}}function Sp(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function EA(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function ke(n){return this instanceof ke?(this.v=n,this):new ke(n)}function Mi(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,a=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",l),r[Symbol.asyncIterator]=function(){return this},r;function l(A){return function(V){return Promise.resolve(V).then(A,T)}}function c(A,V){i[A]&&(r[A]=function(k){return new Promise(function(L,$){a.push([A,k,L,$])>1||h(A,k)})},V&&(r[A]=V(r[A])))}function h(A,V){try{f(i[A](V))}catch(k){x(a[0][3],k)}}function f(A){A.value instanceof ke?Promise.resolve(A.value.v).then(_,T):x(a[0][2],A)}function _(A){h("next",A)}function T(A){h("throw",A)}function x(A,V){A(V),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Pi(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof EA=="function"?EA(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(a){t[a]=n[a]&&function(l){return new Promise(function(c,h){l=n[a](l),r(c,h,l.done,l.value)})}}function r(a,l,c,h){Promise.resolve(h).then(function(f){a({value:f,done:c})},l)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function az(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ZR(t)}function ZR(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function lz(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function TA(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let a=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),a&&!ZR(n[i])&&(a=!1),i++;a?e.push(...r):e.pop()}return e}class uz{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new cz(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class cz{constructor(e,t,i,r={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=a,this.sendPromise=Promise.resolve(),lz(a)}async sendMessage(e){var t;await this.sendPromise;const i=gn(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,l,c;const h=await r,f=(l=(a=h.candidates)===null||a===void 0?void 0:a[0])===null||l===void 0?void 0:l.content,_=h.automaticFunctionCallingHistory,T=this.getHistory(!0).length;let x=[];_!=null&&(x=(c=_.slice(T))!==null&&c!==void 0?c:[]);const A=f?[f]:[];this.recordHistory(i,A,x)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=gn(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const a=await r;return this.processStreamResponse(a,i)}getHistory(e=!1){const t=e?TA(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){return Mi(this,arguments,function*(){var r,a,l,c,h,f;const _=[];try{for(var T=!0,x=Pi(e),A;A=yield ke(x.next()),r=A.done,!r;T=!0){c=A.value,T=!1;const V=c;if(az(V)){const k=(f=(h=V.candidates)===null||h===void 0?void 0:h[0])===null||f===void 0?void 0:f.content;k!==void 0&&_.push(k)}yield yield ke(V)}}catch(V){a={error:V}}finally{try{!T&&!r&&(l=x.return)&&(yield ke(l.call(x)))}finally{if(a)throw a.error}}this.recordHistory(t,_)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(a=>a.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...TA(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ud extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ud.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function dz(n){const e={},t=p(n,["file"]);return t!=null&&m(e,["file"],t),e}function hz(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function fz(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],$R(t)),e}function pz(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}function mz(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","file"],$R(t)),e}function gz(n){const e={},t=p(n,["uris"]);return t!=null&&m(e,["uris"],t),e}function yz(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function vz(n){const e={},t=p(n,["config"]);return t!=null&&yz(t,e),e}function _z(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["files"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["files"],a)}return e}function Ez(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["files"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(e,["files"],r)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tz extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new va(Kr.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=vz(e);return a=_e("files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const f=_z(h),_=new xG;return Object.assign(_,f),_})}}async createInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dz(e);return a=_e("upload/v1beta/files",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=hz(h),_=new bG;return Object.assign(_,f),_})}}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=mz(e);return a=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fz(e);return a=_e("files/{file}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const f=pz(h),_=new SG;return Object.assign(_,f),_})}}async registerFilesInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=gz(e);return a=_e("files:register",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=Ez(h),_=new wG;return Object.assign(_,f),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gf(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function xz(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>Uz(a))),m(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function bz(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function Sz(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const r=p(n,["name"]);if(r!=null&&m(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function wz(n){const e={},t=p(n,["description"]);t!=null&&m(e,["description"],t);const i=p(n,["name"]);i!=null&&m(e,["name"],i);const r=p(n,["parameters"]);r!=null&&m(e,["parameters"],r);const a=p(n,["parametersJsonSchema"]);a!=null&&m(e,["parametersJsonSchema"],a);const l=p(n,["response"]);l!=null&&m(e,["response"],l);const c=p(n,["responseJsonSchema"]);if(c!=null&&m(e,["responseJsonSchema"],c),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function Az(n){const e={},t=p(n,["modelSelectionConfig"]);t!=null&&m(e,["modelConfig"],t);const i=p(n,["responseJsonSchema"]);i!=null&&m(e,["responseJsonSchema"],i);const r=p(n,["audioTimestamp"]);r!=null&&m(e,["audioTimestamp"],r);const a=p(n,["candidateCount"]);a!=null&&m(e,["candidateCount"],a);const l=p(n,["enableAffectiveDialog"]);l!=null&&m(e,["enableAffectiveDialog"],l);const c=p(n,["frequencyPenalty"]);c!=null&&m(e,["frequencyPenalty"],c);const h=p(n,["logprobs"]);h!=null&&m(e,["logprobs"],h);const f=p(n,["maxOutputTokens"]);f!=null&&m(e,["maxOutputTokens"],f);const _=p(n,["mediaResolution"]);_!=null&&m(e,["mediaResolution"],_);const T=p(n,["presencePenalty"]);T!=null&&m(e,["presencePenalty"],T);const x=p(n,["responseLogprobs"]);x!=null&&m(e,["responseLogprobs"],x);const A=p(n,["responseMimeType"]);A!=null&&m(e,["responseMimeType"],A);const V=p(n,["responseModalities"]);V!=null&&m(e,["responseModalities"],V);const k=p(n,["responseSchema"]);k!=null&&m(e,["responseSchema"],k);const L=p(n,["routingConfig"]);L!=null&&m(e,["routingConfig"],L);const $=p(n,["seed"]);$!=null&&m(e,["seed"],$);const z=p(n,["speechConfig"]);z!=null&&m(e,["speechConfig"],z);const H=p(n,["stopSequences"]);H!=null&&m(e,["stopSequences"],H);const Z=p(n,["temperature"]);Z!=null&&m(e,["temperature"],Z);const ie=p(n,["thinkingConfig"]);ie!=null&&m(e,["thinkingConfig"],ie);const J=p(n,["topK"]);J!=null&&m(e,["topK"],J);const R=p(n,["topP"]);if(R!=null&&m(e,["topP"],R),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Iz(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function Cz(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function Rz(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const h=p(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=p(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],l_(T));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=p(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],xz(gn(V)));const k=p(n,["tools"]);if(e!==void 0&&k!=null){let J=uu(k);Array.isArray(J)&&(J=J.map(R=>Fz(lu(R)))),m(e,["setup","tools"],J)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],Gz(L));const $=p(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const H=p(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Z=p(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&m(e,["setup","contextWindowCompression"],Z);const ie=p(n,["proactivity"]);if(e!==void 0&&ie!=null&&m(e,["setup","proactivity"],ie),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function Nz(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],Az(i));const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const h=p(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=p(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],l_(T));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=p(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],gn(V));const k=p(n,["tools"]);if(e!==void 0&&k!=null){let R=uu(k);Array.isArray(R)&&(R=R.map(M=>zz(lu(M)))),m(e,["setup","tools"],R)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],L);const $=p(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const H=p(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Z=p(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&m(e,["setup","contextWindowCompression"],Z);const ie=p(n,["proactivity"]);e!==void 0&&ie!=null&&m(e,["setup","proactivity"],ie);const J=p(n,["explicitVadSignal"]);return e!==void 0&&J!=null&&m(e,["setup","explicitVadSignal"],J),t}function Dz(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const r=p(e,["config"]);return r!=null&&m(t,["config"],Rz(r,t)),t}function Mz(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const r=p(e,["config"]);return r!=null&&m(t,["config"],Nz(r,t)),t}function Pz(n){const e={},t=p(n,["musicGenerationConfig"]);return t!=null&&m(e,["musicGenerationConfig"],t),e}function kz(n){const e={},t=p(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>r)),m(e,["weightedPrompts"],i)}return e}function Vz(n){const e={},t=p(n,["media"]);if(t!=null){let f=zR(t);Array.isArray(f)&&(f=f.map(_=>Gf(_))),m(e,["mediaChunks"],f)}const i=p(n,["audio"]);i!=null&&m(e,["audio"],Gf(BR(i)));const r=p(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&m(e,["video"],Gf(qR(a)));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const c=p(n,["activityStart"]);c!=null&&m(e,["activityStart"],c);const h=p(n,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function Lz(n){const e={},t=p(n,["media"]);if(t!=null){let f=zR(t);Array.isArray(f)&&(f=f.map(_=>_)),m(e,["mediaChunks"],f)}const i=p(n,["audio"]);i!=null&&m(e,["audio"],BR(i));const r=p(n,["audioStreamEnd"]);r!=null&&m(e,["audioStreamEnd"],r);const a=p(n,["video"]);a!=null&&m(e,["video"],qR(a));const l=p(n,["text"]);l!=null&&m(e,["text"],l);const c=p(n,["activityStart"]);c!=null&&m(e,["activityStart"],c);const h=p(n,["activityEnd"]);return h!=null&&m(e,["activityEnd"],h),e}function Oz(n){const e={},t=p(n,["setupComplete"]);t!=null&&m(e,["setupComplete"],t);const i=p(n,["serverContent"]);i!=null&&m(e,["serverContent"],i);const r=p(n,["toolCall"]);r!=null&&m(e,["toolCall"],r);const a=p(n,["toolCallCancellation"]);a!=null&&m(e,["toolCallCancellation"],a);const l=p(n,["usageMetadata"]);l!=null&&m(e,["usageMetadata"],qz(l));const c=p(n,["goAway"]);c!=null&&m(e,["goAway"],c);const h=p(n,["sessionResumptionUpdate"]);h!=null&&m(e,["sessionResumptionUpdate"],h);const f=p(n,["voiceActivityDetectionSignal"]);f!=null&&m(e,["voiceActivityDetectionSignal"],f);const _=p(n,["voiceActivity"]);return _!=null&&m(e,["voiceActivity"],Bz(_)),e}function Uz(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],bz(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],Sz(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const h=p(n,["inlineData"]);h!=null&&m(e,["inlineData"],Gf(h));const f=p(n,["text"]);f!=null&&m(e,["text"],f);const _=p(n,["thought"]);_!=null&&m(e,["thought"],_);const T=p(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function Gz(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fz(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],Iz(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],Cz(c));const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const f=p(n,["urlContext"]);return f!=null&&m(e,["urlContext"],f),e}function zz(n){const e={},t=p(n,["retrieval"]);t!=null&&m(e,["retrieval"],t);const i=p(n,["computerUse"]);if(i!=null&&m(e,["computerUse"],i),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const r=p(n,["codeExecution"]);r!=null&&m(e,["codeExecution"],r);const a=p(n,["enterpriseWebSearch"]);a!=null&&m(e,["enterpriseWebSearch"],a);const l=p(n,["functionDeclarations"]);if(l!=null){let T=l;Array.isArray(T)&&(T=T.map(x=>wz(x))),m(e,["functionDeclarations"],T)}const c=p(n,["googleMaps"]);c!=null&&m(e,["googleMaps"],c);const h=p(n,["googleSearch"]);h!=null&&m(e,["googleSearch"],h);const f=p(n,["googleSearchRetrieval"]);f!=null&&m(e,["googleSearchRetrieval"],f);const _=p(n,["urlContext"]);return _!=null&&m(e,["urlContext"],_),e}function qz(n){const e={},t=p(n,["promptTokenCount"]);t!=null&&m(e,["promptTokenCount"],t);const i=p(n,["cachedContentTokenCount"]);i!=null&&m(e,["cachedContentTokenCount"],i);const r=p(n,["candidatesTokenCount"]);r!=null&&m(e,["responseTokenCount"],r);const a=p(n,["toolUsePromptTokenCount"]);a!=null&&m(e,["toolUsePromptTokenCount"],a);const l=p(n,["thoughtsTokenCount"]);l!=null&&m(e,["thoughtsTokenCount"],l);const c=p(n,["totalTokenCount"]);c!=null&&m(e,["totalTokenCount"],c);const h=p(n,["promptTokensDetails"]);if(h!=null){let A=h;Array.isArray(A)&&(A=A.map(V=>V)),m(e,["promptTokensDetails"],A)}const f=p(n,["cacheTokensDetails"]);if(f!=null){let A=f;Array.isArray(A)&&(A=A.map(V=>V)),m(e,["cacheTokensDetails"],A)}const _=p(n,["candidatesTokensDetails"]);if(_!=null){let A=_;Array.isArray(A)&&(A=A.map(V=>V)),m(e,["responseTokensDetails"],A)}const T=p(n,["toolUsePromptTokensDetails"]);if(T!=null){let A=T;Array.isArray(A)&&(A=A.map(V=>V)),m(e,["toolUsePromptTokensDetails"],A)}const x=p(n,["trafficType"]);return x!=null&&m(e,["trafficType"],x),e}function Bz(n){const e={},t=p(n,["type"]);return t!=null&&m(e,["voiceActivityType"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Hz(n,e){const t={},i=p(n,["data"]);if(i!=null&&m(t,["data"],i),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=p(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function jz(n,e){const t={},i=p(n,["content"]);i!=null&&m(t,["content"],i);const r=p(n,["citationMetadata"]);r!=null&&m(t,["citationMetadata"],$z(r));const a=p(n,["tokenCount"]);a!=null&&m(t,["tokenCount"],a);const l=p(n,["finishReason"]);l!=null&&m(t,["finishReason"],l);const c=p(n,["avgLogprobs"]);c!=null&&m(t,["avgLogprobs"],c);const h=p(n,["groundingMetadata"]);h!=null&&m(t,["groundingMetadata"],h);const f=p(n,["index"]);f!=null&&m(t,["index"],f);const _=p(n,["logprobsResult"]);_!=null&&m(t,["logprobsResult"],_);const T=p(n,["safetyRatings"]);if(T!=null){let A=T;Array.isArray(A)&&(A=A.map(V=>V)),m(t,["safetyRatings"],A)}const x=p(n,["urlContextMetadata"]);return x!=null&&m(t,["urlContextMetadata"],x),t}function $z(n,e){const t={},i=p(n,["citationSources"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["citations"],r)}return t}function Kz(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let l=mi(a);Array.isArray(l)&&(l=l.map(c=>c)),m(i,["contents"],l)}return i}function Jz(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["tokensInfo"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["tokensInfo"],a)}return t}function Yz(n,e){const t={},i=p(n,["values"]);i!=null&&m(t,["values"],i);const r=p(n,["statistics"]);return r!=null&&m(t,["statistics"],Qz(r)),t}function Qz(n,e){const t={},i=p(n,["truncated"]);i!=null&&m(t,["truncated"],i);const r=p(n,["token_count"]);return r!=null&&m(t,["tokenCount"],r),t}function im(n,e){const t={},i=p(n,["parts"]);if(i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>sq(l))),m(t,["parts"],a)}const r=p(n,["role"]);return r!=null&&m(t,["role"],r),t}function Wz(n,e){const t={},i=p(n,["controlType"]);i!=null&&m(t,["controlType"],i);const r=p(n,["enableControlImageComputation"]);return r!=null&&m(t,["computeControl"],r),t}function Xz(n,e){const t={};if(p(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(p(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(p(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Zz(n,e,t){const i={},r=p(n,["systemInstruction"]);e!==void 0&&r!=null&&m(e,["systemInstruction"],gn(r));const a=p(n,["tools"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>iN(h))),m(e,["tools"],c)}const l=p(n,["generationConfig"]);return e!==void 0&&l!=null&&m(e,["generationConfig"],H8(l)),i}function e8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(h=>im(h))),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&Xz(l),i}function t8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(h=>h)),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&Zz(l,i),i}function n8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["totalTokens"]);r!=null&&m(t,["totalTokens"],r);const a=p(n,["cachedContentTokenCount"]);return a!=null&&m(t,["cachedContentTokenCount"],a),t}function i8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["totalTokens"]);return r!=null&&m(t,["totalTokens"],r),t}function r8(n,e,t){const i={},r=p(e,["model"]);return r!=null&&m(i,["_url","name"],Xe(n,r)),i}function s8(n,e,t){const i={},r=p(e,["model"]);return r!=null&&m(i,["_url","name"],Xe(n,r)),i}function o8(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function a8(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function l8(n,e,t){const i={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const f=p(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const _=p(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=p(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const x=p(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&m(e,["parameters","includeSafetyAttributes"],x);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const V=p(n,["language"]);e!==void 0&&V!=null&&m(e,["parameters","language"],V);const k=p(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const L=p(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&m(e,["parameters","outputOptions","compressionQuality"],L);const $=p(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const z=p(n,["labels"]);e!==void 0&&z!=null&&m(e,["labels"],z);const H=p(n,["editMode"]);e!==void 0&&H!=null&&m(e,["parameters","editMode"],H);const Z=p(n,["baseSteps"]);return e!==void 0&&Z!=null&&m(e,["parameters","editConfig","baseSteps"],Z),i}function u8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["referenceImages"]);if(l!=null){let h=l;Array.isArray(h)&&(h=h.map(f=>dq(f))),m(i,["instances[0]","referenceImages"],h)}const c=p(e,["config"]);return c!=null&&l8(c,i),i}function c8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>rm(l))),m(t,["generatedImages"],a)}return t}function d8(n,e,t){const i={},r=p(n,["taskType"]);e!==void 0&&r!=null&&m(e,["requests[]","taskType"],r);const a=p(n,["title"]);e!==void 0&&a!=null&&m(e,["requests[]","title"],a);const l=p(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&m(e,["requests[]","outputDimensionality"],l),p(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(p(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function h8(n,e,t){const i={},r=p(n,["taskType"]);e!==void 0&&r!=null&&m(e,["instances[]","task_type"],r);const a=p(n,["title"]);e!==void 0&&a!=null&&m(e,["instances[]","title"],a);const l=p(n,["outputDimensionality"]);e!==void 0&&l!=null&&m(e,["parameters","outputDimensionality"],l);const c=p(n,["mimeType"]);e!==void 0&&c!=null&&m(e,["instances[]","mimeType"],c);const h=p(n,["autoTruncate"]);return e!==void 0&&h!=null&&m(e,["parameters","autoTruncate"],h),i}function f8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let h=s_(n,a);Array.isArray(h)&&(h=h.map(f=>f)),m(i,["requests[]","content"],h)}const l=p(e,["config"]);l!=null&&d8(l,i);const c=p(e,["model"]);return c!==void 0&&m(i,["requests[]","model"],Xe(n,c)),i}function p8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let c=s_(n,a);Array.isArray(c)&&(c=c.map(h=>h)),m(i,["instances[]","content"],c)}const l=p(e,["config"]);return l!=null&&h8(l,i),i}function m8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>c)),m(t,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function g8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["predictions[]","embeddings"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>Yz(c))),m(t,["embeddings"],l)}const a=p(n,["metadata"]);return a!=null&&m(t,["metadata"],a),t}function y8(n,e){const t={},i=p(n,["endpoint"]);i!=null&&m(t,["name"],i);const r=p(n,["deployedModelId"]);return r!=null&&m(t,["deployedModelId"],r),t}function v8(n,e){const t={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["fileUri"]);i!=null&&m(t,["fileUri"],i);const r=p(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function _8(n,e){const t={},i=p(n,["id"]);i!=null&&m(t,["id"],i);const r=p(n,["args"]);r!=null&&m(t,["args"],r);const a=p(n,["name"]);if(a!=null&&m(t,["name"],a),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return t}function E8(n,e){const t={},i=p(n,["allowedFunctionNames"]);i!=null&&m(t,["allowedFunctionNames"],i);const r=p(n,["mode"]);if(r!=null&&m(t,["mode"],r),p(n,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return t}function T8(n,e){const t={},i=p(n,["description"]);i!=null&&m(t,["description"],i);const r=p(n,["name"]);r!=null&&m(t,["name"],r);const a=p(n,["parameters"]);a!=null&&m(t,["parameters"],a);const l=p(n,["parametersJsonSchema"]);l!=null&&m(t,["parametersJsonSchema"],l);const c=p(n,["response"]);c!=null&&m(t,["response"],c);const h=p(n,["responseJsonSchema"]);if(h!=null&&m(t,["responseJsonSchema"],h),p(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return t}function x8(n,e,t,i){const r={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],im(gn(a)));const l=p(e,["temperature"]);l!=null&&m(r,["temperature"],l);const c=p(e,["topP"]);c!=null&&m(r,["topP"],c);const h=p(e,["topK"]);h!=null&&m(r,["topK"],h);const f=p(e,["candidateCount"]);f!=null&&m(r,["candidateCount"],f);const _=p(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=p(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const x=p(e,["responseLogprobs"]);x!=null&&m(r,["responseLogprobs"],x);const A=p(e,["logprobs"]);A!=null&&m(r,["logprobs"],A);const V=p(e,["presencePenalty"]);V!=null&&m(r,["presencePenalty"],V);const k=p(e,["frequencyPenalty"]);k!=null&&m(r,["frequencyPenalty"],k);const L=p(e,["seed"]);L!=null&&m(r,["seed"],L);const $=p(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const z=p(e,["responseSchema"]);z!=null&&m(r,["responseSchema"],o_(z));const H=p(e,["responseJsonSchema"]);if(H!=null&&m(r,["responseJsonSchema"],H),p(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(p(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const Z=p(e,["safetySettings"]);if(t!==void 0&&Z!=null){let Ee=Z;Array.isArray(Ee)&&(Ee=Ee.map(de=>hq(de))),m(t,["safetySettings"],Ee)}const ie=p(e,["tools"]);if(t!==void 0&&ie!=null){let Ee=uu(ie);Array.isArray(Ee)&&(Ee=Ee.map(de=>_q(lu(de)))),m(t,["tools"],Ee)}const J=p(e,["toolConfig"]);if(t!==void 0&&J!=null&&m(t,["toolConfig"],vq(J)),p(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=p(e,["cachedContent"]);t!==void 0&&R!=null&&m(t,["cachedContent"],Xr(n,R));const M=p(e,["responseModalities"]);M!=null&&m(r,["responseModalities"],M);const P=p(e,["mediaResolution"]);P!=null&&m(r,["mediaResolution"],P);const O=p(e,["speechConfig"]);if(O!=null&&m(r,["speechConfig"],a_(O)),p(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const C=p(e,["thinkingConfig"]);C!=null&&m(r,["thinkingConfig"],C);const F=p(e,["imageConfig"]);F!=null&&m(r,["imageConfig"],Y8(F));const N=p(e,["enableEnhancedCivicAnswers"]);if(N!=null&&m(r,["enableEnhancedCivicAnswers"],N),p(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function b8(n,e,t,i){const r={},a=p(e,["systemInstruction"]);t!==void 0&&a!=null&&m(t,["systemInstruction"],gn(a));const l=p(e,["temperature"]);l!=null&&m(r,["temperature"],l);const c=p(e,["topP"]);c!=null&&m(r,["topP"],c);const h=p(e,["topK"]);h!=null&&m(r,["topK"],h);const f=p(e,["candidateCount"]);f!=null&&m(r,["candidateCount"],f);const _=p(e,["maxOutputTokens"]);_!=null&&m(r,["maxOutputTokens"],_);const T=p(e,["stopSequences"]);T!=null&&m(r,["stopSequences"],T);const x=p(e,["responseLogprobs"]);x!=null&&m(r,["responseLogprobs"],x);const A=p(e,["logprobs"]);A!=null&&m(r,["logprobs"],A);const V=p(e,["presencePenalty"]);V!=null&&m(r,["presencePenalty"],V);const k=p(e,["frequencyPenalty"]);k!=null&&m(r,["frequencyPenalty"],k);const L=p(e,["seed"]);L!=null&&m(r,["seed"],L);const $=p(e,["responseMimeType"]);$!=null&&m(r,["responseMimeType"],$);const z=p(e,["responseSchema"]);z!=null&&m(r,["responseSchema"],o_(z));const H=p(e,["responseJsonSchema"]);H!=null&&m(r,["responseJsonSchema"],H);const Z=p(e,["routingConfig"]);Z!=null&&m(r,["routingConfig"],Z);const ie=p(e,["modelSelectionConfig"]);ie!=null&&m(r,["modelConfig"],ie);const J=p(e,["safetySettings"]);if(t!==void 0&&J!=null){let he=J;Array.isArray(he)&&(he=he.map(Ie=>Ie)),m(t,["safetySettings"],he)}const R=p(e,["tools"]);if(t!==void 0&&R!=null){let he=uu(R);Array.isArray(he)&&(he=he.map(Ie=>iN(lu(Ie)))),m(t,["tools"],he)}const M=p(e,["toolConfig"]);t!==void 0&&M!=null&&m(t,["toolConfig"],M);const P=p(e,["labels"]);t!==void 0&&P!=null&&m(t,["labels"],P);const O=p(e,["cachedContent"]);t!==void 0&&O!=null&&m(t,["cachedContent"],Xr(n,O));const C=p(e,["responseModalities"]);C!=null&&m(r,["responseModalities"],C);const F=p(e,["mediaResolution"]);F!=null&&m(r,["mediaResolution"],F);const N=p(e,["speechConfig"]);N!=null&&m(r,["speechConfig"],a_(N));const Ee=p(e,["audioTimestamp"]);Ee!=null&&m(r,["audioTimestamp"],Ee);const de=p(e,["thinkingConfig"]);de!=null&&m(r,["thinkingConfig"],de);const G=p(e,["imageConfig"]);if(G!=null&&m(r,["imageConfig"],Q8(G)),p(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const re=p(e,["modelArmorConfig"]);return t!==void 0&&re!=null&&m(t,["modelArmorConfig"],re),r}function xA(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(h=>im(h))),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&m(i,["generationConfig"],x8(n,l,i)),i}function bA(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["contents"]);if(a!=null){let c=mi(a);Array.isArray(c)&&(c=c.map(h=>h)),m(i,["contents"],c)}const l=p(e,["config"]);return l!=null&&m(i,["generationConfig"],b8(n,l,i)),i}function SA(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(_=>jz(_))),m(t,["candidates"],f)}const a=p(n,["modelVersion"]);a!=null&&m(t,["modelVersion"],a);const l=p(n,["promptFeedback"]);l!=null&&m(t,["promptFeedback"],l);const c=p(n,["responseId"]);c!=null&&m(t,["responseId"],c);const h=p(n,["usageMetadata"]);return h!=null&&m(t,["usageMetadata"],h),t}function wA(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["candidates"]);if(r!=null){let _=r;Array.isArray(_)&&(_=_.map(T=>T)),m(t,["candidates"],_)}const a=p(n,["createTime"]);a!=null&&m(t,["createTime"],a);const l=p(n,["modelVersion"]);l!=null&&m(t,["modelVersion"],l);const c=p(n,["promptFeedback"]);c!=null&&m(t,["promptFeedback"],c);const h=p(n,["responseId"]);h!=null&&m(t,["responseId"],h);const f=p(n,["usageMetadata"]);return f!=null&&m(t,["usageMetadata"],f),t}function S8(n,e,t){const i={};if(p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=p(n,["aspectRatio"]);e!==void 0&&a!=null&&m(e,["parameters","aspectRatio"],a);const l=p(n,["guidanceScale"]);if(e!==void 0&&l!=null&&m(e,["parameters","guidanceScale"],l),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=p(n,["safetyFilterLevel"]);e!==void 0&&c!=null&&m(e,["parameters","safetySetting"],c);const h=p(n,["personGeneration"]);e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h);const f=p(n,["includeSafetyAttributes"]);e!==void 0&&f!=null&&m(e,["parameters","includeSafetyAttributes"],f);const _=p(n,["includeRaiReason"]);e!==void 0&&_!=null&&m(e,["parameters","includeRaiReason"],_);const T=p(n,["language"]);e!==void 0&&T!=null&&m(e,["parameters","language"],T);const x=p(n,["outputMimeType"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","mimeType"],x);const A=p(n,["outputCompressionQuality"]);if(e!==void 0&&A!=null&&m(e,["parameters","outputOptions","compressionQuality"],A),p(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const V=p(n,["imageSize"]);if(e!==void 0&&V!=null&&m(e,["parameters","sampleImageSize"],V),p(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function w8(n,e,t){const i={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=p(n,["negativePrompt"]);e!==void 0&&a!=null&&m(e,["parameters","negativePrompt"],a);const l=p(n,["numberOfImages"]);e!==void 0&&l!=null&&m(e,["parameters","sampleCount"],l);const c=p(n,["aspectRatio"]);e!==void 0&&c!=null&&m(e,["parameters","aspectRatio"],c);const h=p(n,["guidanceScale"]);e!==void 0&&h!=null&&m(e,["parameters","guidanceScale"],h);const f=p(n,["seed"]);e!==void 0&&f!=null&&m(e,["parameters","seed"],f);const _=p(n,["safetyFilterLevel"]);e!==void 0&&_!=null&&m(e,["parameters","safetySetting"],_);const T=p(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const x=p(n,["includeSafetyAttributes"]);e!==void 0&&x!=null&&m(e,["parameters","includeSafetyAttributes"],x);const A=p(n,["includeRaiReason"]);e!==void 0&&A!=null&&m(e,["parameters","includeRaiReason"],A);const V=p(n,["language"]);e!==void 0&&V!=null&&m(e,["parameters","language"],V);const k=p(n,["outputMimeType"]);e!==void 0&&k!=null&&m(e,["parameters","outputOptions","mimeType"],k);const L=p(n,["outputCompressionQuality"]);e!==void 0&&L!=null&&m(e,["parameters","outputOptions","compressionQuality"],L);const $=p(n,["addWatermark"]);e!==void 0&&$!=null&&m(e,["parameters","addWatermark"],$);const z=p(n,["labels"]);e!==void 0&&z!=null&&m(e,["labels"],z);const H=p(n,["imageSize"]);e!==void 0&&H!=null&&m(e,["parameters","sampleImageSize"],H);const Z=p(n,["enhancePrompt"]);return e!==void 0&&Z!=null&&m(e,["parameters","enhancePrompt"],Z),i}function A8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&S8(l,i),i}function I8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["config"]);return l!=null&&w8(l,i),i}function C8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>F8(c))),m(t,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],tN(a)),t}function R8(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["predictions"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(c=>rm(c))),m(t,["generatedImages"],l)}const a=p(n,["positivePromptSafetyAttributes"]);return a!=null&&m(t,["positivePromptSafetyAttributes"],nN(a)),t}function N8(n,e,t){const i={},r=p(n,["numberOfVideos"]);if(e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r),p(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(p(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const a=p(n,["durationSeconds"]);if(e!==void 0&&a!=null&&m(e,["parameters","durationSeconds"],a),p(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=p(n,["aspectRatio"]);e!==void 0&&l!=null&&m(e,["parameters","aspectRatio"],l);const c=p(n,["resolution"]);e!==void 0&&c!=null&&m(e,["parameters","resolution"],c);const h=p(n,["personGeneration"]);if(e!==void 0&&h!=null&&m(e,["parameters","personGeneration"],h),p(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=p(n,["negativePrompt"]);e!==void 0&&f!=null&&m(e,["parameters","negativePrompt"],f);const _=p(n,["enhancePrompt"]);if(e!==void 0&&_!=null&&m(e,["parameters","enhancePrompt"],_),p(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const T=p(n,["lastFrame"]);e!==void 0&&T!=null&&m(e,["instances[0]","lastFrame"],sm(T));const x=p(n,["referenceImages"]);if(e!==void 0&&x!=null){let A=x;Array.isArray(A)&&(A=A.map(V=>Mq(V))),m(e,["instances[0]","referenceImages"],A)}if(p(n,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(p(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return i}function D8(n,e,t){const i={},r=p(n,["numberOfVideos"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=p(n,["outputGcsUri"]);e!==void 0&&a!=null&&m(e,["parameters","storageUri"],a);const l=p(n,["fps"]);e!==void 0&&l!=null&&m(e,["parameters","fps"],l);const c=p(n,["durationSeconds"]);e!==void 0&&c!=null&&m(e,["parameters","durationSeconds"],c);const h=p(n,["seed"]);e!==void 0&&h!=null&&m(e,["parameters","seed"],h);const f=p(n,["aspectRatio"]);e!==void 0&&f!=null&&m(e,["parameters","aspectRatio"],f);const _=p(n,["resolution"]);e!==void 0&&_!=null&&m(e,["parameters","resolution"],_);const T=p(n,["personGeneration"]);e!==void 0&&T!=null&&m(e,["parameters","personGeneration"],T);const x=p(n,["pubsubTopic"]);e!==void 0&&x!=null&&m(e,["parameters","pubsubTopic"],x);const A=p(n,["negativePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","negativePrompt"],A);const V=p(n,["enhancePrompt"]);e!==void 0&&V!=null&&m(e,["parameters","enhancePrompt"],V);const k=p(n,["generateAudio"]);e!==void 0&&k!=null&&m(e,["parameters","generateAudio"],k);const L=p(n,["lastFrame"]);e!==void 0&&L!=null&&m(e,["instances[0]","lastFrame"],Oi(L));const $=p(n,["referenceImages"]);if(e!==void 0&&$!=null){let Z=$;Array.isArray(Z)&&(Z=Z.map(ie=>Pq(ie))),m(e,["instances[0]","referenceImages"],Z)}const z=p(n,["mask"]);e!==void 0&&z!=null&&m(e,["instances[0]","mask"],Dq(z));const H=p(n,["compressionQuality"]);return e!==void 0&&H!=null&&m(e,["parameters","compressionQuality"],H),i}function M8(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const r=p(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=p(n,["done"]);a!=null&&m(t,["done"],a);const l=p(n,["error"]);l!=null&&m(t,["error"],l);const c=p(n,["response","generateVideoResponse"]);return c!=null&&m(t,["response"],L8(c)),t}function P8(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const r=p(n,["metadata"]);r!=null&&m(t,["metadata"],r);const a=p(n,["done"]);a!=null&&m(t,["done"],a);const l=p(n,["error"]);l!=null&&m(t,["error"],l);const c=p(n,["response"]);return c!=null&&m(t,["response"],O8(c)),t}function k8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&m(i,["instances[0]","image"],sm(l));const c=p(e,["video"]);c!=null&&m(i,["instances[0]","video"],rN(c));const h=p(e,["source"]);h!=null&&U8(h,i);const f=p(e,["config"]);return f!=null&&N8(f,i),i}function V8(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["prompt"]);a!=null&&m(i,["instances[0]","prompt"],a);const l=p(e,["image"]);l!=null&&m(i,["instances[0]","image"],Oi(l));const c=p(e,["video"]);c!=null&&m(i,["instances[0]","video"],sN(c));const h=p(e,["source"]);h!=null&&G8(h,i);const f=p(e,["config"]);return f!=null&&D8(f,i),i}function L8(n,e){const t={},i=p(n,["generatedSamples"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>q8(c))),m(t,["generatedVideos"],l)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function O8(n,e){const t={},i=p(n,["videos"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(c=>B8(c))),m(t,["generatedVideos"],l)}const r=p(n,["raiMediaFilteredCount"]);r!=null&&m(t,["raiMediaFilteredCount"],r);const a=p(n,["raiMediaFilteredReasons"]);return a!=null&&m(t,["raiMediaFilteredReasons"],a),t}function U8(n,e,t){const i={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],sm(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],rN(l)),i}function G8(n,e,t){const i={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Oi(a));const l=p(n,["video"]);return e!==void 0&&l!=null&&m(e,["instances[0]","video"],sN(l)),i}function F8(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["image"],W8(i));const r=p(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=p(n,["_self"]);return a!=null&&m(t,["safetyAttributes"],tN(a)),t}function rm(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["image"],eN(i));const r=p(n,["raiFilteredReason"]);r!=null&&m(t,["raiFilteredReason"],r);const a=p(n,["_self"]);a!=null&&m(t,["safetyAttributes"],nN(a));const l=p(n,["prompt"]);return l!=null&&m(t,["enhancedPrompt"],l),t}function z8(n,e){const t={},i=p(n,["_self"]);i!=null&&m(t,["mask"],eN(i));const r=p(n,["labels"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(t,["labels"],a)}return t}function q8(n,e){const t={},i=p(n,["video"]);return i!=null&&m(t,["video"],Rq(i)),t}function B8(n,e){const t={},i=p(n,["_self"]);return i!=null&&m(t,["video"],Nq(i)),t}function H8(n,e){const t={},i=p(n,["modelSelectionConfig"]);i!=null&&m(t,["modelConfig"],i);const r=p(n,["responseJsonSchema"]);r!=null&&m(t,["responseJsonSchema"],r);const a=p(n,["audioTimestamp"]);a!=null&&m(t,["audioTimestamp"],a);const l=p(n,["candidateCount"]);l!=null&&m(t,["candidateCount"],l);const c=p(n,["enableAffectiveDialog"]);c!=null&&m(t,["enableAffectiveDialog"],c);const h=p(n,["frequencyPenalty"]);h!=null&&m(t,["frequencyPenalty"],h);const f=p(n,["logprobs"]);f!=null&&m(t,["logprobs"],f);const _=p(n,["maxOutputTokens"]);_!=null&&m(t,["maxOutputTokens"],_);const T=p(n,["mediaResolution"]);T!=null&&m(t,["mediaResolution"],T);const x=p(n,["presencePenalty"]);x!=null&&m(t,["presencePenalty"],x);const A=p(n,["responseLogprobs"]);A!=null&&m(t,["responseLogprobs"],A);const V=p(n,["responseMimeType"]);V!=null&&m(t,["responseMimeType"],V);const k=p(n,["responseModalities"]);k!=null&&m(t,["responseModalities"],k);const L=p(n,["responseSchema"]);L!=null&&m(t,["responseSchema"],L);const $=p(n,["routingConfig"]);$!=null&&m(t,["routingConfig"],$);const z=p(n,["seed"]);z!=null&&m(t,["seed"],z);const H=p(n,["speechConfig"]);H!=null&&m(t,["speechConfig"],H);const Z=p(n,["stopSequences"]);Z!=null&&m(t,["stopSequences"],Z);const ie=p(n,["temperature"]);ie!=null&&m(t,["temperature"],ie);const J=p(n,["thinkingConfig"]);J!=null&&m(t,["thinkingConfig"],J);const R=p(n,["topK"]);R!=null&&m(t,["topK"],R);const M=p(n,["topP"]);if(M!=null&&m(t,["topP"],M),p(n,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return t}function j8(n,e,t){const i={},r=p(e,["model"]);return r!=null&&m(i,["_url","name"],Xe(n,r)),i}function $8(n,e,t){const i={},r=p(e,["model"]);return r!=null&&m(i,["_url","name"],Xe(n,r)),i}function K8(n,e){const t={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const i=p(n,["enableWidget"]);return i!=null&&m(t,["enableWidget"],i),t}function J8(n,e){const t={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=p(n,["timeRangeFilter"]);return i!=null&&m(t,["timeRangeFilter"],i),t}function Y8(n,e){const t={},i=p(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=p(n,["imageSize"]);if(r!=null&&m(t,["imageSize"],r),p(n,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(p(n,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(p(n,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return t}function Q8(n,e){const t={},i=p(n,["aspectRatio"]);i!=null&&m(t,["aspectRatio"],i);const r=p(n,["imageSize"]);r!=null&&m(t,["imageSize"],r);const a=p(n,["personGeneration"]);a!=null&&m(t,["personGeneration"],a);const l=p(n,["outputMimeType"]);l!=null&&m(t,["imageOutputOptions","mimeType"],l);const c=p(n,["outputCompressionQuality"]);return c!=null&&m(t,["imageOutputOptions","compressionQuality"],c),t}function W8(n,e){const t={},i=p(n,["bytesBase64Encoded"]);i!=null&&m(t,["imageBytes"],ao(i));const r=p(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function eN(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=p(n,["bytesBase64Encoded"]);r!=null&&m(t,["imageBytes"],ao(r));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function sm(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=p(n,["imageBytes"]);i!=null&&m(t,["bytesBase64Encoded"],ao(i));const r=p(n,["mimeType"]);return r!=null&&m(t,["mimeType"],r),t}function Oi(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["gcsUri"],i);const r=p(n,["imageBytes"]);r!=null&&m(t,["bytesBase64Encoded"],ao(r));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function X8(n,e,t,i){const r={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=p(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=p(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],KR(n,h)),r}function Z8(n,e,t,i){const r={},a=p(e,["pageSize"]);t!==void 0&&a!=null&&m(t,["_query","pageSize"],a);const l=p(e,["pageToken"]);t!==void 0&&l!=null&&m(t,["_query","pageToken"],l);const c=p(e,["filter"]);t!==void 0&&c!=null&&m(t,["_query","filter"],c);const h=p(e,["queryBase"]);return t!==void 0&&h!=null&&m(t,["_url","models_url"],KR(n,h)),r}function eq(n,e,t){const i={},r=p(e,["config"]);return r!=null&&X8(n,r,i),i}function tq(n,e,t){const i={},r=p(e,["config"]);return r!=null&&Z8(n,r,i),i}function nq(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=p(n,["_self"]);if(a!=null){let l=JR(a);Array.isArray(l)&&(l=l.map(c=>Rv(c))),m(t,["models"],l)}return t}function iq(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=p(n,["_self"]);if(a!=null){let l=JR(a);Array.isArray(l)&&(l=l.map(c=>Nv(c))),m(t,["models"],l)}return t}function rq(n,e){const t={},i=p(n,["maskMode"]);i!=null&&m(t,["maskMode"],i);const r=p(n,["segmentationClasses"]);r!=null&&m(t,["maskClasses"],r);const a=p(n,["maskDilation"]);return a!=null&&m(t,["dilation"],a),t}function Rv(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const r=p(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=p(n,["description"]);a!=null&&m(t,["description"],a);const l=p(n,["version"]);l!=null&&m(t,["version"],l);const c=p(n,["_self"]);c!=null&&m(t,["tunedModelInfo"],Eq(c));const h=p(n,["inputTokenLimit"]);h!=null&&m(t,["inputTokenLimit"],h);const f=p(n,["outputTokenLimit"]);f!=null&&m(t,["outputTokenLimit"],f);const _=p(n,["supportedGenerationMethods"]);_!=null&&m(t,["supportedActions"],_);const T=p(n,["temperature"]);T!=null&&m(t,["temperature"],T);const x=p(n,["maxTemperature"]);x!=null&&m(t,["maxTemperature"],x);const A=p(n,["topP"]);A!=null&&m(t,["topP"],A);const V=p(n,["topK"]);V!=null&&m(t,["topK"],V);const k=p(n,["thinking"]);return k!=null&&m(t,["thinking"],k),t}function Nv(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["name"],i);const r=p(n,["displayName"]);r!=null&&m(t,["displayName"],r);const a=p(n,["description"]);a!=null&&m(t,["description"],a);const l=p(n,["versionId"]);l!=null&&m(t,["version"],l);const c=p(n,["deployedModels"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(A=>y8(A))),m(t,["endpoints"],x)}const h=p(n,["labels"]);h!=null&&m(t,["labels"],h);const f=p(n,["_self"]);f!=null&&m(t,["tunedModelInfo"],Tq(f));const _=p(n,["defaultCheckpointId"]);_!=null&&m(t,["defaultCheckpointId"],_);const T=p(n,["checkpoints"]);if(T!=null){let x=T;Array.isArray(x)&&(x=x.map(A=>A)),m(t,["checkpoints"],x)}return t}function sq(n,e){const t={},i=p(n,["mediaResolution"]);i!=null&&m(t,["mediaResolution"],i);const r=p(n,["codeExecutionResult"]);r!=null&&m(t,["codeExecutionResult"],r);const a=p(n,["executableCode"]);a!=null&&m(t,["executableCode"],a);const l=p(n,["fileData"]);l!=null&&m(t,["fileData"],v8(l));const c=p(n,["functionCall"]);c!=null&&m(t,["functionCall"],_8(c));const h=p(n,["functionResponse"]);h!=null&&m(t,["functionResponse"],h);const f=p(n,["inlineData"]);f!=null&&m(t,["inlineData"],Hz(f));const _=p(n,["text"]);_!=null&&m(t,["text"],_);const T=p(n,["thought"]);T!=null&&m(t,["thought"],T);const x=p(n,["thoughtSignature"]);x!=null&&m(t,["thoughtSignature"],x);const A=p(n,["videoMetadata"]);return A!=null&&m(t,["videoMetadata"],A),t}function oq(n,e){const t={},i=p(n,["productImage"]);return i!=null&&m(t,["image"],Oi(i)),t}function aq(n,e,t){const i={},r=p(n,["numberOfImages"]);e!==void 0&&r!=null&&m(e,["parameters","sampleCount"],r);const a=p(n,["baseSteps"]);e!==void 0&&a!=null&&m(e,["parameters","baseSteps"],a);const l=p(n,["outputGcsUri"]);e!==void 0&&l!=null&&m(e,["parameters","storageUri"],l);const c=p(n,["seed"]);e!==void 0&&c!=null&&m(e,["parameters","seed"],c);const h=p(n,["safetyFilterLevel"]);e!==void 0&&h!=null&&m(e,["parameters","safetySetting"],h);const f=p(n,["personGeneration"]);e!==void 0&&f!=null&&m(e,["parameters","personGeneration"],f);const _=p(n,["addWatermark"]);e!==void 0&&_!=null&&m(e,["parameters","addWatermark"],_);const T=p(n,["outputMimeType"]);e!==void 0&&T!=null&&m(e,["parameters","outputOptions","mimeType"],T);const x=p(n,["outputCompressionQuality"]);e!==void 0&&x!=null&&m(e,["parameters","outputOptions","compressionQuality"],x);const A=p(n,["enhancePrompt"]);e!==void 0&&A!=null&&m(e,["parameters","enhancePrompt"],A);const V=p(n,["labels"]);return e!==void 0&&V!=null&&m(e,["labels"],V),i}function lq(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["source"]);a!=null&&cq(a,i);const l=p(e,["config"]);return l!=null&&aq(l,i),i}function uq(n,e){const t={},i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>rm(a))),m(t,["generatedImages"],r)}return t}function cq(n,e,t){const i={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=p(n,["personImage"]);e!==void 0&&a!=null&&m(e,["instances[0]","personImage","image"],Oi(a));const l=p(n,["productImages"]);if(e!==void 0&&l!=null){let c=l;Array.isArray(c)&&(c=c.map(h=>oq(h))),m(e,["instances[0]","productImages"],c)}return i}function dq(n,e){const t={},i=p(n,["referenceImage"]);i!=null&&m(t,["referenceImage"],Oi(i));const r=p(n,["referenceId"]);r!=null&&m(t,["referenceId"],r);const a=p(n,["referenceType"]);a!=null&&m(t,["referenceType"],a);const l=p(n,["maskImageConfig"]);l!=null&&m(t,["maskImageConfig"],rq(l));const c=p(n,["controlImageConfig"]);c!=null&&m(t,["controlImageConfig"],Wz(c));const h=p(n,["styleImageConfig"]);h!=null&&m(t,["styleImageConfig"],h);const f=p(n,["subjectImageConfig"]);return f!=null&&m(t,["subjectImageConfig"],f),t}function tN(n,e){const t={},i=p(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=p(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=p(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function nN(n,e){const t={},i=p(n,["safetyAttributes","categories"]);i!=null&&m(t,["categories"],i);const r=p(n,["safetyAttributes","scores"]);r!=null&&m(t,["scores"],r);const a=p(n,["contentType"]);return a!=null&&m(t,["contentType"],a),t}function hq(n,e){const t={},i=p(n,["category"]);if(i!=null&&m(t,["category"],i),p(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=p(n,["threshold"]);return r!=null&&m(t,["threshold"],r),t}function fq(n,e){const t={},i=p(n,["image"]);return i!=null&&m(t,["image"],Oi(i)),t}function pq(n,e,t){const i={},r=p(n,["mode"]);e!==void 0&&r!=null&&m(e,["parameters","mode"],r);const a=p(n,["maxPredictions"]);e!==void 0&&a!=null&&m(e,["parameters","maxPredictions"],a);const l=p(n,["confidenceThreshold"]);e!==void 0&&l!=null&&m(e,["parameters","confidenceThreshold"],l);const c=p(n,["maskDilation"]);e!==void 0&&c!=null&&m(e,["parameters","maskDilation"],c);const h=p(n,["binaryColorThreshold"]);e!==void 0&&h!=null&&m(e,["parameters","binaryColorThreshold"],h);const f=p(n,["labels"]);return e!==void 0&&f!=null&&m(e,["labels"],f),i}function mq(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["source"]);a!=null&&yq(a,i);const l=p(e,["config"]);return l!=null&&pq(l,i),i}function gq(n,e){const t={},i=p(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>z8(a))),m(t,["generatedMasks"],r)}return t}function yq(n,e,t){const i={},r=p(n,["prompt"]);e!==void 0&&r!=null&&m(e,["instances[0]","prompt"],r);const a=p(n,["image"]);e!==void 0&&a!=null&&m(e,["instances[0]","image"],Oi(a));const l=p(n,["scribbleImage"]);return e!==void 0&&l!=null&&m(e,["instances[0]","scribble"],fq(l)),i}function vq(n,e){const t={},i=p(n,["retrievalConfig"]);i!=null&&m(t,["retrievalConfig"],i);const r=p(n,["functionCallingConfig"]);return r!=null&&m(t,["functionCallingConfig"],E8(r)),t}function _q(n,e){const t={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=p(n,["computerUse"]);i!=null&&m(t,["computerUse"],i);const r=p(n,["fileSearch"]);r!=null&&m(t,["fileSearch"],r);const a=p(n,["codeExecution"]);if(a!=null&&m(t,["codeExecution"],a),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const l=p(n,["functionDeclarations"]);if(l!=null){let T=l;Array.isArray(T)&&(T=T.map(x=>x)),m(t,["functionDeclarations"],T)}const c=p(n,["googleMaps"]);c!=null&&m(t,["googleMaps"],K8(c));const h=p(n,["googleSearch"]);h!=null&&m(t,["googleSearch"],J8(h));const f=p(n,["googleSearchRetrieval"]);f!=null&&m(t,["googleSearchRetrieval"],f);const _=p(n,["urlContext"]);return _!=null&&m(t,["urlContext"],_),t}function iN(n,e){const t={},i=p(n,["retrieval"]);i!=null&&m(t,["retrieval"],i);const r=p(n,["computerUse"]);if(r!=null&&m(t,["computerUse"],r),p(n,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const a=p(n,["codeExecution"]);a!=null&&m(t,["codeExecution"],a);const l=p(n,["enterpriseWebSearch"]);l!=null&&m(t,["enterpriseWebSearch"],l);const c=p(n,["functionDeclarations"]);if(c!=null){let x=c;Array.isArray(x)&&(x=x.map(A=>T8(A))),m(t,["functionDeclarations"],x)}const h=p(n,["googleMaps"]);h!=null&&m(t,["googleMaps"],h);const f=p(n,["googleSearch"]);f!=null&&m(t,["googleSearch"],f);const _=p(n,["googleSearchRetrieval"]);_!=null&&m(t,["googleSearchRetrieval"],_);const T=p(n,["urlContext"]);return T!=null&&m(t,["urlContext"],T),t}function Eq(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=p(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=p(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function Tq(n,e){const t={},i=p(n,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&m(t,["baseModel"],i);const r=p(n,["createTime"]);r!=null&&m(t,["createTime"],r);const a=p(n,["updateTime"]);return a!=null&&m(t,["updateTime"],a),t}function xq(n,e,t){const i={},r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=p(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function bq(n,e,t){const i={},r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=p(n,["description"]);e!==void 0&&a!=null&&m(e,["description"],a);const l=p(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&m(e,["defaultCheckpointId"],l),i}function Sq(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","name"],Xe(n,r));const a=p(e,["config"]);return a!=null&&xq(a,i),i}function wq(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["config"]);return a!=null&&bq(a,i),i}function Aq(n,e,t){const i={},r=p(n,["outputGcsUri"]);e!==void 0&&r!=null&&m(e,["parameters","storageUri"],r);const a=p(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&m(e,["parameters","safetySetting"],a);const l=p(n,["personGeneration"]);e!==void 0&&l!=null&&m(e,["parameters","personGeneration"],l);const c=p(n,["includeRaiReason"]);e!==void 0&&c!=null&&m(e,["parameters","includeRaiReason"],c);const h=p(n,["outputMimeType"]);e!==void 0&&h!=null&&m(e,["parameters","outputOptions","mimeType"],h);const f=p(n,["outputCompressionQuality"]);e!==void 0&&f!=null&&m(e,["parameters","outputOptions","compressionQuality"],f);const _=p(n,["enhanceInputImage"]);e!==void 0&&_!=null&&m(e,["parameters","upscaleConfig","enhanceInputImage"],_);const T=p(n,["imagePreservationFactor"]);e!==void 0&&T!=null&&m(e,["parameters","upscaleConfig","imagePreservationFactor"],T);const x=p(n,["labels"]);e!==void 0&&x!=null&&m(e,["labels"],x);const A=p(n,["numberOfImages"]);e!==void 0&&A!=null&&m(e,["parameters","sampleCount"],A);const V=p(n,["mode"]);return e!==void 0&&V!=null&&m(e,["parameters","mode"],V),i}function Iq(n,e,t){const i={},r=p(e,["model"]);r!=null&&m(i,["_url","model"],Xe(n,r));const a=p(e,["image"]);a!=null&&m(i,["instances[0]","image"],Oi(a));const l=p(e,["upscaleFactor"]);l!=null&&m(i,["parameters","upscaleConfig","upscaleFactor"],l);const c=p(e,["config"]);return c!=null&&Aq(c,i),i}function Cq(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["predictions"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>rm(l))),m(t,["generatedImages"],a)}return t}function Rq(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["uri"],i);const r=p(n,["encodedVideo"]);r!=null&&m(t,["videoBytes"],ao(r));const a=p(n,["encoding"]);return a!=null&&m(t,["mimeType"],a),t}function Nq(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["uri"],i);const r=p(n,["bytesBase64Encoded"]);r!=null&&m(t,["videoBytes"],ao(r));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}function Dq(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["_self"],Oi(i));const r=p(n,["maskMode"]);return r!=null&&m(t,["maskMode"],r),t}function Mq(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["image"],sm(i));const r=p(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function Pq(n,e){const t={},i=p(n,["image"]);i!=null&&m(t,["image"],Oi(i));const r=p(n,["referenceType"]);return r!=null&&m(t,["referenceType"],r),t}function rN(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["uri"],i);const r=p(n,["videoBytes"]);r!=null&&m(t,["encodedVideo"],ao(r));const a=p(n,["mimeType"]);return a!=null&&m(t,["encoding"],a),t}function sN(n,e){const t={},i=p(n,["uri"]);i!=null&&m(t,["gcsUri"],i);const r=p(n,["videoBytes"]);r!=null&&m(t,["bytesBase64Encoded"],ao(r));const a=p(n,["mimeType"]);return a!=null&&m(t,["mimeType"],a),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kq(n,e){const t={},i=p(n,["displayName"]);return e!==void 0&&i!=null&&m(e,["displayName"],i),t}function Vq(n){const e={},t=p(n,["config"]);return t!=null&&kq(t,e),e}function Lq(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function Oq(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&Lq(i,e),e}function Uq(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function Gq(n,e){const t={},i=p(n,["customMetadata"]);if(e!==void 0&&i!=null){let a=i;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["customMetadata"],a)}const r=p(n,["chunkingConfig"]);return e!==void 0&&r!=null&&m(e,["chunkingConfig"],r),t}function Fq(n){const e={},t=p(n,["name"]);t!=null&&m(e,["name"],t);const i=p(n,["metadata"]);i!=null&&m(e,["metadata"],i);const r=p(n,["done"]);r!=null&&m(e,["done"],r);const a=p(n,["error"]);a!=null&&m(e,["error"],a);const l=p(n,["response"]);return l!=null&&m(e,["response"],qq(l)),e}function zq(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=p(n,["fileName"]);i!=null&&m(e,["fileName"],i);const r=p(n,["config"]);return r!=null&&Gq(r,e),e}function qq(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["parent"]);i!=null&&m(e,["parent"],i);const r=p(n,["documentName"]);return r!=null&&m(e,["documentName"],r),e}function Bq(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function Hq(n){const e={},t=p(n,["config"]);return t!=null&&Bq(t,e),e}function jq(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["fileSearchStores"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["fileSearchStores"],a)}return e}function oN(n,e){const t={},i=p(n,["mimeType"]);e!==void 0&&i!=null&&m(e,["mimeType"],i);const r=p(n,["displayName"]);e!==void 0&&r!=null&&m(e,["displayName"],r);const a=p(n,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(h=>h)),m(e,["customMetadata"],c)}const l=p(n,["chunkingConfig"]);return e!==void 0&&l!=null&&m(e,["chunkingConfig"],l),t}function $q(n){const e={},t=p(n,["fileSearchStoreName"]);t!=null&&m(e,["_url","file_search_store_name"],t);const i=p(n,["config"]);return i!=null&&oN(i,e),e}function Kq(n){const e={},t=p(n,["sdkHttpResponse"]);return t!=null&&m(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jq="Content-Type",Yq="X-Server-Timeout",Qq="User-Agent",Dv="x-goog-api-client",Wq="1.41.0",Xq=`google-genai-sdk/${Wq}`,Zq="v1beta1",eB="v1beta",tB=5,nB=[408,429,500,502,503,504];class iB{constructor(e){var t,i,r;this.clientOptions=Object.assign({},e),this.customBaseUrl=(t=e.httpOptions)===null||t===void 0?void 0:t.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const a={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(a.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?a.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(a.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),a.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Zq}else{if(!this.clientOptions.apiKey)throw new ud({message:"API key must be set when using the Gemini API.",status:403});a.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:eB,a.baseUrl="https://generativelanguage.googleapis.com/"}a.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=a,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(a,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e,t){return!(t.baseUrl&&t.baseUrlResourceScope===wv.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[l,c]of Object.entries(e.queryParams))r.searchParams.append(l,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.unaryApiCall(r,a,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,a]of Object.entries(t))typeof a=="object"?i[r]=Object.assign(Object.assign({},i[r]),a):a!==void 0&&(i[r]=a);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e,t),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,r.toString(),e.abortSignal),this.streamApiCall(r,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i,r){if(t&&t.timeout||r){const a=new AbortController,l=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>a.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}r&&r.addEventListener("abort",()=>{a.abort()}),e.signal=l}return t&&t.extraBody!==null&&rB(e,t.extraBody),e.headers=await this.getHeadersInternal(t,i),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await AA(r),new Av(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await AA(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){return Mi(this,arguments,function*(){var i;const r=(i=e==null?void 0:e.body)===null||i===void 0?void 0:i.getReader(),a=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let l="";const c="data:",h=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:f,value:_}=yield ke(r.read());if(f){if(l.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const T=a.decode(_,{stream:!0});try{const V=JSON.parse(T);if("error"in V){const k=JSON.parse(JSON.stringify(V.error)),L=k.status,$=k.code,z=`got status: ${L}. ${JSON.stringify(V)}`;if($>=400&&$<600)throw new ud({message:z,status:$})}}catch(V){if(V.name==="ApiError")throw V}l+=T;let x=-1,A=0;for(;;){x=-1,A=0;for(const L of h){const $=l.indexOf(L);$!==-1&&(x===-1||$<x)&&(x=$,A=L.length)}if(x===-1)break;const V=l.substring(0,x);l=l.substring(x+A);const k=V.trim();if(k.startsWith(c)){const L=k.substring(c.length).trim();try{const $=new Response(L,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield ke(new Av($))}catch($){throw new Error(`exception parsing stream chunk ${L}. ${$}`)}}}}}finally{r.releaseLock()}})}async apiCall(e,t){var i;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,t);const r=this.clientOptions.httpOptions.retryOptions;return K6(async()=>{const l=await fetch(e,t);if(l.ok)return l;throw nB.includes(l.status)?new Error(`Retryable HTTP Error: ${l.statusText}`):new UR(`Non-retryable exception ${l.statusText} sending request`)},{retries:((i=r.attempts)!==null&&i!==void 0?i:tB)-1})}getDefaultHeaders(){const e={},t=Xq+" "+this.clientOptions.userAgentExtra;return e[Qq]=t,e[Dv]=t,e[Jq]="application/json",e}async getHeadersInternal(e,t){const i=new Headers;if(e&&e.headers){for(const[r,a]of Object.entries(e.headers))i.append(r,a);e.timeout&&e.timeout>0&&i.append(Yq,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(i,t),i}getFileName(e){var t;let i="";return typeof e=="string"&&(i=e.replace(/[/\\]+$/,""),i=(t=i.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),i}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const a=this.clientOptions.uploader,l=await a.stat(e);r.sizeBytes=String(l.size);const c=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:l.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=c;const h={file:r},f=this.getFileName(e),_=_e("upload/v1beta/files",h._url),T=await this.fetchUploadUrl(_,r.sizeBytes,r.mimeType,f,h,t==null?void 0:t.httpOptions);return a.upload(e,T,this)}async uploadFileToFileSearchStore(e,t,i){var r;const a=this.clientOptions.uploader,l=await a.stat(t),c=String(l.size),h=(r=i==null?void 0:i.mimeType)!==null&&r!==void 0?r:l.type;if(h===void 0||h==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const f=`upload/v1beta/${e}:uploadToFileSearchStore`,_=this.getFileName(t),T={};i!=null&&oN(i,T);const x=await this.fetchUploadUrl(f,c,h,_,T,i==null?void 0:i.httpOptions);return a.uploadToFileSearchStore(t,x,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,i,r,a,l){var c;let h={};l?h=l:h={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${i}`},r?{"X-Goog-Upload-File-Name":r}:{})};const f=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:h});if(!f||!(f!=null&&f.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const _=(c=f==null?void 0:f.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(_===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return _}}async function AA(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new ud({message:r,status:t}):new Error(r)}}function rB(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const a=JSON.parse(n.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(a,l){const c=Object.assign({},a);for(const h in l)if(Object.prototype.hasOwnProperty.call(l,h)){const f=l[h],_=c[h];f&&typeof f=="object"&&!Array.isArray(f)&&_&&typeof _=="object"&&!Array.isArray(_)?c[h]=i(_,f):(_&&f&&typeof _!=typeof f&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${h}". Original type: ${typeof _}, New type: ${typeof f}. Overwriting.`),c[h]=f)}return c}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sB="mcp_used/unknown";let oB=!1;function aN(n){for(const e of n)if(aB(e)||typeof e=="object"&&"inputSchema"in e)return!0;return oB}function lN(n){var e;const t=(e=n[Dv])!==null&&e!==void 0?e:"";n[Dv]=(t+` ${sB}`).trimStart()}function aB(n){return n!==null&&typeof n=="object"&&n instanceof u_}function lB(n){return Mi(this,arguments,function*(t,i=100){let r,a=0;for(;a<i;){const l=yield ke(t.listTools({cursor:r}));for(const c of l.tools)yield yield ke(c),a++;if(!l.nextCursor)break;r=l.nextCursor}})}class u_{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new u_(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const a={},l=[];for(const _ of this.mcpClients)try{for(var c=!0,h=(t=void 0,Pi(lB(_))),f;f=await h.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const T=r;l.push(T);const x=T.name;if(a[x])throw new Error(`Duplicate function name ${x} found in MCP tools. Please ensure function names are unique.`);a[x]=_}}catch(T){t={error:T}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}this.mcpTools=l,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),VG(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const l=await r.callTool({name:i.name,arguments:i.args},void 0,a);t.push({functionResponse:{name:i.name,response:l.isError?{error:l}:l}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function uB(n,e,t){const i=new IG;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data),Object.assign(i,r),e(i)}class cB{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),l=fB(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),h=`${r}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let f=()=>{};const _=new Promise(H=>{f=H}),T=e.callbacks,x=function(){f({})},A=this.apiClient,V={onopen:x,onmessage:H=>{uB(A,T.onmessage,H)},onerror:(t=T==null?void 0:T.onerror)!==null&&t!==void 0?t:function(H){},onclose:(i=T==null?void 0:T.onclose)!==null&&i!==void 0?i:function(H){}},k=this.webSocketFactory.create(h,hB(l),V);k.connect(),await _;const z={setup:{model:Xe(this.apiClient,e.model)}};return k.send(JSON.stringify(z)),new dB(k,this.apiClient)}}class dB{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=kz(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Pz(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(xl.PLAY)}pause(){this.sendPlaybackControl(xl.PAUSE)}stop(){this.sendPlaybackControl(xl.STOP)}resetContext(){this.sendPlaybackControl(xl.RESET_CONTEXT)}close(){this.conn.close()}}function hB(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function fB(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const pB="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function mB(n,e,t){const i=new AG;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const a=JSON.parse(r);if(n.isVertexAI()){const l=Oz(a);Object.assign(i,l)}else Object.assign(i,a);e(i)}class gB{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new cB(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,a,l,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const h=this.apiClient.getWebsocketBaseUrl(),f=this.apiClient.getApiVersion();let _;const T=this.apiClient.getHeaders();e.config&&e.config.tools&&aN(e.config.tools)&&lN(T);const x=EB(T);if(this.apiClient.isVertexAI()){const P=this.apiClient.getProject(),O=this.apiClient.getLocation(),C=this.apiClient.getApiKey(),F=!!P&&!!O||!!C;this.apiClient.getCustomBaseUrl()&&!F?_=h:(_=`${h}/ws/google.cloud.aiplatform.${f}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(x,_))}else{const P=this.apiClient.getApiKey();let O="BidiGenerateContent",C="key";P!=null&&P.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),f!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),O="BidiGenerateContentConstrained",C="access_token"),_=`${h}/ws/google.ai.generativelanguage.${f}.GenerativeService.${O}?${C}=${P}`}let A=()=>{};const V=new Promise(P=>{A=P}),k=e.callbacks,L=function(){var P;(P=k==null?void 0:k.onopen)===null||P===void 0||P.call(k),A({})},$=this.apiClient,z={onopen:L,onmessage:P=>{mB($,k.onmessage,P)},onerror:(t=k==null?void 0:k.onerror)!==null&&t!==void 0?t:function(P){},onclose:(i=k==null?void 0:k.onclose)!==null&&i!==void 0?i:function(P){}},H=this.webSocketFactory.create(_,_B(x),z);H.connect(),await V;let Z=Xe(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&Z.startsWith("publishers/")){const P=this.apiClient.getProject(),O=this.apiClient.getLocation();P&&O&&(Z=`projects/${P}/locations/${O}/`+Z)}let ie={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Tp.AUDIO]}:e.config.responseModalities=[Tp.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const J=(c=(l=e.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[],R=[];for(const P of J)if(this.isCallableTool(P)){const O=P;R.push(await O.tool())}else R.push(P);R.length>0&&(e.config.tools=R);const M={model:Z,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?ie=Mz(this.apiClient,M):ie=Dz(this.apiClient,M),delete ie.config,H.send(JSON.stringify(ie)),new vB(H,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yB={turnComplete:!0};class vB{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=mi(t.turns),e.isVertexAI()||(i=i.map(r=>im(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const a of i){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(pB)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},yB),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Lz(e)}:t={realtimeInput:Vz(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function _B(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function EB(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IA=10;function CA(n){var e,t,i;if(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const l of(t=n==null?void 0:n.tools)!==null&&t!==void 0?t:[])if(Dl(l)){r=!0;break}if(!r)return!0;const a=(i=n==null?void 0:n.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function Dl(n){return"callTool"in n&&typeof n.callTool=="function"}function TB(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>Dl(r)))!==null&&i!==void 0?i:!1}function RA(n){var e;const t=[];return!((e=n==null?void 0:n.config)===null||e===void 0)&&e.tools&&n.config.tools.forEach((i,r)=>{if(Dl(i))return;const a=i;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(r)}),t}function NA(n){var e;return!(!((e=n==null?void 0:n.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xB extends Wr{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,a,l,c;const h=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!TB(t)||CA(t.config))return await this.generateContentInternal(h);const f=RA(t);if(f.length>0){const k=f.map(L=>`tools[${L}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${k}.`)}let _,T;const x=mi(h.contents),A=(a=(r=(i=h.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&a!==void 0?a:IA;let V=0;for(;V<A&&(_=await this.generateContentInternal(h),!(!_.functionCalls||_.functionCalls.length===0));){const k=_.candidates[0].content,L=[];for(const $ of(c=(l=t.config)===null||l===void 0?void 0:l.tools)!==null&&c!==void 0?c:[])if(Dl($)){const H=await $.callTool(_.functionCalls);L.push(...H)}V++,T={role:"user",parts:L},h.contents=mi(h.contents),h.contents.push(k),h.contents.push(T),NA(h.config)&&(x.push(k),x.push(T))}return NA(h.config)&&(_.automaticFunctionCallingHistory=x),_},this.generateContentStream=async t=>{var i,r,a,l,c;if(this.maybeMoveToResponseJsonSchem(t),CA(t.config)){const T=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(T)}const h=RA(t);if(h.length>0){const T=h.map(x=>`tools[${x}]`).join(", ");throw new Error(`Incompatible tools found at ${T}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const f=(a=(r=(i=t==null?void 0:t.config)===null||i===void 0?void 0:i.toolConfig)===null||r===void 0?void 0:r.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,_=(c=(l=t==null?void 0:t.config)===null||l===void 0?void 0:l.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(f&&!_)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let a;const l=[];if(i!=null&&i.generatedImages)for(const h of i.generatedImages)h&&(h!=null&&h.safetyAttributes)&&((r=h==null?void 0:h.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?a=h==null?void 0:h.safetyAttributes:l.push(h);let c;return a?c={generatedImages:l,positivePromptSafetyAttributes:a,sdkHttpResponse:i.sdkHttpResponse}:c={generatedImages:l,sdkHttpResponse:i.sdkHttpResponse},c}),this.list=async t=>{var i;const l={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!l.config.queryBase){if(!((i=l.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");l.config.filter="labels.tune-type:*"}return new va(Kr.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(l),l)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>{var i,r,a,l,c,h;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((i=t.video)===null||i===void 0)&&i.uri&&(!((r=t.video)===null||r===void 0)&&r.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((l=(a=t.source)===null||a===void 0?void 0:a.video)===null||l===void 0)&&l.uri&&(!((h=(c=t.source)===null||c===void 0?void 0:c.video)===null||h===void 0)&&h.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const l=await Promise.all(a.map(async h=>Dl(h)?await h.tool():h)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:l})};if(c.config.tools=l,e.config&&e.config.tools&&aN(e.config.tools)){const h=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let f=Object.assign({},h);Object.keys(f).length===0&&(f=this.apiClient.getDefaultHeaders()),lN(f),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:f})}return c}async initAfcToolsMap(e){var t,i,r;const a=new Map;for(const l of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(Dl(l)){const c=l,h=await c.tool();for(const f of(r=h.functionDeclarations)!==null&&r!==void 0?r:[]){if(!f.name)throw new Error("Function declaration name is required.");if(a.has(f.name))throw new Error(`Duplicate tool declaration name: ${f.name}`);a.set(f.name,c)}}return a}async processAfcStream(e){var t,i,r;const a=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:IA;let l=!1,c=0;const h=await this.initAfcToolsMap(e);return(function(f,_,T){return Mi(this,arguments,function*(){for(var x,A,V,k,L,$;c<a;){l&&(c++,l=!1);const ie=yield ke(f.processParamsMaybeAddMcpUsage(T)),J=yield ke(f.generateContentStreamInternal(ie)),R=[],M=[];try{for(var z=!0,H=(A=void 0,Pi(J)),Z;Z=yield ke(H.next()),x=Z.done,!x;z=!0){k=Z.value,z=!1;const P=k;if(yield yield ke(P),P.candidates&&(!((L=P.candidates[0])===null||L===void 0)&&L.content)){M.push(P.candidates[0].content);for(const O of($=P.candidates[0].content.parts)!==null&&$!==void 0?$:[])if(c<a&&O.functionCall){if(!O.functionCall.name)throw new Error("Function call name was not returned by the model.");if(_.has(O.functionCall.name)){const C=yield ke(_.get(O.functionCall.name).callTool([O.functionCall]));R.push(...C)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${_.keys()}, mising tool: ${O.functionCall.name}`)}}}}catch(P){A={error:P}}finally{try{!z&&!x&&(V=H.return)&&(yield ke(V.call(H)))}finally{if(A)throw A.error}}if(R.length>0){l=!0;const P=new wc;P.candidates=[{content:{role:"user",parts:R}}],yield yield ke(P);const O=[];O.push(...M),O.push({role:"user",parts:R});const C=mi(T.contents).concat(O);T.contents=C}else break}})})(this,h,e)}async generateContentInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=bA(this.apiClient,e);return c=_e("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=wA(_),x=new wc;return Object.assign(x,T),x})}else{const f=xA(this.apiClient,e);return c=_e("{model}:generateContent",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=SA(_),x=new wc;return Object.assign(x,T),x})}}async generateContentStreamInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=bA(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),l.then(function(T){return Mi(this,arguments,function*(){var x,A,V,k;try{for(var L=!0,$=Pi(T),z;z=yield ke($.next()),x=z.done,!x;L=!0){k=z.value,L=!1;const H=k,Z=wA(yield ke(H.json()),e);Z.sdkHttpResponse={headers:H.headers};const ie=new wc;Object.assign(ie,Z),yield yield ke(ie)}}catch(H){A={error:H}}finally{try{!L&&!x&&(V=$.return)&&(yield ke(V.call($)))}finally{if(A)throw A.error}}})})}else{const f=xA(this.apiClient,e);return c=_e("{model}:streamGenerateContent?alt=sse",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.requestStream({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),l.then(function(T){return Mi(this,arguments,function*(){var x,A,V,k;try{for(var L=!0,$=Pi(T),z;z=yield ke($.next()),x=z.done,!x;L=!0){k=z.value,L=!1;const H=k,Z=SA(yield ke(H.json()),e);Z.sdkHttpResponse={headers:H.headers};const ie=new wc;Object.assign(ie,Z),yield yield ke(ie)}}catch(H){A={error:H}}finally{try{!L&&!x&&(V=$.return)&&(yield ke(V.call($)))}finally{if(A)throw A.error}}})})}}async embedContent(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=p8(this.apiClient,e);return c=_e("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=g8(_),x=new sA;return Object.assign(x,T),x})}else{const f=f8(this.apiClient,e);return c=_e("{model}:batchEmbedContents",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=m8(_),x=new sA;return Object.assign(x,T),x})}}async generateImagesInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=I8(this.apiClient,e);return c=_e("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=R8(_),x=new oA;return Object.assign(x,T),x})}else{const f=A8(this.apiClient,e);return c=_e("{model}:predict",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=C8(_),x=new oA;return Object.assign(x,T),x})}}async editImageInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=u8(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const f=c8(h),_=new pG;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Iq(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const f=Cq(h),_=new mG;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=lq(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=uq(h),_=new gG;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=mq(this.apiClient,e);return a=_e("{model}:predict",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=gq(h),_=new yG;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=$8(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>Nv(_))}else{const f=j8(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Rv(_))}}async listInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=tq(this.apiClient,e);return c=_e("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=iq(_),x=new aA;return Object.assign(x,T),x})}else{const f=eq(this.apiClient,e);return c=_e("{models_url}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=nq(_),x=new aA;return Object.assign(x,T),x})}}async update(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=wq(this.apiClient,e);return c=_e("{model}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>Nv(_))}else{const f=Sq(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>Rv(_))}}async delete(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=s8(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=a8(_),x=new lA;return Object.assign(x,T),x})}else{const f=r8(this.apiClient,e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=o8(_),x=new lA;return Object.assign(x,T),x})}}async countTokens(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=t8(this.apiClient,e);return c=_e("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=i8(_),x=new uA;return Object.assign(x,T),x})}else{const f=e8(this.apiClient,e);return c=_e("{model}:countTokens",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=n8(_),x=new uA;return Object.assign(x,T),x})}}async computeTokens(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=Kz(this.apiClient,e);return a=_e("{model}:computeTokens",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>{const f=Jz(h),_=new vG;return Object.assign(_,f),_})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=V8(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l.then(_=>{const T=P8(_),x=new xp;return Object.assign(x,T),x})}else{const f=k8(this.apiClient,e);return c=_e("{model}:predictLongRunning",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l.then(_=>{const T=M8(_),x=new xp;return Object.assign(x,T),x})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bB extends Wr{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let a;i&&"httpOptions"in i&&(a=i.httpOptions);const l=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:l,_isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=lG(e);return c=_e("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json()),l}else{const f=aG(e);return c=_e("{operationName}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json()),l}}async fetchPredictVideosOperationInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=eG(e);return a=_e("{resourceName}:fetchPredictOperation",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SB(n){const e={},t=p(n,["data"]);if(t!=null&&m(e,["data"],t),p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function wB(n){const e={},t=p(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(a=>kB(a))),m(e,["parts"],r)}const i=p(n,["role"]);return i!=null&&m(e,["role"],i),e}function AB(n,e,t){const i={},r=p(e,["expireTime"]);t!==void 0&&r!=null&&m(t,["expireTime"],r);const a=p(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&m(t,["newSessionExpireTime"],a);const l=p(e,["uses"]);t!==void 0&&l!=null&&m(t,["uses"],l);const c=p(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&m(t,["bidiGenerateContentSetup"],PB(n,c));const h=p(e,["lockAdditionalFields"]);return t!==void 0&&h!=null&&m(t,["fieldMask"],h),i}function IB(n,e){const t={},i=p(e,["config"]);return i!=null&&m(t,["config"],AB(n,i,t)),t}function CB(n){const e={};if(p(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=p(n,["fileUri"]);t!=null&&m(e,["fileUri"],t);const i=p(n,["mimeType"]);return i!=null&&m(e,["mimeType"],i),e}function RB(n){const e={},t=p(n,["id"]);t!=null&&m(e,["id"],t);const i=p(n,["args"]);i!=null&&m(e,["args"],i);const r=p(n,["name"]);if(r!=null&&m(e,["name"],r),p(n,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(p(n,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function NB(n){const e={};if(p(n,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=p(n,["enableWidget"]);return t!=null&&m(e,["enableWidget"],t),e}function DB(n){const e={};if(p(n,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(p(n,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=p(n,["timeRangeFilter"]);return t!=null&&m(e,["timeRangeFilter"],t),e}function MB(n,e){const t={},i=p(n,["generationConfig"]);e!==void 0&&i!=null&&m(e,["setup","generationConfig"],i);const r=p(n,["responseModalities"]);e!==void 0&&r!=null&&m(e,["setup","generationConfig","responseModalities"],r);const a=p(n,["temperature"]);e!==void 0&&a!=null&&m(e,["setup","generationConfig","temperature"],a);const l=p(n,["topP"]);e!==void 0&&l!=null&&m(e,["setup","generationConfig","topP"],l);const c=p(n,["topK"]);e!==void 0&&c!=null&&m(e,["setup","generationConfig","topK"],c);const h=p(n,["maxOutputTokens"]);e!==void 0&&h!=null&&m(e,["setup","generationConfig","maxOutputTokens"],h);const f=p(n,["mediaResolution"]);e!==void 0&&f!=null&&m(e,["setup","generationConfig","mediaResolution"],f);const _=p(n,["seed"]);e!==void 0&&_!=null&&m(e,["setup","generationConfig","seed"],_);const T=p(n,["speechConfig"]);e!==void 0&&T!=null&&m(e,["setup","generationConfig","speechConfig"],l_(T));const x=p(n,["thinkingConfig"]);e!==void 0&&x!=null&&m(e,["setup","generationConfig","thinkingConfig"],x);const A=p(n,["enableAffectiveDialog"]);e!==void 0&&A!=null&&m(e,["setup","generationConfig","enableAffectiveDialog"],A);const V=p(n,["systemInstruction"]);e!==void 0&&V!=null&&m(e,["setup","systemInstruction"],wB(gn(V)));const k=p(n,["tools"]);if(e!==void 0&&k!=null){let J=uu(k);Array.isArray(J)&&(J=J.map(R=>LB(lu(R)))),m(e,["setup","tools"],J)}const L=p(n,["sessionResumption"]);e!==void 0&&L!=null&&m(e,["setup","sessionResumption"],VB(L));const $=p(n,["inputAudioTranscription"]);e!==void 0&&$!=null&&m(e,["setup","inputAudioTranscription"],$);const z=p(n,["outputAudioTranscription"]);e!==void 0&&z!=null&&m(e,["setup","outputAudioTranscription"],z);const H=p(n,["realtimeInputConfig"]);e!==void 0&&H!=null&&m(e,["setup","realtimeInputConfig"],H);const Z=p(n,["contextWindowCompression"]);e!==void 0&&Z!=null&&m(e,["setup","contextWindowCompression"],Z);const ie=p(n,["proactivity"]);if(e!==void 0&&ie!=null&&m(e,["setup","proactivity"],ie),p(n,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return t}function PB(n,e){const t={},i=p(e,["model"]);i!=null&&m(t,["setup","model"],Xe(n,i));const r=p(e,["config"]);return r!=null&&m(t,["config"],MB(r,t)),t}function kB(n){const e={},t=p(n,["mediaResolution"]);t!=null&&m(e,["mediaResolution"],t);const i=p(n,["codeExecutionResult"]);i!=null&&m(e,["codeExecutionResult"],i);const r=p(n,["executableCode"]);r!=null&&m(e,["executableCode"],r);const a=p(n,["fileData"]);a!=null&&m(e,["fileData"],CB(a));const l=p(n,["functionCall"]);l!=null&&m(e,["functionCall"],RB(l));const c=p(n,["functionResponse"]);c!=null&&m(e,["functionResponse"],c);const h=p(n,["inlineData"]);h!=null&&m(e,["inlineData"],SB(h));const f=p(n,["text"]);f!=null&&m(e,["text"],f);const _=p(n,["thought"]);_!=null&&m(e,["thought"],_);const T=p(n,["thoughtSignature"]);T!=null&&m(e,["thoughtSignature"],T);const x=p(n,["videoMetadata"]);return x!=null&&m(e,["videoMetadata"],x),e}function VB(n){const e={},t=p(n,["handle"]);if(t!=null&&m(e,["handle"],t),p(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function LB(n){const e={};if(p(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const t=p(n,["computerUse"]);t!=null&&m(e,["computerUse"],t);const i=p(n,["fileSearch"]);i!=null&&m(e,["fileSearch"],i);const r=p(n,["codeExecution"]);if(r!=null&&m(e,["codeExecution"],r),p(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const a=p(n,["functionDeclarations"]);if(a!=null){let _=a;Array.isArray(_)&&(_=_.map(T=>T)),m(e,["functionDeclarations"],_)}const l=p(n,["googleMaps"]);l!=null&&m(e,["googleMaps"],NB(l));const c=p(n,["googleSearch"]);c!=null&&m(e,["googleSearch"],DB(c));const h=p(n,["googleSearchRetrieval"]);h!=null&&m(e,["googleSearchRetrieval"],h);const f=p(n,["urlContext"]);return f!=null&&m(e,["urlContext"],f),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function OB(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(a=>`${t}.${a}`);e.push(...r)}else e.push(t)}return e.join(",")}function UB(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const a=i.setup;typeof a=="object"&&a!==null?(n.bidiGenerateContentSetup=a,t=a):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const a=OB(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?n.fieldMask=a:delete n.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const l=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];r.length>0&&(c=r.map(f=>l.includes(f)?`generationConfig.${f}`:f));const h=[];a&&h.push(a),c.length>0&&h.push(...c),h.length>0?n.fieldMask=h.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class GB extends Wr{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=IB(this.apiClient,e);a=_e("auth_tokens",c._url),l=c._query,delete c.config,delete c._url,delete c._query;const h=UB(c,e.config);return r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(h),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),r.then(f=>f)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function FB(n,e){const t={},i=p(n,["force"]);return e!==void 0&&i!=null&&m(e,["_query","force"],i),t}function zB(n){const e={},t=p(n,["name"]);t!=null&&m(e,["_url","name"],t);const i=p(n,["config"]);return i!=null&&FB(i,e),e}function qB(n){const e={},t=p(n,["name"]);return t!=null&&m(e,["_url","name"],t),e}function BB(n,e){const t={},i=p(n,["pageSize"]);e!==void 0&&i!=null&&m(e,["_query","pageSize"],i);const r=p(n,["pageToken"]);return e!==void 0&&r!=null&&m(e,["_query","pageToken"],r),t}function HB(n){const e={},t=p(n,["parent"]);t!=null&&m(e,["_url","parent"],t);const i=p(n,["config"]);return i!=null&&BB(i,e),e}function jB(n){const e={},t=p(n,["sdkHttpResponse"]);t!=null&&m(e,["sdkHttpResponse"],t);const i=p(n,["nextPageToken"]);i!=null&&m(e,["nextPageToken"],i);const r=p(n,["documents"]);if(r!=null){let a=r;Array.isArray(a)&&(a=a.map(l=>l)),m(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $B extends Wr{constructor(e){super(),this.apiClient=e,this.list=async t=>new va(Kr.PAGED_ITEM_DOCUMENTS,i=>this.listInternal({parent:t.parent,config:i.config}),await this.listInternal(t),t)}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=qB(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=zB(e);r=_e("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=HB(e);return a=_e("{parent}/documents",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=jB(h),_=new _G;return Object.assign(_,f),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class KB extends Wr{constructor(e,t=new $B(e)){super(),this.apiClient=e,this.documents=t,this.list=async(i={})=>new va(Kr.PAGED_ITEM_FILE_SEARCH_STORES,r=>this.listInternal(r),await this.listInternal(i),i)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Vq(e);return a=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async get(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Uq(e);return a=_e("{name}",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>h)}}async delete(e){var t,i;let r="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const l=Oq(e);r=_e("{name}",l._url),a=l._query,delete l._url,delete l._query,await this.apiClient.request({path:r,queryParams:a,body:JSON.stringify(l),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Hq(e);return a=_e("fileSearchStores",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=jq(h),_=new EG;return Object.assign(_,f),_})}}async uploadToFileSearchStoreInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=$q(e);return a=_e("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=Kq(h),_=new TG;return Object.assign(_,f),_})}}async importFile(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zq(e);return a=_e("{file_search_store_name}:importFile",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json()),r.then(h=>{const f=Fq(h),_=new i_;return Object.assign(_,f),_})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let uN=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return uN=n.randomUUID.bind(n),n.randomUUID();const e=new Uint8Array(1),t=n?()=>n.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^t()&15>>+i/4).toString(16))};const JB=()=>uN();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mv(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Pv=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const e=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(e.stack=n.stack),n.cause&&!e.cause&&(e.cause=n.cause),n.name&&(e.name=n.name),e}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class gi extends Error{}class wn extends gi{constructor(e,t,i,r){super(`${wn.makeMessage(e,t,i)}`),this.status=e,this.headers=r,this.error=t}static makeMessage(e,t,i){const r=t!=null&&t.message?typeof t.message=="string"?t.message:JSON.stringify(t.message):t?JSON.stringify(t):i;return e&&r?`${e} ${r}`:e?`${e} status code (no body)`:r||"(no status code or body)"}static generate(e,t,i,r){if(!e||!r)return new om({message:i,cause:Pv(t)});const a=t;return e===400?new dN(e,a,i,r):e===401?new hN(e,a,i,r):e===403?new fN(e,a,i,r):e===404?new pN(e,a,i,r):e===409?new mN(e,a,i,r):e===422?new gN(e,a,i,r):e===429?new yN(e,a,i,r):e>=500?new vN(e,a,i,r):new wn(e,a,i,r)}}class kv extends wn{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class om extends wn{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),t&&(this.cause=t)}}class cN extends om{constructor({message:e}={}){super({message:e??"Request timed out."})}}class dN extends wn{}class hN extends wn{}class fN extends wn{}class pN extends wn{}class mN extends wn{}class gN extends wn{}class yN extends wn{}class vN extends wn{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const YB=/^[a-z][a-z0-9+.-]*:/i,QB=n=>YB.test(n);let Vv=n=>(Vv=Array.isArray,Vv(n));const WB=Vv;let XB=WB;const DA=XB;function ZB(n){if(!n)return!0;for(const e in n)return!1;return!0}function e9(n,e){return Object.prototype.hasOwnProperty.call(n,e)}const t9=(n,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new gi(`${n} must be an integer`);if(e<0)throw new gi(`${n} must be a positive integer`);return e},n9=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const i9=n=>new Promise(e=>setTimeout(e,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const El="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r9(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const s9=()=>{var n,e,t,i,r;const a=r9();if(a==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":PA(Deno.build.os),"X-Stainless-Arch":MA(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(a==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":PA((t=globalThis.process.platform)!==null&&t!==void 0?t:"unknown"),"X-Stainless-Arch":MA((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(r=globalThis.process.version)!==null&&r!==void 0?r:"unknown"};const l=o9();return l?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${l.browser}`,"X-Stainless-Runtime-Version":l.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":El,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function o9(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:t}of n){const i=t.exec(navigator.userAgent);if(i){const r=i[1]||0,a=i[2]||0,l=i[3]||0;return{browser:e,version:`${r}.${a}.${l}`}}}return null}const MA=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",PA=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let hf;const a9=()=>hf??(hf=s9());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function l9(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function _N(...n){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...n)}function u9(n){let e=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return _N({start(){},async pull(t){const{done:i,value:r}=await e.next();i?t.close():t.enqueue(r)},async cancel(){var t;await((t=e.return)===null||t===void 0?void 0:t.call(e))}})}function EN(n){if(n[Symbol.asyncIterator])return n;const e=n.getReader();return{async next(){try{const t=await e.read();return t!=null&&t.done&&e.releaseLock(),t}catch(t){throw e.releaseLock(),t}},async return(){const t=e.cancel();return e.releaseLock(),await t,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function c9(n){var e,t;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((t=(e=n[Symbol.asyncIterator]()).return)===null||t===void 0?void 0:t.call(e));return}const i=n.getReader(),r=i.cancel();i.releaseLock(),await r}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const d9=({headers:n,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const TN=()=>{var n;if(typeof File>"u"){const{process:e}=globalThis,t=typeof((n=e==null?void 0:e.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Vy(n,e,t){return TN(),new File(n,e??"unknown_file",t)}function h9(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const f9=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const xN=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",p9=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&xN(n),m9=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function g9(n,e,t){if(TN(),n=await n,p9(n))return n instanceof File?n:Vy([await n.arrayBuffer()],n.name);if(m9(n)){const r=await n.blob();return e||(e=new URL(n.url).pathname.split(/[\\/]/).pop()),Vy(await Lv(r),e,t)}const i=await Lv(n);if(e||(e=h9(n)),!(t!=null&&t.type)){const r=i.find(a=>typeof a=="object"&&"type"in a&&a.type);typeof r=="string"&&(t=Object.assign(Object.assign({},t),{type:r}))}return Vy(i,e,t)}async function Lv(n){var e,t,i,r,a;let l=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)l.push(n);else if(xN(n))l.push(n instanceof Blob?n:await n.arrayBuffer());else if(f9(n))try{for(var c=!0,h=Pi(n),f;f=await h.next(),e=f.done,!e;c=!0){r=f.value,c=!1;const _=r;l.push(...await Lv(_))}}catch(_){t={error:_}}finally{try{!c&&!e&&(i=h.return)&&await i.call(h)}finally{if(t)throw t.error}}else{const _=(a=n==null?void 0:n.constructor)===null||a===void 0?void 0:a.name;throw new Error(`Unexpected data type: ${typeof n}${_?`; constructor: ${_}`:""}${y9(n)}`)}return l}function y9(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(t=>`"${t}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bN{constructor(e){this._client=e}}bN._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SN(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const kA=Object.freeze(Object.create(null)),v9=(n=SN)=>(function(t,...i){if(t.length===1)return t[0];let r=!1;const a=[],l=t.reduce((_,T,x)=>{var A,V,k;/[?#]/.test(T)&&(r=!0);const L=i[x];let $=(r?encodeURIComponent:n)(""+L);return x!==i.length&&(L==null||typeof L=="object"&&L.toString===((k=Object.getPrototypeOf((V=Object.getPrototypeOf((A=L.hasOwnProperty)!==null&&A!==void 0?A:kA))!==null&&V!==void 0?V:kA))===null||k===void 0?void 0:k.toString))&&($=L+"",a.push({start:_.length+T.length,length:$.length,error:`Value of type ${Object.prototype.toString.call(L).slice(8,-1)} is not a valid path parameter`})),_+T+(x===i.length?"":$)},""),c=l.split(/[?#]/,1)[0],h=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let f;for(;(f=h.exec(c))!==null;)a.push({start:f.index,length:f[0].length,error:`Value "${f[0]}" can't be safely passed as a path parameter`});if(a.sort((_,T)=>_.start-T.start),a.length>0){let _=0;const T=a.reduce((x,A)=>{const V=" ".repeat(A.start-_),k="^".repeat(A.length);return _=A.start+A.length,x+V+k},"");throw new gi(`Path parameters result in path with invalid segments:
${a.map(x=>x.error).join(`
`)}
${l}
${T}`)}return l}),ff=v9(SN);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wN extends bN{create(e,t){var i;const{api_version:r=this._client.apiVersion}=e,a=Sp(e,["api_version"]);if("model"in a&&"agent_config"in a)throw new gi("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in a&&"generation_config"in a)throw new gi("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(ff`/${r}/interactions`,Object.assign(Object.assign({body:a},t),{stream:(i=e.stream)!==null&&i!==void 0?i:!1}))}delete(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.delete(ff`/${r}/interactions/${e}`,i)}cancel(e,t={},i){const{api_version:r=this._client.apiVersion}=t??{};return this._client.post(ff`/${r}/interactions/${e}/cancel`,i)}get(e,t={},i){var r;const a=t??{},{api_version:l=this._client.apiVersion}=a,c=Sp(a,["api_version"]);return this._client.get(ff`/${l}/interactions/${e}`,Object.assign(Object.assign({query:c},i),{stream:(r=t==null?void 0:t.stream)!==null&&r!==void 0?r:!1}))}}wN._key=Object.freeze(["interactions"]);class AN extends wN{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _9(n){let e=0;for(const r of n)e+=r.length;const t=new Uint8Array(e);let i=0;for(const r of n)t.set(r,i),i+=r.length;return t}let pf;function c_(n){let e;return(pf??(e=new globalThis.TextEncoder,pf=e.encode.bind(e)))(n)}let mf;function VA(n){let e;return(mf??(e=new globalThis.TextDecoder,mf=e.decode.bind(e)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class am{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const t=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?c_(e):e;this.buffer=_9([this.buffer,t]);const i=[];let r;for(;(r=E9(this.buffer,this.carriageReturnIndex))!=null;){if(r.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=r.index;continue}if(this.carriageReturnIndex!=null&&(r.index!==this.carriageReturnIndex+1||r.carriage)){i.push(VA(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const a=this.carriageReturnIndex!==null?r.preceding-1:r.preceding,l=VA(this.buffer.subarray(0,a));i.push(l),this.buffer=this.buffer.subarray(r.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}am.NEWLINE_CHARS=new Set([`
`,"\r"]);am.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function E9(n,e){for(let r=e??0;r<n.length;r++){if(n[r]===10)return{preceding:r,index:r+1,carriage:!1};if(n[r]===13)return{preceding:r,index:r+1,carriage:!0}}return null}function T9(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wp={off:0,error:200,warn:300,info:400,debug:500},LA=(n,e,t)=>{if(n){if(e9(wp,n))return n;Tn(t).warn(`${e} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(wp))}`)}};function kc(){}function gf(n,e,t){return!e||wp[n]>wp[t]?kc:e[n].bind(e)}const x9={error:kc,warn:kc,info:kc,debug:kc};let OA=new WeakMap;function Tn(n){var e;const t=n.logger,i=(e=n.logLevel)!==null&&e!==void 0?e:"off";if(!t)return x9;const r=OA.get(t);if(r&&r[0]===i)return r[1];const a={error:gf("error",t,i),warn:gf("warn",t,i),info:gf("info",t,i),debug:gf("debug",t,i)};return OA.set(t,[i,a]),a}const Ho=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([e,t])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":t]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class bl{constructor(e,t,i){this.iterator=e,this.controller=t,this.client=i}static fromSSEResponse(e,t,i){let r=!1;const a=i?Tn(i):console;function l(){return Mi(this,arguments,function*(){var h,f,_,T;if(r)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var A=!0,V=Pi(b9(e,t)),k;k=yield ke(V.next()),h=k.done,!h;A=!0){T=k.value,A=!1;const L=T;if(!x)if(L.data.startsWith("[DONE]")){x=!0;continue}else try{yield yield ke(JSON.parse(L.data))}catch($){throw a.error("Could not parse message into JSON:",L.data),a.error("From chunk:",L.raw),$}}}catch(L){f={error:L}}finally{try{!A&&!h&&(_=V.return)&&(yield ke(_.call(V)))}finally{if(f)throw f.error}}x=!0}catch(L){if(Mv(L))return yield ke(void 0);throw L}finally{x||t.abort()}})}return new bl(l,t,i)}static fromReadableStream(e,t,i){let r=!1;function a(){return Mi(this,arguments,function*(){var h,f,_,T;const x=new am,A=EN(e);try{for(var V=!0,k=Pi(A),L;L=yield ke(k.next()),h=L.done,!h;V=!0){T=L.value,V=!1;const $=T;for(const z of x.decode($))yield yield ke(z)}}catch($){f={error:$}}finally{try{!V&&!h&&(_=k.return)&&(yield ke(_.call(k)))}finally{if(f)throw f.error}}for(const $ of x.flush())yield yield ke($)})}function l(){return Mi(this,arguments,function*(){var h,f,_,T;if(r)throw new gi("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");r=!0;let x=!1;try{try{for(var A=!0,V=Pi(a()),k;k=yield ke(V.next()),h=k.done,!h;A=!0){T=k.value,A=!1;const L=T;x||L&&(yield yield ke(JSON.parse(L)))}}catch(L){f={error:L}}finally{try{!A&&!h&&(_=V.return)&&(yield ke(_.call(V)))}finally{if(f)throw f.error}}x=!0}catch(L){if(Mv(L))return yield ke(void 0);throw L}finally{x||t.abort()}})}return new bl(l,t,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],t=[],i=this.iterator(),r=a=>({next:()=>{if(a.length===0){const l=i.next();e.push(l),t.push(l)}return a.shift()}});return[new bl(()=>r(e),this.controller,this.client),new bl(()=>r(t),this.controller,this.client)]}toReadableStream(){const e=this;let t;return _N({async start(){t=e[Symbol.asyncIterator]()},async pull(i){try{const{value:r,done:a}=await t.next();if(a)return i.close();const l=c_(JSON.stringify(r)+`
`);i.enqueue(l)}catch(r){i.error(r)}},async cancel(){var i;await((i=t.return)===null||i===void 0?void 0:i.call(t))}})}}function b9(n,e){return Mi(this,arguments,function*(){var i,r,a,l;if(!n.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new gi("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new gi("Attempted to iterate over a response with no body");const c=new w9,h=new am,f=EN(n.body);try{for(var _=!0,T=Pi(S9(f)),x;x=yield ke(T.next()),i=x.done,!i;_=!0){l=x.value,_=!1;const A=l;for(const V of h.decode(A)){const k=c.decode(V);k&&(yield yield ke(k))}}}catch(A){r={error:A}}finally{try{!_&&!i&&(a=T.return)&&(yield ke(a.call(T)))}finally{if(r)throw r.error}}for(const A of h.flush()){const V=c.decode(A);V&&(yield yield ke(V))}})}function S9(n){return Mi(this,arguments,function*(){var t,i,r,a;let l=new Uint8Array;try{for(var c=!0,h=Pi(n),f;f=yield ke(h.next()),t=f.done,!t;c=!0){a=f.value,c=!1;const _=a;if(_==null)continue;const T=_ instanceof ArrayBuffer?new Uint8Array(_):typeof _=="string"?c_(_):_;let x=new Uint8Array(l.length+T.length);x.set(l),x.set(T,l.length),l=x;let A;for(;(A=T9(l))!==-1;)yield yield ke(l.slice(0,A)),l=l.slice(A)}}catch(_){i={error:_}}finally{try{!c&&!t&&(r=h.return)&&(yield ke(r.call(h)))}finally{if(i)throw i.error}}l.length>0&&(yield yield ke(l))})}class w9{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const a={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],a}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,i,r]=A9(e,":");return r.startsWith(" ")&&(r=r.substring(1)),t==="event"?this.event=r:t==="data"&&this.data.push(r),null}}function A9(n,e){const t=n.indexOf(e);return t!==-1?[n.substring(0,t),e,n.substring(t+e.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function I9(n,e){const{response:t,requestLogID:i,retryOfRequestLogID:r,startTime:a}=e,l=await(async()=>{var c;if(e.options.stream)return Tn(n).debug("response",t.status,t.url,t.headers,t.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(t,e.controller,n):bl.fromSSEResponse(t,e.controller,n);if(t.status===204)return null;if(e.options.__binaryResponse)return t;const h=t.headers.get("content-type"),f=(c=h==null?void 0:h.split(";")[0])===null||c===void 0?void 0:c.trim();return(f==null?void 0:f.includes("application/json"))||(f==null?void 0:f.endsWith("+json"))?t.headers.get("content-length")==="0"?void 0:await t.json():await t.text()})();return Tn(n).debug(`[${i}] response parsed`,Ho({retryOfRequestLogID:r,url:t.url,status:t.status,body:l,durationMs:Date.now()-a})),l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class d_ extends Promise{constructor(e,t,i=I9){super(r=>{r(null)}),this.responsePromise=t,this.parseResponse=i,this.client=e}_thenUnwrap(e){return new d_(this.client,this.responsePromise,async(t,i)=>e(await this.parseResponse(t,i),i))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IN=Symbol("brand.privateNullableHeaders");function*C9(n){if(!n)return;if(IN in n){const{values:i,nulls:r}=n;yield*i.entries();for(const a of r)yield[a,null];return}let e=!1,t;n instanceof Headers?t=n.entries():DA(n)?t=n:(e=!0,t=Object.entries(n??{}));for(let i of t){const r=i[0];if(typeof r!="string")throw new TypeError("expected header name to be a string");const a=DA(i[1])?i[1]:[i[1]];let l=!1;for(const c of a)c!==void 0&&(e&&!l&&(l=!0,yield[r,null]),yield[r,c])}}const Ac=n=>{const e=new Headers,t=new Set;for(const i of n){const r=new Set;for(const[a,l]of C9(i)){const c=a.toLowerCase();r.has(c)||(e.delete(a),r.add(c)),l===null?(e.delete(a),t.add(c)):(e.append(a,l),t.delete(c))}}return{[IN]:!0,values:e,nulls:t}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ly=n=>{var e,t,i,r,a,l;if(typeof globalThis.process<"u")return(i=(t=(e=J6)===null||e===void 0?void 0:e[n])===null||t===void 0?void 0:t.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(l=(a=(r=globalThis.Deno.env)===null||r===void 0?void 0:r.get)===null||a===void 0?void 0:a.call(r,n))===null||l===void 0?void 0:l.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var CN;class lm{constructor(e){var t,i,r,a,l,c,h,{baseURL:f=Ly("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:_=(t=Ly("GEMINI_API_KEY"))!==null&&t!==void 0?t:null,apiVersion:T="v1beta"}=e,x=Sp(e,["baseURL","apiKey","apiVersion"]);const A=Object.assign(Object.assign({apiKey:_,apiVersion:T},x),{baseURL:f||"https://generativelanguage.googleapis.com"});this.baseURL=A.baseURL,this.timeout=(i=A.timeout)!==null&&i!==void 0?i:lm.DEFAULT_TIMEOUT,this.logger=(r=A.logger)!==null&&r!==void 0?r:console;const V="warn";this.logLevel=V,this.logLevel=(l=(a=LA(A.logLevel,"ClientOptions.logLevel",this))!==null&&a!==void 0?a:LA(Ly("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&l!==void 0?l:V,this.fetchOptions=A.fetchOptions,this.maxRetries=(c=A.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(h=A.fetch)!==null&&h!==void 0?h:l9(),this.encoder=d9,this._options=A,this.apiKey=_,this.apiVersion=T,this.clientAdapter=A.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:t}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!t.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const t=Ac([e.headers]);if(!(t.values.has("authorization")||t.values.has("x-goog-api-key"))){if(this.apiKey)return Ac([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return Ac([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([t,i])=>typeof i<"u").map(([t,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(t)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(t)}=`;throw new gi(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${El}`}defaultIdempotencyKey(){return`stainless-node-retry-${JB()}`}makeStatusError(e,t,i,r){return wn.generate(e,t,i,r)}buildURL(e,t,i){const r=!this.baseURLOverridden()&&i||this.baseURL,a=QB(e)?new URL(e):new URL(r+(r.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),l=this.defaultQuery();return ZB(l)||(t=Object.assign(Object.assign({},l),t)),typeof t=="object"&&t&&!Array.isArray(t)&&(a.search=this.stringifyQuery(t)),a.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const t=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${t}`}}async prepareRequest(e,{url:t,options:i}){}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,i){return this.request(Promise.resolve(i).then(r=>Object.assign({method:e,path:t},r)))}request(e,t=null){return new d_(this,this.makeRequest(e,t,void 0))}async makeRequest(e,t,i){var r,a,l;const c=await e,h=(r=c.maxRetries)!==null&&r!==void 0?r:this.maxRetries;t==null&&(t=h),await this.prepareOptions(c);const{req:f,url:_,timeout:T}=await this.buildRequest(c,{retryCount:h-t});await this.prepareRequest(f,{url:_,options:c});const x="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),A=i===void 0?"":`, retryOf: ${i}`,V=Date.now();if(Tn(this).debug(`[${x}] sending request`,Ho({retryOfRequestLogID:i,method:c.method,url:_,options:c,headers:f.headers})),!((a=c.signal)===null||a===void 0)&&a.aborted)throw new kv;const k=new AbortController,L=await this.fetchWithTimeout(_,f,T,k).catch(Pv),$=Date.now();if(L instanceof globalThis.Error){const H=`retrying, ${t} attempts remaining`;if(!((l=c.signal)===null||l===void 0)&&l.aborted)throw new kv;const Z=Mv(L)||/timed? ?out/i.test(String(L)+("cause"in L?String(L.cause):""));if(t)return Tn(this).info(`[${x}] connection ${Z?"timed out":"failed"} - ${H}`),Tn(this).debug(`[${x}] connection ${Z?"timed out":"failed"} (${H})`,Ho({retryOfRequestLogID:i,url:_,durationMs:$-V,message:L.message})),this.retryRequest(c,t,i??x);throw Tn(this).info(`[${x}] connection ${Z?"timed out":"failed"} - error; no more retries left`),Tn(this).debug(`[${x}] connection ${Z?"timed out":"failed"} (error; no more retries left)`,Ho({retryOfRequestLogID:i,url:_,durationMs:$-V,message:L.message})),Z?new cN:new om({cause:L})}const z=`[${x}${A}] ${f.method} ${_} ${L.ok?"succeeded":"failed"} with status ${L.status} in ${$-V}ms`;if(!L.ok){const H=await this.shouldRetry(L);if(t&&H){const P=`retrying, ${t} attempts remaining`;return await c9(L.body),Tn(this).info(`${z} - ${P}`),Tn(this).debug(`[${x}] response error (${P})`,Ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:$-V})),this.retryRequest(c,t,i??x,L.headers)}const Z=H?"error; no more retries left":"error; not retryable";Tn(this).info(`${z} - ${Z}`);const ie=await L.text().catch(P=>Pv(P).message),J=n9(ie),R=J?void 0:ie;throw Tn(this).debug(`[${x}] response error (${Z})`,Ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,message:R,durationMs:Date.now()-V})),this.makeStatusError(L.status,J,R,L.headers)}return Tn(this).info(z),Tn(this).debug(`[${x}] response start`,Ho({retryOfRequestLogID:i,url:L.url,status:L.status,headers:L.headers,durationMs:$-V})),{response:L,options:c,controller:k,requestLogID:x,retryOfRequestLogID:i,startTime:V}}async fetchWithTimeout(e,t,i,r){const a=t||{},{signal:l,method:c}=a,h=Sp(a,["signal","method"]),f=this._makeAbort(r);l&&l.addEventListener("abort",f,{once:!0});const _=setTimeout(f,i),T=globalThis.ReadableStream&&h.body instanceof globalThis.ReadableStream||typeof h.body=="object"&&h.body!==null&&Symbol.asyncIterator in h.body,x=Object.assign(Object.assign(Object.assign({signal:r.signal},T?{duplex:"half"}:{}),{method:"GET"}),h);c&&(x.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,x)}finally{clearTimeout(_)}}async shouldRetry(e){const t=e.headers.get("x-should-retry");return t==="true"?!0:t==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,t,i,r){var a;let l;const c=r==null?void 0:r.get("retry-after-ms");if(c){const f=parseFloat(c);Number.isNaN(f)||(l=f)}const h=r==null?void 0:r.get("retry-after");if(h&&!l){const f=parseFloat(h);Number.isNaN(f)?l=Date.parse(h)-Date.now():l=f*1e3}if(!(l&&0<=l&&l<60*1e3)){const f=(a=e.maxRetries)!==null&&a!==void 0?a:this.maxRetries;l=this.calculateDefaultRetryTimeoutMillis(t,f)}return await i9(l),this.makeRequest(e,t-1,i)}calculateDefaultRetryTimeoutMillis(e,t){const a=t-e,l=Math.min(.5*Math.pow(2,a),8),c=1-Math.random()*.25;return l*c*1e3}async buildRequest(e,{retryCount:t=0}={}){var i,r,a;const l=Object.assign({},e),{method:c,path:h,query:f,defaultBaseURL:_}=l,T=this.buildURL(h,f,_);"timeout"in l&&t9("timeout",l.timeout),l.timeout=(i=l.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:x,body:A}=this.buildBody({options:l}),V=await this.buildHeaders({options:e,method:c,bodyHeaders:x,retryCount:t});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:V},l.signal&&{signal:l.signal}),globalThis.ReadableStream&&A instanceof globalThis.ReadableStream&&{duplex:"half"}),A&&{body:A}),(r=this.fetchOptions)!==null&&r!==void 0?r:{}),(a=l.fetchOptions)!==null&&a!==void 0?a:{}),url:T,timeout:l.timeout}}async buildHeaders({options:e,method:t,bodyHeaders:i,retryCount:r}){let a={};this.idempotencyHeader&&t!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),a[this.idempotencyHeader]=e.idempotencyKey);const l=await this.authHeaders(e);let c=Ac([a,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(r)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),a9()),this._options.defaultHeaders,i,e.headers,l]);return this.validateHeaders(c),c.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:t}}){if(!e)return{bodyHeaders:void 0,body:void 0};const i=Ac([t]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&i.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:u9(e)}:this.encoder({body:e,headers:i})}}lm.DEFAULT_TIMEOUT=6e4;class nn extends lm{constructor(){super(...arguments),this.interactions=new AN(this)}}CN=nn;nn.GeminiNextGenAPIClient=CN;nn.GeminiNextGenAPIClientError=gi;nn.APIError=wn;nn.APIConnectionError=om;nn.APIConnectionTimeoutError=cN;nn.APIUserAbortError=kv;nn.NotFoundError=pN;nn.ConflictError=mN;nn.RateLimitError=yN;nn.BadRequestError=dN;nn.AuthenticationError=hN;nn.InternalServerError=vN;nn.PermissionDeniedError=fN;nn.UnprocessableEntityError=gN;nn.toFile=g9;nn.Interactions=AN;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function R9(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function N9(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function D9(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function M9(n,e){const t={},i=p(n,["sdkHttpResponse"]);return i!=null&&m(t,["sdkHttpResponse"],i),t}function P9(n,e,t){const i={};if(p(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const r=p(n,["tunedModelDisplayName"]);if(e!==void 0&&r!=null&&m(e,["displayName"],r),p(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=p(n,["epochCount"]);e!==void 0&&a!=null&&m(e,["tuningTask","hyperparameters","epochCount"],a);const l=p(n,["learningRateMultiplier"]);if(l!=null&&m(i,["tuningTask","hyperparameters","learningRateMultiplier"],l),p(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(p(n,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(p(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(p(n,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(p(n,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=p(n,["batchSize"]);e!==void 0&&c!=null&&m(e,["tuningTask","hyperparameters","batchSize"],c);const h=p(n,["learningRate"]);if(e!==void 0&&h!=null&&m(e,["tuningTask","hyperparameters","learningRate"],h),p(n,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(p(n,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(p(n,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(p(n,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(p(n,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(p(n,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(p(n,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return i}function k9(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const J=p(n,["validationDataset"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec"],Oy(J))}else if(r==="PREFERENCE_TUNING"){const J=p(n,["validationDataset"]);e!==void 0&&J!=null&&m(e,["preferenceOptimizationSpec"],Oy(J))}else if(r==="DISTILLATION"){const J=p(n,["validationDataset"]);e!==void 0&&J!=null&&m(e,["distillationSpec"],Oy(J))}const a=p(n,["tunedModelDisplayName"]);e!==void 0&&a!=null&&m(e,["tunedModelDisplayName"],a);const l=p(n,["description"]);e!==void 0&&l!=null&&m(e,["description"],l);let c=p(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const J=p(n,["epochCount"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","hyperParameters","epochCount"],J)}else if(c==="PREFERENCE_TUNING"){const J=p(n,["epochCount"]);e!==void 0&&J!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],J)}else if(c==="DISTILLATION"){const J=p(n,["epochCount"]);e!==void 0&&J!=null&&m(e,["distillationSpec","hyperParameters","epochCount"],J)}let h=p(t,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const J=p(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],J)}else if(h==="PREFERENCE_TUNING"){const J=p(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],J)}else if(h==="DISTILLATION"){const J=p(n,["learningRateMultiplier"]);e!==void 0&&J!=null&&m(e,["distillationSpec","hyperParameters","learningRateMultiplier"],J)}let f=p(t,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const J=p(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","exportLastCheckpointOnly"],J)}else if(f==="PREFERENCE_TUNING"){const J=p(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&m(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],J)}else if(f==="DISTILLATION"){const J=p(n,["exportLastCheckpointOnly"]);e!==void 0&&J!=null&&m(e,["distillationSpec","exportLastCheckpointOnly"],J)}let _=p(t,["config","method"]);if(_===void 0&&(_="SUPERVISED_FINE_TUNING"),_==="SUPERVISED_FINE_TUNING"){const J=p(n,["adapterSize"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","hyperParameters","adapterSize"],J)}else if(_==="PREFERENCE_TUNING"){const J=p(n,["adapterSize"]);e!==void 0&&J!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],J)}else if(_==="DISTILLATION"){const J=p(n,["adapterSize"]);e!==void 0&&J!=null&&m(e,["distillationSpec","hyperParameters","adapterSize"],J)}let T=p(t,["config","method"]);if(T===void 0&&(T="SUPERVISED_FINE_TUNING"),T==="SUPERVISED_FINE_TUNING"){const J=p(n,["tuningMode"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","tuningMode"],J)}const x=p(n,["customBaseModel"]);e!==void 0&&x!=null&&m(e,["customBaseModel"],x);let A=p(t,["config","method"]);if(A===void 0&&(A="SUPERVISED_FINE_TUNING"),A==="SUPERVISED_FINE_TUNING"){const J=p(n,["batchSize"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","hyperParameters","batchSize"],J)}let V=p(t,["config","method"]);if(V===void 0&&(V="SUPERVISED_FINE_TUNING"),V==="SUPERVISED_FINE_TUNING"){const J=p(n,["learningRate"]);e!==void 0&&J!=null&&m(e,["supervisedTuningSpec","hyperParameters","learningRate"],J)}const k=p(n,["labels"]);e!==void 0&&k!=null&&m(e,["labels"],k);const L=p(n,["beta"]);e!==void 0&&L!=null&&m(e,["preferenceOptimizationSpec","hyperParameters","beta"],L);const $=p(n,["baseTeacherModel"]);e!==void 0&&$!=null&&m(e,["distillationSpec","baseTeacherModel"],$);const z=p(n,["tunedTeacherModelSource"]);e!==void 0&&z!=null&&m(e,["distillationSpec","tunedTeacherModelSource"],z);const H=p(n,["sftLossWeightMultiplier"]);e!==void 0&&H!=null&&m(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],H);const Z=p(n,["outputUri"]);e!==void 0&&Z!=null&&m(e,["outputUri"],Z);const ie=p(n,["encryptionSpec"]);return e!==void 0&&ie!=null&&m(e,["encryptionSpec"],ie),i}function V9(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&$9(a);const l=p(n,["config"]);return l!=null&&P9(l,t),t}function L9(n,e){const t={},i=p(n,["baseModel"]);i!=null&&m(t,["baseModel"],i);const r=p(n,["preTunedModel"]);r!=null&&m(t,["preTunedModel"],r);const a=p(n,["trainingDataset"]);a!=null&&K9(a,t,e);const l=p(n,["config"]);return l!=null&&k9(l,t,e),t}function O9(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function U9(n,e){const t={},i=p(n,["name"]);return i!=null&&m(t,["_url","name"],i),t}function G9(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function F9(n,e,t){const i={},r=p(n,["pageSize"]);e!==void 0&&r!=null&&m(e,["_query","pageSize"],r);const a=p(n,["pageToken"]);e!==void 0&&a!=null&&m(e,["_query","pageToken"],a);const l=p(n,["filter"]);return e!==void 0&&l!=null&&m(e,["_query","filter"],l),i}function z9(n,e){const t={},i=p(n,["config"]);return i!=null&&G9(i,t),t}function q9(n,e){const t={},i=p(n,["config"]);return i!=null&&F9(i,t),t}function B9(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=p(n,["tunedModels"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>RN(c))),m(t,["tuningJobs"],l)}return t}function H9(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["nextPageToken"]);r!=null&&m(t,["nextPageToken"],r);const a=p(n,["tuningJobs"]);if(a!=null){let l=a;Array.isArray(l)&&(l=l.map(c=>Ov(c))),m(t,["tuningJobs"],l)}return t}function j9(n,e){const t={},i=p(n,["name"]);i!=null&&m(t,["model"],i);const r=p(n,["name"]);return r!=null&&m(t,["endpoint"],r),t}function $9(n,e){const t={};if(p(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(p(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const i=p(n,["examples"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(a=>a)),m(t,["examples","examples"],r)}return t}function K9(n,e,t){const i={};let r=p(t,["config","method"]);if(r===void 0&&(r="SUPERVISED_FINE_TUNING"),r==="SUPERVISED_FINE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(r==="PREFERENCE_TUNING"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(r==="DISTILLATION"){const l=p(n,["gcsUri"]);e!==void 0&&l!=null&&m(e,["distillationSpec","promptDatasetUri"],l)}let a=p(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["supervisedTuningSpec","trainingDatasetUri"],l)}else if(a==="PREFERENCE_TUNING"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["preferenceOptimizationSpec","trainingDatasetUri"],l)}else if(a==="DISTILLATION"){const l=p(n,["vertexDatasetResource"]);e!==void 0&&l!=null&&m(e,["distillationSpec","promptDatasetUri"],l)}if(p(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return i}function RN(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&m(t,["name"],r);const a=p(n,["state"]);a!=null&&m(t,["state"],jR(a));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const c=p(n,["tuningTask","startTime"]);c!=null&&m(t,["startTime"],c);const h=p(n,["tuningTask","completeTime"]);h!=null&&m(t,["endTime"],h);const f=p(n,["updateTime"]);f!=null&&m(t,["updateTime"],f);const _=p(n,["description"]);_!=null&&m(t,["description"],_);const T=p(n,["baseModel"]);T!=null&&m(t,["baseModel"],T);const x=p(n,["_self"]);return x!=null&&m(t,["tunedModel"],j9(x)),t}function Ov(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&m(t,["name"],r);const a=p(n,["state"]);a!=null&&m(t,["state"],jR(a));const l=p(n,["createTime"]);l!=null&&m(t,["createTime"],l);const c=p(n,["startTime"]);c!=null&&m(t,["startTime"],c);const h=p(n,["endTime"]);h!=null&&m(t,["endTime"],h);const f=p(n,["updateTime"]);f!=null&&m(t,["updateTime"],f);const _=p(n,["error"]);_!=null&&m(t,["error"],_);const T=p(n,["description"]);T!=null&&m(t,["description"],T);const x=p(n,["baseModel"]);x!=null&&m(t,["baseModel"],x);const A=p(n,["tunedModel"]);A!=null&&m(t,["tunedModel"],A);const V=p(n,["preTunedModel"]);V!=null&&m(t,["preTunedModel"],V);const k=p(n,["supervisedTuningSpec"]);k!=null&&m(t,["supervisedTuningSpec"],k);const L=p(n,["preferenceOptimizationSpec"]);L!=null&&m(t,["preferenceOptimizationSpec"],L);const $=p(n,["distillationSpec"]);$!=null&&m(t,["distillationSpec"],$);const z=p(n,["tuningDataStats"]);z!=null&&m(t,["tuningDataStats"],z);const H=p(n,["encryptionSpec"]);H!=null&&m(t,["encryptionSpec"],H);const Z=p(n,["partnerModelTuningSpec"]);Z!=null&&m(t,["partnerModelTuningSpec"],Z);const ie=p(n,["customBaseModel"]);ie!=null&&m(t,["customBaseModel"],ie);const J=p(n,["experiment"]);J!=null&&m(t,["experiment"],J);const R=p(n,["labels"]);R!=null&&m(t,["labels"],R);const M=p(n,["outputUri"]);M!=null&&m(t,["outputUri"],M);const P=p(n,["pipelineJob"]);P!=null&&m(t,["pipelineJob"],P);const O=p(n,["serviceAccount"]);O!=null&&m(t,["serviceAccount"],O);const C=p(n,["tunedModelDisplayName"]);C!=null&&m(t,["tunedModelDisplayName"],C);const F=p(n,["veoTuningSpec"]);return F!=null&&m(t,["veoTuningSpec"],F),t}function J9(n,e){const t={},i=p(n,["sdkHttpResponse"]);i!=null&&m(t,["sdkHttpResponse"],i);const r=p(n,["name"]);r!=null&&m(t,["name"],r);const a=p(n,["metadata"]);a!=null&&m(t,["metadata"],a);const l=p(n,["done"]);l!=null&&m(t,["done"],l);const c=p(n,["error"]);return c!=null&&m(t,["error"],c),t}function Oy(n,e){const t={},i=p(n,["gcsUri"]);i!=null&&m(t,["validationDatasetUri"],i);const r=p(n,["vertexDatasetResource"]);return r!=null&&m(t,["validationDatasetUri"],r),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Y9 extends Wr{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new va(Kr.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var i;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const r={tunedModelName:t.baseModel};!((i=t.config)===null||i===void 0)&&i.preTunedModelCheckpointId&&(r.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:r});return a.baseModel=void 0,await this.tuneInternal(a)}else{const r=Object.assign({},t);return await this.tuneInternal(r)}else{const r=Object.assign({},t),a=await this.tuneMldevInternal(r);let l="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?l=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(l=a.name.split("/operations/")[0]),{name:l,state:Sv.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=U9(e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>Ov(_))}else{const f=O9(e);return c=_e("{name}",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>RN(_))}}async listInternal(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=q9(e);return c=_e("tuningJobs",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=H9(_),x=new cA;return Object.assign(x,T),x})}else{const f=z9(e);return c=_e("tunedModels",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=B9(_),x=new cA;return Object.assign(x,T),x})}}async cancel(e){var t,i,r,a;let l,c="",h={};if(this.apiClient.isVertexAI()){const f=N9(e);return c=_e("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=M9(_),x=new dA;return Object.assign(x,T),x})}else{const f=R9(e);return c=_e("{name}:cancel",f._url),h=f._query,delete f._url,delete f._query,l=this.apiClient.request({path:c,queryParams:h,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(_=>_.json().then(T=>{const x=T;return x.sdkHttpResponse={headers:_.headers},x})),l.then(_=>{const T=D9(_),x=new dA;return Object.assign(x,T),x})}}async tuneInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI()){const c=L9(e,e);return a=_e("tuningJobs",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>Ov(h))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,a="",l={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=V9(e);return a=_e("tunedModels",c._url),l=c._query,delete c._url,delete c._query,r=this.apiClient.request({path:a,queryParams:l,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(h=>h.json().then(f=>{const _=f;return _.sdkHttpResponse={headers:h.headers},_})),r.then(h=>J9(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q9{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const W9=1024*1024*8,X9=3,Z9=1e3,eH=2,Ap="x-goog-upload-status";async function tH(n,e,t){var i;const r=await NN(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ap])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function nH(n,e,t){var i;const r=await NN(n,e,t),a=await(r==null?void 0:r.json());if(((i=r==null?void 0:r.headers)===null||i===void 0?void 0:i[Ap])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const l=GR(a),c=new r_;return Object.assign(c,l),c}async function NN(n,e,t){var i,r;let a=0,l=0,c=new Av(new Response),h="upload";for(a=n.size;l<a;){const f=Math.min(W9,a-l),_=n.slice(l,l+f);l+f>=a&&(h+=", finalize");let T=0,x=Z9;for(;T<X9&&(c=await t.request({path:"",body:_,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":h,"X-Goog-Upload-Offset":String(l),"Content-Length":String(f)}}}),!(!((i=c==null?void 0:c.headers)===null||i===void 0)&&i[Ap]));)T++,await rH(x),x=x*eH;if(l+=f,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[Ap])!=="active")break;if(a<=l)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function iH(n){return{size:n.size,type:n.type}}function rH(n){return new Promise(e=>setTimeout(e,n))}class sH{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await tH(e,t,i)}async uploadToFileSearchStore(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await nH(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await iH(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class oH{create(e,t,i){return new aH(e,t,i)}}class aH{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const UA="x-goog-api-key";class lH{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(UA)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(UA,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uH="gl-node/";class h_{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const t=this.httpOptions;t!=null&&t.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const i=new nn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:t==null?void 0:t.timeout,maxRetries:(e=t==null?void 0:t.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=i.interactions,this._interactions}constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=X6(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const r=new lH(this.apiKey);this.apiClient=new iB({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:uH+"web",uploader:new sH,downloader:new Q9}),this.models=new xB(this.apiClient),this.live=new gB(this.apiClient,r,new oH),this.batches=new CF(this.apiClient),this.chats=new uz(this.models,this.apiClient),this.caches=new oz(this.apiClient),this.files=new Tz(this.apiClient),this.operations=new bB(this.apiClient),this.authTokens=new GB(this.apiClient),this.tunings=new Y9(this.apiClient),this.fileSearchStores=new KB(this.apiClient)}}var cH={};const f_=()=>{try{if(typeof process<"u"&&cH)return"PLACEHOLDER_API_KEY"}catch{console.warn("Environment process not accessible")}return""},dH=`
DATOS DEL ECOSISTEMA GDH (Gana Dinero Hispano):

1. **MONITOR DE ESTADO (Antiguo Scam Shield):**
   Herramienta de auditora de seguridad.
${_f.map(n=>`- ${n.name}: ${n.status} (Riesgo: ${n.riskLevel}). ID: ${n.id}. Link: [#scam-${n.id}]`).join(`
`)}

2. **MTODOS Y CURSOS (Directorio):**
${Ef.map(n=>`- ${n.name} [${n.category}]. Inversin: ${n.investmentRequired?"S":"No"}. Premium: ${n.isPremium?"S":"NO"}. ID: ${n.id}. Link: [#method-${n.id}]`).join(`
`)}

3. **ACADEMIA (Blog):**
${Tf.map(n=>`- ${n.title}. ID: ${n.id}. Link: [#blog-${n.id}]`).join(`
`)}

4. **NUEVAS HERRAMIENTAS:**
   - **GDH Studio:** Generador de imgenes con IA para marketing (Logos, Renders 3D). [Abrir Studio](TRIGGER_STUDIO)
   - **Comunidad Discord:** El ncleo de la operacin. Donde estn las alertas en tiempo real. Link: https://discord.gg/xrZwFPtN
`,hH=async n=>{try{const e=f_();return e?(await new h_({apiKey:e}).models.generateContent({model:"gemini-2.0-flash",contents:`Analiza el sitio "${n}" brevemente.
      Contexto: Auditora de seguridad para ganar dinero online.
      
      Reglas:
      1. Si es Venta de Reseas, Cuentas o Airdrops -> ES LEGTIMO (Grey Hat).
      2. Si es Ponzi/Inversin con retorno fijo -> ES SCAM.
      
      Responde en 3 lneas mximo. Formato Markdown.`,config:{temperature:.3}})).text||"Sin datos suficientes.":" Error: API Key de IA no configurada. Contacta al admin."}catch(e){return console.error("Error analyzing site:",e),"Error de conexin con la IA. Intntalo ms tarde."}},Uy=()=>{const e=f_()||"dummy_key_for_ui_init";return new h_({apiKey:e}).chats.create({model:"gemini-2.0-flash",config:{temperature:.4,systemInstruction:`Eres "Neo", el Auditor Jefe de GDH.
      
      TU MISIN:
      Proteger el capital del usuario y guiarlo a mtodos reales. Odiamos los vende-humos.
      
      CONTEXTO ACTUALIZADO:
      ${dH}

      REGLAS DE COMPORTAMIENTO (CRTICO):
      1. **Brevedad Extrema:** Respuestas de 2-3 frases mximo. Directo al grano.
      2. **Prioridad Discord:** Si el usuario pregunta por comunidad, soporte o alertas rpidas, mndalos SIEMPRE a Discord: https://discord.gg/xrZwFPtN
      3. **Venta de Studio:** Si quieren imgenes o logos, diles que usen "GDH Studio" en el men principal.
      4. **Chips de Decisin:** Si necesitas filtrar, usa al final: ||OPTIONS: ["Opcin A", "Opcin B"]||

      MANEJO DE ENLACES:
      - Usa SIEMPRE la sintaxis Markdown: [Texto del botn](Link)
      - Para Discord usa: [Unirme a Discord](https://discord.gg/xrZwFPtN)
      - Para Auditora usa enlaces internos: [Ver Reporte](#scam-ID)

      EJEMPLOS DE INTERACCIN:

      Usuario: "Hola"
      Neo: Sistemas online. Soy Neo, tu auditor de riesgos. Buscas ganar capital o protegerlo?
      ||OPTIONS: ["Ganar Dinero", "Auditar Web", "Comunidad Discord"]||

      Usuario: "OmegaPro es fiable?"
      Neo: Negativo. Es un esquema Ponzi colapsado. Tu capital corre peligro crtico.
      [Ver Reporte Oficial](#scam-s1)

      Usuario: "Quiero hacer un logo"
      Neo: Usa nuestra nueva IA **GDH Studio**. Es gratuita para miembros.
      ||OPTIONS: ["Abrir GDH Studio", "Ver Tutorial"]||
      `}})},fH=async(n,e,t)=>{var i;try{const r=f_();if(!r)throw new Error("API Key no disponible");const a=new h_({apiKey:r}),c=((i=(await a.models.generateContent({model:"gemini-2.0-flash",contents:`ACT AS: World-class AI Art Prompt Engineer (Midjourney v6/DALL-E 3 expert).
        
        TASK: Rewrite the user's request into a single, highly detailed English prompt optimized for the Gemini Image Generation model.
        
        INPUT CONCEPT: "${n}"
        MANDATORY VISUAL STYLE: "${e}"
        
        GUIDELINES:
        1. Start with the main subject clearly.
        2. Integrate the MANDATORY VISUAL STYLE naturally but forcefully.
        3. Define lighting and quality.
        4. DO NOT include "Here is the prompt" or quotes. Just output the raw prompt string.
        
        OUTPUT PROMPT ONLY:`})).text)==null?void 0:i.trim())||`${n}, ${e}, 8k, high quality`,h=await a.models.generateContent({model:"gemini-2.0-flash",contents:{parts:[{text:c}]},config:{}});if(h.candidates&&h.candidates[0].content&&h.candidates[0].content.parts){for(const f of h.candidates[0].content.parts)if(f.inlineData&&f.inlineData.data){const _=f.inlineData.data;return{imageUrl:`data:${f.inlineData.mimeType||"image/png"};base64,${_}`,enhancedPrompt:c}}}throw console.warn("API returned text, using fallback generation simulation"),new Error("El modelo actual est saturado de solicitudes de imagen. Intenta en 1 minuto.")}catch(r){throw console.error("Error generating image:",r),r}},pH=()=>{const{scams:n}=au(),[e,t]=le.useState(""),[i,r]=le.useState(!1),[a,l]=le.useState([]),[c,h]=le.useState(null),[f,_]=le.useState(!1),[T,x]=le.useState(null),A=le.useRef(null);le.useEffect(()=>{n.length>0&&a.length===0&&!e&&l(n)},[n]),le.useEffect(()=>{const z=()=>{const H=window.location.hash;if(H.startsWith("#scam-")){const Z=H.replace("#scam-",""),ie=n.find(J=>J.id===Z);ie&&h(ie)}};return n.length>0&&z(),window.addEventListener("hashchange",z),()=>window.removeEventListener("hashchange",z)},[n]),le.useEffect(()=>{if(!e)l(n);else{const z=n.filter(H=>H.name.toLowerCase().includes(e.toLowerCase())||H.type.toLowerCase().includes(e.toLowerCase()));l(z)}},[e,n]),le.useEffect(()=>{function z(H){A.current&&!A.current.contains(H.target)&&r(!1)}return document.addEventListener("mousedown",z),()=>document.removeEventListener("mousedown",z)},[]);const V=()=>{r(!0),(c||T)&&(h(null),x(null))},k=z=>{t(z.name),h(z),r(!1),x(null)},L=async z=>{z.preventDefault(),r(!1);const H=n.find(ie=>ie.name.toLowerCase()===e.toLowerCase());if(H){k(H);return}_(!0),h(null);const Z=await hH(e);x(Z),_(!1)},$=z=>{switch(z){case"SCAM":return{color:"text-danger",bg:"bg-danger/10",border:"border-danger/30",icon:y.jsx(zM,{size:24})};case"LEGIT":return{color:"text-neonGreen",bg:"bg-neonGreen/10",border:"border-neonGreen/30",icon:y.jsx(HD,{size:24})};default:return{color:"text-yellow-500",bg:"bg-yellow-500/10",border:"border-yellow-500/30",icon:y.jsx(kD,{size:24})}}};return y.jsx("section",{id:"wall-of-shame",className:"py-12 container mx-auto px-6 relative z-20 scroll-mt-32",children:y.jsxs("div",{className:"bg-[#0a0a0a]/90 backdrop-blur-xl border border-white/10 rounded-3xl p-1 shadow-2xl overflow-hidden relative",children:[y.jsx("div",{className:"absolute top-0 left-0 right-0 h-[1px] bg-gradient-to-r from-transparent via-white/20 to-transparent"}),y.jsxs("div",{className:"p-8 md:p-12 flex flex-col lg:flex-row gap-12 items-start relative z-10",children:[y.jsxs("div",{className:"w-full lg:w-1/2",ref:A,children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-gray-800 to-black border border-white/10 flex items-center justify-center text-white shadow-inner",children:y.jsx(Ff,{size:24,className:"text-neonGreen"})}),y.jsxs("div",{children:[y.jsx("h2",{className:"text-2xl font-display font-bold text-white leading-none",children:"Monitor de Estado"}),y.jsx("p",{className:"text-gray-500 text-xs",children:"Verifica la fiabilidad de plataformas en tiempo real."})]})]}),y.jsxs("form",{onSubmit:L,className:"relative group",children:[y.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-neonGreen via-techPurple to-danger rounded-xl opacity-20 group-focus-within:opacity-100 transition duration-500 blur"}),y.jsxs("div",{className:"relative flex items-center bg-[#050505] rounded-xl border border-white/10",children:[y.jsx(KA,{className:"absolute left-4 text-gray-500",size:20}),y.jsx("input",{type:"text",value:e,onFocus:V,onChange:z=>t(z.target.value),placeholder:"Escribe para auditar (ej: OmegaPro)...",className:"w-full bg-transparent py-4 pl-12 pr-4 text-white placeholder:text-gray-600 focus:outline-none font-mono text-sm",autoComplete:"off"}),y.jsx("button",{type:"submit",className:"mr-2 px-4 py-2 bg-white/5 hover:bg-white/10 rounded-lg text-xs font-bold text-gray-300 border border-white/5 transition-colors",children:f?y.jsx(hi,{className:"animate-spin",size:14}):"AUDITAR"})]}),i&&a.length>0&&y.jsx("div",{className:"absolute top-full left-0 w-full mt-2 bg-[#0c0c0c] border border-white/10 rounded-xl overflow-hidden shadow-2xl max-h-64 overflow-y-auto custom-scrollbar z-50",children:a.map(z=>y.jsxs("button",{onClick:()=>k(z),className:"w-full text-left px-4 py-3 hover:bg-white/5 border-b border-white/5 last:border-0 flex justify-between items-center group",children:[y.jsx("span",{className:"text-gray-300 group-hover:text-white font-medium",children:z.name}),y.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded border ${z.status==="SCAM"?"text-danger border-danger/20 bg-danger/5":"text-neonGreen border-neonGreen/20 bg-neonGreen/5"}`,children:z.status})]},z.id))})]}),y.jsxs("div",{className:"mt-4 flex gap-4 text-xs text-gray-500",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{className:"w-2 h-2 rounded-full bg-neonGreen animate-pulse"})," Sistema Operativo"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(mM,{size:12})," IA Gemini 2.0 Conectada"]})]})]}),y.jsx("div",{className:"w-full lg:w-1/2 min-h-[200px] border-l border-white/5 pl-0 lg:pl-12",children:c?y.jsxs("div",{className:"animate-fadeIn",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsx("h3",{className:"text-3xl font-bold text-white",children:c.name}),y.jsxs("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full border ${$(c.status).bg} ${$(c.status).border} ${$(c.status).color}`,children:[$(c.status).icon,y.jsx("span",{className:"font-bold",children:c.status})]})]}),y.jsx("div",{className:"bg-white/5 rounded-xl p-4 border border-white/5 mb-4",children:y.jsxs("p",{className:"text-gray-300 text-sm leading-relaxed",children:['"',c.reason,'"']})}),y.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Riesgo"}),y.jsx("div",{className:`font-mono font-bold ${c.riskLevel==="Critical"?"text-danger":"text-white"}`,children:c.riskLevel})]}),y.jsxs("div",{children:[y.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Tipo"}),y.jsx("div",{className:"text-white font-mono",children:c.type})]})]})]}):T?y.jsxs("div",{className:"animate-fadeIn space-y-4",children:[y.jsxs("div",{className:"flex items-center gap-2 text-techPurple mb-2",children:[y.jsx(hi,{className:f?"animate-spin":"",size:18}),y.jsx("span",{className:"font-bold text-sm",children:"Anlisis Generativo Completado"})]}),y.jsx("div",{className:"prose prose-invert prose-sm text-gray-300",dangerouslySetInnerHTML:{__html:T.replace(/\n/g,"<br/>")}})]}):y.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-gray-600 opacity-50",children:[y.jsx(Ff,{size:48,className:"mb-4"}),y.jsx("p",{className:"text-sm",children:"Esperando consulta..."})]})})]})]})})},mH=()=>y.jsx("section",{className:"container mx-auto px-6 py-8",children:y.jsxs("div",{className:"relative group cursor-pointer overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-r from-[#1a1a1a] to-black hover:border-techPurple/30 transition-all duration-500",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/5 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"}),y.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between p-6 gap-6 relative z-10",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-14 h-14 rounded-xl bg-techPurple/20 flex items-center justify-center text-techPurple shrink-0 border border-techPurple/30",children:y.jsx(fM,{size:28,className:"animate-pulse"})}),y.jsxs("div",{children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[y.jsx("span",{className:"bg-techPurple text-white text-[10px] font-bold px-2 py-0.5 rounded uppercase",children:"Hot"}),y.jsx("span",{className:"text-gray-400 text-xs",children:"Verificado hace 2h"})]}),y.jsx("h3",{className:"text-xl md:text-2xl font-bold text-white",children:"Gana Saldo Real con Reseas"}),y.jsx("p",{className:"text-gray-400 text-sm hidden md:block",children:"Plataforma auditada pagando en PayPal, Robux o Discord Nitro."})]})]}),y.jsxs("div",{className:"flex items-center gap-6",children:[y.jsxs("div",{className:"hidden lg:flex items-center gap-8 border-r border-white/10 pr-8",children:[y.jsxs("div",{children:[y.jsx("div",{className:"text-white font-bold font-mono",children:"$0.50 - $1.00"}),y.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Por Accin"})]}),y.jsxs("div",{children:[y.jsx("div",{className:"text-neonGreen font-bold font-mono",children:"INSTANT"}),y.jsx("div",{className:"text-[10px] text-gray-500 uppercase",children:"Pago"})]})]}),y.jsxs("a",{href:"https://discord.gg/xrZwFPtN",target:"_blank",rel:"noopener noreferrer",className:"px-6 py-3 bg-white text-black font-bold rounded-lg hover:bg-techPurple hover:text-white transition-all flex items-center gap-2 shadow-lg whitespace-nowrap",children:["EMPEZAR AHORA ",y.jsx(Xl,{size:18})]})]})]})]})}),gH=({user:n,onOpenSubscription:e})=>{const{methods:t,loading:i}=au(),[r,a]=le.useState("All"),[l,c]=le.useState(null),[h,f]=le.useState(!1),_=le.useMemo(()=>r==="All"?t:t.filter(k=>k.category===r),[t,r]),T=le.useMemo(()=>["All",...Object.values(or)],[]);le.useEffect(()=>(l?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[l]),le.useEffect(()=>{const k=()=>{const L=window.location.hash;if(L.startsWith("#method-")){const $=L.replace("#method-",""),z=t.find(H=>H.id===$);if(z){const H=n==null?void 0:n.isPremium;!z.isPremium||H?c(z):(e(),window.history.replaceState(null,""," "))}}else(L===""||L==="#directory")&&c(null)};return i||k(),window.addEventListener("hashchange",k),()=>window.removeEventListener("hashchange",k)},[n,t,i,e]);const x=k=>{!k.isPremium||(n==null?void 0:n.isPremium)?(c(k),window.location.hash=`method-${k.id}`):e()},A=()=>{c(null),window.history.pushState("",document.title,window.location.pathname+window.location.search)},V=()=>{const k=window.location.href;navigator.clipboard.writeText(k).then(()=>{f(!0),setTimeout(()=>f(!1),2e3)})};return i?y.jsx("section",{className:"py-24 flex flex-col items-center justify-center min-h-[400px]",children:y.jsx(hi,{className:"animate-spin text-neonGreen mb-4",size:32})}):y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"directory",className:"py-10 container mx-auto px-6",children:[y.jsx("div",{className:"mb-8 border-b border-white/5 pb-4 overflow-x-auto no-scrollbar",children:y.jsx("div",{className:"flex gap-2 min-w-max",children:T.map(k=>y.jsx("button",{onClick:()=>a(k),className:`px-5 py-2.5 rounded-xl text-sm font-bold transition-all ${r===k?"bg-white text-black shadow-lg scale-105":"bg-[#1a1a1a] text-gray-400 hover:text-white hover:bg-[#252525]"}`,children:k},k))})}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.map(k=>{const L=k.isPremium&&!(n!=null&&n.isPremium);return y.jsxs("div",{onClick:()=>x(k),className:`group relative rounded-2xl p-5 cursor-pointer transition-all duration-300 hover:scale-[1.01] overflow-hidden border ${k.isPremium?"bg-[#100c00] border-proGold/20 hover:border-proGold/50":"bg-[#0f0f0f] border-white/5 hover:border-white/20"}`,children:[y.jsx("div",{className:`absolute inset-0 opacity-0 group-hover:opacity-10 transition-opacity bg-gradient-to-r ${k.isPremium?"from-proGold to-yellow-500":"from-neonGreen to-emerald-500"}`}),y.jsxs("div",{className:"relative z-10 flex flex-col h-full justify-between",children:[y.jsxs("div",{children:[y.jsxs("div",{className:"flex justify-between items-start mb-3",children:[y.jsxs("div",{className:"flex gap-2",children:[y.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-gray-500 bg-white/5 px-2 py-1 rounded",children:k.category}),k.isPremium&&y.jsxs("span",{className:"text-[10px] font-bold bg-proGold/10 text-proGold px-2 py-1 rounded border border-proGold/20 flex items-center gap-1",children:[y.jsx(na,{size:10})," PRO"]})]}),L&&y.jsx(ia,{size:16,className:"text-gray-600"})]}),y.jsx("h3",{className:`text-lg font-bold mb-2 leading-tight ${k.isPremium?"text-white":"text-gray-200 group-hover:text-neonGreen transition-colors"}`,children:k.name}),y.jsx("p",{className:"text-gray-500 text-sm line-clamp-2 mb-4",children:k.description})]}),y.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-white/5 mt-auto",children:[y.jsxs("div",{className:"flex items-center gap-3 text-xs font-mono text-gray-400",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(Gy,{size:12})," ",k.investmentRequired?"$$$":"Free"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx(GD,{size:12})," ",k.difficulty]})]}),y.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center transition-all ${k.isPremium?"bg-proGold text-black":"bg-white/10 text-white group-hover:bg-neonGreen group-hover:text-black"}`,children:y.jsx(Xl,{size:14})})]})]})]},k.id)})})]}),l&&y.jsxs("div",{className:"fixed inset-0 z-[100] bg-[#050505] overflow-y-auto animate-fadeIn custom-scrollbar",children:[y.jsxs("div",{className:"sticky top-0 z-50 bg-[#050505]/90 backdrop-blur-xl border-b border-white/5 px-6 h-20 flex items-center justify-between",children:[y.jsx("div",{className:"flex items-center gap-4",children:y.jsx("button",{onClick:A,className:"p-2 rounded-full hover:bg-white/10 text-white transition-colors",children:y.jsx(DD,{size:24})})}),y.jsx("div",{className:"flex items-center gap-3",children:y.jsxs("button",{onClick:V,className:"flex items-center gap-2 px-4 py-2 rounded-full border border-white/10 hover:bg-white/5 text-xs font-bold text-gray-400",children:[h?y.jsx(Ur,{size:14}):y.jsx(WM,{size:14})," ",h?"Copiado":"Compartir"]})})]}),y.jsxs("div",{className:"container mx-auto px-6 py-12 max-w-4xl",children:[y.jsxs("div",{className:"mb-8",children:[y.jsxs("span",{className:"text-neonGreen font-mono text-sm mb-2 block",children:[" ",l.category]}),y.jsx("h1",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-4",children:l.name}),y.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400 border-y border-white/5 py-4",children:[y.jsxs("span",{children:["Potencial: ",y.jsx("strong",{className:"text-white",children:l.potentialEarnings})]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Dificultad: ",y.jsx("strong",{className:"text-white",children:l.difficulty})]}),y.jsx("span",{children:""}),y.jsxs("span",{children:["Rating: ",y.jsxs("strong",{className:"text-yellow-500",children:[" ",l.rating]})]})]})]}),y.jsx("div",{className:"prose prose-invert prose-lg max-w-none text-gray-300",children:y.jsx("div",{dangerouslySetInnerHTML:{__html:l.content||""}})}),l.link&&y.jsxs("div",{className:"mt-12 p-8 bg-[#1a1a1a] rounded-2xl border border-white/5 text-center",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Listo para empezar?"}),y.jsx("p",{className:"text-gray-400 mb-6",children:"Accede al sitio oficial de forma segura."}),y.jsxs("a",{href:l.link,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-8 py-4 bg-white text-black font-bold rounded-xl hover:scale-105 transition-transform",children:["ABRIR ENLACE ",y.jsx(HA,{size:18})]})]})]})]})]})},yH=({onOpenSubscription:n})=>{const{settings:e}=au();return y.jsxs("section",{className:"py-20 container mx-auto px-6",children:[y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-end mb-12",children:[y.jsxs("div",{className:"max-w-xl",children:[y.jsxs("h2",{className:"text-3xl md:text-5xl font-display font-bold text-white mb-4",children:["Arsenal ",y.jsx("span",{className:"text-proGold",children:"Privado"})]}),y.jsx("p",{className:"text-gray-400",children:"Accede a herramientas y datos que te dan una ventaja injusta sobre el mercado. Esto no es un curso, es un ecosistema."})]}),y.jsxs("button",{onClick:n,className:"hidden md:flex items-center gap-2 text-proGold font-bold hover:text-white transition-colors",children:["VER PLANES ",y.jsx(Xl,{size:18})]})]}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 auto-rows-[minmax(200px,auto)]",children:[y.jsxs("div",{className:"md:col-span-2 bento-card rounded-3xl p-8 relative overflow-hidden group cursor-pointer",children:[y.jsx("div",{className:"absolute top-0 right-0 p-8 opacity-20 group-hover:opacity-50 transition-opacity",children:y.jsx(ZD,{size:120})}),y.jsxs("div",{className:"relative z-10 h-full flex flex-col justify-between",children:[y.jsx("div",{className:"bg-white/5 w-fit p-3 rounded-xl mb-4 border border-white/5",children:y.jsx(Ip,{className:"text-proGold"})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Suite de Automatizacin"}),y.jsx("p",{className:"text-gray-400 max-w-md",children:"Librera de scripts Python/JS para farmear Airdrops, auto-completar tareas y scrapear datos. Deja que el cdigo trabaje."})]})]})]}),y.jsxs("div",{className:"bento-card rounded-3xl p-8 relative overflow-hidden group cursor-pointer border-t-4 border-t-neonGreen",children:[y.jsx("div",{className:"absolute top-4 right-4 animate-pulse",children:y.jsx("div",{className:"w-2 h-2 bg-neonGreen rounded-full"})}),y.jsxs("div",{className:"mt-12",children:[y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Seales Whale"}),y.jsx("p",{className:"text-gray-400 text-sm",children:"Alertas en tiempo real cuando billeteras millonarias mueven capital."})]}),y.jsx(fP,{className:"absolute bottom-4 right-4 text-gray-700 group-hover:text-neonGreen transition-colors",size:48})]}),y.jsxs("div",{className:"bento-card rounded-3xl p-8 relative overflow-hidden group cursor-pointer",children:[y.jsx(sM,{className:"text-techPurple mb-6",size:32}),y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Proveedores Ocultos"}),y.jsx("p",{className:"text-gray-400 text-sm",children:"Lista negra de manufactura China/Europea con mrgenes del 60% para E-com."})]}),y.jsxs("div",{className:"bento-card rounded-3xl p-8 relative overflow-hidden group cursor-pointer md:col-span-2 bg-gradient-to-r from-[#0f0f0f] to-[#151515]",children:[y.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[y.jsxs("div",{className:"flex -space-x-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-700 border-2 border-[#0f0f0f]"}),y.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-600 border-2 border-[#0f0f0f]"}),y.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-500 border-2 border-[#0f0f0f]"})]}),y.jsx("span",{className:"text-sm text-gray-400",children:"+450 Miembros Elite"})]}),y.jsx("h3",{className:"text-xl font-bold text-white",children:"Networking High-Ticket"}),y.jsx("p",{className:"text-gray-400 text-sm mt-1",children:"Acceso al canal #business-elite. Donde se cierran tratos reales."})]})]}),y.jsx("div",{className:"mt-4 bento-card rounded-3xl p-1 bg-gradient-to-r from-proGold/20 via-transparent to-proGold/20",children:y.jsxs("div",{className:"bg-[#0a0a0a] rounded-[22px] px-8 py-6 flex flex-col md:flex-row justify-between items-center gap-6",children:[y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"p-3 bg-proGold/20 rounded-full text-proGold",children:y.jsx(ia,{size:20})}),y.jsxs("div",{children:[y.jsx("div",{className:"text-gray-400 text-xs uppercase font-bold",children:"Precio actual"}),y.jsxs("div",{className:"text-white font-bold text-xl",children:[e.monthlyPrice,e.currencySymbol," ",y.jsx("span",{className:"text-sm font-normal text-gray-500",children:"/ mes"})]})]})]}),y.jsx("button",{onClick:n,className:"px-8 py-3 bg-white text-black font-bold rounded-lg hover:bg-proGold transition-colors shadow-lg w-full md:w-auto",children:"DESBLOQUEAR TODO"})]})})]})},vH=({user:n,onOpenSubscription:e})=>{const{blogPosts:t,submitApplication:i}=au(),[r,a]=le.useState(null),[l,c]=le.useState("idle"),[h,f]=le.useState({name:"",discord:"",reason:""});le.useEffect(()=>(r?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[r]);const _=x=>{x.isPremium&&!x.hasApplicationForm&&!(n!=null&&n.isPremium)?e():(a(x),c("idle"),f({name:"",discord:"",reason:""}))},T=async x=>{if(x.preventDefault(),!n){alert("Debes iniciar sesin para aplicar.");return}c("submitting");try{await i({id:Date.now().toString(),userId:n.uid||"unknown",email:n.email,name:h.name,discord:h.discord,reason:h.reason,status:"pending",date:new Date().toISOString(),courseTitle:r==null?void 0:r.title}),c("success")}catch(A){console.error(A),c("idle"),alert("Error al enviar la solicitud.")}};return y.jsxs(y.Fragment,{children:[y.jsxs("section",{id:"guides",className:"py-20 bg-black relative",children:[y.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-1/3 bg-neonGreen/5 blur-[100px] rounded-full pointer-events-none"}),y.jsxs("div",{className:"container mx-auto px-6 relative z-10",children:[y.jsx("div",{className:"flex justify-between items-end mb-12",children:y.jsxs("div",{children:[y.jsxs("h2",{className:"text-3xl md:text-5xl font-display font-bold mb-2",children:["Academia ",y.jsx("span",{className:"text-neonGreen",children:"GDH"})]}),y.jsx("p",{className:"text-gray-400",children:"Guas verificadas para generar ingresos reales."})]})}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:t.map(x=>{const A=x.isPremium&&!(n!=null&&n.isPremium)&&!x.hasApplicationForm;return y.jsxs("article",{className:`group cursor-pointer rounded-2xl overflow-hidden transition-all duration-300 flex flex-col h-full relative ${x.isPremium?"bg-[#0f0b00] border border-proGold/30 hover:shadow-gold hover:border-proGold":"bg-surface/50 border border-white/5 hover:border-neonGreen/50 hover:shadow-neon"}`,onClick:()=>_(x),children:[x.isPremium&&y.jsxs("div",{className:"absolute top-3 right-3 z-30 bg-proGold text-black text-[10px] font-bold px-2 py-1 rounded shadow-lg flex items-center gap-1",children:[y.jsx(na,{size:10,fill:"currentColor"})," PRO"]}),y.jsxs("div",{className:"relative overflow-hidden h-48 w-full",children:[y.jsx("img",{src:x.imageUrl,alt:x.title,loading:"lazy",decoding:"async",className:`w-full h-full object-cover transform transition-transform duration-700 ${A?"blur-[2px] grayscale-[50%]":"group-hover:scale-110"}`}),A&&y.jsx("div",{className:"absolute inset-0 z-20 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:y.jsx(ia,{size:32,className:"text-proGold drop-shadow-lg"})}),y.jsxs("div",{className:"absolute top-3 left-3 z-20 backdrop-blur-md px-3 py-1 rounded-full text-xs font-bold border flex items-center gap-1 bg-black/60 text-white border-white/20",children:[y.jsx(cP,{size:10})," ",x.category]})]}),y.jsxs("div",{className:"p-6 flex flex-col flex-grow",children:[y.jsx("h3",{className:`text-xl font-bold mb-3 transition-colors leading-tight ${x.isPremium?"text-white group-hover:text-proGold":"group-hover:text-neonGreen"}`,children:A?y.jsxs("span",{className:"flex items-center gap-2",children:[y.jsx(ia,{size:16,className:"text-proGold inline"})," ",x.title]}):x.title}),y.jsx("p",{className:"text-gray-400 text-sm mb-6 line-clamp-3 leading-relaxed flex-grow",children:x.excerpt}),y.jsxs("div",{className:`flex items-center text-sm font-bold mt-auto group-hover:translate-x-2 transition-transform ${x.isPremium?"text-proGold":"text-neonGreen"}`,children:[x.hasApplicationForm?"APLICAR AHORA":A?"DESBLOQUEAR CONTENIDO":"LEER GUA COMPLETA"," ",y.jsx(Xl,{size:16,className:"ml-2"})]})]})]},x.id)})})]})]}),r&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4 md:p-8",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-sm transition-opacity",onClick:()=>a(null)}),y.jsxs("div",{className:"bg-[#121212] w-full max-w-4xl max-h-full md:max-h-[90vh] rounded-2xl border border-white/10 shadow-2xl relative flex flex-col overflow-hidden animate-fadeIn",children:[y.jsxs("div",{className:"h-48 md:h-64 relative shrink-0",children:[y.jsx("img",{src:r.imageUrl,loading:"lazy",decoding:"async",className:"w-full h-full object-cover opacity-50",alt:"Cover"}),y.jsx("button",{onClick:()=>a(null),className:"absolute top-4 right-4 bg-black/50 hover:bg-neonGreen hover:text-black text-white p-2 rounded-full backdrop-blur-md transition-all z-20 border border-white/10",children:y.jsx(ui,{size:24})})]}),y.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar -mt-12 relative z-10 flex flex-col",children:y.jsxs("div",{className:"bg-[#121212] min-h-full p-6 md:p-10 rounded-t-3xl border-t border-white/10 shadow-[0_-10px_40px_rgba(0,0,0,0.5)]",children:[y.jsx("div",{className:"flex items-center gap-3 mb-4",children:y.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-bold border bg-white/5 text-gray-300",children:r.category})}),y.jsx("h2",{className:"text-2xl md:text-4xl font-display font-bold text-white mb-8 leading-tight",children:r.title}),y.jsx("div",{className:"prose prose-invert prose-lg max-w-none prose-p:text-gray-300",dangerouslySetInnerHTML:{__html:r.content}}),r.hasApplicationForm?y.jsx("div",{className:"mt-12 pt-8 border-t border-white/10",children:l==="success"?y.jsxs("div",{className:"bg-neonGreen/10 border border-neonGreen/30 rounded-2xl p-8 text-center animate-fadeIn",children:[y.jsx($D,{size:32,className:"text-neonGreen mx-auto mb-4"}),y.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:"Solicitud Recibida!"}),y.jsx("p",{className:"text-gray-300",children:"Te contactaremos pronto por Discord o Email."})]}):y.jsxs("div",{className:"bg-[#0f0f0f] border border-proGold/30 rounded-2xl p-6 relative overflow-hidden",children:[y.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[y.jsx("div",{className:"p-2 bg-proGold text-black rounded-lg",children:y.jsx(dM,{size:24})}),y.jsx("h3",{className:"text-xl font-bold text-white",children:"Formulario de Admisin"})]}),y.jsxs("form",{onSubmit:T,className:"space-y-4 relative z-10",children:[y.jsx("input",{required:!0,type:"text",value:h.name,onChange:x=>f({...h,name:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-lg p-3 text-white",placeholder:"Tu nombre"}),y.jsx("input",{required:!0,type:"text",value:h.discord,onChange:x=>f({...h,discord:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-lg p-3 text-white",placeholder:"Usuario Discord (Ej: user#1234)"}),y.jsx("textarea",{required:!0,value:h.reason,onChange:x=>f({...h,reason:x.target.value}),className:"w-full bg-black/50 border border-white/10 rounded-lg p-3 text-white h-24",placeholder:"Por qu quieres entrar? Cuntanos tu experiencia..."}),y.jsx("button",{type:"submit",disabled:l==="submitting",className:"w-full py-4 bg-proGold text-black font-bold rounded-xl shadow-gold hover:bg-white transition-all flex items-center justify-center gap-2",children:l==="submitting"?y.jsx(hi,{className:"animate-spin"}):"ENVIAR SOLICITUD"})]})]})}):null]})})]})]})]})},_H=({onOpen:n})=>y.jsxs("section",{className:"py-24 bg-black relative overflow-hidden border-t border-white/5",children:[y.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-proGold/5 blur-[150px] rounded-full pointer-events-none"}),y.jsx("div",{className:"container mx-auto px-6 relative z-10",children:y.jsxs("div",{className:"flex flex-col lg:flex-row items-center gap-12",children:[y.jsxs("div",{className:"lg:w-1/2",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full border border-proGold/30 bg-proGold/10 text-proGold text-xs font-bold mb-6",children:[y.jsx(Lc,{size:14})," NUEVA HERRAMIENTA"]}),y.jsxs("h2",{className:"text-4xl md:text-5xl font-display font-bold text-white mb-6 leading-tight",children:["Crea Activos Digitales ",y.jsx("br",{}),y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-proGold to-yellow-200",children:"En Segundos."})]}),y.jsxs("p",{className:"text-gray-400 text-lg mb-8 leading-relaxed",children:[y.jsx("strong",{children:"GDH Studio"})," es tu diseador grfico personal impulsado por IA. Genera logotipos para tus nichos, imgenes para tus campaas de ads y renders 3D para tus presentaciones. Sin copyright. Sin esperas."]}),y.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-8",children:[y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"p-2 bg-white/5 rounded-lg border border-white/10 text-proGold",children:y.jsx($A,{size:20})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-white font-bold text-sm",children:"Estilos Profesionales"}),y.jsx("p",{className:"text-gray-500 text-xs",children:"Desde minimalismo corporativo hasta cyberpunk."})]})]}),y.jsxs("div",{className:"flex items-start gap-3",children:[y.jsx("div",{className:"p-2 bg-white/5 rounded-lg border border-white/10 text-proGold",children:y.jsx(Ip,{size:20})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-white font-bold text-sm",children:"Motor Gemini 2.0"}),y.jsx("p",{className:"text-gray-500 text-xs",children:"Entendimiento semntico superior para prompts complejos."})]})]})]}),y.jsxs("button",{onClick:n,className:"px-8 py-4 bg-white text-black font-bold rounded-xl shadow-lg hover:bg-proGold hover:scale-105 transition-all flex items-center gap-2 group",children:["PROBAR GDH STUDIO ",y.jsx(Xl,{size:20,className:"group-hover:translate-x-1 transition-transform"})]})]}),y.jsxs("div",{className:"lg:w-1/2 relative",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-4 relative z-10",children:[y.jsxs("div",{className:"space-y-4 translate-y-8",children:[y.jsx("img",{loading:"lazy",decoding:"async",src:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=1000&auto=format&fit=crop",className:"rounded-2xl shadow-2xl border border-white/10 hover:scale-105 transition-transform duration-500 object-cover h-64 w-full",alt:"Abstract 3D"}),y.jsx("img",{loading:"lazy",decoding:"async",src:"https://images.unsplash.com/photo-1620641788421-7a1c342ea42e?q=80&w=1000&auto=format&fit=crop",className:"rounded-2xl shadow-2xl border border-white/10 hover:scale-105 transition-transform duration-500 object-cover h-48 w-full",alt:"Digital Art"})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("img",{loading:"lazy",decoding:"async",src:"https://images.unsplash.com/photo-1635322966219-b75ed372eb01?q=80&w=1000&auto=format&fit=crop",className:"rounded-2xl shadow-2xl border border-white/10 hover:scale-105 transition-transform duration-500 object-cover h-48 w-full",alt:"Cyberpunk"}),y.jsx("img",{loading:"lazy",decoding:"async",src:"https://images.unsplash.com/photo-1634152962476-4b8a00e1915c?q=80&w=1000&auto=format&fit=crop",className:"rounded-2xl shadow-2xl border border-white/10 hover:scale-105 transition-transform duration-500 object-cover h-64 w-full",alt:"Dark Mode UI"})]})]}),y.jsxs("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-black/80 backdrop-blur-md border border-proGold/30 px-6 py-3 rounded-full shadow-[0_0_30px_rgba(251,191,36,0.2)] z-20 flex items-center gap-3",children:[y.jsx(Ml,{className:"text-proGold animate-pulse"}),y.jsx("span",{className:"text-white font-bold tracking-wider text-sm",children:"GENERADO CON IA"})]})]})]})})]}),EH=()=>y.jsx("footer",{className:"bg-surface pt-16 pb-8 border-t border-white/5",children:y.jsxs("div",{className:"container mx-auto px-6",children:[y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-12 mb-12",children:[y.jsxs("div",{className:"col-span-1 md:col-span-1",children:[y.jsxs("div",{className:"text-2xl font-display font-bold text-white mb-4",children:["GD",y.jsx("span",{className:"text-neonGreen",children:"Hispano"}),"."]}),y.jsx("p",{className:"text-gray-500 text-sm mb-6",children:"Central de Auditora de ingresos online. Empoderando a la comunidad hispana con datos reales."}),y.jsxs("div",{className:"flex gap-4",children:[y.jsx("a",{href:"https://t.me/GanaDineroHispanos",target:"_blank",className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 hover:bg-blue-400 hover:text-white transition-all",children:y.jsx(JA,{size:16})}),y.jsx("a",{href:"#",className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 hover:bg-techPurple hover:text-white transition-all",children:y.jsx(TM,{size:16})}),y.jsx("a",{href:"#",className:"w-8 h-8 rounded-full bg-white/5 flex items-center justify-center text-gray-400 hover:bg-white hover:text-black transition-all",children:y.jsx(gP,{size:16})})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-white mb-6",children:"Explorar"}),y.jsxs("ul",{className:"space-y-3 text-sm text-gray-500",children:[y.jsx("li",{children:y.jsx("a",{href:"#directory",className:"hover:text-neonGreen transition-colors",children:"Directorio Auditado"})}),y.jsx("li",{children:y.jsx("a",{href:"#wall-of-shame",className:"hover:text-danger transition-colors",children:"Lista Negra (Scams)"})}),y.jsx("li",{children:y.jsx("a",{href:"#guides",className:"hover:text-white transition-colors",children:"Blog y Guas"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Herramientas Gratuitas"})})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-white mb-6",children:"Legal"}),y.jsxs("ul",{className:"space-y-3 text-sm text-gray-500",children:[y.jsx("li",{children:y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Aviso Legal"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Privacidad"})}),y.jsx("li",{children:y.jsx("a",{href:"#",className:"hover:text-white transition-colors",children:"Descargo de Responsabilidad"})})]})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"font-bold text-white mb-6",children:"Newsletter Privada"}),y.jsx("p",{className:"text-gray-500 text-xs mb-4",children:"Recibe las nuevas oportunidades auditadas antes de que se saturen."}),y.jsxs("form",{className:"flex gap-2",children:[y.jsx("input",{type:"email",placeholder:"tu@email.com",className:"bg-black/30 border border-white/10 rounded px-3 py-2 text-sm text-white w-full focus:border-neonGreen outline-none"}),y.jsx("button",{className:"bg-neonGreen text-black px-3 py-2 rounded text-sm font-bold hover:bg-white transition-colors",children:y.jsx(qf,{size:16})})]})]})]}),y.jsxs("div",{className:"border-t border-white/5 pt-8 text-center text-gray-600 text-xs",children:[y.jsx("p",{children:" 2026 GanaDineroHispano. Comunidad de Auditora. Todos los derechos reservados."}),y.jsx("p",{className:"mt-2",children:"Importante: No somos asesores financieros. Toda inversin conlleva riesgos."})]})]})}),TH=({user:n})=>{const[e,t]=le.useState(!1),[i,r]=le.useState(""),[a,l]=le.useState([{id:"0",role:"model",text:"Sistemas online. Soy Neo. Quieres auditar una web, generar imgenes o buscar ingresos?",options:["Auditar URL","Crear Imagen (Studio)","Unirme a Discord"],timestamp:Date.now()}]),[c,h]=le.useState(!1),f=le.useRef(null),_=le.useRef(null);le.useEffect(()=>{try{f.current||(f.current=Uy())}catch{console.warn("ChatBot initialization failed.")}},[]),le.useEffect(()=>{let z;if(n&&n.uid){const H=yt(tt,"users",n.uid,"private_data","chat");z=M6(H,Z=>{if(Z.exists()){const ie=Z.data();ie.messages&&Array.isArray(ie.messages)&&ie.messages.length>0&&l(ie.messages)}})}else l([{id:"0",role:"model",text:"Sistemas online. Soy Neo. Quieres auditar una web, generar imgenes o buscar ingresos?",options:["Auditar URL","Crear Imagen (Studio)","Unirme a Discord"],timestamp:Date.now()}]);return()=>{z&&z()}},[n]),le.useEffect(()=>{var z;(z=_.current)==null||z.scrollIntoView({behavior:"smooth"})},[a,e,c]);const T=async z=>{if(n&&n.uid)try{const H=z.slice(-50);await en(yt(tt,"users",n.uid,"private_data","chat"),{messages:H,lastUpdated:new Date().toISOString()},{merge:!0})}catch(H){console.error("Error saving chat:",H)}},x=z=>{const H=/\|\|OPTIONS:\s*(\[.*?\])\|\|/,Z=z.match(H);if(Z)try{const ie=z.replace(H,"").trim(),J=JSON.parse(Z[1]);return{cleanText:ie,options:J}}catch{return{cleanText:z.replace(H,"").trim()}}return{cleanText:z}},A=async z=>{if(!z.trim()||c)return;if(!f.current)try{f.current=Uy()}catch{return}h(!0);const H={id:Date.now().toString(),role:"user",text:z,timestamp:Date.now()},Z=[...a,H];l(Z),T(Z);try{if(f.current){const J=(await f.current.sendMessage({message:z})).text||"Error de conexin.",{cleanText:R,options:M}=x(J),P={id:(Date.now()+1).toString(),role:"model",text:R,options:M,timestamp:Date.now()},O=[...Z,P];l(O),T(O)}}catch(ie){console.error("Chat error",ie);const J={id:Date.now().toString(),role:"model",text:"Error de sistema. Intenta reformular.",timestamp:Date.now()};l(R=>[...R,J])}finally{h(!1)}},V=z=>{z.preventDefault(),A(i),r("")},k=async()=>{const z=[{id:Date.now().toString(),role:"model",text:"Memoria reiniciada. En qu te ayudo ahora?",options:["Auditar URL","Crear Imagen (Studio)","Unirme a Discord"],timestamp:Date.now()}];l(z),T(z);try{f.current=Uy()}catch{}},L=(z,H)=>{if(H.startsWith("#")){z.preventDefault(),window.location.hash=H;const Z=H.replace("#",""),ie=document.getElementById(Z);ie&&ie.scrollIntoView({behavior:"smooth",block:"center"})}},$=z=>{const H=/(\*\*.*?\*\*|\[.*?\]\(.*?\))/g;return z.split(H).map((ie,J)=>{if(ie.startsWith("**")&&ie.endsWith("**"))return y.jsx("strong",{className:"text-neonGreen font-bold",children:ie.slice(2,-2)},J);if(ie.startsWith("[")&&ie.includes("](")&&ie.endsWith(")")){const R=ie.match(/\[(.*?)\]\((.*?)\)/);if(R){const M=R[1],P=R[2],O=P.startsWith("http");return y.jsxs("a",{href:P,target:O?"_blank":void 0,rel:O?"noopener noreferrer":void 0,onClick:C=>!O&&L(C,P),className:"inline-flex items-center gap-1 text-techPurple bg-techPurple/10 px-1.5 py-0.5 rounded hover:bg-techPurple hover:text-white font-bold transition-all mx-1 text-xs uppercase tracking-wide no-underline border border-techPurple/30",children:[M," ",y.jsx(HA,{size:10})]},J)}}return y.jsx("span",{children:ie},J)})};return y.jsxs(y.Fragment,{children:[y.jsxs("button",{onClick:()=>t(!e),className:`fixed bottom-6 right-6 z-50 p-4 rounded-full shadow-neon transition-all duration-300 group ${e?"rotate-90 bg-surface border border-white/10":"bg-neonGreen text-black hover:scale-110"}`,children:[e?y.jsx(ui,{size:24,className:"text-white"}):y.jsx(jA,{size:24,fill:"currentColor"}),!e&&y.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-techPurple rounded-full animate-ping"})]}),y.jsxs("div",{className:`fixed bottom-24 right-6 w-[90vw] md:w-[400px] h-[550px] bg-[#0c0c0c] rounded-2xl flex flex-col overflow-hidden transition-all duration-300 origin-bottom-right z-40 border border-white/10 shadow-2xl ${e?"opacity-100 scale-100 translate-y-0":"opacity-0 scale-95 translate-y-10 pointer-events-none"}`,children:[y.jsxs("div",{className:"p-4 bg-black/80 backdrop-blur border-b border-white/10 flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-neonGreen to-techPurple p-[2px]",children:y.jsx("div",{className:"w-full h-full bg-black rounded-full flex items-center justify-center",children:y.jsx(Lc,{size:18,className:"text-white"})})}),y.jsxs("div",{children:[y.jsx("h3",{className:"font-bold text-white text-sm",children:"Asistente Neo"}),y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx("span",{className:"text-[10px] text-neonGreen font-mono flex items-center gap-1",children:" ONLINE"}),n&&y.jsxs("span",{className:"text-[10px] text-gray-500 flex items-center gap-1",children:[y.jsx($M,{size:8})," Cloud Sync"]})]})]})]}),y.jsx("button",{onClick:k,className:"text-[10px] text-gray-500 hover:text-white transition-colors border border-white/10 px-2 py-1 rounded hover:bg-white/10",children:"Reiniciar"})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[a.map(z=>y.jsxs("div",{className:`flex flex-col ${z.role==="user"?"items-end":"items-start"}`,children:[y.jsx("div",{className:`max-w-[85%] p-3.5 rounded-2xl text-sm leading-relaxed ${z.role==="user"?"bg-white text-black font-medium rounded-br-sm":"bg-[#1a1a1a] border border-white/10 text-gray-200 rounded-bl-sm"}`,children:$(z.text)}),z.role==="model"&&z.options&&z.id===a[a.length-1].id&&!c&&y.jsx("div",{className:"flex flex-wrap gap-2 mt-3 animate-fadeIn",children:z.options.map((H,Z)=>y.jsxs("button",{onClick:()=>A(H),className:"px-4 py-2 bg-neonGreen/10 border border-neonGreen/30 hover:bg-neonGreen hover:text-black text-neonGreen text-xs font-bold rounded-full transition-all flex items-center gap-1",children:[H," ",y.jsx(qD,{size:12})]},Z))})]},z.id)),c&&y.jsx("div",{className:"flex justify-start",children:y.jsxs("div",{className:"bg-[#1a1a1a] border border-white/5 p-3 rounded-2xl rounded-bl-sm flex gap-2 items-center",children:[y.jsx(hi,{size:16,className:"animate-spin text-neonGreen"}),y.jsx("span",{className:"text-xs text-gray-500",children:"Analizando red..."})]})}),y.jsx("div",{ref:_})]}),y.jsxs("form",{onSubmit:V,className:"p-3 bg-black border-t border-white/10 flex gap-2",children:[y.jsx("input",{type:"text",value:i,onChange:z=>r(z.target.value),placeholder:"Escribe algo...",className:"flex-1 bg-[#1a1a1a] border border-white/10 rounded-full px-4 py-3 text-sm text-white focus:outline-none focus:border-neonGreen/50 transition-colors placeholder:text-gray-600"}),y.jsx("button",{type:"submit",disabled:c||!i.trim(),className:"w-10 h-10 bg-white text-black rounded-full hover:bg-neonGreen transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:y.jsx(JA,{size:18})})]})]})]})},xH=({user:n,onOpenSubscription:e,isOpen:t,onOpen:i,onClose:r})=>{const[a,l]=le.useState(""),[c,h]=le.useState(""),[f,_]=le.useState(!1),[T,x]=le.useState(null),[A,V]=le.useState("Photorealistic"),[k,L]=le.useState("1:1"),[$,z]=le.useState([]),[H,Z]=le.useState(!0),[ie,J]=le.useState(null),[R,M]=le.useState(!1);le.useEffect(()=>{t&&(async()=>{if(n&&n.uid)try{const G=yt(tt,"users",n.uid,"private_data","images"),re=await Z0(G);re.exists()&&re.data().history&&z(re.data().history)}catch(G){console.error("Error loading cloud images",G)}else{const G=localStorage.getItem("gdh_image_history");if(G)try{z(JSON.parse(G))}catch{console.error("Failed to parse local image history")}}})()},[n,t]),le.useEffect(()=>{localStorage.setItem("gdh_image_history",JSON.stringify($))},[$]),le.useEffect(()=>{t&&M(!1)},[t]);const P=async(de,G)=>{if(n&&n.uid)try{const re=yt(tt,"users",n.uid,"private_data","images"),he=[de,...G].slice(0,50);await en(re,{history:he},{merge:!0})}catch(re){console.error("Error saving image to cloud",re)}},O=[{id:"Photorealistic",label:"Realista",icon:y.jsx(GM,{size:14}),keywords:"Photorealistic, Cinematic lighting, Shot on 35mm lens, Depth of field, ISO 100, 8k, Hyper-detailed"},{id:"3D Render",label:"3D Render",icon:y.jsx(OD,{size:14}),keywords:"3D Octane Render, Unreal Engine 5, Raytracing, Global Illumination, Smooth textures, Clay render aesthetic, 3D masterpiece"},{id:"Minimalist Logo",label:"Logo",icon:y.jsx(Ml,{size:14}),keywords:"Vector Art, Flat design, Minimalist, Simple lines, Solid colors, White background, Adobe Illustrator style, Corporate identity"},{id:"Cyberpunk",label:"Cyberpunk",icon:y.jsx(nP,{size:14}),keywords:"Cyberpunk aesthetic, Neon lights, Night city background, High contrast, Futurism, Glitch effect, Pink and Blue color palette"},{id:"Oil Painting",label:"Arte",icon:y.jsx($A,{size:14}),keywords:"Oil painting on canvas, Heavy brushstrokes, Classical art style, Impasto texture, Artistic masterpiece"}],C=[{id:"1:1",label:"Cuadrado"},{id:"16:9",label:"Paisaje"},{id:"9:16",label:"Story"}],F=async de=>{if(de.preventDefault(),!!a.trim()){if(!(n!=null&&n.isPremium)){M(!0);return}_(!0),x(null),h(""),J(null);try{const G=O.find(se=>se.id===A),re=H?(G==null?void 0:G.keywords)||"Photorealistic, 8k":"",{imageUrl:he,enhancedPrompt:Ie}=await fH(a,re,k);x(he),h(Ie);const Oe={id:Date.now().toString(),url:he,prompt:a,timestamp:new Date().toISOString()},q=[Oe,...$].slice(0,50);z(q),P(Oe,$)}catch(G){console.error("Generation failed",G),J(G.message||"Error al generar la imagen. La IA puede estar saturada.")}finally{_(!1)}}},N=()=>{if(T){const de=document.createElement("a");de.href=T,de.download=`gdh-studio-${Date.now()}.png`,document.body.appendChild(de),de.click(),document.body.removeChild(de)}},Ee=async()=>{window.confirm("Borrar historial?")&&(z([]),localStorage.removeItem("gdh_image_history"),n&&n.uid&&await en(yt(tt,"users",n.uid,"private_data","images"),{history:[]}))};return y.jsxs(y.Fragment,{children:[y.jsx("button",{onClick:i,className:"fixed bottom-6 left-6 z-40 group flex items-center justify-center p-1 rounded-full bg-gradient-to-r from-proGold via-yellow-400 to-yellow-600 shadow-gold transition-all duration-300 hover:scale-105",children:y.jsxs("div",{className:"bg-black rounded-full p-3 flex items-center gap-2 relative overflow-hidden",children:[y.jsx("div",{className:"absolute inset-0 bg-proGold/20 translate-y-full group-hover:translate-y-0 transition-transform duration-300"}),y.jsx(Lc,{size:20,className:"text-proGold animate-pulse"}),y.jsx("span",{className:"text-xs font-bold text-white pr-1 hidden md:block",children:"GDH Studio"})]})}),t&&y.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:r}),y.jsxs("div",{className:"bg-[#0f0f0f] w-full max-w-6xl h-[90vh] rounded-3xl border border-white/10 shadow-2xl relative flex overflow-hidden animate-fadeIn",children:[R&&y.jsx("div",{className:"absolute inset-0 z-50 bg-black/80 backdrop-blur-md flex items-center justify-center animate-fadeIn p-4",children:y.jsxs("div",{className:"bg-[#121212] border border-proGold/30 rounded-2xl p-8 max-w-md w-full text-center relative shadow-[0_0_50px_rgba(251,191,36,0.1)]",children:[y.jsx("button",{onClick:()=>M(!1),className:"absolute top-4 right-4 text-gray-500 hover:text-white",children:y.jsx(ui,{size:20})}),y.jsx("div",{className:"w-20 h-20 bg-proGold/10 rounded-full flex items-center justify-center mx-auto mb-6 border border-proGold/20",children:y.jsx(ia,{size:40,className:"text-proGold"})}),y.jsx("h3",{className:"text-2xl font-display font-bold text-white mb-2",children:"Herramienta PRO"}),y.jsxs("p",{className:"text-gray-400 text-sm mb-8 leading-relaxed",children:["El generador de imgenes con ",y.jsx("strong",{children:"Gemini 2.0"})," consume muchos recursos de servidor. Es exclusivo para miembros de la comunidad VIP."]}),y.jsxs("button",{onClick:()=>{r(),e()},className:"w-full py-4 bg-gradient-to-r from-proGold to-yellow-500 text-black font-bold rounded-xl shadow-gold hover:shadow-[0_0_20px_rgba(251,191,36,0.5)] transition-all flex items-center justify-center gap-2 mb-4",children:[y.jsx(na,{size:20,fill:"currentColor"})," MEJORAR MI CUENTA"]}),y.jsx("button",{onClick:()=>M(!1),className:"text-sm text-gray-500 hover:text-white",children:"Cancelar y volver"})]})}),y.jsxs("div",{className:"w-80 border-r border-white/5 bg-[#0a0a0a] flex flex-col hidden md:flex",children:[y.jsxs("div",{className:"p-6 border-b border-white/5",children:[y.jsxs("div",{className:"flex items-center gap-2 text-proGold mb-1",children:[y.jsx(na,{size:18,fill:"currentColor"}),y.jsx("span",{className:"font-display font-bold text-lg text-white",children:"GDH Studio"})]}),y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Generador Ilimitado PRO"}),n&&y.jsx("div",{title:"Guardado en la nube",children:y.jsx(QD,{size:12,className:"text-neonGreen"})})]})]}),y.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4 pl-2 pr-2",children:[y.jsx("h4",{className:"text-xs font-bold text-gray-500 uppercase",children:"Historial"}),$.length>0&&y.jsx("button",{onClick:Ee,className:"text-gray-600 hover:text-danger transition-colors",children:y.jsx(yf,{size:12})})]}),y.jsxs("div",{className:"space-y-3",children:[$.map((de,G)=>y.jsxs("button",{onClick:()=>{x(de.url),l(de.prompt),J(null)},className:"w-full text-left p-2 rounded-xl hover:bg-white/5 transition-colors group flex gap-3 items-center",children:[y.jsx("img",{src:de.url,className:"w-12 h-12 rounded-lg object-cover border border-white/10",alt:"thumbnail"}),y.jsxs("div",{className:"overflow-hidden",children:[y.jsx("p",{className:"text-xs text-gray-300 truncate group-hover:text-white transition-colors",children:de.prompt}),y.jsx("p",{className:"text-[10px] text-gray-600",children:new Date(de.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]},`${de.id}-${G}`)),$.length===0&&y.jsxs("div",{className:"text-center py-10 text-gray-600 text-xs",children:[y.jsx(vM,{size:24,className:"mx-auto mb-2 opacity-50"}),"Tu historial aparecer aqu"]})]})]})]}),y.jsxs("div",{className:"flex-1 flex flex-col bg-surface/30 relative",children:[y.jsx("button",{onClick:r,className:"absolute top-4 right-4 z-20 p-2 hover:bg-white/10 rounded-full text-gray-400 hover:text-white",children:y.jsx(ui,{size:24})}),y.jsxs("div",{className:"flex-1 flex items-center justify-center p-8 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] bg-opacity-5 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-proGold/5 blur-[150px] rounded-full pointer-events-none"}),ie?y.jsxs("div",{className:"text-center bg-black/50 p-6 rounded-2xl border border-danger/30 backdrop-blur-sm animate-fadeIn",children:[y.jsx(YA,{size:48,className:"mx-auto mb-4 text-danger"}),y.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Error de Generacin"}),y.jsx("p",{className:"text-gray-400 text-sm max-w-md",children:ie}),y.jsx("button",{onClick:()=>J(null),className:"mt-4 text-sm text-white underline hover:text-proGold",children:"Intentar de nuevo"})]}):T?y.jsxs("div",{className:"relative group max-h-full max-w-full shadow-2xl rounded-lg overflow-hidden animate-fadeIn",children:[y.jsx("img",{src:T,alt:"Generated",className:"max-h-[60vh] object-contain rounded-lg border border-white/10"}),y.jsx("div",{className:"absolute bottom-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:y.jsx("button",{onClick:N,className:"p-3 bg-black/80 backdrop-blur text-white rounded-full hover:bg-neonGreen hover:text-black transition-colors",title:"Descargar",children:y.jsx(iM,{size:20})})})]}):f?y.jsxs("div",{className:"text-center",children:[y.jsxs("div",{className:"relative w-24 h-24 mx-auto mb-6",children:[y.jsx("div",{className:"absolute inset-0 border-4 border-proGold/20 rounded-full"}),y.jsx("div",{className:"absolute inset-0 border-4 border-proGold rounded-full border-t-transparent animate-spin"}),y.jsx(Lc,{className:"absolute inset-0 m-auto text-proGold animate-pulse",size:32})]}),y.jsx("h3",{className:"text-xl font-bold text-white mb-2 animate-pulse",children:"Creando Activo Digital..."}),y.jsx("p",{className:"text-sm text-gray-500",children:"Optimizando prompt y renderizando pixels."})]}):y.jsxs("div",{className:"text-center opacity-50 select-none",children:[y.jsx(Yx,{size:64,className:"mx-auto mb-4 text-gray-600"}),y.jsx("h3",{className:"text-2xl font-bold text-gray-400",children:"Listo para crear"}),y.jsx("p",{className:"text-gray-500",children:"Describe tu idea y deja que la magia ocurra."})]})]}),y.jsx("div",{className:"p-6 bg-[#0a0a0a] border-t border-white/10 z-10",children:y.jsxs("form",{onSubmit:F,className:"max-w-4xl mx-auto space-y-4",children:[y.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[y.jsx("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:O.map(de=>y.jsxs("button",{type:"button",onClick:()=>V(de.id),className:`flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold border transition-all whitespace-nowrap ${A===de.id?"bg-proGold text-black border-proGold":"bg-white/5 text-gray-400 border-white/10 hover:border-white/30"}`,children:[de.icon," ",de.label]},de.id))}),y.jsx("div",{className:"flex bg-white/5 rounded-lg p-1 border border-white/10",children:C.map(de=>y.jsx("button",{type:"button",onClick:()=>L(de.id),className:`px-3 py-1 rounded text-xs font-bold transition-all ${k===de.id?"bg-white/10 text-white shadow-sm":"text-gray-500 hover:text-gray-300"}`,children:de.label},de.id))})]}),y.jsxs("div",{className:"relative group",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-proGold/20 to-yellow-600/20 rounded-2xl blur-sm group-focus-within:opacity-100 opacity-0 transition-opacity duration-500"}),y.jsxs("div",{className:"relative flex gap-2",children:[y.jsxs("div",{className:"flex-1 relative",children:[y.jsx("input",{type:"text",value:a,onChange:de=>l(de.target.value),placeholder:"Ej: Un logo minimalista para una tienda de caf premium, fondo oscuro...",className:"w-full bg-[#151515] border border-white/10 text-white placeholder:text-gray-600 rounded-xl px-4 py-4 focus:outline-none focus:border-proGold/50 transition-colors pr-32 font-medium",disabled:f}),y.jsxs("button",{type:"button",onClick:()=>Z(!H),className:`absolute right-2 top-1/2 -translate-y-1/2 px-2 py-1.5 rounded-lg text-[10px] font-bold flex items-center gap-1 transition-colors ${H?"text-neonGreen bg-neonGreen/10":"text-gray-600 bg-white/5 hover:text-gray-400"}`,title:"Reescribir prompt para mejor calidad",children:[y.jsx(Lc,{size:10})," IA AUTO-FIX"]})]}),y.jsxs("button",{type:"submit",disabled:f||!a.trim(),className:"px-6 bg-proGold text-black font-bold rounded-xl hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed shadow-gold flex items-center gap-2",children:[f?y.jsx(hi,{className:"animate-spin",size:20}):y.jsx(Yx,{size:20}),y.jsx("span",{className:"hidden md:inline",children:"GENERAR"})]})]})]})]})})]})]})]})]})},bH=({onValidate:n})=>{const[e,t]=le.useState("idle"),i=()=>{e==="idle"&&(t("verifying"),setTimeout(()=>{t("verified"),n(!0)},1500))};return y.jsxs("div",{className:`bg-[#222] border ${e==="verified"?"border-neonGreen/50 bg-neonGreen/5":"border-white/10"} rounded-lg p-3 flex items-center justify-between transition-all duration-300 select-none`,children:[y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsxs("button",{type:"button",onClick:i,disabled:e!=="idle",className:`w-7 h-7 rounded border-2 flex items-center justify-center transition-all ${e==="idle"?"border-gray-500 hover:border-white bg-white/5":e==="verifying"?"border-gray-500 bg-transparent":"border-neonGreen bg-neonGreen"}`,children:[e==="verifying"&&y.jsx(hi,{size:14,className:"animate-spin text-gray-400"}),e==="verified"&&y.jsx(Ur,{size:16,className:"text-black font-bold"})]}),y.jsxs("span",{className:"text-sm text-gray-300 font-medium",children:[e==="idle"&&"Haz clic para verificar que eres humano",e==="verifying"&&"Analizando conexin...",e==="verified"&&"Verificacin humana exitosa"]})]}),y.jsxs("div",{className:"flex flex-col items-center opacity-50",children:[y.jsx(Hf,{size:20,className:e==="verified"?"text-neonGreen":"text-gray-500"}),y.jsx("span",{className:"text-[8px] uppercase font-bold text-gray-500 mt-0.5",children:"GDH Shield"})]})]})},SH=({isOpen:n,onClose:e,onLoginSuccess:t})=>{const[i,r]=le.useState("LOGIN"),[a,l]=le.useState(""),[c,h]=le.useState(""),[f,_]=le.useState(""),[T,x]=le.useState(!1),[A,V]=le.useState(!1),[k,L]=le.useState(""),[$,z]=le.useState(""),[H,Z]=le.useState(!1),[ie,J]=le.useState(!0);le.useEffect(()=>{n&&(L(""),z(""),V(!1),x(!1),Z(!1))},[n]);const M=(C=>{let F=0;return C.length>7&&(F+=25),/[A-Z]/.test(C)&&(F+=25),/[0-9]/.test(C)&&(F+=25),/[^A-Za-z0-9]/.test(C)&&(F+=25),F})(c),P=C=>{switch(C){case"auth/email-already-in-use":return"Este correo ya est registrado. Ya tienes cuenta?";case"auth/invalid-email":return"El correo no es vlido.";case"auth/weak-password":return"La contrasea es muy dbil (min 6 caracteres).";case"auth/user-not-found":return"Usuario no encontrado. Crea una cuenta.";case"auth/wrong-password":return"Contrasea incorrecta.";case"auth/invalid-credential":return"Correo o contrasea incorrectos. Verifica espacios o maysculas.";case"auth/too-many-requests":return"Demasiados intentos. Espera un momento o restablece contrasea.";case"auth/operation-not-allowed":return'Error de Configuracin! Habilita "Email/Password" en Firebase Console.';case"auth/network-request-failed":return"Error de red. Verifica tu conexin.";default:return"Error de autenticacin: "+C}},O=async C=>{if(C.preventDefault(),L(""),i!=="VERIFY_EMAIL"&&i!=="FORGOT_PASSWORD"&&!T){L("Por favor completa la verificacin de seguridad (Smart Button).");return}V(!0);const F=a.trim(),N=f.trim();try{if(i==="LOGIN"){await vb(zs,ie?Jy:Jv);const G=(await oV(zs,F,c)).user,re=await G.getIdToken();t({username:G.displayName||"Usuario",email:G.email||"",token:re,isVerified:G.emailVerified})}else if(i==="REGISTER"){if(M<50){L("La contrasea es demasiado dbil."),V(!1);return}await vb(zs,Jy);const de=(await sV(zs,F,c)).user;await uV(de,{displayName:N});try{await aV(de)}catch(re){console.warn("Could not send verification email",re)}const G=await de.getIdToken();t({username:N,email:de.email||"",token:G,isVerified:!1})}else i==="FORGOT_PASSWORD"&&(await rV(zs,F),z("Enlace de recuperacin enviado a tu correo."),L(""),setTimeout(()=>r("LOGIN"),3e3))}catch(Ee){const de=Ee.code,G=P(de);L(G),console.error("Auth Error:",Ee)}finally{V(!1)}};return n?y.jsxs("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black/90 backdrop-blur-md",onClick:e}),y.jsxs("div",{className:"relative bg-[#121212] w-full max-w-md rounded-2xl border border-white/10 shadow-2xl overflow-hidden animate-fadeIn",children:[y.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-gradient-to-r from-surface to-black",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[y.jsx(Hf,{className:"text-neonGreen",size:24}),y.jsxs("div",{children:[y.jsx("h2",{className:"font-display font-bold text-xl text-white",children:i==="VERIFY_EMAIL"?"Verificacin Requerida":i==="FORGOT_PASSWORD"?"Recuperar Cuenta":"Acceso Seguro"}),y.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest",children:"Powered by Firebase Auth"})]})]}),y.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:y.jsx(ui,{size:24})})]}),i==="FORGOT_PASSWORD"?y.jsxs("div",{className:"p-6",children:[y.jsx("p",{className:"text-gray-400 text-sm mb-6",children:"Ingresa tu correo electrnico y te enviaremos un enlace para restablecer tu contrasea."}),y.jsxs("form",{onSubmit:O,className:"space-y-4",children:[k&&y.jsx("div",{className:"bg-danger/10 text-danger text-sm p-3 rounded border border-danger/30",children:k}),$&&y.jsx("div",{className:"bg-neonGreen/10 text-neonGreen text-sm p-3 rounded border border-neonGreen/30",children:$}),y.jsxs("div",{className:"relative group",children:[y.jsx(qf,{className:"absolute left-3 top-3.5 text-gray-500 group-focus-within:text-neonGreen transition-colors",size:18}),y.jsx("input",{type:"email",placeholder:"Tu correo registrado",value:a,onChange:C=>l(C.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg py-3 pl-10 pr-4 text-white focus:border-neonGreen outline-none transition-all placeholder:text-gray-600",required:!0})]}),y.jsx("button",{type:"submit",disabled:A,className:"w-full py-3 bg-techPurple text-white font-bold rounded-lg hover:bg-violet-500 transition-all shadow-purple flex items-center justify-center gap-2 mt-4",children:A?y.jsx(hi,{className:"animate-spin",size:18}):"ENVIAR ENLACE"})]}),y.jsx("button",{onClick:()=>r("LOGIN"),className:"mt-6 w-full text-center text-gray-500 text-sm hover:text-white",children:"Cancelar y volver"})]}):y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex border-b border-white/5",children:[y.jsx("button",{onClick:()=>{r("LOGIN"),L("")},className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="LOGIN"?"text-neonGreen border-b-2 border-neonGreen bg-neonGreen/5":"text-gray-500 hover:text-gray-300"}`,children:"INICIAR SESIN"}),y.jsx("button",{onClick:()=>{r("REGISTER"),L("")},className:`flex-1 py-3 text-sm font-bold transition-colors ${i==="REGISTER"?"text-neonGreen border-b-2 border-neonGreen bg-neonGreen/5":"text-gray-500 hover:text-gray-300"}`,children:"CREAR CUENTA"})]}),y.jsxs("form",{onSubmit:O,className:"p-6 space-y-4",children:[k&&y.jsxs("div",{className:"bg-danger/10 border border-danger/30 text-danger text-sm p-3 rounded flex items-center gap-2 animate-pulse",children:[y.jsx(ia,{size:14,className:"shrink-0"}),y.jsx("span",{className:"flex-1",children:k})]}),i==="REGISTER"&&y.jsxs("div",{className:"relative group",children:[y.jsx(QA,{className:"absolute left-3 top-3.5 text-gray-500 group-focus-within:text-neonGreen transition-colors",size:18}),y.jsx("input",{type:"text",placeholder:"Nombre de Usuario (Pblico)",value:f,onChange:C=>_(C.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg py-3 pl-10 pr-4 text-white focus:border-neonGreen outline-none transition-all placeholder:text-gray-600",required:!0})]}),y.jsxs("div",{className:"relative group",children:[y.jsx(qf,{className:"absolute left-3 top-3.5 text-gray-500 group-focus-within:text-neonGreen transition-colors",size:18}),y.jsx("input",{type:"email",placeholder:"Correo Electrnico",value:a,onChange:C=>l(C.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg py-3 pl-10 pr-4 text-white focus:border-neonGreen outline-none transition-all placeholder:text-gray-600",required:!0})]}),y.jsxs("div",{className:"relative group",children:[y.jsx(bM,{className:"absolute left-3 top-3.5 text-gray-500 group-focus-within:text-neonGreen transition-colors",size:18}),y.jsx("input",{type:H?"text":"password",placeholder:"Contrasea",value:c,onChange:C=>h(C.target.value),className:"w-full bg-black/50 border border-white/10 rounded-lg py-3 pl-10 pr-12 text-white focus:border-neonGreen outline-none transition-all placeholder:text-gray-600",required:!0}),y.jsx("button",{type:"button",onClick:()=>Z(!H),className:"absolute right-3 top-3 text-gray-500 hover:text-white transition-colors",children:H?y.jsx(uM,{size:18}):y.jsx(Fy,{size:18})})]}),i==="LOGIN"&&y.jsxs("div",{className:"flex justify-between items-center text-xs",children:[y.jsxs("button",{type:"button",onClick:()=>J(!ie),className:"flex items-center gap-1.5 text-gray-400 hover:text-white transition-colors",children:[ie?y.jsx(sP,{size:14,className:"text-neonGreen"}):y.jsx(lP,{size:14}),"Mantener sesin iniciada"]}),y.jsxs("button",{type:"button",onClick:()=>r("FORGOT_PASSWORD"),className:"text-gray-500 hover:text-neonGreen transition-colors flex items-center gap-1",children:[y.jsx(JD,{size:10})," Olvidaste contrasea?"]})]}),i==="REGISTER"&&c&&y.jsxs("div",{className:"space-y-1",children:[y.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 uppercase",children:[y.jsx("span",{children:"Seguridad:"}),y.jsx("span",{className:M<50?"text-danger":M<100?"text-yellow-500":"text-neonGreen",children:M<50?"Dbil":M<100?"Media":"Fuerte"})]}),y.jsx("div",{className:"h-1 w-full bg-gray-800 rounded-full overflow-hidden",children:y.jsx("div",{className:`h-full transition-all duration-500 ${M<50?"bg-danger":M<100?"bg-yellow-500":"bg-neonGreen"}`,style:{width:`${M}%`}})})]}),y.jsx("div",{className:"pt-2",children:y.jsx(bH,{onValidate:x})}),y.jsx("button",{type:"submit",disabled:A,className:"w-full py-3.5 bg-neonGreen text-black font-bold rounded-lg hover:bg-white transition-all shadow-neon flex items-center justify-center gap-2 mt-4 disabled:opacity-50 disabled:cursor-not-allowed group",children:A?y.jsxs(y.Fragment,{children:[y.jsx(hi,{className:"animate-spin",size:18}),"CONECTANDO..."]}):y.jsxs(y.Fragment,{children:[i==="LOGIN"?"ACCEDER AL HUB":"CREAR CUENTA",y.jsx(Xl,{size:18,className:"group-hover:translate-x-1 transition-transform"})]})})]}),y.jsx("div",{className:"bg-surface/50 p-4 text-center text-xs text-gray-500 border-t border-white/5",children:"Protegido por Google Firebase Identity. SSL Activo."})]})]})]}):null};/*!
 * react-paypal-js v8.1.3 (2023-08-16T17:57:48.377Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Pn;(function(n){n.INITIAL="initial",n.PENDING="pending",n.REJECTED="rejected",n.RESOLVED="resolved"})(Pn||(Pn={}));var Ys;(function(n){n.LOADING_STATUS="setLoadingStatus",n.RESET_OPTIONS="resetOptions",n.SET_BRAINTREE_INSTANCE="braintreeInstance"})(Ys||(Ys={}));var GA;(function(n){n.NUMBER="number",n.CVV="cvv",n.EXPIRATION_DATE="expirationDate",n.EXPIRATION_MONTH="expirationMonth",n.EXPIRATION_YEAR="expirationYear",n.POSTAL_CODE="postalCode"})(GA||(GA={}));var jt=function(){return jt=Object.assign||function(e){for(var t,i=1,r=arguments.length;i<r;i++){t=arguments[i];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},jt.apply(this,arguments)};function DN(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function FA(n,e,t){if(t||arguments.length===2)for(var i=0,r=e.length,a;i<r;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return n.concat(a||Array.prototype.slice.call(e))}var cd="data-react-paypal-script-id",dd={DATA_SDK_INTEGRATION_SOURCE:"dataSdkIntegrationSource",DATA_SDK_INTEGRATION_SOURCE_VALUE:"react-paypal-js",DATA_NAMESPACE:"dataNamespace"},wH="Failed to load the PayPal JS SDK script.",MN="paypal",AH="usePayPalScriptReducer must be used within a PayPalScriptProvider";function IH(n){return n===void 0&&(n=MN),window[n]}function CH(n){for(var e="",t=0;t<n.length;t++){var i=n[t].charCodeAt(0)*t;n[t+1]&&(i+=n[t+1].charCodeAt(0)*(t-1)),e+=String.fromCharCode(97+Math.abs(i)%26)}return e}function RH(n){var e=n.reactComponentName,t=n.sdkComponentKey,i=n.sdkRequestedComponents,r=i===void 0?"":i,a=n.sdkDataNamespace,l=a===void 0?MN:a,c=t.charAt(0).toUpperCase().concat(t.substring(1)),h="Unable to render <".concat(e," /> because window.").concat(l,".").concat(c," is undefined.");if(!r.includes(t)){var f=[r,t].filter(Boolean).join();h+=`
To fix the issue, add '`.concat(t,"' to the list of components passed to the parent PayPalScriptProvider:")+"\n`<PayPalScriptProvider options={{ components: '".concat(f,"'}}>`.")}return h}function PN(n){var e=n,t=cd;e[t];var i=DN(e,[t+""]);return"react-paypal-js-".concat(CH(JSON.stringify(i)))}function NH(n){var e=self.document.querySelector("script[".concat(cd,'="').concat(n,'"]'));e!=null&&e.parentNode&&e.parentNode.removeChild(e)}function DH(n,e){var t,i;switch(e.type){case Ys.LOADING_STATUS:return typeof e.value=="object"?jt(jt({},n),{loadingStatus:e.value.state,loadingStatusErrorMessage:e.value.message}):jt(jt({},n),{loadingStatus:e.value});case Ys.RESET_OPTIONS:return NH(n.options[cd]),jt(jt({},n),{loadingStatus:Pn.PENDING,options:jt(jt((t={},t[dd.DATA_SDK_INTEGRATION_SOURCE]=dd.DATA_SDK_INTEGRATION_SOURCE_VALUE,t),e.value),(i={},i[cd]="".concat(PN(e.value)),i))});case Ys.SET_BRAINTREE_INSTANCE:return jt(jt({},n),{braintreePayPalCheckoutInstance:e.value});default:return n}}var kN=le.createContext(null);function MH(n){if(typeof(n==null?void 0:n.dispatch)=="function"&&n.dispatch.length!==0)return n;throw new Error(AH)}function PH(){var n=MH(le.useContext(kN)),e=jt(jt({},n),{isInitial:n.loadingStatus===Pn.INITIAL,isPending:n.loadingStatus===Pn.PENDING,isResolved:n.loadingStatus===Pn.RESOLVED,isRejected:n.loadingStatus===Pn.REJECTED});return[e,n.dispatch]}le.createContext({});var p_=function(n){var e=n.className,t=e===void 0?"":e,i=n.disabled,r=i===void 0?!1:i,a=n.children,l=n.forceReRender,c=l===void 0?[]:l,h=DN(n,["className","disabled","children","forceReRender"]),f=r?{opacity:.38}:{},_="".concat(t," ").concat(r?"paypal-buttons-disabled":"").trim(),T=le.useRef(null),x=le.useRef(null),A=PH()[0],V=A.isResolved,k=A.options,L=le.useState(null),$=L[0],z=L[1],H=le.useState(!0),Z=H[0],ie=H[1],J=le.useState(null),R=J[1];function M(){x.current!==null&&x.current.close().catch(function(){})}return le.useEffect(function(){if(V===!1)return M;var P=IH(k.dataNamespace);if(P===void 0||P.Buttons===void 0)return R(function(){throw new Error(RH({reactComponentName:p_.displayName,sdkComponentKey:"buttons",sdkRequestedComponents:k.components,sdkDataNamespace:k[dd.DATA_NAMESPACE]}))}),M;var O=function(C,F){z(F),typeof h.onInit=="function"&&h.onInit(C,F)};try{x.current=P.Buttons(jt(jt({},h),{onInit:O}))}catch(C){return R(function(){throw new Error("Failed to render <PayPalButtons /> component. Failed to initialize:  ".concat(C))})}return x.current.isEligible()===!1?(ie(!1),M):(T.current&&x.current.render(T.current).catch(function(C){T.current===null||T.current.children.length===0||R(function(){throw new Error("Failed to render <PayPalButtons /> component. ".concat(C))})}),M)},FA(FA([V],c,!0),[h.fundingSource],!1)),le.useEffect(function(){$!==null&&(r===!0?$.disable().catch(function(){}):$.enable().catch(function(){}))},[r,$]),Vc.createElement(Vc.Fragment,null,Z?Vc.createElement("div",{ref:T,style:f,className:_}):a)};p_.displayName="PayPalButtons";function kH(n,e){var t=document.querySelector('script[src="'.concat(n,'"]'));if(t===null)return null;var i=VN(n,e),r=t.cloneNode();if(delete r.dataset.uidAuto,Object.keys(r.dataset).length!==Object.keys(i.dataset).length)return null;var a=!0;return Object.keys(r.dataset).forEach(function(l){r.dataset[l]!==i.dataset[l]&&(a=!1)}),a?t:null}function VH(n){var e=n.url,t=n.attributes,i=n.onSuccess,r=n.onError,a=VN(e,t);a.onerror=r,a.onload=i,document.head.insertBefore(a,document.head.firstElementChild)}function LH(n){var e="https://www.paypal.com/sdk/js";n.sdkBaseUrl&&(e=n.sdkBaseUrl,delete n.sdkBaseUrl);var t=n,i=Object.keys(t).filter(function(l){return typeof t[l]<"u"&&t[l]!==null&&t[l]!==""}).reduce(function(l,c){var h=t[c].toString();return c=OH(c),c.substring(0,4)==="data"?l.dataAttributes[c]=h:l.queryParams[c]=h,l},{queryParams:{},dataAttributes:{}}),r=i.queryParams,a=i.dataAttributes;return r["merchant-id"]&&r["merchant-id"].indexOf(",")!==-1&&(a["data-merchant-id"]=r["merchant-id"],r["merchant-id"]="*"),{url:"".concat(e,"?").concat(UH(r)),dataAttributes:a}}function OH(n){var e=function(t,i){return(i?"-":"")+t.toLowerCase()};return n.replace(/[A-Z]+(?![a-z])|[A-Z]/g,e)}function UH(n){var e="";return Object.keys(n).forEach(function(t){e.length!==0&&(e+="&"),e+=t+"="+n[t]}),e}function VN(n,e){e===void 0&&(e={});var t=document.createElement("script");return t.src=n,Object.keys(e).forEach(function(i){t.setAttribute(i,e[i]),i==="data-csp-nonce"&&t.setAttribute("nonce",e["data-csp-nonce"])}),t}function GH(n,e){if(e===void 0&&(e=Promise),LN(n,e),typeof document>"u")return e.resolve(null);var t=LH(n),i=t.url,r=t.dataAttributes,a=r["data-namespace"]||"paypal",l=zA(a);return kH(i,r)&&l?e.resolve(l):FH({url:i,attributes:r},e).then(function(){var c=zA(a);if(c)return c;throw new Error("The window.".concat(a," global variable is not available."))})}function FH(n,e){e===void 0&&(e=Promise),LN(n,e);var t=n.url,i=n.attributes;if(typeof t!="string"||t.length===0)throw new Error("Invalid url.");if(typeof i<"u"&&typeof i!="object")throw new Error("Expected attributes to be an object.");return new e(function(r,a){if(typeof document>"u")return r();VH({url:t,attributes:i,onSuccess:function(){return r()},onError:function(){var l=new Error('The script "'.concat(t,'" failed to load. Check the HTTP status code and response body in DevTools to learn more.'));return a(l)}})})}function zA(n){return window[n]}function LN(n,e){if(typeof n!="object"||n===null)throw new Error("Expected an options object.");if(typeof e<"u"&&typeof e!="function")throw new Error("Expected PromisePonyfill to be a function.")}var zH=function(n){var e,t,i=n.options,r=i===void 0?{clientId:"test"}:i,a=n.children,l=n.deferLoading,c=l===void 0?!1:l,h=le.useReducer(DH,{options:jt(jt((e={},e[dd.DATA_SDK_INTEGRATION_SOURCE]=dd.DATA_SDK_INTEGRATION_SOURCE_VALUE,e),r),(t={},t[cd]="".concat(PN(r)),t)),loadingStatus:c?Pn.INITIAL:Pn.PENDING}),f=h[0],_=h[1];return le.useEffect(function(){if(c===!1&&f.loadingStatus===Pn.INITIAL)return _({type:Ys.LOADING_STATUS,value:Pn.PENDING});if(f.loadingStatus===Pn.PENDING){var T=!0;return GH(f.options).then(function(){T&&_({type:Ys.LOADING_STATUS,value:Pn.RESOLVED})}).catch(function(x){console.error("".concat(wH," ").concat(x)),T&&_({type:Ys.LOADING_STATUS,value:{state:Pn.REJECTED,message:String(x)}})}),function(){T=!1}}},[f.options,c,f.loadingStatus]),Vc.createElement(kN.Provider,{value:jt(jt({},f),{dispatch:_})},a)};const qH=({isOpen:n,onClose:e,onUpgrade:t,user:i})=>{const{settings:r}=au(),[a,l]=le.useState(null);return n?y.jsxs("div",{className:"fixed inset-0 z-[70] flex items-center justify-center p-4",children:[y.jsx("div",{className:"absolute inset-0 bg-black/95 backdrop-blur-md",onClick:e}),y.jsxs("div",{className:"relative w-full max-w-4xl bg-[#0a0a0a] rounded-3xl border border-proGold/30 shadow-gold overflow-hidden flex flex-col md:flex-row animate-fadeIn",children:[y.jsxs("div",{className:"md:w-2/5 bg-gradient-to-br from-[#1a1500] to-black p-8 border-r border-white/5 relative overflow-hidden flex flex-col justify-between",children:[y.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')] opacity-10"}),y.jsx("div",{className:"absolute -top-20 -left-20 w-60 h-60 bg-proGold/20 rounded-full blur-[80px]"}),y.jsxs("div",{className:"relative z-10",children:[y.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full bg-proGold/10 border border-proGold/40 text-proGold text-xs font-bold mb-6",children:[y.jsx(na,{size:14})," MIEMBROS PRO"]}),y.jsxs("h2",{className:"text-4xl font-display font-bold text-white mb-2",children:["Accede al ",y.jsx("br",{}),y.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-proGold to-yellow-200",children:"1% Superior"})]}),y.jsxs("p",{className:"text-gray-400 text-sm leading-relaxed",children:["La informacin gratuita est bien para empezar. La informacin de pago es para ",y.jsx("strong",{children:"escalar agresivamente"})," usando ventaja injusta."]})]}),y.jsxs("div",{className:"relative z-10 space-y-6 mt-8",children:[y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-lg bg-white/5 flex items-center justify-center shrink-0 border border-white/10",children:y.jsx(ia,{size:20,className:"text-gray-500"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-gray-300 font-bold text-sm",children:"Mtodos Privados"}),y.jsx("p",{className:"text-gray-500 text-xs",children:'Informacin que los "gurs" no comparten en YouTube.'})]})]}),y.jsxs("div",{className:"flex items-start gap-4",children:[y.jsx("div",{className:"w-10 h-10 rounded-lg bg-proGold/10 flex items-center justify-center shrink-0 border border-proGold/20",children:y.jsx(Ip,{size:20,className:"text-proGold"})}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-white font-bold text-sm",children:"Automatizacin Total"}),y.jsx("p",{className:"text-gray-400 text-xs",children:"Scripts y bots incluidos para maximizar ingresos."})]})]})]}),y.jsx("div",{className:"mt-8 pt-6 border-t border-white/5",children:y.jsx("p",{className:"text-[10px] text-gray-500 uppercase tracking-widest text-center",children:"Garanta de Calidad Auditada"})})]}),y.jsxs("div",{className:"md:w-3/5 p-8 bg-surface relative flex flex-col h-full overflow-y-auto custom-scrollbar",children:[y.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-gray-500 hover:text-white transition-colors z-20",children:y.jsx(ui,{size:24})}),y.jsxs("div",{className:"text-center mb-6",children:[y.jsxs("h3",{className:"text-xl font-bold text-white mb-1",children:["Plan Mensual ",y.jsx("span",{className:"text-proGold",children:"GDH PRO"})]}),y.jsxs("div",{className:"flex justify-center items-end gap-1 mb-2",children:[y.jsx("span",{className:"text-4xl font-display font-bold text-white",children:r.monthlyPrice}),y.jsxs("span",{className:"text-gray-500 text-sm mb-1",children:[r.currencySymbol," / mes"]})]}),y.jsxs("p",{className:"text-xs text-green-400 flex justify-center items-center gap-1",children:[y.jsx(Gv,{size:10})," Precio bloqueado de por vida (subir pronto)"]})]}),y.jsx("div",{className:"space-y-3 mb-8",children:["Acceso a la 'Lista Alpha' (Mtodos High-Ticket)","Scripts de Automatizacin (Airdrops & Tasks)","Base de datos de Proveedores Privados (E-com)","Seales de 'Ballenas' Crypto en tiempo real","Plantillas Legales & Contratos Freelance","Prioridad en soporte 1-a-1"].map((c,h)=>y.jsxs("div",{className:"flex items-center gap-3",children:[y.jsx("div",{className:"w-5 h-5 rounded-full bg-proGold/20 flex items-center justify-center shrink-0",children:y.jsx(Ur,{size:12,className:"text-proGold font-bold"})}),y.jsx("span",{className:"text-gray-300 text-sm",children:c})]},h))}),y.jsxs("div",{className:"mt-auto",children:[y.jsxs("div",{className:"bg-[#0a0a0a] rounded-xl p-4 border border-white/10 mb-4",children:[y.jsxs("div",{className:"flex justify-between items-center mb-4",children:[y.jsx("span",{className:"text-gray-400 text-xs",children:"Total a pagar hoy:"}),y.jsxs("span",{className:"text-white font-bold",children:[r.monthlyPrice," EUR"]})]}),a&&y.jsxs("div",{className:"mb-4 bg-danger/10 border border-danger/30 text-danger text-xs p-3 rounded flex items-start gap-2",children:[y.jsx(YA,{size:14,className:"shrink-0 mt-0.5"}),y.jsx("span",{children:a})]}),y.jsx("div",{className:"w-full relative z-10 min-h-[150px]",children:y.jsx(p_,{style:{layout:"vertical",color:"gold",shape:"rect",label:"paypal",height:48},createOrder:(c,h)=>(l(null),h.order.create({intent:"CAPTURE",purchase_units:[{description:"Suscripcin GDH PRO Mensual",amount:{currency_code:"EUR",value:r.monthlyPrice}}]})),onApprove:async(c,h)=>{try{if(h.order){const f=await h.order.capture();console.log("Pago exitoso:",f),t(),e()}}catch(f){l("Hubo un error procesando el pago. Intenta de nuevo."),console.error(f)}},onCancel:()=>{l("Has cancelado el proceso de pago.")},onError:c=>{l("Error de conexin con PayPal. Intenta desactivar AdBlock."),console.error("PayPal Error:",c)}})})]}),y.jsx("p",{className:"text-[10px] text-center text-gray-500",children:"Suscripcin segura gestionada directamente por PayPal. Puedes cancelar cuando quieras."})]})]})]})]}):null},BH={clientId:"Aca3zbEFsAJEwKl3VTvkSLIe_6F9oq7jV02mcHv5oNmODP29Zhi03NC_NNX9RYpXwGt4nDSVyjwYaDj0",currency:"EUR",intent:"capture",components:"buttons",disableFunding:"paylater",buyerCountry:"FR"},HH=()=>{const[n,e]=le.useState(null),[t,i]=le.useState(!1),[r,a]=le.useState(!1),[l,c]=le.useState(!1);le.useEffect(()=>{const x=hV(zs,A=>{if(A){const V={uid:A.uid,username:A.displayName||"Usuario",email:A.email||"",token:"",isVerified:A.emailVerified,isPremium:!1,role:"user"};A.email==="santiagogordillomartinezdeleon@gmail.com"&&(V.role="admin",V.isPremium=!0),e(V),(async()=>{try{const k=await A.getIdToken(),L=yt(tt,"users",A.uid),$=await Z0(L);let z="user",H=!1;if($.exists()){const Z=$.data();Z.role&&Z.role!=="user"&&(z=Z.role),Z.isPremium&&(H=!0)}A.email==="santiagogordillomartinezdeleon@gmail.com"&&(z="admin",H=!0),e(Z=>Z?Z.role===z&&Z.isPremium===H&&Z.token===k?Z:{...Z,token:k,role:z,isPremium:H}:null),await en(L,{uid:A.uid,email:A.email||"",username:A.displayName||"Usuario",role:z,isPremium:H,lastLogin:new Date().toISOString()},{merge:!0})}catch(k){console.warn("Background profile sync failed (Offline mode active):",k)}})()}else e(null)});return()=>x()},[]);const h=x=>{i(!1)},f=async()=>{try{await fV(zs),e(null)}catch(x){console.error("Error signing out",x)}},_=async()=>{if(n&&n.uid){e({...n,isPremium:!0});try{await en(yt(tt,"users",n.uid,"private_data","subscription"),{status:"active",plan:"monthly_pro",startDate:new Date().toISOString()},{merge:!0}),await en(yt(tt,"users",n.uid),{isPremium:!0},{merge:!0})}catch(x){console.error("Error upgrading premium status",x)}}else i(!0)},T=()=>{n?a(!0):i(!0)};return y.jsxs("div",{className:"font-sans bg-background text-gray-200 min-h-screen selection:bg-neonGreen selection:text-black",children:[y.jsx(U6,{user:n,onLoginClick:()=>i(!0),onLogout:f,onOpenSubscription:T}),y.jsxs("main",{children:[y.jsx(G6,{}),y.jsx(pH,{}),y.jsx(mH,{}),y.jsx(gH,{user:n,onOpenSubscription:T}),y.jsx(_H,{onOpen:()=>c(!0)}),y.jsx(yH,{onOpenSubscription:T}),y.jsx(vH,{user:n,onOpenSubscription:T}),y.jsx(TH,{user:n}),y.jsx(xH,{user:n,onOpenSubscription:T,isOpen:l,onOpen:()=>c(!0),onClose:()=>c(!1)}),y.jsx("a",{href:"https://discord.gg/xrZwFPtN",target:"_blank",rel:"noopener noreferrer",className:"fixed bottom-24 right-6 z-30 bg-[#5865F2] hover:bg-[#4752C4] text-white p-3 rounded-full shadow-purple transition-transform hover:scale-110 flex items-center justify-center opacity-80 hover:opacity-100",children:y.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:y.jsx("path",{d:"M18.942 5.556C17.502 4.887 15.964 4.402 14.364 4.148C14.166 4.512 13.935 5.004 13.774 5.385C12.067 5.127 10.371 5.127 8.687 5.385C8.526 5.004 8.292 4.512 8.094 4.148C6.491 4.402 4.953 4.89 3.513 5.556C0.597 9.864 -0.198 14.067 0.207 18.228C2.169 19.668 4.071 20.544 5.925 20.544C6.402 19.902 6.834 19.221 7.215 18.504C6.537 18.246 5.895 17.934 5.286 17.58C5.454 17.454 5.619 17.319 5.778 17.184C9.288 18.792 13.194 18.792 16.656 17.184C16.818 17.319 16.983 17.454 17.151 17.58C16.542 17.934 15.897 18.246 15.222 18.504C15.603 19.218 16.035 19.902 16.512 20.544C18.369 20.544 20.271 19.668 22.23 18.228C22.716 13.485 21.465 9.297 18.942 5.556ZM8.082 15.213C7.032 15.213 6.171 14.253 6.171 13.074C6.171 11.895 7.014 10.935 8.082 10.935C9.162 10.935 10.023 11.895 10.005 13.074C10.005 14.253 9.162 15.213 8.082 15.213ZM14.382 15.213C13.332 15.213 12.471 14.253 12.471 13.074C12.471 11.895 13.314 10.935 14.382 10.935C15.462 10.935 16.323 11.895 16.305 13.074C16.305 14.253 15.462 15.213 14.382 15.213Z",fill:"currentColor"})})}),y.jsx(SH,{isOpen:t,onClose:()=>i(!1),onLoginSuccess:h}),y.jsx(qH,{isOpen:r,onClose:()=>a(!1),onUpgrade:_,user:n})]}),y.jsx(EH,{})]})},jH=()=>y.jsx(L6,{children:y.jsx(zH,{options:BH,children:y.jsx(HH,{})})});document.addEventListener("DOMContentLoaded",function(){const n=document.getElementById("root");if(!n)throw new Error("Could not find root element to mount to");bD.createRoot(n).render(y.jsx(Vc.StrictMode,{children:y.jsx(jH,{})}))});
